"use strict";(globalThis.webpackChunk_dashlane_extensions=globalThis.webpackChunk_dashlane_extensions||[]).push([[612],{75661:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fetchABTestingVersionDetails=void 0;const o=r(31891),n=r(63111);t.fetchABTestingVersionDetails=(e,t)=>{const r=t.storeService,a={capacity:"",language:r.getPlatform().info.lang,platform:"real_website"};return e.abTestForcedVersion&&(a.forceVersion3=e.abTestForcedVersion),t.wsService.premium.getABTestingVersionDetails(a).then((e=>{r.dispatch((0,n.saveABTestingInfo)(e))})).catch((e=>{o.default.error("Carbon init - Error while calling getABTestingVersionDetails: ",e)}))}},5426:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(61090),n=r(20345),a=r(14384);t.config={commands:{participateToUserABTest:{handler:n.participateToUserABTest}},queries:{getUserABTestVariant:{selector:a.userABTestVariantSelector}},liveQueries:{liveUserABTestVariant:{operator:o.userABTestVariant$}}}},63111:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.saveABTestingInfo=t.SAVE_ABTESTING_INFO=void 0,t.SAVE_ABTESTING_INFO="SAVE_ABTESTING_INFO";t.saveABTestingInfo=e=>({type:t.SAVE_ABTESTING_INFO,data:Object.assign({},e)})},23210:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyABTesting=void 0;const o=r(63111);function n(){return{details:[],version:"control2016_all",success:null}}t.default=(e={details:[],version:"control2016_all",success:null},t)=>t.type===o.SAVE_ABTESTING_INFO?Object.assign({},e,{...t.data}):e,t.getEmptyABTesting=n},34710:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(5426);t.bootstrap=e=>{e.register(o.config)}},76190:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refreshUserABTest=void 0;const o=r(47757),n=r(59125),a=r(15528),i=r(18017),s=r(15876),c=r(54580),d=r(46671),l=r(14384),u=r(72818);t.refreshUserABTest=async function(e,t,r){try{const n=(0,i.abTestsNamesSelector)(e.getState());if(0===n.length)return;const a=await(0,o.getAndEvaluateForUser)(e,r,{abtests:n});if((0,s.isApiError)(a))throw new Error(`Failed to refresh user AB tests: ${a}`);const p=(0,d.mapGetUserABServerResponse)(n,a.abtests,(0,l.userABTestsSelector)(e.getState()).tests);e.dispatch((0,c.refreshedUserABTests)(p)),(0,u.persistUserTests)(t,e)}catch(e){const t=new Error(`[ABTests] - refreshUserABTest: ${e}`);(0,n.sendExceptionLog)({error:t,code:a.ExceptionCriticality.WARNING})}}},72397:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(34710);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},61090:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userABTestVariant$=void 0;const o=r(18948),n=r(3343),a=r(14384);t.userABTestVariant$=e=>(0,o.pipe)((0,n.map)((t=>(0,a.userABTestVariantSelector)(t,e))),(0,n.distinctUntilChanged)())},46671:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapGetUserABServerResponse=t.NOT_PARTICIPATING=void 0,t.NOT_PARTICIPATING="not-participating";const r=(e,t,r)=>!!t[e]&&(t[e].variant===r.variant&&(t[e].version===r.abtestVersion&&t[e].usageLogHasBeenSent));t.mapGetUserABServerResponse=function(e,o,n){return e.reduce(((e,a)=>{const i=o.find((e=>a===e.name));return e[a]=i?{variant:i.variant,version:i.abtestVersion,usageLogHasBeenSent:r(a,n,i)}:{variant:t.NOT_PARTICIPATING,usageLogHasBeenSent:!1},e}),{})}},20345:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.participateToUserABTest=void 0;const o=r(14384),n=r(73442),a=r(46671),i=r(54580),s=r(72818);t.participateToUserABTest=async function(e,t){const r=(0,o.userABTestSelector)(e.storeService.getState(),t);if(!r||a.NOT_PARTICIPATING===r.variant)return;if(r.usageLogHasBeenSent)return;const c={code:132,content:{experiment_id:t,version_id:r.version,variant_id:r.variant}};(0,n.sendUsageLog)(e.storeService,c),e.storeService.dispatch((0,i.sentUsageLog)(t)),(0,s.persistUserTests)(e.localStorageService.getInstance(),e.storeService)}},72818:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.persistUserTests=void 0;const o=r(1064),n=r(14384);t.persistUserTests=async function(e,t){if(t.getAccountInfo().persistData===o.PersistData.PERSIST_DATA_NO)return Promise.resolve();e&&await e.storeUserABTests((0,n.userABTestsSelector)(t.getState()))}},54480:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(66965),n=r(23515),a=r(58487);t.config={commands:{editContactInfo:{handler:o.editContactInfoHandler}},queries:{getContactInfo:{selector:n.contactInfoSelector}},liveQueries:{liveContactInfo:{operator:a.contactInfo$}}}},25229:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(43882),t)},56140:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(54480);t.bootstrap=e=>{e.register(o.config)}},14935:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.editContactInfoHandler=void 0;const o=r(43882),n=r(15876),a=r(99093),i=r(8153),s=r(84146),c={contact_email_required:o.EditContactInfoErrorCode.EMPTY_EMAIL,invalid_contact_email:o.EditContactInfoErrorCode.INVALID_EMAIL,UNKNOWN_ERROR:o.EditContactInfoErrorCode.UNKNOWN_ERROR};t.editContactInfoHandler=async function(e,t){const{storeService:r,wsService:d,sessionService:l}=e,u=r.getState(),p=(0,i.userLoginSelector)(u);if(!r.isAuthenticated())return{success:!1,error:{code:o.EditContactInfoErrorCode.UNKNOWN_ERROR}};try{const e=await(0,n.updateContactInfo)(r,p,t);return(0,n.isApiError)(e)?{success:!1,error:{code:c[e.code]}}:(await(0,s.getAndTriggerRefreshAccountInfo)(r,l,d),{success:!0})}catch(e){return{success:!1,error:{code:c[a.UnknownError]}}}}},66965:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(14935),t)},80286:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0,n(r(25229),t);var a=r(56140);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}})},58487:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contactInfo$=void 0;const o=r(18948),n=r(3343),a=r(23515);t.contactInfo$=()=>(0,o.pipe)((0,n.map)(a.contactInfoSelector),(0,n.distinctUntilChanged)())},23515:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contactInfoSelector=void 0;t.contactInfoSelector=e=>e.userSession.accountContactInfo},43882:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EditContactInfoErrorCode=void 0,function(e){e[e.EMPTY_EMAIL=0]="EMPTY_EMAIL",e[e.INVALID_EMAIL=1]="INVALID_EMAIL",e[e.UNKNOWN_ERROR=2]="UNKNOWN_ERROR"}(t.EditContactInfoErrorCode||(t.EditContactInfoErrorCode={}))},4449:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeAccountCreationController=t.encryptSettings=t.checkLogin=void 0;const o=r(97211),n=r(59125),a=r(43046),i=r(7344),s=r(96045),c=r(64465),d=r(61666),l=r(32234),u=r(84335),p=r(67365),S=r(31891),g=r(53528),m=r(24555),y=r(15876);async function v(e,t){S.default.log("AccountCreationController.checkLogin");const r="SSO_BLOCKED",n=await(0,y.requestAccountCreation)(e,{login:t});if((0,y.isApiError)(n)){if(n.code===r)return o.AccountCreationCode.USER_DOESNT_EXIST_SSO_NON_PROVISIONED;throw new Error(`[AccountCreationController] - checkLogin: ${n.message} (${n.code})`)}if(n.ssoServiceProviderUrl)return e.dispatch((0,u.storeSSOSettings)({serviceProviderUrl:n.ssoServiceProviderUrl})),(0,p.triggerServiceProviderUrlRedirect)(e.getState(),t),o.AccountCreationCode.USER_SSO_PROVISIONED;switch(n.exists){case y.AccountExistsStatus.AccountExists:return o.AccountCreationCode.USER_EXISTS;case y.AccountExistsStatus.AccountDoesntExistInvalid:return o.AccountCreationCode.USER_DOESNT_EXIST_INVALID_MX;case y.AccountExistsStatus.AccountDoesntExistUnlikely:return o.AccountCreationCode.USER_DOESNT_EXIST_UNLIKELY_MX;case y.AccountExistsStatus.AccountDoesntExist:default:return o.AccountCreationCode.USER_DOESNT_EXIST}}function A(e,t,r){return Promise.resolve().then((()=>{const o=e.getStore(),n=a.encryptSettings(e,t,r);o.dispatch((0,c.saveAccountSettings)(n));const i=(0,s.makeCryptoService)(),u={cryptoConfig:(0,g.parsePayload)(n.personalSettings.CryptoUserPayload).cryptoConfig,forceSalt:(0,m.base64ToBuffer)(n.personalSettings.CryptoFixedSalt)},p={promise:(0,d.generateRsaKeys)(t,i,u)};e.dispatch((0,c.saveAccountKeys)(p));const S={encryptSettingsRequest:r,valid:!0};return l.sendEncryptSettingsResult(S),S})).catch((e=>{const t=new Error(`[AccountCreation] - encryptSettings: ${e}`);throw S.default.error(t),(0,n.sendExceptionLog)({error:t}),t}))}t.checkLogin=v,t.encryptSettings=A,t.makeAccountCreationController=function(e){return{checkLogin:t=>v(e.storeService,t),createAccount:t=>(e.storeService.dispatch((0,c.accountCreationStarted)({isSSO:!1})),e.sessionService.close().then((()=>{e.masterPasswordEncryptorService.setInstance({raw:t.password},"");const{storeService:r,masterPasswordEncryptorService:o}=e;return A(r,o,t)}))),confirmAccountCreation:t=>function(e,t){return Promise.resolve().then((()=>{const r=e.storeService.getStore().getState().userSession.accountCreation.settings.personalSettings,o=e.storeService.getAccountCreation(),n=o.settings.promise;if(null===n)throw new Error("createAccount should be call before confirmAccountCreation");const a=o.accountKey.promise;if(null===a)throw new Error("createAccount should be call before confirmAccountCreation");return i.createAccount(e,t,n,r,a).then((e=>(l.sendConfirmCreateAccountResult(e),e)))})).catch((e=>{const t=new Error(`[AccountCreation] - confirmAccountCreation: ${e}`);throw S.default.error(t),(0,n.sendExceptionLog)({error:t}),t}))}(e,t)}}},94133:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(28218);t.config={commands:{},queries:{},liveQueries:{liveAccountCreated:{subject:o.getAccountCreated$}}}},79994:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(94133);t.bootstrap=e=>{e.register(o.config)}},11744:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(79994);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},28218:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.emitAccountCreated=t.getAccountCreated$=void 0;const o=new(r(18948).Subject);t.getAccountCreated$=()=>o;t.emitAccountCreated=()=>o.next()},43046:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encryptSettings=void 0;const o=r(31354),n=r(35488),a=r(53494),i=r(10423),s=r(24555),c=r(77176),d=r(99819),l=r(16075),u=r(57254),p=r(36109);t.encryptSettings=function(e,t,r){const S=(0,u.generateItemUuid)(),g=(0,p.getUnixTimestamp)(),m=(0,c.getRandomValues)(16),y=e.getState(),v=(0,d.isSSOAccountCreationSelector)(y)?i.CRYPTO_NODERIVATION_HMAC64:a.ARGON2_DEFAULT_PAYLOAD,A={...(0,l.makeBasePersonalSettings)(),AnonymousUserId:r.anonymousUserId,UsagelogToken:S,Format:r.format,Language:r.language,SecurityEmail:r.login,RealLogin:r.login,accountCreationDatetime:g,SyncBackup:!0,CryptoFixedSalt:(0,s.bufferToBase64)(m),CryptoUserPayload:v},E=(0,n.getTransactionXml)(A),f={time:(0,p.getUnixTimestamp)(),backupDate:0,type:"SETTINGS",action:"BACKUP_EDIT",identifier:"SETTINGS_userId",content:E},h={forceSalt:m};return{personalSettings:A,promise:o.encryptSingleTransaction(t,f,h)}}},40837:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSSOAccount=t.prepareRemoteDataEncryptionServices=void 0;const o=r(28354),n=r(4449),a=r(7344),i=r(88478),s=r(53494),c=r(24555),d=r(33792),l=r(76409),u=r(41751),p=r(15876),S=r(59125),g=r(67365),m=r(53092),y=r(75897),v=r(64465);t.prepareRemoteDataEncryptionServices=async(e,t)=>{const r=(0,o.v4)(),{remoteDataEncryptorService:n,masterPasswordEncryptorService:a}=e,i=await(0,u.generate64BytesKey)(),p=(0,c.base64BufferToRaw)(i),S=await(0,u.generate64BytesKey)(),g=(0,c.bufferToBase64)(S),m=(0,c.base64ToBuffer)(t),y=(0,l.getEncryptionKeyBuffer)(m,S,{skipDerivation:!0}),v=(0,c.arrayBufferToText)(y),A=(0,d.getNoDerivationCryptoConfig)();a.setInstance({raw:v},"",A);const E=(0,s.utf16ToDeflatedUtf8)(p,{skipUtf8Encoding:!0,skipDeflate:!0}),f=await a.getInstance().encrypt(E);return n.setInstance({raw:p},"",A),{remoteKey:{uuid:r,key:f,type:"sso"},serverKeyBase64:g}},t.createSSOAccount=async function(e,r){const{sessionService:o,storeService:s,remoteDataEncryptorService:c}=e,{consents:d,deviceName:l,login:u,ssoServiceProviderKey:S,ssoToken:g,anonymousUserId:E}=r,{appVersion:f,country:h,lang:_,platformName:T}=(0,i.platformInfoSelector)(s.getState());await o.close(),s.dispatch((0,v.accountCreationStarted)({isSSO:!0}));const{remoteKey:I,serverKeyBase64:C}=await(0,t.prepareRemoteDataEncryptionServices)(e,S);s.dispatch((0,y.updateIsRemoteKeyActivated)(!0));const P={anonymousUserId:E,deviceName:l,format:h,language:_,login:u,password:S,subscribe:d.find((({consentType:e})=>"emailsOffersAndTips"===e)).status||!1};await(0,n.encryptSettings)(s,c,P);const D=s.getAccountCreation(),{content:O,time:b}=await D.settings.promise,w=await D.accountKey.promise,N=(0,p.makeSafeCountry)(s.getLocation().country||h),R={login:u,contactEmail:u,appVersion:f,sdkVersion:"1.0.0.0",platform:T,settings:{content:O,time:b},consents:d,deviceName:l,country:N,osCountry:N,language:(0,p.makeSafeLanguage)(_),osLanguage:(0,p.makeSafeLanguage)(_),remoteKeys:[I],ssoServerKey:C,ssoToken:g,sharingKeys:{publicKey:w.keys.public,privateKey:w.encryptedPrivateKey},temporaryDevice:!0},L=await(0,p.createUserWithSSO)(s,R);if((0,p.isApiError)(L))return A(L);const U={createAccountResult:{encryptSettingsRequest:P,valid:!0},options:{flowIndicator:"memberAccount"},isStandAlone:!1,consents:d};return await(0,a.firstSync)(e,U,L,{useRemoteKey:!0}),e.storeService.dispatch((0,y.updateAnalyticsIds)(L.userAnalyticsId,L.deviceAnalyticsId)),{success:!0,code:m.LoginViaSsoCode.SUCCESS}};const A=e=>{const{code:t,message:r}=e;switch(E(t),t){case p.DomainNotValidForTeam:case p.InvalidUser:case p.InvalidSsoToken:case p.NotProposedNeitherAccepted:case p.NoFreeSlot:return(0,g.makeReturnErrorObject)(m.LoginViaSsoCode.SSO_VERIFICATION_FAILED,r);default:return(0,g.makeReturnErrorObject)(m.LoginViaSsoCode.UNKNOWN_ERROR,r)}},E=e=>{const t=new Error(`[createSSOAccount] - createUserWithSSO: ${e}`);(0,S.sendExceptionLog)({error:t})}},7344:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.firstSync=t.createAccount=void 0;const o=r(11814),n=r(97211),a=r(19935),i=r(60087),s=r(74078),c=r(1064),d=r(33441),l=r(75897),u=r(57254),p=r(42692),S=r(77333),g=r(38580),m=r(73442),y=r(48157),v=r(56431),A=r(56758),E=r(61630),f=r(28080),h=r(18233),_=r(79747),T=r(73418),I=r(54516),C=r(15876),P=r(24387),D=r(28218),O=r(7119);async function b(e,t,r,l={useRemoteKey:!1}){const S=t.createAccountResult,{login:C}=S.encryptSettingsRequest,D=e.storeService.getPlatform().info,b=(0,u.generateItemUuid)(),w=(0,p.getEmptyPersonalDataState)();w.emails.push({AnonId:(0,u.generateItemUuid)(),Email:C,EmailName:"Email 1",Id:b,kwType:"KWEmail",LastBackupTime:0,LocaleFormat:n.Country.UNIVERSAL,SpaceId:"",Type:"PERSO"}),w.changesToUpload.push((0,O.createUploadChange)({action:"EDIT",itemId:b,kwType:"KWEmail"}));const{monitor:N,getUsageLog134:R,getSyncEvent:L}=(0,f.makeEventLoggerSyncMonitor)(e.eventLoggerService,e.storeService,{sendLogOnSyncComplete:!1}),U=(0,E.setupProbe)(N,(0,h.makeUsageLog135Monitor)(e.storeService),(0,_.makeDiagnosticReportMonitor)(),(0,T.makeSyncLoggerMonitor)()),M={accessKey:r.deviceAccessKey,secretKey:r.deviceSecretKey},k=(0,P.convertDeviceKeysToUki)(M),F=l.useRemoteKey?e.remoteDataEncryptorService:e.masterPasswordEncryptorService,B=Date.now(),G=s.SyncType.FULL_SYNC,K={storeService:e.storeService,dataEncryptorService:F,login:C,uki:k,lastSyncTimestamp:B,personalData:w,syncType:G,needsKeys:!1,ws:e.wsService,announce:U};let j=null;try{U(A.announcements.syncStarted(a.Trigger.AccountCreation,G),A.announcements.chronologicalSyncStarted(w)),j=await(0,i.sync)(K),U(A.announcements.chronologicalSyncFinished(j.summary),A.announcements.syncFinished())}catch(e){throw U(A.announcements.chronologicalSyncFailed(e),A.announcements.syncFailed(e)),e}if(t.isStandAlone){const t=(0,d.makeLoginController)(e);await t.loadAccountCreationInfos(C,S.encryptSettingsRequest.password,(0,v.secureDeviceName)(S.encryptSettingsRequest.deviceName),M,j.lastSyncTimestamp,c.PersistData.PERSIST_DATA_YES),await t.openSession(C,{password:S.encryptSettingsRequest.password})}const V=(0,y.isInternalTestUser)(C),H=(0,g.sendAccountCreationLog)(e.storeService,{origin:r.origin,kw_test_login:V?C:"",kw_test_:V}),W=function(e,t,r,a,i){const s={code:n.UsageLogCode.USAGE_ACCOUNT_CREATION,content:{lang:e.lang,origin:r.origin,oslang:e.lang,subscribe:t.subscribe,type:r.abTestingVersion,websiteTrackingId:o.cookie.websiteTrackingId()}},c=(0,I.getCommonAppSetting)("anonymousComputerId"),d=a?{permanent_add:!0}:{},l={code:n.UsageLogCode.USAGE_NEW_DEVICE,content:{creation:"1",websiteTrackingId:o.cookie.websiteTrackingId(),anonymouscomputerid:c,otpstyle:0,...d}},u={code:n.UsageLogCode.USAGE_DATA_SYNC,content:i()};return[s,l,u]}(D,S.encryptSettingsRequest,r,t.isStandAlone,R),x=V?{kw_test_:!0,kw_test_login:C}:{},z=(0,m.sendUsageLog)(e.storeService,W,x),Y=async function(e,t){return await e.logSync(new a.UserSyncEvent({duration:t.duration,error:t.error,extent:t.extent,fullBackupSize:t.fullBackupSize,incomingDeleteCount:t.incomingDeleteCount,incomingUpdateCount:t.incomingUpdateCount,outgoingDeleteCount:t.outgoingDeleteCount,outgoingUpdateCount:t.outgoingUpdateCount,timestamp:t.timestamp,trigger:t.trigger,treatProblem:t.treatProblem})),e.flushEventQueue()}(e.eventLoggerService,L());t.isStandAlone||await Promise.all([H,z,Y])}t.createAccount=async function(e,t,r,o,n){const a=e.storeService.getPlatform().info;if(!t.createAccountResult.valid)throw new Error("Account creation: Will not perform API request for invalidated settings promise");const[i,s]=await Promise.all([r,n]),c=await async function(e,t,r,o,n,a){const{storeService:i}=e,{createAccountResult:s}=r,c=e.storeService.getABTesting().version;let d=r.consents;Array.isArray(d)||(d=[{consentType:"emailsOffersAndTips",status:s.encryptSettingsRequest.subscribe}]);const u=s.encryptSettingsRequest.login,p={abTestingVersion:c,askM2dToken:!0,country:(0,C.makeSafeCountry)(e.storeService.getLocation().country||t.country),deviceName:(0,C.makeSafeDeviceName)((0,v.secureDeviceName)(s.encryptSettingsRequest.deviceName)),language:(0,C.makeSafeLanguage)(t.lang),login:u,osCountry:(0,C.makeSafeCountry)(t.country),osLanguage:(0,C.makeSafeLanguage)(t.lang),platform:t.platformName,settings:{content:n.content,time:n.time},appVersion:t.appVersion,contactEmail:u,consents:d,sharingKeys:{publicKey:a.keys.public,privateKey:a.encryptedPrivateKey},temporaryDevice:!r.isStandAlone},g=await(0,C.createUser)(i,p);if((0,C.isApiError)(g))throw new Error(`[AccountCreation] - createAccountOnServer : ${g.message} (${g.code})`);return e.storeService.dispatch((0,l.updateKeyPair)({publicKey:a.keys.public,privateKey:a.keys.private})),e.storeService.dispatch((0,S.loadStoredPersonalSettings)(o)),e.storeService.dispatch((0,l.updateAnalyticsIds)(g.userAnalyticsId,g.deviceAnalyticsId)),g}(e,a,t,o,i,s);await b(e,t,c);const d=(0,P.convertDeviceKeysToUki)({accessKey:c.deviceAccessKey,secretKey:c.deviceSecretKey});return t.isStandAlone&&t.createAccountResult.valid&&(0,D.emitAccountCreated)(),{m2dToken:c.token,abtestingversion:c.abTestingVersion,uki:d,origin:c.origin,openSession:t.isStandAlone}},t.firstSync=b},42495:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(65370),n=r(31520);t.config={commands:{},queries:{getSubscriptionCode:{selector:o.subscriptionCodeSelector}},liveQueries:{liveSubscriptionCode:{operator:n.subscriptionCode$}}}},71806:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(42495);t.bootstrap=e=>{e.register(o.config)}},66016:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(71806);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},31520:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptionCode$=void 0;const o=r(18948),n=r(3343),a=r(65370);t.subscriptionCode$=()=>(0,o.pipe)((0,n.map)(a.subscriptionCodeSelector),(0,n.distinctUntilChanged)())},65370:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptionCodeSelector=void 0;t.subscriptionCodeSelector=e=>e.userSession.account.subscriptionCode},89656:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.connectLazySlot=void 0;const o=r(85795),n=["API","Live"];t.connectLazySlot=(e,t,r=!1)=>{const a=new Map;return e.lazy((i=>{r&&(0,o.logInfo)({message:`${e.slotName} subscribed on param ${i}`,tag:n});const s=t(i),c=((e,t,r,a)=>e?e=>((0,o.logInfo)({message:`Emitting on ${t.slotName} with param ${r}`,tag:n,details:{event:e}}),a(e)):a)(r,e,i,(t=>e(i,t).catch((()=>{})))),d=s.subscribe(c);a.set(i,d)}),(t=>{const i=a.get(t);i?(r&&(0,o.logInfo)({message:`${e.slotName} unsubscribed on param ${t}`,tag:n}),i.unsubscribe(),a.delete(t)):r&&(0,o.logWarn)({message:`Cannot unsubscribe from ${e.slotName} on param ${t}: subscription not found.`,tag:n})}))}},59635:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(24056),t)},45068:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.apiEvents=void 0;var o=r(59635);Object.defineProperty(t,"apiEvents",{enumerable:!0,get:function(){return o.apiEvents}})},45082:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(257),t),n(r(60737),t),n(r(13943),t),n(r(73737),t),n(r(26883),t),n(r(88792),t),n(r(25229),t),n(r(76631),t),n(r(37730),t),n(r(22736),t),n(r(457),t),n(r(14573),t),n(r(29059),t),n(r(74263),t),n(r(16381),t),n(r(26601),t),n(r(41525),t),n(r(44116),t),n(r(30357),t),n(r(89941),t),n(r(48152),t),n(r(70588),t),n(r(55239),t),n(r(17698),t),n(r(79904),t),n(r(58780),t),n(r(59975),t),n(r(96254),t),n(r(77641),t),n(r(54836),t),n(r(10942),t),n(r(99857),t),n(r(51313),t),n(r(34657),t),n(r(13005),t)},54516:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSyncAppSetting=t.setDataDEBUGONLY=t.decipherApplicationSettings=t.loadAppSettings=t.getCommonAppSettings=t.getCommonAppSetting=t.storeCommonAppSetting=t.getUsersWithPublicSettings=t.deleteUsersPublicSettings=t.getUserPublicSetting=t.storeUserPublicSetting=t.initApplicationSettings=void 0;const o=r(31891),n=r(34929),a=r(53494),i=r(65866),s=r(47193),c=r(84560);let d=null,l=null,u=null,p=null;function S(e,t={createIfNull:!1}){d.publicUsersSettings||(d.publicUsersSettings={});let r=d.publicUsersSettings[e];return t.createIfNull&&!r&&(r=d.publicUsersSettings[e]={}),r}function g(){return d?(d.commonApplicationSettings||(d.commonApplicationSettings={}),d.commonApplicationSettings):null}t.initApplicationSettings=function(e,t,r){return d=null,l=e,u=r&&r.dataEncryptorService||(0,i.makeKeyDataEncryptorService)(),p=t,r&&r.settings&&t.dispatch((0,c.storeApplicationSettings)(r.settings)),(0,n.setObfuscatingKey)(u),v()},t.storeUserPublicSetting=function(e,t,r){return o.default.log(`storing public setting ${t} for user ${e}`),S(e,{createIfNull:!0})[t]=r,y()},t.getUserPublicSetting=function(e,t){const r=S(e);return r&&r.hasOwnProperty(t)?r[t]:null},t.deleteUsersPublicSettings=async function(e){const t=e.filter((e=>e.trim()in d.publicUsersSettings));if(0!==t.length)return t.forEach((e=>{const t=e.trim();delete d.publicUsersSettings[t]})),y()},t.getUsersWithPublicSettings=function(){return Object.keys(d.publicUsersSettings||{})},t.storeCommonAppSetting=function(e,t){return g()[e]=t,y()},t.getCommonAppSetting=function(e){const t=g();return t&&t.hasOwnProperty(e)?(t[e],t[e]):null},t.getCommonAppSettings=g;const m="ApplicationSettings.cdata";function y(){const e=JSON.stringify(d),t=(0,a.utf16ToDeflatedUtf8)(e);return u.getInstance().encrypt(t).then((e=>l.writeItem(m,e))).then((()=>{}))}function v(){return o.default.log("loadApplicationSettings"),l.itemExists(m).then((e=>(o.default.log("loadApplicationSettings "+e),e?l.readItem(m).then((e=>{if(o.default.log("appSettings read"),o.default.log(e),null==e)throw new Error("storing empty or null value is not authorized");if("string"!=typeof e)throw new Error("value of ApplicationSettings.cdata is expected to be a string");return A(u,e).then((e=>JSON.parse(e))).then((e=>{E(e)}))})):E({publicUsersSettings:{},commonApplicationSettings:{}})))).catch((e=>{o.default.error(e,"loadAppSettings"),E({publicUsersSettings:{},commonApplicationSettings:{}})}))}function A(e,t){return e.getInstance().decrypt(t).then((e=>(0,a.deflatedUtf8ToUtf16)(e))).catch((()=>{const e=(0,n.makeDataEncryptorService)((0,s.makeStoreService)());return(0,n.setObfuscatingKey)(e),e.getInstance().decrypt(t).then((e=>(0,a.deflatedUtf8ToUtf16)(e)))}))}function E(e){o.default.log(`ApplicationSettings loaded for deviceId: ${e.commonApplicationSettings.deviceId}`),d=e}t.loadAppSettings=v,t.decipherApplicationSettings=A,t.setDataDEBUGONLY=function(e){d=e},t.getSyncAppSetting=function(e){const t=p.getState().device.application.settings.sync;return t.hasOwnProperty(e)?t[e]:null}},65805:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applicationReducer=void 0;const o=r(89531),n=r(14247);t.applicationReducer=(0,o.combineReducers)({settings:n.default})},84560:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.storeApplicationSettings=t.STORE_APPLICATION_SETTINGS=void 0,t.STORE_APPLICATION_SETTINGS="STORE_APPLICATION_SETTINGS";t.storeApplicationSettings=e=>({type:t.STORE_APPLICATION_SETTINGS,settings:e})},14247:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyApplicationSettings=t.ApplicationBuildType=void 0;const o=r(84560);!function(e){e.DEV="DEV",e.QA="QA",e.NIGHTLY="NIGHTLY",e.PRODUCTION="PRODUCTION"}(t.ApplicationBuildType||(t.ApplicationBuildType={}));t.getEmptyApplicationSettings=()=>({sync:{syncWithLocalClients:!1},userABTestNames:[],migratedToSAEX:void 0,desktopLogin:void 0,buildType:void 0}),t.default=(e=(0,t.getEmptyApplicationSettings)(),r)=>r.type===o.STORE_APPLICATION_SETTINGS?{...e,...r.settings||{}}:e},18017:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applicationBuildTypeSelector=t.migratedToSAEXSelector=t.abTestsNamesSelector=void 0;t.abTestsNamesSelector=e=>e.device.application.settings.userABTestNames;t.migratedToSAEXSelector=e=>e.device.application.settings.migratedToSAEX;t.applicationBuildTypeSelector=e=>e.device.application.settings.buildType},47599:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ensureDeviceId=t.initAuthenticatedCarbonApplication=void 0;const o=r(28354),n=r(54516),a=r(31891),i=r(64803),s=r(27339),c=r(59125),d=r(83461),l=r(38215),u=r(27023),p=r(41751),S=r(24555),g=r(67830),m=r(56098);async function y(e,{platformInfo:t,settings:r,storageLayer:i}){a.default.log("initCarbonApplication"),(0,u.initializeAppSessionId)(),(0,l.setPlatformInfo)(t),await(0,n.initApplicationSettings)(i,e,{settings:r}),await function(){if(!(0,n.getCommonAppSetting)("anonymousComputerId"))return(0,n.storeCommonAppSetting)("anonymousComputerId",(0,o.v4)())}(),await function(){if(!(0,n.getCommonAppSetting)("installationId"))return(0,n.storeCommonAppSetting)("installationId",(0,o.v4)());return Promise.resolve()}(),await async function(){if(!(0,n.getCommonAppSetting)("eventLoggerQueueKey")){const e=await(0,p.generate64BytesKey)(),t=(0,S.base64BufferToRaw)(e);return(0,n.storeCommonAppSetting)("eventLoggerQueueKey",t)}}()}t.default=y;t.initAuthenticatedCarbonApplication=async(e,t)=>{await v(e,t);const{storeService:r,storageService:o}=(0,i.getCoreServices)(t);return await y(r,e),await A(r,o),t},t.ensureDeviceId=async function(){let e=(0,n.getCommonAppSetting)("deviceId");return e||(await(0,n.storeCommonAppSetting)("deviceId",(0,o.v4)().replace(/-/g,"")),e=(0,n.getCommonAppSetting)("deviceId")),e};const v=async(e,t)=>{try{const r=(0,i.getCoreServices)(t),{storeService:o}=r;e.anonymousPartnerId&&o.dispatch((0,s.loadAnonymousPartnerId)(e.anonymousPartnerId)),await(0,d.initAuthentication)(r,e.keys)}catch(e){const t=new Error(`[Application] - setSdkAuthentication: ${e}`);(0,c.sendExceptionLog)({error:t})}},A=async(e,t)=>{const r=await(0,g.getGlobalExtensionSettings)({storeService:e,storageService:t});e.dispatch((0,m.setGlobalExtensionSettingsState)(r))}},38215:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setPlatformInfo=t.getPlatformInfo=void 0;const o=r(28616);let n=Object.assign({},o.defaultPlatformInfo);t.getPlatformInfo=function(){return n},t.setPlatformInfo=function(e){n=Object.assign({},o.defaultPlatformInfo,e)}},27023:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setApplicationSessionId=t.getApplicationSessionId=t.initializeAppSessionId=void 0;const o=r(1997);let n;function a(e){n=e}t.initializeAppSessionId=function(){a((0,o.default)())},t.getApplicationSessionId=function(){return n},t.setApplicationSessionId=a},66378:(e,t)=>{let r;Object.defineProperty(t,"__esModule",{value:!0}),t.getPublicPath=t.setPublicPath=void 0;t.setPublicPath=e=>{if("string"!=typeof e)throw new Error("[Assets] - setPublicPath: provided public path is not a string.");r=e};t.getPublicPath=()=>{if(!r)throw new Error("[Assets] - getPublicPath: trying to access public path before it was set.");return r}},96968:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(87789),n=r(6288),a=r(10759),i=r(98534),s=r(65021),c=r(43381),d=r(88478),l=r(21218);t.config={commands:{requestExtraDeviceToken:{handler:c.requestExtraDeviceToken},requestEmailToken:{handler:c.requestEmailToken},setReactivationStatus:{handler:l.setReactivationStatusHandler},...o.config.commands,...n.config.commands,...a.config.commands,...i.config.commands},queries:{getHasOtpType:{selector:d.hasOtpTypeSelector},getUserOtpType:{selector:d.otpTypeSelector},getLocalAccounts:{selector:d.localAccountsListSelector},getReactivationStatus:{selector:d.reactivationStatusSelector},...o.config.queries,...n.config.queries,...a.config.queries,...i.config.queries},liveQueries:{liveReactivationStatus:{operator:s.reactivationStatus$},...o.config.liveQueries,...n.config.liveQueries,...a.config.liveQueries,...i.config.liveQueries}}},88792:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactivationStatus=void 0;var a=r(1269);Object.defineProperty(t,"ReactivationStatus",{enumerable:!0,get:function(){return a.ReactivationStatus}}),n(r(13645),t),n(r(99429),t),n(r(63197),t),n(r(12888),t),n(r(5857),t)},48917:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isExtraDeviceToken=t.requestExtraDeviceToken=void 0;const o=r(15876);t.requestExtraDeviceToken=async(e,t)=>{if(!e())return{type:"userNotAuthenticated",message:"No authenticated user"};const r=await t();if((0,o.isApiError)(r))return r;const a=r.token;return n(a)};const n=e=>"string"!=typeof e||0===e.length?{type:"invalidExtraDeviceTokenSentByServer",message:"Invalid extra device token sent by server"}:{type:"extraDeviceToken",extraDeviceToken:e};t.isExtraDeviceToken=e=>"extraDeviceToken"===e.type},33722:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalAccounts=void 0;const o=r(54516),n=r(88478),a=r(56816),i=r(72879);t.getLocalAccounts=async function(e,t){const r=(0,o.getUsersWithPublicSettings)(),s={},c=["localSettings","personalData","personalSettings"];return Promise.all(r.map((async r=>{const o=(0,n.getUserDeviceWasRegisteredWithDeviceKeysSelector)(e.getState(),r),i=[...c,...o?["authentication"]:[]],d=(await Promise.all(i.map((e=>(0,a.isDataStored)(t,r,e))))).every((e=>e));s[r]=d}))).then((()=>r.filter((e=>s[e])))).then((e=>{const t=e.map((e=>({login:e,lastLoginTime:(0,o.getUserPublicSetting)(e,"lastSuccessfulLoginTime")||0}))).sort(((e,t)=>{const r=e.lastLoginTime,o=t.lastLoginTime;return r>o?-1:r<o?1:0}))[0];return e.map((e=>{var r;return{login:e,hasLoginOtp:(0,o.getUserPublicSetting)(e,"otp2")||!1,isLastSuccessfulLogin:t&&t.login===e,rememberMeType:null!==(r=(0,i.getLocalAccountRememberMeType)(e))&&void 0!==r?r:void 0,shouldAskMasterPassword:(0,i.shouldAskMasterPassword)(e)}})).sort(((e,t)=>{const r=e.login.toLowerCase(),o=t.login.toLowerCase();return r.localeCompare(o)}))}))}},26148:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTokenForKwUser=void 0;const o=r(15876);t.getTokenForKwUser=async(e,t)=>{const{storeService:r}=e,n=await(0,o.getTokens)(r);if((0,o.isApiError)(n))throw new Error(`Error: ${n.code}`);const{tokens:a}=n,i=a.find((e=>e.login===t));if(!i)throw new Error("Email token not found for "+t);return i.token}},43381:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestEmailToken=t.requestExtraDeviceToken=void 0;var o=r(99821);Object.defineProperty(t,"requestExtraDeviceToken",{enumerable:!0,get:function(){return o.requestExtraDeviceToken}});var n=r(14857);Object.defineProperty(t,"requestEmailToken",{enumerable:!0,get:function(){return n.requestEmailToken}})},83461:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initAuthentication=void 0;const o=r(31891),n=r(27339),a=r(38568),i=r(15876),s=r(88478),c=r(43728);t.initAuthentication=async(e,t)=>{d(e,t),l(e,t),await(0,a.loadLocalUsersAuthenticationDataFromStorage)(e),await u(e,(0,c.checkOrigin)(self))};const d=(e,t)=>{const{storeService:r}=e;r.dispatch((0,n.saveAppKeys)({accessKey:t.appAccess,secretKey:t.appSecret}))},l=(e,t)=>{const{storeService:r}=e;r.dispatch((0,n.saveStyxKeys)({accessKey:t.styxAccess,secretKey:t.styxSecret}))},u=async(e,t)=>{const{storeService:r}=e;try{const e=(0,s.platformInfoSelector)(r.getState()),o=await(0,i.getRemoteTime)(r,"server_tac"!==e.platformName&&"server_leeloo"!==e.platformName||!t?void 0:{tz:(new Date).getTimezoneOffset().toString()});if((0,i.isApiError)(o))throw o;r.dispatch((0,n.saveDashlaneServerDeltaTimestamp)(o.timestamp))}catch(e){(0,o.logDebug)({tag:["Auth"],message:"Error while calling getRemoteTime",details:{error:e}})}}},7585:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadRememberMeTypeToStore=void 0;const o=r(40199),n=r(72879),a=r(8153);t.loadRememberMeTypeToStore=function(e){const{storeService:t}=e,r=(0,a.userLoginSelector)(t.getState()),i=(0,n.getLocalAccountRememberMeType)(r);i&&t.dispatch((0,o.setRememberMeTypeAction)(i))}},99821:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestExtraDeviceToken=void 0;const o=r(15876),n=r(48917),a=r(8153);t.requestExtraDeviceToken=async e=>{const{storeService:t}=e,r=t.isAuthenticated,i=(0,a.userLoginSelector)(t.getState());if(!i||!r)throw new Error("[Authentication] - requestExtraDeviceToken: User is not authenticated");const s=await(0,n.requestExtraDeviceToken)(r,(()=>(0,o.requestExtraDeviceRegistration)(t,i)));if((0,n.isExtraDeviceToken)(s))return s.extraDeviceToken;throw new Error(s.message)}},14857:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestEmailToken=void 0;const o=r(22309),n=r(8153);t.requestEmailToken=async function(e){try{const{storeService:t,wsService:r}=e,o=t.getState(),a=(0,n.userLoginSelector)(o);if(!a)throw new Error("[emailToken] - askServerToSendToken: no current authenticated user");await r.authentication.askServerToSendToken({login:a})}catch(e){return{success:!1,error:{code:o.EmailTokenApiError,message:e.message}}}return{success:!0}}},21218:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setReactivationStatusHandler=void 0;const o=r(73420);t.setReactivationStatusHandler=function({storeService:e},{reactivationStatus:t}){return e.dispatch((0,o.reactivationStatusUpdated)(t)),Promise.resolve()}},22309:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EmailTokenApiError=void 0,t.EmailTokenApiError="SEND_TOKEN_FAILED"},13031:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.persistUserAuthenticationData=t.loadUserAuthenticationData=void 0;const o=r(88478),n=r(40199),a=r(44904);t.loadUserAuthenticationData=async(e,t)=>{let r;try{const t=e.getInstance();if(!await t.hasAuthenticationData())return Promise.resolve({type:"success"});r=await t.getAuthenticationData()}catch(e){return Promise.resolve({type:"failed",message:a.FailedToReadParseOrValidateAuthenticationData,error:e})}try{t.dispatch((0,n.rehydrateUserAuthenticationData)(r))}catch(e){return Promise.resolve({type:"failed",message:a.FailedToRehydrateAuthenticationData,error:e})}return Promise.resolve({type:"success"})};t.persistUserAuthenticationData=async(e,t)=>{const r=(0,o.userAuthenticationDataSelector)(t.getState()),n=e.getInstance();await n.storeAuthenticationData(r)}},38568:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadLocalUsersAuthenticationDataFromStorage=t.persistLocalUsersAuthenticationData=void 0;const o=r(34929),n=r(50542),a=r(59125),i=r(31891),s=r(73144),c=r(88478),d=r(24555),l=r(65866),u=r(53494),p=r(93513),S="authentication.localusers";t.persistLocalUsersAuthenticationData=async(e,t)=>{try{const r=e.getLocalStorage(),n=(0,l.makeKeyDataEncryptorService)();(0,o.setObfuscatingKey)(n);const a=(0,c.localUsersAuthenticationDataSelector)(t.getState()),i=JSON.stringify(a),s=(0,d.utf8ChunkEncode)(i),g=p.encode(s),m=(0,u.utf16ToDeflatedUtf8)(g,{skipUtf8Encoding:!0}),y=await n.getInstance().encrypt(m);await r.writeItem(S,y)}catch(e){const t="Auth",r=s.CarbonError.fromAnyError(e).addContextInfo(t,"persistLocalUsersAuthenticationData");(0,i.logError)({tag:[t],message:`${r}`,details:{error:e}}),(0,a.sendExceptionLog)({error:r})}};t.loadLocalUsersAuthenticationDataFromStorage=async e=>{try{const{storageService:t,storeService:r}=e,a=t.getLocalStorage(),i=(0,o.makeDataEncryptorService)(r);(0,o.setObfuscatingKey)(i);const s=await a.readItem(S);if(!s)return;if("string"!=typeof s)throw new Error("value of authentication.localusers is expected to be a string");const c=await i.getInstance().decrypt(s),l=(0,u.deflatedUtf8ToUtf16)(c,{skipUtf8Decoding:!0}),g=p.decode(l);let m=g;try{m=(0,d.utf8ChunkDecode)(g)}catch(e){}const y=JSON.parse(m);r.dispatch((0,n.loadLocalUsersAuthenticationData)(y))}catch(e){const t="Auth",r=s.CarbonError.fromAnyError(e).addContextInfo(t,"loadLocalUsersAuthenticationDataFromStorage");(0,i.logError)({tag:[t],message:`${r}`,details:{error:e}}),(0,a.sendExceptionLog)({error:r})}}},44904:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isLoadAuthenticationSuccess=t.FailedToRehydrateAuthenticationData=t.FailedToReadParseOrValidateAuthenticationData=void 0,t.FailedToReadParseOrValidateAuthenticationData="Failed to read, parse or validate persisted data",t.FailedToRehydrateAuthenticationData="Failed to rehydrate";t.isLoadAuthenticationSuccess=e=>"object"==typeof e&&"success"===e.type},44521:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deviceRegistered=t.makeDeviceRegistrationKeys=t.makeLegacyDeviceRegistrationKey=t.DEVICE_REGISTERED=void 0,t.DEVICE_REGISTERED="DEVICE_REGISTERED";t.makeLegacyDeviceRegistrationKey=e=>({type:"uki",uki:e});t.makeDeviceRegistrationKeys=(e,t)=>({type:"deviceKeys",deviceAccessKey:e,deviceSecretKey:t});t.deviceRegistered=(e,r,o)=>({type:t.DEVICE_REGISTERED,registrationType:e,persistData:r,login:o})},40199:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setRememberMeTypeAction=t.rehydrateUserAuthenticationData=t.SET_REMEMBER_ME_TYPE=t.REHYDRATE_USER_AUTHENTICATION_DATA=void 0,t.REHYDRATE_USER_AUTHENTICATION_DATA="REHYDRATE_USER_AUTHENTICATION_DATA",t.SET_REMEMBER_ME_TYPE="SET_REMEMBER_ME_TYPE";t.rehydrateUserAuthenticationData=e=>({type:t.REHYDRATE_USER_AUTHENTICATION_DATA,data:e});t.setRememberMeTypeAction=e=>({type:t.SET_REMEMBER_ME_TYPE,rememberMeType:e})},77421:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyCurrentUserAuthentication=t.currentUserAuthenticationReducer=void 0;const o=r(1005),n=r(40199),a=r(44521);t.currentUserAuthenticationReducer=(e=(0,t.getEmptyCurrentUserAuthentication)(),r)=>{switch(r.type){case o.CLOSE_SESSION:return(0,t.getEmptyCurrentUserAuthentication)();case a.DEVICE_REGISTERED:if("deviceKeys"===r.registrationType.type){const{deviceAccessKey:t,deviceSecretKey:o}=r.registrationType;return{...e,deviceKeys:{accessKey:t,secretKey:o}}}return e;case n.REHYDRATE_USER_AUTHENTICATION_DATA:return{...e,...r.data};case n.SET_REMEMBER_ME_TYPE:return{...e,rememberMeType:r.rememberMeType};default:return e}};t.getEmptyCurrentUserAuthentication=()=>({deviceKeys:null,rememberMeType:null})},37959:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.authenticationReducer=t.updateLocalUserInfo=t.makeDeviceRegistrationKeys=t.makeLegacyDeviceRegistrationKey=t.deviceRegistered=void 0;var o=r(44521);Object.defineProperty(t,"deviceRegistered",{enumerable:!0,get:function(){return o.deviceRegistered}}),Object.defineProperty(t,"makeLegacyDeviceRegistrationKey",{enumerable:!0,get:function(){return o.makeLegacyDeviceRegistrationKey}}),Object.defineProperty(t,"makeDeviceRegistrationKeys",{enumerable:!0,get:function(){return o.makeDeviceRegistrationKeys}});var n=r(50542);Object.defineProperty(t,"updateLocalUserInfo",{enumerable:!0,get:function(){return n.updateLocalUserInfo}});var a=r(60119);Object.defineProperty(t,"authenticationReducer",{enumerable:!0,get:function(){return a.authenticationReducer}})},73420:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reactivationStatusUpdated=t.localAccountsListUpdated=void 0;const o=r(1269);t.localAccountsListUpdated=e=>({type:o.LOCAL_ACCOUNTS_LIST_UPDATED,localAccounts:e});t.reactivationStatusUpdated=e=>({type:o.REACTIVATION_STATUS_UPDATED,reactivationStatus:e})},96482:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.localAccountsAuthenticationReducer=t.getEmptyLocalAccountsAuthenticationState=void 0;const o=r(1269);t.getEmptyLocalAccountsAuthenticationState=()=>({accountsList:[],reactivationStatus:o.ReactivationStatus.CLASSIC});t.localAccountsAuthenticationReducer=(e=(0,t.getEmptyLocalAccountsAuthenticationState)(),r)=>{switch(r.type){case o.LOCAL_ACCOUNTS_LIST_UPDATED:return{...e,accountsList:r.localAccounts};case o.REACTIVATION_STATUS_UPDATED:return{...e,reactivationStatus:r.reactivationStatus};default:return e}}},1269:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.REACTIVATION_STATUS_UPDATED=t.LOCAL_ACCOUNTS_LIST_UPDATED=t.ReactivationStatus=void 0,function(e){e.DISABLED="DISABLED",e.CLASSIC="CLASSIC",e.WEBAUTHN="WEBAUTHN"}(t.ReactivationStatus||(t.ReactivationStatus={})),t.LOCAL_ACCOUNTS_LIST_UPDATED="LOCAL_ACCOUNTS_LIST_UPDATED",t.REACTIVATION_STATUS_UPDATED="REACTIVATION_STATUS_UPDATED"},50542:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isLocalUserAuthenticationAction=t.updateLocalUserInfo=t.loadLocalUsersAuthenticationData=t.UPDATE_LOCAL_USER_INFO=t.LOAD_LOCAL_USERS_AUTH_DATA_FROM_STORAGE=void 0;const o=r(44521);t.LOAD_LOCAL_USERS_AUTH_DATA_FROM_STORAGE="LOAD_LOCAL_USERS_AUTH_DATA_FROM_STORAGE",t.UPDATE_LOCAL_USER_INFO="UPDATE_LOCAL_USER_INFO";t.loadLocalUsersAuthenticationData=e=>({type:t.LOAD_LOCAL_USERS_AUTH_DATA_FROM_STORAGE,data:e});t.updateLocalUserInfo=(e,r)=>({type:t.UPDATE_LOCAL_USER_INFO,login:e,data:r});t.isLocalUserAuthenticationAction=e=>e.type===o.DEVICE_REGISTERED},68436:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyLocalUsersAuthentication=t.localUsersAuthenticationReducer=void 0;const o=r(28060),n=r(50542),a=r(44521),i=r(40914);t.localUsersAuthenticationReducer=(e=(0,t.getEmptyLocalUsersAuthentication)(),r)=>{if((0,n.isLocalUserAuthenticationAction)(r)){const t=s(e[r.login],r);return t?{...e,[r.login]:t}:(0,o.omit)([r.login],e)}switch(r.type){case n.LOAD_LOCAL_USERS_AUTH_DATA_FROM_STORAGE:return{...e,...r.data};case n.UPDATE_LOCAL_USER_INFO:const t=c();return{...e,[r.login]:{...t,...e[r.login],...r.data}};default:return e}};t.getEmptyLocalUsersAuthentication=()=>({});const s=(e,t)=>{const r=e||c();if(t.type!==a.DEVICE_REGISTERED)return e;{const{registrationType:e}=t;switch(e.type){case"deviceKeys":{const{deviceAccessKey:t}=e;return{...r,deviceAccessKey:t,deviceRegisteredWithLegacyKey:!1}}case"uki":return{...r,deviceRegisteredWithLegacyKey:!0};default:(0,i.assertUnreachable)(e)}}},c=()=>({deviceAccessKey:null,deviceRegisteredWithLegacyKey:!1,ssoActivatedUser:!1})},60119:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.authenticationReducer=t.getEmptyAuthenticationState=void 0;const o=r(89531),n=r(77421),a=r(96482),i=r(68436),s=r(6880),c=r(28526),d=r(58909);t.getEmptyAuthenticationState=()=>({currentUser:(0,n.getEmptyCurrentUserAuthentication)(),localAccounts:(0,a.getEmptyLocalAccountsAuthenticationState)(),localUsers:(0,i.getEmptyLocalUsersAuthentication)(),u2f:(0,s.getEmptyU2FAuthenticationState)(),webAuthnAuthentication:(0,d.getEmptyWebAuthnAuthentication)(),twoFactorAuthentication:(0,c.getEmptyTwoFactorAuthenticationState)()}),t.authenticationReducer=(0,o.combineReducers)({currentUser:n.currentUserAuthenticationReducer,localAccounts:a.localAccountsAuthenticationReducer,localUsers:i.localUsersAuthenticationReducer,u2f:s.u2fAuthenticationReducer,webAuthnAuthentication:d.webAuthnAuthenticationReducer,twoFactorAuthentication:c.TwoFactorAuthenticationReducer})},98348:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.u2fDevicesUpdated=t.U2F_DEVICES_UPDATED=void 0,t.U2F_DEVICES_UPDATED="U2F_DEVICES_UPDATED";t.u2fDevicesUpdated=e=>({type:t.U2F_DEVICES_UPDATED,devices:e})},6880:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.u2fAuthenticationReducer=t.getEmptyU2FAuthenticationState=void 0;const o=r(98348);t.getEmptyU2FAuthenticationState=()=>({u2fDevices:[]});t.u2fAuthenticationReducer=(e=(0,t.getEmptyU2FAuthenticationState)(),r)=>r.type===o.U2F_DEVICES_UPDATED?{...e,u2fDevices:r.devices}:e},8949:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.webAuthnAvailableAuthenticatorsListUpdated=t.webAuthnAuthenticatorsListUpdated=t.webAuthnAuthenticatorRemoved=t.webAuthnAuthenticatorAdded=t.webAuthnUserIdUpdated=t.WEBAUTHN_AVAILABLE_AUTHENTICATORS_LIST_UPDATED=t.WEBAUTHN_AUTHENTICATORS_LIST_UPDATED=t.WEBAUTHN_AUTHENTICATOR_REMOVED=t.WEBAUTHN_AUTHENTICATOR_ADDED=t.WEBAUTHN_USERID_UPDATED=void 0,t.WEBAUTHN_USERID_UPDATED="WEBAUTHN_USERID_UPDATED",t.WEBAUTHN_AUTHENTICATOR_ADDED="WEBAUTHN_AUTHENTICATOR_ADDED",t.WEBAUTHN_AUTHENTICATOR_REMOVED="WEBAUTHN_AUTHENTICATOR_REMOVED",t.WEBAUTHN_AUTHENTICATORS_LIST_UPDATED="WEBAUTHN_AUTHENTICATORS_LIST_UPDATED",t.WEBAUTHN_AVAILABLE_AUTHENTICATORS_LIST_UPDATED="WEBAUTHN_AVAILABLE_AUTHENTICATORS_LIST_UPDATED";t.webAuthnUserIdUpdated=e=>({type:t.WEBAUTHN_USERID_UPDATED,webAuthnUserId:e});t.webAuthnAuthenticatorAdded=e=>({type:t.WEBAUTHN_AUTHENTICATOR_ADDED,authenticator:e});t.webAuthnAuthenticatorRemoved=e=>({type:t.WEBAUTHN_AUTHENTICATOR_REMOVED,credentialId:e});t.webAuthnAuthenticatorsListUpdated=e=>({type:t.WEBAUTHN_AUTHENTICATORS_LIST_UPDATED,authenticatorsList:e});t.webAuthnAvailableAuthenticatorsListUpdated=e=>({type:t.WEBAUTHN_AVAILABLE_AUTHENTICATORS_LIST_UPDATED,availableAuthenticatorsList:e})},58909:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.webAuthnAuthenticationReducer=t.getEmptyWebAuthnAuthentication=void 0;const o=r(8949);t.getEmptyWebAuthnAuthentication=()=>({webAuthnUserId:null,authenticators:[]});t.webAuthnAuthenticationReducer=(e=(0,t.getEmptyWebAuthnAuthentication)(),r)=>{switch(r.type){case o.WEBAUTHN_USERID_UPDATED:return{...e,webAuthnUserId:r.webAuthnUserId};case o.WEBAUTHN_AUTHENTICATOR_ADDED:return{...e,authenticators:[...e.authenticators,r.authenticator]};case o.WEBAUTHN_AUTHENTICATOR_REMOVED:{const t=e.authenticators.filter((e=>e.credentialId!==r.credentialId));return{...e,authenticators:t}}case o.WEBAUTHN_AUTHENTICATORS_LIST_UPDATED:return{...e,authenticators:r.authenticatorsList};case o.WEBAUTHN_AVAILABLE_AUTHENTICATORS_LIST_UPDATED:{const t=r.availableAuthenticatorsList.map((e=>e.credentialId)),o=e.authenticators.map((e=>t.includes(e.credentialId)?{...e,canOpenSession:!0}:{...e,canOpenSession:!1}));return{...e,authenticators:o}}default:return e}}},98534:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(79603),n=r(41094),a=r(95651),i=r(89782);t.config={commands:{refreshTwoFactorAuthenticationInfo:{handler:a.refreshTwoFactorAuthenticationInfoHandler},...i.config.commands},queries:{getTwoFactorAuthenticationInfo:{selector:n.twoFactorAuthenticationInfoSelector},...i.config.queries},liveQueries:{liveTwoFactorAuthenticationInfo:{operator:o.twoFactorAuthenticationInfo$},...i.config.liveQueries}}},12888:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationErrorCode=t.TwoFactorAuthenticationInfoRequestStatus=t.TwoFactorAuthenticationType=void 0;var o=r(90301);Object.defineProperty(t,"TwoFactorAuthenticationType",{enumerable:!0,get:function(){return o.TwoFactorAuthenticationType}}),Object.defineProperty(t,"TwoFactorAuthenticationInfoRequestStatus",{enumerable:!0,get:function(){return o.TwoFactorAuthenticationInfoRequestStatus}}),function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR"}(t.TwoFactorAuthenticationErrorCode||(t.TwoFactorAuthenticationErrorCode={}))},10759:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(13224),n=r(66877),a=r(91971);t.config={commands:{startTwoFactorAuthenticationDisableFlow:{handler:o.startTwoFactorAuthenticationDisableFlow},continueTwoFactorAuthenticationDisableFlow:{handler:o.continueTwoFactorAuthenticationDisableFlow},backTwoFactorAuthenticationDisableFlow:{handler:o.backTwoFactorAuthenticationDisableFlow},stopTwoFactorAuthenticationDisableFlow:{handler:o.stopTwoFactorAuthenticationDisableFlow}},queries:{getTwoFactorAuthenticationDisableStage:{selector:n.getTwoFactorAuthenticationDisableStageData}},liveQueries:{liveTwoFactorAuthenticationDisableStage:{operator:a.twoFactorAuthenticationDisableFlow$}}}},63197:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationDisableStages=void 0;var o=r(33471);Object.defineProperty(t,"TwoFactorAuthenticationDisableStages",{enumerable:!0,get:function(){return o.TwoFactorAuthenticationDisableStages}})},50546:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.stopTwoFactorAuthenticationStage=t.updateTwoFactorAuthenticationStage=void 0;const o=r(18394);t.updateTwoFactorAuthenticationStage=e=>({type:o.UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE,data:e});t.stopTwoFactorAuthenticationStage=()=>({type:o.UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE,data:{stage:void 0}})},18394:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.STOP_TWO_FACTOR_AUTHENTICATION_DISABLE_FLOW=t.UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE=void 0,t.UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE="UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE",t.STOP_TWO_FACTOR_AUTHENTICATION_DISABLE_FLOW="STOP_TWO_FACTOR_AUTHENTICATION_DISABLE_FLOW"},60557:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationDisableFlow=t.stopTwoFactorAuthenticationStage=t.updateTwoFactorAuthenticationStage=void 0;var o=r(50546);Object.defineProperty(t,"updateTwoFactorAuthenticationStage",{enumerable:!0,get:function(){return o.updateTwoFactorAuthenticationStage}}),Object.defineProperty(t,"stopTwoFactorAuthenticationStage",{enumerable:!0,get:function(){return o.stopTwoFactorAuthenticationStage}});var n=r(34232);Object.defineProperty(t,"twoFactorAuthenticationDisableFlow",{enumerable:!0,get:function(){return n.twoFactorAuthenticationDisableFlow}})},34232:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationDisableFlow=t.getEmptyTwoFactorAuthenticationDisable=void 0;const o=r(18394);t.getEmptyTwoFactorAuthenticationDisable=()=>({stage:void 0});t.twoFactorAuthenticationDisableFlow=(e=(0,t.getEmptyTwoFactorAuthenticationDisable)(),r)=>r.type===o.UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE?{...e,...r.data}:e},66877:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoFactorAuthenticationDisableFlowData=t.getTwoFactorAuthenticationDisableStageData=void 0;const o=r(83801);t.getTwoFactorAuthenticationDisableStageData=e=>{var t;const{stage:r}=e.userSession.twoFactorAuthenticationDisableFlow,n=null===(t=null===o.TwoFactorAuthenticationDisableFlowConfig||void 0===o.TwoFactorAuthenticationDisableFlowConfig?void 0:o.TwoFactorAuthenticationDisableFlowConfig[r])||void 0===t?void 0:t.viewMapper;return{stage:r,viewData:n?n(e):void 0}};t.getTwoFactorAuthenticationDisableFlowData=e=>{const{flowData:t}=e.userSession.twoFactorAuthenticationDisableFlow;return t}},83801:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationDisableFlowStages=t.TwoFactorAuthenticationDisableFlowConfig=void 0;const o=r(33471),n=r(11557),a=r(69234),i=r(26025),s=r(72222);t.TwoFactorAuthenticationDisableFlowConfig={start:{storeMapper:n.startTwoFactorAuthenticationDisableStoreMapper},stop:{currentHandler:s.endTwoFactorAuthenticationHandler,storeMapper:n.endTwoFactorAuthenticationDisableStoreMapper},end:{currentHandler:s.endTwoFactorAuthenticationHandler,storeMapper:n.endTwoFactorAuthenticationDisableStoreMapper},[o.TwoFactorAuthenticationDisableStages.AUTHENTICATION_CODE]:{currentHandler:a.disableTwoFactorAuthenticationCodeHandler,viewMapper:i.disableTwoFactorAuthenticationCodeViewMapper},[o.TwoFactorAuthenticationDisableStages.BACKUP_CODE]:{currentHandler:a.disableTwoFactorAuthenticationCodeHandler,viewMapper:i.disableTwoFactorAuthenticationBackupCodeViewMapper},[o.TwoFactorAuthenticationDisableStages.LOGOUT_REQUIRED]:{currentHandler:a.disableTwoFactorAuthenticationLogoutRequiredHandler}},t.TwoFactorAuthenticationDisableFlowStages=[{stage:o.TwoFactorAuthenticationDisableStages.AUTHENTICATION_CODE},{stage:o.TwoFactorAuthenticationDisableStages.FINALIZING_CHANGES},{stage:o.TwoFactorAuthenticationDisableStages.SUCCESS}]},13224:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.backTwoFactorAuthenticationDisableFlow=t.continueTwoFactorAuthenticationDisableFlow=t.stopTwoFactorAuthenticationDisableFlow=t.startTwoFactorAuthenticationDisableFlow=void 0;const o=r(83801),n=r(60557),a=e=>{const{stage:t}=e.getState().userSession.twoFactorAuthenticationDisableFlow;return{currentIndex:o.TwoFactorAuthenticationDisableFlowStages.findIndex((e=>e.stage===t)),currentStage:t}};t.startTwoFactorAuthenticationDisableFlow=({storeService:e})=>{const{storeMapper:t}=o.TwoFactorAuthenticationDisableFlowConfig.start,r=t?t(e):void 0,a=(0,n.updateTwoFactorAuthenticationStage)({...r,stage:o.TwoFactorAuthenticationDisableFlowStages[0].stage});return e.dispatch(a),Promise.resolve({success:!0})};t.stopTwoFactorAuthenticationDisableFlow=e=>{const{storeService:t}=e;t.dispatch((0,n.stopTwoFactorAuthenticationStage)());const{currentHandler:r,storeMapper:a}=o.TwoFactorAuthenticationDisableFlowConfig.stop,i=a?a(t):void 0;return r?r(e,i):Promise.resolve({success:!0})};const i=(e,t,r,o)=>{const{storeService:n}=e;return t(e,r?r(n):void 0,o)},s=({storeService:e},t)=>{const{currentIndex:r}=a(e);if(r!==o.TwoFactorAuthenticationDisableFlowStages.length-1){const a=(0,n.updateTwoFactorAuthenticationStage)({...t,stage:o.TwoFactorAuthenticationDisableFlowStages[r+1].stage});e.dispatch(a)}return Promise.resolve({success:!0})},c=({storeService:e},t)=>{const{currentIndex:r}=a(e);if(0!==r){const a=(0,n.updateTwoFactorAuthenticationStage)({...t,stage:o.TwoFactorAuthenticationDisableFlowStages[r-1].stage});e.dispatch(a)}return Promise.resolve({success:!0})},d=e=>{const{currentStage:t}=a(e);let r,n=s,i=c;if(o.TwoFactorAuthenticationDisableFlowConfig[t]){const e=o.TwoFactorAuthenticationDisableFlowConfig[t];i=e.backHandler||i,n=e.currentHandler||n,r=e.storeMapper}return{currentHandler:n,backHandler:i,storeMapper:r}};t.continueTwoFactorAuthenticationDisableFlow=(e,t)=>{const{storeService:r}=e,{currentHandler:o,storeMapper:n}=d(r);return i(e,o,n,t)};t.backTwoFactorAuthenticationDisableFlow=(e,t)=>{const{storeService:r}=e,{backHandler:o,storeMapper:n}=d(r);return i(e,o,n,t)}},91971:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationDisableFlow$=void 0;const o=r(18948),n=r(3343),a=r(66877);t.twoFactorAuthenticationDisableFlow$=()=>(0,o.pipe)((0,n.map)(a.getTwoFactorAuthenticationDisableStageData),(0,n.distinctUntilChanged)())},69234:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableTwoFactorAuthenticationLogoutRequiredHandler=t.disableTwoFactorAuthenticationCodeHandler=void 0;const o=r(60557),n=r(1064),a=r(33471),i=r(72222),s=r(41094),c=r(12888),d=r(99355),l=r(90301),u=r(66877),p=r(8153),S=r(55015),g={[c.TwoFactorAuthenticationType.DEVICE_REGISTRATION]:{handler:i.disableTwoFactorAuthenticationTOTP1Handler,showLoading:!1},[c.TwoFactorAuthenticationType.LOGIN]:{handler:i.disableTwoFactorAuthenticationTOTP2Handler,showLoading:!0}};t.disableTwoFactorAuthenticationCodeHandler=async(e,t,r)=>{const c=r.target;if(c){const{storeService:r}=e,n=(0,o.updateTwoFactorAuthenticationStage)({...t,stage:c,stageData:void 0});return r.dispatch(n),{success:!0}}return await(async(e,t,r)=>{const{storeService:c}=e,p=e=>{const t=(0,o.updateTwoFactorAuthenticationStage)({...e});c.dispatch(t)};try{const S=(0,u.getTwoFactorAuthenticationDisableFlowData)(c.getState()),m=(0,s.twoFactorAuthenticationInfoSelector)(c.getState());if(m.status===l.TwoFactorAuthenticationInfoRequestStatus.READY){const{type:s}=m,{authenticationCode:l}=r,u=await(0,d.performTotpVerificationService)(e,l);if(u.success){const{authTicket:r}=u;if(g[s]){const{handler:n,showLoading:d}=g[s];d&&p({...t,stage:a.TwoFactorAuthenticationDisableStages.FINALIZING_CHANGES});const l=await n(e,r);if(l.success)if(l.logoutRequired){const e={...S,logoutRequired:l.logoutRequired};p({...t,stage:a.TwoFactorAuthenticationDisableStages.LOGOUT_REQUIRED,flowData:e})}else await(0,i.refreshTwoFactorAuthenticationInfoHandler)(e),p({...t,stage:a.TwoFactorAuthenticationDisableStages.SUCCESS}),c.dispatch((0,o.stopTwoFactorAuthenticationStage)());else p({...t,stage:a.TwoFactorAuthenticationDisableStages.GENERIC_ERROR,stageData:{...l}})}else p({...t,stage:a.TwoFactorAuthenticationDisableStages.GENERIC_ERROR,stageData:{success:!1,error:{code:n.AuthenticationCode.UNEXPECTED_OTP_TYPE}}})}else p({...t,stageData:u})}else p({...t,stage:a.TwoFactorAuthenticationDisableStages.GENERIC_ERROR,stageData:{success:!1,error:{code:n.AuthenticationCode.UNKNOWN_ERROR}}})}catch(e){p({...t,stageData:{success:!1,error:{code:n.AuthenticationCode.UNKNOWN_ERROR}}})}return{success:!0}})(e,t,r)};t.disableTwoFactorAuthenticationLogoutRequiredHandler=async e=>{const{storeService:t,storageService:r,sessionService:n}=e,a=(0,p.userLoginSelector)(t.getState());return t.dispatch((0,o.stopTwoFactorAuthenticationStage)()),a&&await(0,S.wipeOutLocalAccounts)(r.getLocalStorage(),[a]),await n.close(),{success:!0}}},11557:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.endTwoFactorAuthenticationDisableStoreMapper=t.startTwoFactorAuthenticationDisableStoreMapper=void 0;const o=r(88478);t.startTwoFactorAuthenticationDisableStoreMapper=e=>{const t=e.getState();return{stage:void 0,stageData:void 0,flowData:{otpType:(0,o.otpTypeSelector)(t)}}};t.endTwoFactorAuthenticationDisableStoreMapper=()=>({stage:void 0,stageData:void 0,flowData:void 0})},33471:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationDisableStages=void 0,function(e){e.AUTHENTICATION_CODE="AUTHENTICATION_CODE",e.BACKUP_CODE="BACKUP_CODE",e.FINALIZING_CHANGES="FINALIZING_CHANGES",e.SUCCESS="SUCCESS",e.LOGOUT_REQUIRED="LOGOUT_REQUIRED",e.GENERIC_ERROR="GENERIC_ERROR"}(t.TwoFactorAuthenticationDisableStages||(t.TwoFactorAuthenticationDisableStages={}))},26025:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableTwoFactorAuthenticationBackupCodeViewMapper=t.disableTwoFactorAuthenticationCodeViewMapper=void 0;const o=r(1064);t.disableTwoFactorAuthenticationCodeViewMapper=e=>{const{stageData:t}=e.userSession.twoFactorAuthenticationDisableFlow;if(t&&!t.success){const{error:e}=t;return{success:!1,error:e}}};t.disableTwoFactorAuthenticationBackupCodeViewMapper=e=>{const{stageData:t}=e.userSession.twoFactorAuthenticationDisableFlow;if(t&&!t.success){const{error:e}=t;return e.code===o.AuthenticationCode.OTP_NOT_VALID?{success:!1,error:{code:o.AuthenticationCode.BACKUP_CODE_NOT_VALID}}:{success:!1,error:e}}}},6288:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(13255),n=r(60009),a=r(23395);t.config={commands:{startTwoFactorAuthenticationEnableFlow:{handler:o.startTwoFactorAuthenticationEnableFlow},continueTwoFactorAuthenticationEnableFlow:{handler:o.continueTwoFactorAuthenticationEnableFlow},backTwoFactorAuthenticationEnableFlow:{handler:o.backTwoFactorAuthenticationEnableFlow},stopTwoFactorAuthenticationEnableFlow:{handler:o.stopTwoFactorAuthenticationEnableFlow}},queries:{getTwoFactorAuthenticationEnableStage:{selector:n.getTwoFactorAuthenticationEnableStageData}},liveQueries:{liveTwoFactorAuthenticationEnableStage:{operator:a.twoFactorAuthenticationEnableFlow$}}}},99429:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationEnableStages=void 0;var o=r(57656);Object.defineProperty(t,"TwoFactorAuthenticationEnableStages",{enumerable:!0,get:function(){return o.TwoFactorAuthenticationEnableStages}})},11469:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationBackupCodesHandler=void 0;const o=r(36115),n=r(60009),a=r(57656);t.enableTwoFactorAuthenticationBackupCodesHandler=async(e,t)=>{const{storeService:r}=e,i=(0,n.getTwoFactorAuthenticationEnableFlowData)(r.getState());return(0,o.updateStore)(e,{...t,stage:i.logoutRequired?a.TwoFactorAuthenticationEnableStages.LOGOUT_REQUIRED:a.TwoFactorAuthenticationEnableStages.SUCCESS}),{success:!0}}},56156:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationBackupPhoneHandler=void 0;const o=r(15876),n=r(36115),a=r(60009),i=r(57656),s=r(99355),c=r(45082);t.enableTwoFactorAuthenticationBackupPhoneHandler=async(e,t,r)=>{const{storeService:d}=e;let l=(0,a.getTwoFactorAuthenticationEnableFlowData)(d.getState());const u=await(0,s.requestTOTPActivationService)(e,{...r,country:(0,o.makeSafeCountry)(r.countryCode)});if(u.success){const{seed:r,uri:o,recoveryKeys:a,serverKey:s}=u,{authenticationType:d}=l;d===c.TwoFactorAuthenticationType.LOGIN&&(l[c.TwoFactorAuthenticationType.LOGIN].serverKey=s),l={...l,seed:r,uri:o,recoveryKeys:a},(0,n.updateStore)(e,{...t,stageData:{...u},flowData:l,stage:i.TwoFactorAuthenticationEnableStages.QR_CODE})}else(0,n.updateStore)(e,{...t,stageData:{...u}});return Promise.resolve({success:!0})}},17692:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationCodeHandler=void 0;const o=r(1064),n=r(36115),a=r(57656),i=r(45082),s=r(60009),c=r(90143),d=r(44255),l=r(72222),u=r(99355),p={[i.TwoFactorAuthenticationType.DEVICE_REGISTRATION]:{handler:c.enableTwoFactorAuthenticationTOTP1Handler,showLoading:!1},[i.TwoFactorAuthenticationType.LOGIN]:{handler:d.enableTwoFactorAuthenticationTOTP2Handler,showLoading:!0,errorStage:a.TwoFactorAuthenticationEnableStages.GENERIC_ERROR}};t.enableTwoFactorAuthenticationCodeHandler=async(e,t,{authenticationCode:r})=>{const{storeService:i}=e;try{const o=(0,s.getTwoFactorAuthenticationEnableFlowData)(i.getState()),{authenticationType:c}=o,d=await(0,u.performTotpVerificationService)(e,r,!0);if(!d.success)return(0,n.updateStore)(e,{...t,stageData:d}),{success:!1};if(p[c]){const{authTicket:r}=d,i=o[c],{handler:s,showLoading:u,errorStage:S}=p[c];u&&(0,n.updateStore)(e,{...t,stage:a.TwoFactorAuthenticationEnableStages.FINALIZING_CHANGES});const g=await s(e,r,i);if(g.success){g.logoutRequired||await(0,l.refreshTwoFactorAuthenticationInfoHandler)(e);const r={...o,logoutRequired:g.logoutRequired};(0,n.updateStore)(e,{...t,stage:a.TwoFactorAuthenticationEnableStages.BACKUP_CODES,flowData:r})}else(0,n.updateStore)(e,{...t,stage:S?a.TwoFactorAuthenticationEnableStages.GENERIC_ERROR:a.TwoFactorAuthenticationEnableStages.AUTHENTICATION_CODE,stageData:{...g}})}else(0,n.updateStore)(e,{...t,stage:a.TwoFactorAuthenticationEnableStages.GENERIC_ERROR,stageData:{success:!1}});return{success:!0}}catch(r){return(0,n.updateStore)(e,{...t,stageData:{success:!1,error:{code:o.AuthenticationCode.UNKNOWN_ERROR}}}),{success:!1}}}},12315:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationLogoutRequiredHandler=void 0;const o=r(8153),n=r(55015),a=r(91584);t.enableTwoFactorAuthenticationLogoutRequiredHandler=async e=>{const{storeService:t,storageService:r,sessionService:i}=e,s=(0,o.userLoginSelector)(t.getState());return t.dispatch((0,a.stopTwoFactorAuthenticationStage)()),s&&await(0,n.wipeOutLocalAccounts)(r.getLocalStorage(),[s]),await i.close(),{success:!0}}},38648:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationTypeHandler=void 0;const o=r(16242),n=r(91584),a=r(60009),i=r(57656),s=r(36115),c=r(45082),d=r(78),l=r(8153),u=r(15876),p=r(59610),S=r(19935);t.enableTwoFactorAuthenticationTypeHandler=async(e,t,{authenticationType:r})=>{const{storeService:g}=e,m=(0,a.getTwoFactorAuthenticationEnableFlowData)(g.getState());if(r===c.TwoFactorAuthenticationType.LOGIN)try{const a=(0,n.updateTwoFactorAuthenticationStage)({...t,stage:i.TwoFactorAuthenticationEnableStages.LOADING});g.dispatch(a);const{eventLoggerService:y}=e,v=g.getState(),A=(0,l.userLoginSelector)(v);if(!A)return(0,s.updateStore)(e,{...t,stage:i.TwoFactorAuthenticationEnableStages.GENERIC_ERROR}),Promise.resolve({success:!1});if(!await(0,o.waitUntilSyncComplete)(g))return(0,s.updateStore)(e,{...t,stage:i.TwoFactorAuthenticationEnableStages.GENERIC_ERROR}),Promise.resolve({success:!1});g.dispatch((0,d.changeMPStart)());const E=await(0,u.getDataForMasterPasswordChange)(g,A,{});if((0,u.isApiError)(E))(0,p.logChangeMasterPasswordError)(y,S.ChangeMasterPasswordError.DownloadError),g.dispatch((0,d.changeMPDone)()),(0,s.updateStore)(e,{...t,stage:i.TwoFactorAuthenticationEnableStages.GENERIC_ERROR});else{const{data:{transactions:e,sharingKeys:o},timestamp:a}=E,s=(0,n.updateTwoFactorAuthenticationStage)({...t,flowData:{...m,authenticationType:r,[c.TwoFactorAuthenticationType.LOGIN]:{transactions:e,sharingKeys:o,timestamp:a,serverKey:""}},stage:i.TwoFactorAuthenticationEnableStages.BACKUP_PHONE});g.dispatch(s)}}catch(r){g.dispatch((0,d.changeMPDone)()),(0,s.updateStore)(e,{...t,stage:i.TwoFactorAuthenticationEnableStages.GENERIC_ERROR})}else{const e=(0,n.updateTwoFactorAuthenticationStage)({...t,flowData:{...m,authenticationType:r},stage:i.TwoFactorAuthenticationEnableStages.BACKUP_PHONE});g.dispatch(e)}return Promise.resolve({success:!0})}},46984:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(17692),t),n(r(56156),t),n(r(38648),t),n(r(11469),t),n(r(12315),t)},16276:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.stopTwoFactorAuthenticationStage=t.updateTwoFactorAuthenticationStage=t.UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE=void 0,t.UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE="UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE";t.updateTwoFactorAuthenticationStage=e=>({type:t.UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE,data:e});t.stopTwoFactorAuthenticationStage=()=>({type:t.UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE,data:{stage:void 0}})},91584:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationEnableFlow=t.stopTwoFactorAuthenticationStage=t.updateTwoFactorAuthenticationStage=void 0;var o=r(16276);Object.defineProperty(t,"updateTwoFactorAuthenticationStage",{enumerable:!0,get:function(){return o.updateTwoFactorAuthenticationStage}}),Object.defineProperty(t,"stopTwoFactorAuthenticationStage",{enumerable:!0,get:function(){return o.stopTwoFactorAuthenticationStage}});var n=r(32594);Object.defineProperty(t,"twoFactorAuthenticationEnableFlow",{enumerable:!0,get:function(){return n.twoFactorAuthenticationEnableFlow}})},32594:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationEnableFlow=t.getEmptyTwoFactorAuthenticationEnable=void 0;const o=r(16276);t.getEmptyTwoFactorAuthenticationEnable=()=>({stage:void 0});t.twoFactorAuthenticationEnableFlow=(e=(0,t.getEmptyTwoFactorAuthenticationEnable)(),r)=>r.type===o.UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE?{...e,...r.data}:e},60009:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoFactorAuthenticationEnableFlowData=t.getTwoFactorAuthenticationEnableStageData=void 0;const o=r(12245);t.getTwoFactorAuthenticationEnableStageData=e=>{var t;const{stage:r}=e.userSession.twoFactorAuthenticationEnableFlow,n=null===(t=null===o.TwoFactorAuthenticationEnableFlowConfig||void 0===o.TwoFactorAuthenticationEnableFlowConfig?void 0:o.TwoFactorAuthenticationEnableFlowConfig[r])||void 0===t?void 0:t.viewMapper;return{stage:r,viewData:n?n(e):void 0}};t.getTwoFactorAuthenticationEnableFlowData=e=>{const{flowData:t}=e.userSession.twoFactorAuthenticationEnableFlow;return t}},12245:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationEnableFlowStages=t.TwoFactorAuthenticationEnableFlowConfig=void 0;const o=r(57656),n=r(48021),a=r(45030),i=r(46984),s=r(72222);t.TwoFactorAuthenticationEnableFlowConfig={start:{storeMapper:n.startTwoFactorAuthenticationEnableStoreMapper},stop:{currentHandler:s.endTwoFactorAuthenticationHandler,storeMapper:n.endTwoFactorAuthenticationEnableStoreMapper},end:{currentHandler:s.endTwoFactorAuthenticationHandler,storeMapper:n.endTwoFactorAuthenticationEnableStoreMapper},[o.TwoFactorAuthenticationEnableStages.AUTHENTICATION_TYPE]:{currentHandler:i.enableTwoFactorAuthenticationTypeHandler,viewMapper:a.enableTwoFactorAuthenticationTypeViewMapper},[o.TwoFactorAuthenticationEnableStages.BACKUP_PHONE]:{currentHandler:i.enableTwoFactorAuthenticationBackupPhoneHandler,viewMapper:a.enableTwoFactorAuthenticationBackupPhoneViewMapper},[o.TwoFactorAuthenticationEnableStages.QR_CODE]:{viewMapper:a.enableTwoFactorAuthenticationQRCodeViewMapper},[o.TwoFactorAuthenticationEnableStages.AUTHENTICATION_CODE]:{currentHandler:i.enableTwoFactorAuthenticationCodeHandler,viewMapper:a.enableTwoFactorAuthenticationCodeViewMapper},[o.TwoFactorAuthenticationEnableStages.BACKUP_CODES]:{currentHandler:i.enableTwoFactorAuthenticationBackupCodesHandler,viewMapper:a.enableTwoFactorAuthenticationBackupCodesViewMapper},[o.TwoFactorAuthenticationEnableStages.LOGOUT_REQUIRED]:{currentHandler:i.enableTwoFactorAuthenticationLogoutRequiredHandler}},t.TwoFactorAuthenticationEnableFlowStages=[{stage:o.TwoFactorAuthenticationEnableStages.AUTHENTICATION_TYPE},{stage:o.TwoFactorAuthenticationEnableStages.BACKUP_PHONE},{stage:o.TwoFactorAuthenticationEnableStages.QR_CODE},{stage:o.TwoFactorAuthenticationEnableStages.AUTHENTICATION_CODE},{stage:o.TwoFactorAuthenticationEnableStages.FINALIZING_CHANGES},{stage:o.TwoFactorAuthenticationEnableStages.BACKUP_CODES},{stage:o.TwoFactorAuthenticationEnableStages.SUCCESS}]},13255:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.backTwoFactorAuthenticationEnableFlow=t.continueTwoFactorAuthenticationEnableFlow=t.stopTwoFactorAuthenticationEnableFlow=t.startTwoFactorAuthenticationEnableFlow=void 0;const o=r(12245),n=r(91584),a=e=>e.userSession.twoFactorAuthenticationEnableFlow,i=e=>{const{stage:t}=a(e.getState());return{currentIndex:o.TwoFactorAuthenticationEnableFlowStages.findIndex((e=>e.stage===t)),currentStage:t}};t.startTwoFactorAuthenticationEnableFlow=({storeService:e})=>{const{storeMapper:t}=o.TwoFactorAuthenticationEnableFlowConfig.start,r=t?t(e):void 0,a=(0,n.updateTwoFactorAuthenticationStage)({...r,stage:o.TwoFactorAuthenticationEnableFlowStages[0].stage});return e.dispatch(a),Promise.resolve({success:!0})};t.stopTwoFactorAuthenticationEnableFlow=e=>{const{storeService:t}=e;t.dispatch((0,n.stopTwoFactorAuthenticationStage)());const{currentHandler:r,storeMapper:a}=o.TwoFactorAuthenticationEnableFlowConfig.stop,i=a?a(t):void 0;return r?r(e,i):Promise.resolve({success:!0})};const s=(e,t,r,o)=>{const{storeService:n}=e;return t(e,r?r(n):void 0,o)},c=({storeService:e},t)=>{const{currentIndex:r}=i(e);if(r!==o.TwoFactorAuthenticationEnableFlowStages.length-1){const a=(0,n.updateTwoFactorAuthenticationStage)({...t,stage:o.TwoFactorAuthenticationEnableFlowStages[r+1].stage});e.dispatch(a)}return Promise.resolve({success:!0})},d=({storeService:e},t)=>{const{currentIndex:r}=i(e);if(0!==r){const a=(0,n.updateTwoFactorAuthenticationStage)({...t,stage:o.TwoFactorAuthenticationEnableFlowStages[r-1].stage});e.dispatch(a)}return Promise.resolve({success:!0})},l=e=>{const{currentStage:t}=i(e);let r,n=c,a=d;if(o.TwoFactorAuthenticationEnableFlowConfig[t]){const e=o.TwoFactorAuthenticationEnableFlowConfig[t];a=e.backHandler||a,n=e.currentHandler||n,r=e.storeMapper}return{currentHandler:n,backHandler:a,storeMapper:r}};t.continueTwoFactorAuthenticationEnableFlow=(e,t)=>{const{storeService:r}=e,{currentHandler:o,storeMapper:n}=l(r);return s(e,o,n,t)};t.backTwoFactorAuthenticationEnableFlow=(e,t)=>{const{storeService:r}=e,{backHandler:o,storeMapper:i}=l(r);return(e=>{const t=a(e.getState()),r=(0,n.updateTwoFactorAuthenticationStage)({...t,stageData:void 0});e.dispatch(r)})(r),s(e,o,i,t)}},36115:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateStore=void 0;const o=r(91584);t.updateStore=({storeService:e},t)=>{const r=(0,o.updateTwoFactorAuthenticationStage)({...t});e.dispatch(r)}},23395:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationEnableFlow$=void 0;const o=r(18948),n=r(3343),a=r(60009);t.twoFactorAuthenticationEnableFlow$=()=>(0,o.pipe)((0,n.map)(a.getTwoFactorAuthenticationEnableStageData),(0,n.distinctUntilChanged)())},48021:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.endTwoFactorAuthenticationEnableStoreMapper=t.startTwoFactorAuthenticationEnableStoreMapper=void 0;t.startTwoFactorAuthenticationEnableStoreMapper=()=>({stage:void 0,stageData:void 0,flowData:void 0});t.endTwoFactorAuthenticationEnableStoreMapper=()=>({stage:void 0,stageData:void 0,flowData:void 0})},57656:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationEnableStages=t.TwoFactorAuthenticationBackupPhoneErrorCode=void 0,function(e){e[e.INVALID_FORMAT=0]="INVALID_FORMAT",e[e.UNKNOWN_ERROR=1]="UNKNOWN_ERROR"}(t.TwoFactorAuthenticationBackupPhoneErrorCode||(t.TwoFactorAuthenticationBackupPhoneErrorCode={})),function(e){e.AUTHENTICATION_TYPE="AUTHENTICATION_TYPE",e.BACKUP_PHONE="BACKUP_PHONE",e.QR_CODE="QR_CODE",e.AUTHENTICATION_CODE="AUTHENTICATION_CODE",e.LOADING="LOADING",e.FINALIZING_CHANGES="FINALIZING_CHANGES",e.BACKUP_CODES="BACKUP_CODES",e.GENERIC_ERROR="GENERIC_ERROR",e.LOGOUT_REQUIRED="LOGOUT_REQUIRED",e.SUCCESS="SUCCESS"}(t.TwoFactorAuthenticationEnableStages||(t.TwoFactorAuthenticationEnableStages={}))},45030:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationBackupCodesViewMapper=t.enableTwoFactorAuthenticationCodeViewMapper=t.enableTwoFactorAuthenticationQRCodeViewMapper=t.enableTwoFactorAuthenticationBackupPhoneViewMapper=t.enableTwoFactorAuthenticationTypeViewMapper=void 0;const o=r(15876);t.enableTwoFactorAuthenticationTypeViewMapper=()=>({currentStep:1,totalSteps:5});t.enableTwoFactorAuthenticationBackupPhoneViewMapper=e=>{const t=(0,o.makeSafeCountry)(e.device.platform.location.country),{stageData:r}=e.userSession.twoFactorAuthenticationEnableFlow;return{currentStep:2,totalSteps:5,countryCode:t,...r}};t.enableTwoFactorAuthenticationQRCodeViewMapper=e=>{const{uri:t,seed:r}=e.userSession.twoFactorAuthenticationEnableFlow.flowData;return{currentStep:3,totalSteps:5,uri:t,seed:r}};t.enableTwoFactorAuthenticationCodeViewMapper=e=>{const{stageData:t}=e.userSession.twoFactorAuthenticationEnableFlow;if(t){const{error:t}=e.userSession.twoFactorAuthenticationEnableFlow.stageData;return{currentStep:4,totalSteps:5,error:t}}return{currentStep:4,totalSteps:5}};t.enableTwoFactorAuthenticationBackupCodesViewMapper=e=>{const{recoveryKeys:t}=e.userSession.twoFactorAuthenticationEnableFlow.flowData;return{currentStep:5,totalSteps:5,recoveryKeys:t}}},10397:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthStatusError=t.TwoFactorAuthStatusRequested=t.TwoFactorAuthStatusUpdated=t.TWO_FACTOR_AUTHENTICATION_INFO_ERROR=t.TWO_FACTOR_AUTHENTICATION_INFO_REQUESTED=t.TWO_FACTOR_AUTHENTICATION_INFO_UPDATED=void 0,t.TWO_FACTOR_AUTHENTICATION_INFO_UPDATED="TWO_FACTOR_AUTHENTICATION_INFO_UPDATED",t.TWO_FACTOR_AUTHENTICATION_INFO_REQUESTED="TWO_FACTOR_AUTHENTICATION_INFO_REQUESTED",t.TWO_FACTOR_AUTHENTICATION_INFO_ERROR="TWO_FACTOR_AUTHENTICATION_INFO_ERROR";t.TwoFactorAuthStatusUpdated=e=>({type:t.TWO_FACTOR_AUTHENTICATION_INFO_UPDATED,info:e});t.TwoFactorAuthStatusRequested=()=>({type:t.TWO_FACTOR_AUTHENTICATION_INFO_REQUESTED});t.TwoFactorAuthStatusError=e=>({type:t.TWO_FACTOR_AUTHENTICATION_INFO_ERROR,errorCode:e})},28526:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationReducer=t.getEmptyTwoFactorAuthenticationState=void 0;const o=r(10397),n=r(90301),a=r(38652);t.getEmptyTwoFactorAuthenticationState=()=>({status:n.TwoFactorAuthenticationInfoRequestStatus.UNKNOWN});t.TwoFactorAuthenticationReducer=(e=(0,t.getEmptyTwoFactorAuthenticationState)(),r)=>{var i;const s=null===(i=null==r?void 0:r.info)||void 0===i?void 0:i.type;switch(r.type){case o.TWO_FACTOR_AUTHENTICATION_INFO_REQUESTED:return{status:n.TwoFactorAuthenticationInfoRequestStatus.PENDING};case o.TWO_FACTOR_AUTHENTICATION_INFO_ERROR:return{status:n.TwoFactorAuthenticationInfoRequestStatus.ERROR,errorCode:r.errorCode};case o.TWO_FACTOR_AUTHENTICATION_INFO_UPDATED:return{...r.info,isTwoFactorAuthenticationEnabled:a.TwoFactorAuthenticationEnabled.includes(s),status:n.TwoFactorAuthenticationInfoRequestStatus.READY};default:return e}}},89782:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(36376),n=r(76751),a=r(82538),i=r(6012);t.config={commands:{removeU2FAuthenticator:{handler:o.removeU2FAuthenticatorHandler},refreshU2FDevicesList:{handler:n.refreshU2FDevicesListHandler}},queries:{getU2FDevicesList:{selector:i.listU2FDevicesSelector}},liveQueries:{liveU2FDevicesList:{operator:a.listU2FDevices$}}}},5857:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshU2FErrorCode=t.RemoveU2FAuthenticatorError=void 0,function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NO_KEYHANDLE_FOUND="NO_KEYHANDLE_FOUND",e.WRONG_AUTHENTICATION_CODE="WRONG_AUTHENTICATION_CODE"}(t.RemoveU2FAuthenticatorError||(t.RemoveU2FAuthenticatorError={})),function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR"}(t.RefreshU2FErrorCode||(t.RefreshU2FErrorCode={}))},76751:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refreshU2FDevicesListHandler=void 0;const o=r(15876),n=r(8153),a=r(5857),i=r(98348);t.refreshU2FDevicesListHandler=async e=>{try{const{storeService:t}=e,r=t.isAuthenticated,s=(0,n.userLoginSelector)(t.getState());if(!s||!r)return{success:!1,error:{code:a.RefreshU2FErrorCode.UNKNOWN_ERROR}};const c=await(0,o.getU2FDevices)(t,s);return(0,o.isApiError)(c)?{success:!1,error:{code:a.RefreshU2FErrorCode.UNKNOWN_ERROR}}:(t.dispatch((0,i.u2fDevicesUpdated)(c.u2fDevices)),{success:!0})}catch(e){return{success:!1,error:{code:a.RefreshU2FErrorCode.UNKNOWN_ERROR}}}}},36376:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeU2FAuthenticatorHandler=void 0;const o=r(62550),n=r(73144),a=r(15876),i=r(59125),s=r(8153),c=r(49914),d=r(5857),l=r(76751),u=r(40653);t.removeU2FAuthenticatorHandler=async(e,t)=>{try{const{storeService:r}=e,o=r.getState(),n=r.isAuthenticated,i=(0,s.userLoginSelector)(o);if(!i||!n)return{success:!1,error:{code:d.RemoveU2FAuthenticatorError.UNKNOWN_ERROR}};const{authenticationCode:u,keyHandle:p}=t,S=await(0,a.performTotpVerification)(r,{login:i,otp:u});if((0,a.isApiError)(S))return(0,c.handlePerformValidationError)(S,!0);const{authTicket:g}=S,m=await(0,a.removeU2FAuthenticator)(r,i,{authTicket:g,keyHandle:p});return(0,a.isApiError)(m)?{success:!1,error:{code:d.RemoveU2FAuthenticatorError.UNKNOWN_ERROR}}:(await(0,l.refreshU2FDevicesListHandler)(e),{success:!0})}catch(e){const t=n.CarbonError.fromAnyError(e).addContextInfo("U2F","removeU2FAuthenticatorHandler");return(0,i.sendExceptionLog)({error:t}),{success:!1,error:{code:(0,n.isCarbonError)(e)&&e.errorCode===o.HttpErrorCode.NETWORK_ERROR?u.AuthenticationCode.NETWORK_ERROR:d.RemoveU2FAuthenticatorError.UNKNOWN_ERROR}}}}},82538:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listU2FDevices$=void 0;const o=r(18948),n=r(3343),a=r(6012);t.listU2FDevices$=()=>(0,o.pipe)((0,n.map)(a.listU2FDevicesSelector),(0,n.distinctUntilChanged)())},6012:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listU2FDevicesSelector=void 0;t.listU2FDevicesSelector=e=>e.authentication.u2f.u2fDevices},38652:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ENFORCE_2FA_FF=t.ENFORCE_2FA_POLICY_REFRESH_TIMER_INTERVAL=t.TwoFactorAuthenticationEnabled=void 0;const o=r(90301);t.TwoFactorAuthenticationEnabled=[o.TwoFactorAuthenticationType.DEVICE_REGISTRATION,o.TwoFactorAuthenticationType.LOGIN,o.TwoFactorAuthenticationType.SSO],t.ENFORCE_2FA_POLICY_REFRESH_TIMER_INTERVAL=9e5,t.ENFORCE_2FA_FF="webproduct_extension_enforce2fa_mvp_release"},55063:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableTwoFactorAuthenticationTOTP1Handler=void 0;const o=r(15876),n=r(1064);t.disableTwoFactorAuthenticationTOTP1Handler=async(e,t)=>{const{storeService:r}=e,{login:a}=r.getAccountInfo(),i=await(0,o.deactivateTotpVerification)(r,a,{authTicket:t});return(0,o.isApiError)(i)?{success:!1,error:{code:n.AuthenticationCode.UNKNOWN_ERROR}}:{success:!0}}},3933:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableTwoFactorAuthenticationTOTP2Handler=void 0;const o=r(19935),n=r(72879),a=r(15876),i=r(16242),s=r(78),c=r(8153),d=r(1064),l=r(75897),u=r(59610),p=r(97605);t.disableTwoFactorAuthenticationTOTP2Handler=async(e,t)=>{const{storeService:r,masterPasswordEncryptorService:S,sessionService:g,storageService:m,eventLoggerService:y}=e,v=r.getState(),A=(0,c.userLoginSelector)(v);try{if(!A)throw new Error("2FA Disable Flow - Login not available");if((0,c.isRemoteKeyActivatedSelector)(v))throw console.error("Disable 2FA unavailable: RK account"),new Error("2FA Disable Flow - Unavailable due to RemoteKey Account");if(!await(0,i.waitUntilSyncComplete)(r))return{success:!1,error:{code:d.AuthenticationCode.UNKNOWN_SYNC_ERROR}};r.dispatch((0,s.changeMPStart)());const E=await(0,a.getDataForMasterPasswordChange)(r,A,{});if((0,a.isApiError)(E))throw(0,u.logChangeMasterPasswordError)(y,o.ChangeMasterPasswordError.DownloadError),new Error("2FA Disable Flow - Unable to getDataForMasterPasswordChange");const f=(0,c.serverKeySelector)(v);if(!(0,i.isOtpStatusValid)(E.otpStatus,f))throw(0,u.logChangeMasterPasswordError)(y,o.ChangeMasterPasswordError.LoginError),new Error("2FA Disable Flow - OTP status is invalid");const{timestamp:h}=E,{transactions:_,sharingKeys:T}=E.data,I=await(0,i.deCipherAllTransactions)(g,S,_,!1),C=r.getUserSession().masterPassword,P=e.localStorageService.getInstance(),D=await P.doesLocalKeyExist();let O=null;D&&(O=await P.getLocalKey());const{publicKey:b}=T,w=await(0,i.decipherPrivateKey)(r,S,T);await(0,n.cleanRememberMeStorageData)(r,m.getLocalStorage());const N="",R=(0,i.returnProperCryptoConfig)(r);S.setInstance({raw:C},N,R),r.dispatch((0,l.updateServerKey)(N));const L={type:"email_token"};r.dispatch((0,l.updateIsRemoteKeyActivated)(!1));const U=await(0,i.cipherTransactionWithNewMP)(r,g,S,I,null,!1),M=await(0,i.cipherPrivateKey)(S,w),k={timestamp:h,transactions:(0,i.formatTransaction)(U),updateVerification:L,sharingKeys:{publicKey:b,privateKey:M},authTicket:t},F=await(0,a.uploadDataForMasterPasswordChange)(r,A,k);if((0,a.isApiError)(F))throw(0,u.logChangeMasterPasswordError)(y,o.ChangeMasterPasswordError.UploadError),(0,i.revertOnError)(e,S,{currentPassword:C,serverKey:f}),new Error("2FA Disable Flow - Unable to uploadDataForMasterPasswordChange");O&&await g.getInstance().user.persistLocalKey(O),await(0,p.storeSessionCredentialForRecovery)(r,e.localStorageService)}catch(e){return r.dispatch((0,s.changeMPDone)()),{success:!1,error:{code:d.AuthenticationCode.UNKNOWN_ERROR}}}let E=!0;try{const e=await(0,a.confirmMasterPasswordChangeDone)(r,A,{});if((0,a.isApiError)(e))throw new Error("2FA Disable Flow - Failed to confirmMasterPasswordChangeDone");E=!1}catch(e){(0,u.logChangeMasterPasswordError)(y,o.ChangeMasterPasswordError.ConfirmationError)}return(0,u.logChangeMasterPasswordComplete)(y),r.dispatch((0,s.changeMPDone)()),{success:!0,logoutRequired:E}}},90143:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationTOTP1Handler=void 0;const o=r(23279);t.enableTwoFactorAuthenticationTOTP1Handler=async(e,t)=>await(0,o.completeTotpActivationHandler)(e,t)},44255:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationTOTP2Handler=void 0;const o=r(19935),n=r(72879),a=r(15876),i=r(16242),s=r(8153),c=r(1064),d=r(59610),l=r(97605),u=r(78),p=r(75897);t.enableTwoFactorAuthenticationTOTP2Handler=async(e,t,r)=>{const{timestamp:S,transactions:g,sharingKeys:m,serverKey:y}=r;if(!y)throw new Error("[2FA - Enable] - Empty server key");const{storeService:v,masterPasswordEncryptorService:A,sessionService:E,storageService:f,eventLoggerService:h}=e,_=v.getState();if((0,s.isRemoteKeyActivatedSelector)(_))return console.error("Enable 2FA unavailable: RK account"),{success:!1,error:{code:c.AuthenticationCode.UNKNOWN_ERROR}};const T=(0,s.userLoginSelector)(_);if(!T)return{success:!1,error:{code:c.AuthenticationCode.UNKNOWN_ERROR}};const I=e.localStorageService.getInstance();let C=null;await I.doesLocalKeyExist()&&(C=await I.getLocalKey());try{const r=await(0,i.deCipherAllTransactions)(E,A,g,!1),{publicKey:s}=m,c=await(0,i.decipherPrivateKey)(v,A,m);await(0,n.cleanRememberMeStorageData)(v,f.getLocalStorage());const u={type:"totp_login",serverKey:y},_=(0,i.returnProperCryptoConfig)(v),I=v.getUserSession().masterPassword;A.setInstance({raw:I},y,_);const P=await(0,i.cipherTransactionWithNewMP)(v,E,A,r,null,!1),D=await(0,i.cipherPrivateKey)(A,c),O={timestamp:S,transactions:(0,i.formatTransaction)(P),updateVerification:u,sharingKeys:{publicKey:s,privateKey:D},authTicket:t},b=await(0,a.uploadDataForMasterPasswordChange)(v,T,O);if((0,a.isApiError)(b))throw(0,d.logChangeMasterPasswordError)(h,o.ChangeMasterPasswordError.UploadError),new Error("2FA Enable Flow - Unable to uploadDataForMasterPasswordChange");v.dispatch((0,p.updateServerKey)(y)),C&&await E.getInstance().user.persistLocalKey(C),await(0,l.storeSessionCredentialForRecovery)(v,e.localStorageService)}catch(t){return(e=>{const{storeService:t,masterPasswordEncryptorService:r,remoteDataEncryptorService:o}=e,n=t.getState(),a=(0,s.isRemoteKeyActivatedSelector)(n)?o:r,c=t.getUserSession().masterPassword;(0,i.revertOnError)(e,a,{currentPassword:c,serverKey:""})})(e),v.dispatch((0,u.changeMPDone)()),{success:!1,error:{code:c.AuthenticationCode.UNKNOWN_ERROR}}}let P=!0;try{const e=await(0,a.confirmMasterPasswordChangeDone)(v,T,{});if((0,a.isApiError)(e))throw new Error("2FA Enable Flow - Failed to confirmMasterPasswordChangeDone");P=!1}catch(e){(0,d.logChangeMasterPasswordError)(h,o.ChangeMasterPasswordError.ConfirmationError)}return(0,d.logChangeMasterPasswordComplete)(h),v.dispatch((0,u.changeMPDone)()),{success:!0,logoutRequired:P}}},23279:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeTotpActivationHandler=void 0;const o=r(15876),n=r(1064),a=r(8153),i=r(70945);t.completeTotpActivationHandler=async(e,t)=>{const{storeService:r}=e,s=r.getState(),c=(0,a.userLoginSelector)(s);if(!c)return{success:!1,error:{code:n.AuthenticationCode.UNKNOWN_ERROR}};const d=await(0,i.completeTotpActivation)(r,c,{authTicket:t});return(0,o.isApiError)(d)?{success:!1,error:{code:d.code}}:{success:!0}}},38026:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.endTwoFactorAuthenticationHandler=void 0;const o=r(78);t.endTwoFactorAuthenticationHandler=async({sessionService:e,storeService:t})=>(t.dispatch((0,o.changeMPDone)()),await e.getInstance().user.attemptSync(),{success:!0})},72222:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.endTwoFactorAuthenticationHandler=t.disableTwoFactorAuthenticationTOTP1Handler=t.disableTwoFactorAuthenticationTOTP2Handler=t.refreshTwoFactorAuthenticationInfoHandler=void 0;var o=r(95651);Object.defineProperty(t,"refreshTwoFactorAuthenticationInfoHandler",{enumerable:!0,get:function(){return o.refreshTwoFactorAuthenticationInfoHandler}});var n=r(3933);Object.defineProperty(t,"disableTwoFactorAuthenticationTOTP2Handler",{enumerable:!0,get:function(){return n.disableTwoFactorAuthenticationTOTP2Handler}});var a=r(55063);Object.defineProperty(t,"disableTwoFactorAuthenticationTOTP1Handler",{enumerable:!0,get:function(){return a.disableTwoFactorAuthenticationTOTP1Handler}});var i=r(38026);Object.defineProperty(t,"endTwoFactorAuthenticationHandler",{enumerable:!0,get:function(){return i.endTwoFactorAuthenticationHandler}})},95651:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refreshTwoFactorAuthenticationInfoHandler=void 0;const o=r(8153),n=r(12888),a=r(10397),i=r(99355);t.refreshTwoFactorAuthenticationInfoHandler=async e=>{const{storeService:t,wsService:r}=e;try{const e=t.isAuthenticated,s=(0,o.userLoginSelector)(t.getState());if(t.dispatch((0,a.TwoFactorAuthStatusRequested)()),!s||!e)return t.dispatch((0,a.TwoFactorAuthStatusError)(n.TwoFactorAuthenticationErrorCode.UNKNOWN_ERROR)),{success:!1,error:{code:n.TwoFactorAuthenticationErrorCode.UNKNOWN_ERROR}};const c=await(0,i.refreshTwoFactorAuthenticationInfoService)(t,r);if(!1===c.success){const{code:e}=c.error;return t.dispatch((0,a.TwoFactorAuthStatusError)(e)),{success:!1,error:{code:e}}}return{success:!0}}catch(e){return t.dispatch((0,a.TwoFactorAuthStatusError)(n.TwoFactorAuthenticationErrorCode.UNKNOWN_ERROR)),{success:!1,error:{code:n.TwoFactorAuthenticationErrorCode.UNKNOWN_ERROR}}}}},79603:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationInfo$=void 0;const o=r(18948),n=r(3343),a=r(41094);t.twoFactorAuthenticationInfo$=()=>(0,o.pipe)((0,n.map)(a.twoFactorAuthenticationInfoSelector),(0,n.distinctUntilChanged)())},41094:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationInfoSelector=void 0;t.twoFactorAuthenticationInfoSelector=e=>e.authentication.twoFactorAuthentication},99355:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestTOTPActivationService=t.refreshTwoFactorAuthenticationInfoService=t.performTotpVerificationService=void 0;var o=r(99474);Object.defineProperty(t,"performTotpVerificationService",{enumerable:!0,get:function(){return o.performTotpVerificationService}});var n=r(93668);Object.defineProperty(t,"refreshTwoFactorAuthenticationInfoService",{enumerable:!0,get:function(){return n.refreshTwoFactorAuthenticationInfoService}});var a=r(76263);Object.defineProperty(t,"requestTOTPActivationService",{enumerable:!0,get:function(){return a.requestTOTPActivationService}})},99474:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performTotpVerificationService=void 0;const o=r(15876),n=r(73144),a=r(62550),i=r(1064),s=r(49914),c=r(8153);t.performTotpVerificationService=async(e,t,r=!1)=>{const{storeService:d}=e,l=d.getState(),u=(0,c.userLoginSelector)(l);if(!u)return{success:!1,error:{code:i.AuthenticationCode.UNKNOWN_ERROR}};try{const e=await(0,o.performTotpVerification)(d,{login:u,otp:t,activationFlow:r});if((0,o.isApiError)(e))return(0,s.handlePerformValidationError)(e,!0);const{authTicket:n}=e;return{success:!0,authTicket:n}}catch(e){return{success:!1,error:{code:(0,n.isCarbonError)(e)&&e.errorCode===a.HttpErrorCode.NETWORK_ERROR?i.AuthenticationCode.NETWORK_ERROR:i.AuthenticationCode.UNKNOWN_ERROR}}}}},93668:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refreshTwoFactorAuthenticationInfoService=void 0;const o=r(15876),n=r(8153),a=r(12888),i=r(90301),s=r(38652),c=r(88478),d=r(10397),l={email_token:i.TwoFactorAuthenticationType.EMAIL_TOKEN,totp_login:i.TwoFactorAuthenticationType.LOGIN,totp_device_registration:i.TwoFactorAuthenticationType.DEVICE_REGISTRATION,sso:i.TwoFactorAuthenticationType.SSO};t.refreshTwoFactorAuthenticationInfoService=async(e,t)=>{try{const r=(0,n.userLoginSelector)(e.getState()),u=await(0,o.getTwoFactorAuthenticationStatus)(e,r);if((0,o.isApiError)(u))return{success:!1,error:{code:a.TwoFactorAuthenticationErrorCode.UNKNOWN_ERROR}};const p=l[u.type],S=s.TwoFactorAuthenticationEnabled.includes(p);let g=!1;const m=await t.premium.status({login:(0,n.userLoginSelector)(e.getState()),uki:(0,c.ukiSelector)(e.getState()),spaces:!0}),{spaces:y}=m;y&&(g=y.some((e=>{const{info:{twoFAEnforced:t}}=e;return i.ENFORCE_TWO_FACTOR_AUTHENTICATION_ENABLED_VALUES.includes(t)})));const v=!S&&g,A={...u,isTwoFactorAuthenticationEnabled:S,isTwoFactorAuthenticationEnforced:g,shouldEnforceTwoFactorAuthentication:v,type:p};return e.dispatch((0,d.TwoFactorAuthStatusUpdated)(A)),{success:!0,info:A}}catch(e){return{success:!1,error:{code:a.TwoFactorAuthenticationErrorCode.UNKNOWN_ERROR}}}}},76263:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestTOTPActivationService=void 0;const o=r(15876),n=r(73144),a=r(62550),i=r(1064),s=r(8153);t.requestTOTPActivationService=async(e,{phoneNumber:t,country:r})=>{try{const{storeService:n}=e,a=n.getState(),c=(0,s.userLoginSelector)(a);if(!c)return{success:!1,error:{code:i.AuthenticationCode.UNKNOWN_ERROR}};const d=await(0,o.requestTOTPActivation)(n,c,{phoneNumber:t,country:r});return(0,o.isApiError)(d)?{success:!1,error:{code:d.code}}:{success:!0,...d}}catch(e){return{success:!1,error:{code:(0,n.isCarbonError)(e)&&e.errorCode===a.HttpErrorCode.NETWORK_ERROR?i.AuthenticationCode.NETWORK_ERROR:i.AuthenticationCode.UNKNOWN_ERROR}}}}},90301:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ENFORCE_TWO_FACTOR_AUTHENTICATION_ENABLED_VALUES=t.TwoFactorAuthenticationInfoRequestStatus=t.TwoFactorAuthenticationType=void 0,function(e){e.EMAIL_TOKEN="email_token",e.DEVICE_REGISTRATION="totp_device_registration",e.LOGIN="totp_login",e.SSO="sso"}(t.TwoFactorAuthenticationType||(t.TwoFactorAuthenticationType={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PENDING=1]="PENDING",e[e.ERROR=2]="ERROR",e[e.READY=3]="READY"}(t.TwoFactorAuthenticationInfoRequestStatus||(t.TwoFactorAuthenticationInfoRequestStatus={})),function(e){e.LOGIN="login",e.NEW_DEVICE="newDevice",e.DISABLED="disabled"}(r||(r={})),t.ENFORCE_TWO_FACTOR_AUTHENTICATION_ENABLED_VALUES=[r.LOGIN,r.NEW_DEVICE]},87789:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(19027),n=r(98371),a=r(75965),i=r(29349),s=r(25090),c=r(74345),d=r(88478),l=r(97109),u=r(40279),p=r(58039),S=r(72546),g=r(95198);t.config={commands:{enableWebAuthnAuthentication:{handler:p.enableWebAuthnAuthentication},initEnableWebAuthnAuthentication:{handler:u.initEnableWebAuthnAuthentication},initRegisterWebAuthnAuthenticator:{handler:o.initRegisterWebAuthnAuthenticator},registerWebAuthnAuthenticator:{handler:n.registerWebAuthnAuthenticator},refreshWebAuthnAuthenticators:{handler:i.refreshWebAuthnAuthenticators},refreshAvailableWebAuthnAuthenticators:{handler:a.refreshAvailableWebAuthnAuthenticators},initOpenSessionWithWebAuthnAuthenticator:{handler:s.initOpenSessionWithWebAuthnAuthenticator},openSessionWithWebAuthnAuthenticator:{handler:c.openSessionWithWebAuthnAuthenticator},disableWebAuthnAuthentication:{handler:S.disableWebAuthnAuthentication},removeWebAuthnAuthenticator:{handler:g.removeWebAuthnAuthenticator}},queries:{getWebAuthnAuthenticators:{selector:d.authenticatorsSelector},getWebAuthnAuthenticationOptedIn:{selector:d.webAuthnAuthenticationOptedInSelector}},liveQueries:{liveWebAuthnAuthenticators:{operator:l.webAuthnAuthenticators$},liveWebAuthnAuthenticationOptedIn:{operator:l.webAuthnAuthenticationOptedIn$}}}},13645:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WebAuthnCallTypes=t.RegisterWebAuthnAuthenticatorError=t.OpenSessionWithWebAuthnAuthenticatorError=t.InitRegisterWebAuthnAuthenticatorError=t.InitEnableWebAuthnAuthenticationError=t.EnableWebAuthnAuthenticationError=t.DisableWebAuthnAuthenticationError=void 0;var o=r(544);Object.defineProperty(t,"DisableWebAuthnAuthenticationError",{enumerable:!0,get:function(){return o.DisableWebAuthnAuthenticationError}}),Object.defineProperty(t,"EnableWebAuthnAuthenticationError",{enumerable:!0,get:function(){return o.EnableWebAuthnAuthenticationError}}),Object.defineProperty(t,"InitEnableWebAuthnAuthenticationError",{enumerable:!0,get:function(){return o.InitEnableWebAuthnAuthenticationError}}),Object.defineProperty(t,"InitRegisterWebAuthnAuthenticatorError",{enumerable:!0,get:function(){return o.InitRegisterWebAuthnAuthenticatorError}}),Object.defineProperty(t,"OpenSessionWithWebAuthnAuthenticatorError",{enumerable:!0,get:function(){return o.OpenSessionWithWebAuthnAuthenticatorError}}),Object.defineProperty(t,"RegisterWebAuthnAuthenticatorError",{enumerable:!0,get:function(){return o.RegisterWebAuthnAuthenticatorError}}),Object.defineProperty(t,"WebAuthnCallTypes",{enumerable:!0,get:function(){return o.WebAuthnCallTypes}})},14961:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PUBKEY_ALGORITHM_RSA_PKCS1256=t.PUBKEY_ALGORITHM_ECDSA256=void 0,t.PUBKEY_ALGORITHM_ECDSA256=-7,t.PUBKEY_ALGORITHM_RSA_PKCS1256=-257},52469:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildAssertionPublicKeyOptions=t.buildAttestationPublicKeyOptions=void 0;const o=r(14961);t.buildAttestationPublicKeyOptions=function(e,t,r,n,a,i){return{rp:{id:e,name:"Dashlane"},user:{id:t,name:r,displayName:r},challenge:n,timeout:a,pubKeyCredParams:[{alg:o.PUBKEY_ALGORITHM_ECDSA256,type:"public-key"},{alg:o.PUBKEY_ALGORITHM_RSA_PKCS1256,type:"public-key"}],excludeCredentials:i,authenticatorSelection:{userVerification:"discouraged"}}},t.buildAssertionPublicKeyOptions=function(e,t,r,o){return{rpId:e,challenge:t,timeout:r,allowCredentials:o,userVerification:"discouraged"}}},97109:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.webAuthnAuthenticationOptedIn$=t.webAuthnAuthenticators$=void 0;const o=r(18948),n=r(3343),a=r(88478);t.webAuthnAuthenticators$=()=>(0,o.pipe)((0,n.map)(a.authenticatorsSelector),(0,n.distinctUntilChanged)());t.webAuthnAuthenticationOptedIn$=()=>(0,o.pipe)((0,n.map)(a.webAuthnAuthenticationOptedInSelector),(0,n.distinctUntilChanged)())},72546:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableWebAuthnAuthentication=void 0;const o=r(8153),n=r(544),a=r(34032);t.disableWebAuthnAuthentication=async function(e){const{webAuthnAuthenticationService:t,storeService:r}=e,i=(0,o.userLoginSelector)(r.getState());if(!i)return{success:!1,error:{code:n.DisableWebAuthnAuthenticationError.MISSING_LOGIN}};try{return await t.deactivate(i)?((0,a.sendUserSettingsLog)(e),{success:!0}):{success:!1,error:{code:n.DisableWebAuthnAuthenticationError.WEBAUTHN_SERVICE_DEACTIVATE_FAILED}}}catch(e){return{success:!1,error:{code:n.DisableWebAuthnAuthenticationError.WEBAUTHN_SERVICE_DEACTIVATE_FAILED}}}}},58039:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enableWebAuthnAuthentication=void 0;const o=r(544),n=r(88478),a=r(8153),i=r(34032),s={UNKNOWN_ERROR:{success:!1,error:{code:o.EnableWebAuthnAuthenticationError.UNKNOWN_ERROR}},WEBAUTHN_SERVICE_INIT_FAILED:{success:!1,error:{code:o.EnableWebAuthnAuthenticationError.WEBAUTHN_SERVICE_INIT_FAILED}},USER_HAS_OTP:{success:!1,error:{code:o.EnableWebAuthnAuthenticationError.USER_HAS_OTP}}};t.enableWebAuthnAuthentication=async function(e,t){const{webAuthnAuthenticationService:r,storeService:c}=e,{authenticationType:d,credential:l,isRoaming:u}=t,p=(0,a.userLoginSelector)(c.getState());if((0,n.hasOtpTypeSelector)(c.getState()))return s.USER_HAS_OTP;try{switch(d){case o.WebAuthnCallTypes.CREATE:{const t=await async function(e,t,r,o){const n=t.response,a={authenticationType:"webauthn.create",name:e,isRoaming:r,credential:{id:t.id,type:t.type,rawId:t.rawId,response:n}};return await o.initialize(a)?{success:!0}:s.WEBAUTHN_SERVICE_INIT_FAILED}(p,l,u,r);return t.success&&(0,i.sendUserSettingsLog)(e),t}case o.WebAuthnCallTypes.GET:{const t=await async function(e,t){const r=e.response,o={authenticationType:"webauthn.get",credential:{id:e.id,type:e.type,rawId:e.rawId,response:r}};return await t.initialize(o)?{success:!0}:s.WEBAUTHN_SERVICE_INIT_FAILED}(l,r);return t.success&&(0,i.sendUserSettingsLog)(e),t}default:return s.UNKNOWN_ERROR}}catch(e){return s.UNKNOWN_ERROR}}},40279:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initEnableWebAuthnAuthentication=void 0;const o=r(28354),n=r(15876),a=r(544),i=r(8153),s=r(88478),c=r(8949),d=r(29349),l=r(52469);t.initEnableWebAuthnAuthentication=async function(e,t){const{storeService:r}=e,{relyingPartyId:u}=t,p=r.getState(),S=(0,i.userLoginSelector)(r.getState());let g=(0,s.webAuthnUserIdSelector)(p);g||(g=(0,o.v4)(),r.dispatch((0,c.webAuthnUserIdUpdated)(g)));let m=(0,s.authenticatorsAsCredentialSelector)(p);m&&0!==m.length||(await(0,d.refreshWebAuthnAuthenticators)(e),m=(0,s.authenticatorsAsCredentialSelector)(r.getState()));const y=(null==m?void 0:m.length)>0?a.WebAuthnCallTypes.GET:a.WebAuthnCallTypes.CREATE;try{const e=await(0,n.requestWebauthnRegistration)(r,S);if((0,n.isApiError)(e))return{success:!1,error:{code:a.InitEnableWebAuthnAuthenticationError.UNKNOWN_ERROR}};const{challenge:t,expirationDateUnix:o}=e;let i;return i=y===a.WebAuthnCallTypes.CREATE?(0,l.buildAttestationPublicKeyOptions)(u,g,S,t,o,m):(0,l.buildAssertionPublicKeyOptions)(u,t,o,m),{success:!0,response:{publicKeyOptions:i,webAuthnType:y}}}catch(e){return{success:!1,error:{code:a.InitEnableWebAuthnAuthenticationError.UNKNOWN_ERROR}}}}},25090:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initOpenSessionWithWebAuthnAuthenticator=void 0;const o=r(544),n=r(15876),a=r(75965),i=r(52469);t.initOpenSessionWithWebAuthnAuthenticator=async function(e,t){const{relyingPartyId:r,login:s}=t,{storeService:c,webAuthnAuthenticationService:d}=e;try{if(!await d.shouldTrigger(s))return{success:!1,error:{code:o.InitOpenSessionWithWebAuthnAuthenticatorError.CANNOT_TRIGGER_WEBAUTHN_AUTHENTICATION}};const t=await(0,a.refreshAvailableWebAuthnAuthenticators)(e,{login:s});if(!t.success)return{success:!1,error:{code:o.InitOpenSessionWithWebAuthnAuthenticatorError.UNAVAILABLE_AUTHENTICATORS}};const l=[],u=[];t.response.authenticators.forEach((e=>{l.push({id:e.credentialId,type:"public-key"}),u.push({credentialId:e.credentialId,isRoaming:e.isRoaming})}));const p=await(0,n.requestWebauthnOpenSession)(c,s);if((0,n.isApiError)(p))return{success:!1,error:{code:o.InitOpenSessionWithWebAuthnAuthenticatorError.UNKNOWN_ERROR}};const{challenge:S,expirationDateUnix:g}=p;return{success:!0,response:{publicKeyOptions:(0,i.buildAssertionPublicKeyOptions)(r,S,g,l),authenticatorsInfo:u}}}catch(e){return{success:!1,error:{code:o.InitOpenSessionWithWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}}},19027:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initRegisterWebAuthnAuthenticator=void 0;const o=r(28354),n=r(544),a=r(15876),i=r(8949),s=r(8153),c=r(88478),d=r(52469),l=r(29349);t.initRegisterWebAuthnAuthenticator=async function(e,t){const{storeService:r}=e,{relyingPartyId:u}=t,p=(0,s.userLoginSelector)(r.getState());let S=(0,c.webAuthnUserIdSelector)(r.getState());S||(S=(0,o.v4)(),r.dispatch((0,i.webAuthnUserIdUpdated)(S)));let g=(0,c.authenticatorsAsCredentialSelector)(r.getState());g&&0!==g.length||(await(0,l.refreshWebAuthnAuthenticators)(e),g=(0,c.authenticatorsAsCredentialSelector)(r.getState()));try{const e=await(0,a.requestWebauthnRegistration)(r,p);if((0,a.isApiError)(e))return{success:!1,error:{code:n.InitRegisterWebAuthnAuthenticatorError.UNKNOWN_ERROR}};const{challenge:t,expirationDateUnix:o}=e;return{success:!0,response:{publicKeyOptions:(0,d.buildAttestationPublicKeyOptions)(u,S,p,t,o,g)}}}catch(e){return{success:!1,error:{code:n.InitRegisterWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}}},74345:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.openSessionWithWebAuthnAuthenticator=void 0;const o=r(544),n=r(33441);t.openSessionWithWebAuthnAuthenticator=async function(e,t){const{credential:r,login:a,isRoamingAuthenticator:i}=t,{storeService:s,webAuthnAuthenticationService:c}=e;try{const t={authenticationType:"webauthn.get",credential:{id:r.id,type:r.type,rawId:r.rawId,response:r.response}};await c.process(a,t);const d=s.getUserSession().masterPassword;if(!d)return{success:!1,error:{code:o.OpenSessionWithWebAuthnAuthenticatorError.MP_MISSING_IN_SESSION_ERROR}};const l=(0,n.makeLoginController)(e);return await l.openSessionWithMasterPassword(a,d,{triggeredByRememberMeType:"webauthn",isWebAuthnAuthenticatorRoaming:i}),{success:!0}}catch(e){return{success:!1,error:{code:o.OpenSessionWithWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}}},75965:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refreshAvailableWebAuthnAuthenticators=void 0;const o=r(544),n=r(88478),a=r(15876),i=r(8949);t.refreshAvailableWebAuthnAuthenticators=async function(e,t){const{storeService:r}=e,{login:s}=t;if(!(0,n.sessionKeysSelector)(r.getState()))return{success:!1,error:{code:o.RefreshAvailableWebAuthnAuthenticatorsError.MISSING_SESSION_KEYS_IN_STORE}};try{const e=await(0,a.getAvailableWebAuthnAuthenticators)(r,s);if((0,a.isApiError)(e))return{success:!1,error:{code:o.RefreshAvailableWebAuthnAuthenticatorsError.UNKNOWN_ERROR}};const t=e.authenticators.map((e=>({...e,canOpenSession:!0})));return r.dispatch((0,i.webAuthnAvailableAuthenticatorsListUpdated)(t)),{success:!0,response:{authenticators:t}}}catch(e){return{success:!1,error:{code:o.RefreshAvailableWebAuthnAuthenticatorsError.UNKNOWN_ERROR}}}}},29349:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refreshWebAuthnAuthenticators=void 0;const o=r(544),n=r(15876),a=r(8153),i=r(8949);t.refreshWebAuthnAuthenticators=async function(e){const{storeService:t}=e,r=(0,a.userLoginSelector)(t.getState());try{const e=await(0,n.getWebAuthnAuthenticators)(t,r);if((0,n.isApiError)(e))return{success:!1,error:{code:o.RefreshWebAuthnAuthenticatorsError.UNKNOWN_ERROR}};const a=e.authenticators.map((e=>({...e,canOpenSession:!1})));return t.dispatch((0,i.webAuthnAuthenticatorsListUpdated)(a)),{success:!0,response:{authenticators:a}}}catch(e){return{success:!1,error:{code:o.RefreshWebAuthnAuthenticatorsError.UNKNOWN_ERROR}}}}},98371:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registerWebAuthnAuthenticator=void 0;const o=r(544),n=r(8153),a=r(15876),i=r(88478),s=r(8949);t.registerWebAuthnAuthenticator=async function(e,t){const{credential:r,isRoaming:c}=t,{storeService:d,webAuthnAuthenticationService:l}=e,u=d.getState(),p=(0,n.userLoginSelector)(u);if((0,i.hasOtpTypeSelector)(u))return{success:!1,error:{code:o.RegisterWebAuthnAuthenticatorError.USER_HAS_OTP}};try{const e={authenticationType:"webauthn.create",name:p,isRoaming:c,credential:{id:r.id,type:r.type,rawId:r.rawId,response:r.response}};if((0,i.authenticatorsSelector)(u).length){const t=await(0,a.completeWebAuthnAuthenticatorRegistration)(d,p,{authenticator:e});if((0,a.isApiError)(t))return{success:!1,error:{code:o.RegisterWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}else await l.initialize(e);return d.dispatch((0,s.webAuthnAuthenticatorAdded)({name:e.name,isRoaming:e.isRoaming,credentialId:e.credential.id,canOpenSession:!0})),{success:!0}}catch(e){return{success:!1,error:{code:o.RegisterWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}}},95198:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeWebAuthnAuthenticator=void 0;const o=r(8153),n=r(15876),a=r(544),i=r(88478),s=r(72546),c=r(8949);async function d(e,t,r){const o=await(0,n.deactivateWebAuthnAuthenticator)(e,t,{credentialId:r});return(0,n.isApiError)(o)?{success:!1,error:{code:a.RemoveWebAuthnAuthenticatorError.CANNOT_REMOVE_WEBAUTHN_AUTHENTICATOR}}:{success:!0}}t.removeWebAuthnAuthenticator=async function(e,t){const{credentialId:r}=t,{storeService:n}=e,l=n.getState(),u=(0,o.userLoginSelector)(l),p=(0,i.webAuthnAuthenticationOptedInSelector)(l),S=(0,i.authenticatorsSelector)(l);try{let t=null;return p&&1===S.length?(await(0,s.disableWebAuthnAuthentication)(e),t=await d(n,u,r)):t=await d(n,u,r),t.success&&n.dispatch((0,c.webAuthnAuthenticatorRemoved)(r)),t}catch(e){return{success:!1,error:{code:a.RemoveWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}}},544:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveWebAuthnAuthenticatorError=t.DisableWebAuthnAuthenticationError=t.OpenSessionWithWebAuthnAuthenticatorError=t.InitOpenSessionWithWebAuthnAuthenticatorError=t.RefreshAvailableWebAuthnAuthenticatorsError=t.RefreshWebAuthnAuthenticatorsError=t.RegisterWebAuthnAuthenticatorError=t.InitRegisterWebAuthnAuthenticatorError=t.EnableWebAuthnAuthenticationError=t.InitEnableWebAuthnAuthenticationError=t.WebAuthnCallTypes=void 0,function(e){e.CREATE="webauthn.create",e.GET="webauthn.get"}(t.WebAuthnCallTypes||(t.WebAuthnCallTypes={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(t.InitEnableWebAuthnAuthenticationError||(t.InitEnableWebAuthnAuthenticationError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.USER_HAS_OTP="USER_HAS_OTP",e.WEBAUTHN_SERVICE_INIT_FAILED="WEBAUTHN_SERVICE_INIT_FAILED"}(t.EnableWebAuthnAuthenticationError||(t.EnableWebAuthnAuthenticationError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(t.InitRegisterWebAuthnAuthenticatorError||(t.InitRegisterWebAuthnAuthenticatorError={})),function(e){e.USER_HAS_OTP="USER_HAS_OTP",e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(t.RegisterWebAuthnAuthenticatorError||(t.RegisterWebAuthnAuthenticatorError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(t.RefreshWebAuthnAuthenticatorsError||(t.RefreshWebAuthnAuthenticatorsError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.MISSING_SESSION_KEYS_IN_STORE="MISSING_SESSION_KEYS_IN_STORE"}(t.RefreshAvailableWebAuthnAuthenticatorsError||(t.RefreshAvailableWebAuthnAuthenticatorsError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.UNAVAILABLE_AUTHENTICATORS="UNAVAILABLE_AUTHENTICATORS",e.CANNOT_TRIGGER_WEBAUTHN_AUTHENTICATION="CANNOT_TRIGGER_WEBAUTHN_AUTHENTICATION"}(t.InitOpenSessionWithWebAuthnAuthenticatorError||(t.InitOpenSessionWithWebAuthnAuthenticatorError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.MP_MISSING_IN_SESSION_ERROR="MP_MISSING_IN_SESSION_ERROR"}(t.OpenSessionWithWebAuthnAuthenticatorError||(t.OpenSessionWithWebAuthnAuthenticatorError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.WEBAUTHN_SERVICE_DEACTIVATE_FAILED="WEBAUTHN_SERVICE_DEACTIVATE_FAILED",e.MISSING_LOGIN="MISSING_LOGIN"}(t.DisableWebAuthnAuthenticationError||(t.DisableWebAuthnAuthenticationError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.CANNOT_REMOVE_WEBAUTHN_AUTHENTICATOR="CANNOT_REMOVE_WEBAUTHN_AUTHENTICATOR"}(t.RemoveWebAuthnAuthenticatorError||(t.RemoveWebAuthnAuthenticatorError={}))},80875:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(96968);t.bootstrap=e=>{e.register(o.config)}},22029:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.getLocalAccounts=t.appKeysSelector=t.sessionKeysSelector=t.ukiSelector=t.deviceKeysSelector=t.authenticationReducer=void 0;var o=r(60119);Object.defineProperty(t,"authenticationReducer",{enumerable:!0,get:function(){return o.authenticationReducer}});var n=r(88478);Object.defineProperty(t,"deviceKeysSelector",{enumerable:!0,get:function(){return n.deviceKeysSelector}}),Object.defineProperty(t,"ukiSelector",{enumerable:!0,get:function(){return n.ukiSelector}}),Object.defineProperty(t,"sessionKeysSelector",{enumerable:!0,get:function(){return n.sessionKeysSelector}}),Object.defineProperty(t,"appKeysSelector",{enumerable:!0,get:function(){return n.appKeysSelector}});var a=r(33722);Object.defineProperty(t,"getLocalAccounts",{enumerable:!0,get:function(){return a.getLocalAccounts}});var i=r(80875);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return i.bootstrap}})},65021:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reactivationStatus$=void 0;const o=r(18948),n=r(3343),a=r(88478);t.reactivationStatus$=()=>(0,o.pipe)((0,n.map)(a.reactivationStatusSelector),(0,n.distinctUntilChanged)())},88478:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reactivationStatusSelector=t.webAuthnAuthenticationOptedInSelector=t.rememberMeTypeSelector=t.authenticatorsAsCredentialSelector=t.availableAuthenticatorsSelector=t.authenticatorsSelector=t.webAuthnUserIdSelector=t.webAuthnAuthenticationSelector=t.platformInfoSelector=t.hasOtpTypeSelector=t.otpTypeSelector=t.userAuthenticationDataSelector=t.localUsersAuthenticationDataSelector=t.localAccountsListSelector=t.getUserDeviceWasRegisteredWithDeviceKeysSelector=t.sessionKeysSelector=t.getDeviceAccessKeySelector=t.getDeviceIdSelector=t.deviceKeysSelector=t.ukiSelector=t.dashlaneServerDeltaTimestampSelector=t.appKeysSelector=void 0;const o=r(24387),n=r(54516),a=r(59944);t.appKeysSelector=e=>e.userSession.sdkAuthentication.appKeys;t.dashlaneServerDeltaTimestampSelector=e=>e.userSession.sdkAuthentication.dashlaneServerDeltaTimestamp;t.ukiSelector=e=>{const t=e.userSession.localSettings.uki;return t||(e.authentication.currentUser&&e.authentication.currentUser.deviceKeys&&(0,o.convertDeviceKeysToUki)(e.authentication.currentUser.deviceKeys)||null)};t.deviceKeysSelector=e=>{if(e.authentication.currentUser&&e.authentication.currentUser.deviceKeys)return e.authentication.currentUser.deviceKeys;const t=e.userSession.localSettings.uki;return(0,o.convertUkiToDeviceKeys)(t)};t.getDeviceIdSelector=(e,t)=>{const r=e.authentication.localUsers[t];return r&&r.deviceAccessKey?r.deviceAccessKey:(0,n.getCommonAppSetting)("deviceId")||null};t.getDeviceAccessKeySelector=(e,r)=>(0,t.getDeviceIdSelector)(e,r);t.sessionKeysSelector=({userSession:{session:e}})=>Boolean(e.sessionKeys&&e.sessionKeys.accessKey&&e.sessionKeys.secretKey)?{...e.sessionKeys}:null;t.getUserDeviceWasRegisteredWithDeviceKeysSelector=(e,t)=>{const r=e.authentication.localUsers[t];return!!r&&!r.deviceRegisteredWithLegacyKey};t.localAccountsListSelector=e=>e.authentication.localAccounts.accountsList;t.localUsersAuthenticationDataSelector=e=>e.authentication.localUsers;t.userAuthenticationDataSelector=e=>e.authentication.currentUser;t.otpTypeSelector=e=>{var t;return(null===(t=e.userSession)||void 0===t?void 0:t.account)?e.userSession.account.otpType:null};t.hasOtpTypeSelector=e=>{const r=(0,t.otpTypeSelector)(e);return null!==r&&r!==a.OtpType.NO_OTP};t.platformInfoSelector=e=>e.device.platform.info;t.webAuthnAuthenticationSelector=e=>e.authentication.webAuthnAuthentication;t.webAuthnUserIdSelector=e=>e.authentication.webAuthnAuthentication.webAuthnUserId;t.authenticatorsSelector=e=>e.authentication.webAuthnAuthentication.authenticators;t.availableAuthenticatorsSelector=e=>e.authentication.webAuthnAuthentication.authenticators.filter((e=>e.canOpenSession));t.authenticatorsAsCredentialSelector=e=>(0,t.authenticatorsSelector)(e).map((e=>({id:e.credentialId,type:"public-key"})));t.rememberMeTypeSelector=e=>e.authentication.currentUser.rememberMeType;t.webAuthnAuthenticationOptedInSelector=e=>"webauthn"===(0,t.rememberMeTypeSelector)(e);t.reactivationStatusSelector=e=>e.authentication.localAccounts.reactivationStatus},89322:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(7585);t.setupSubscriptions=async function(e,t){e.sessionOpened.on((()=>{(0,o.loadRememberMeTypeToStore)(t)}))}},37328:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(22261),n=r(11264);t.config={commands:{saveUserAutofillCorrections:{handler:n.saveUserAutofillCorrectionsHandler},saveUserAutofillCorrectionsForMaverick:{handler:n.saveUserAutofillCorrectionsForMaverickHandler}},queries:{getUserAutofillCorrections:{selector:o.userAutofillCorrectionsSelector},getUserAutofillCorrectionsForMaverick:{selector:o.userAutofillCorrectionsForMaverickSelector}},liveQueries:{}}},26883:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isDashlaneDisabledPermanently=t.isArrayOfUserAutofillCorrections=t.isArrayOfLegacyMaverickUserDefinedRules=void 0;var o=r(73773);Object.defineProperty(t,"isArrayOfLegacyMaverickUserDefinedRules",{enumerable:!0,get:function(){return o.isArrayOfLegacyMaverickUserDefinedRules}}),Object.defineProperty(t,"isArrayOfUserAutofillCorrections",{enumerable:!0,get:function(){return o.isArrayOfUserAutofillCorrections}}),Object.defineProperty(t,"isDashlaneDisabledPermanently",{enumerable:!0,get:function(){return o.isDashlaneDisabledPermanently}})},72242:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(37328);t.bootstrap=e=>{e.register(o.config)}},69815:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0,n(r(73773),t);var a=r(72242);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}})},11264:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.saveUserAutofillCorrectionsForMaverickHandler=t.saveUserAutofillCorrectionsHandler=void 0;const o=r(59125),n=r(11502),a=r(69035),i=r(73773);t.saveUserAutofillCorrectionsHandler=async function(e,t){if(!(0,i.isArrayOfUserAutofillCorrections)(t))return(0,o.sendExceptionLog)({error:new Error("Unable to save user defined rules: unexpected format")}),{success:!1};const r={userAutofillCorrections:t,maverickRules:e.storeService.getState().userSession.userAutofillCorrections.maverickRules};try{return await e.localStorageService.getInstance().storeUserAutofillCorrections(r),e.storeService.dispatch((0,n.addNewAutofillCorrection)(r)),{success:!0}}catch(e){return(0,o.sendExceptionLog)({error:e}),{success:!1}}},t.saveUserAutofillCorrectionsForMaverickHandler=async function(e,t){if(!(0,i.isArrayOfLegacyMaverickUserDefinedRules)(t))return(0,o.sendExceptionLog)({error:new Error("Unable to save user defined rules: unexpected format")}),{success:!1};const r=e.storeService.getState().userSession.userAutofillCorrections.userAutofillCorrections,s={userAutofillCorrections:(c=r,d=t,[...c,...d.reduce(((e,t)=>((e=>c.some((t=>t.domain===e.domain&&t.fieldIdentifier===e.hashId)))(t)||e.push((0,a.convertMaverickToUserAutofillCorrection)(t)),e)),[])]),maverickRules:t};var c,d;try{return await e.localStorageService.getInstance().storeUserAutofillCorrections(s),e.storeService.dispatch((0,n.addNewAutofillCorrection)(s)),{success:!0}}catch(e){return(0,o.sendExceptionLog)({error:e}),{success:!1}}}},22261:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userAutofillCorrectionsForMaverickSelector=t.userAutofillCorrectionsSelector=void 0;t.userAutofillCorrectionsSelector=e=>e.userSession.userAutofillCorrections.userAutofillCorrections;t.userAutofillCorrectionsForMaverickSelector=e=>e.userSession.userAutofillCorrections.maverickRules},73773:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isDashlaneDisabledPermanently=t.isArrayOfUserAutofillCorrections=t.isArrayOfLegacyMaverickUserDefinedRules=t.isLegacyMaverickUserDefinedRule=void 0;const o=r(43609);t.isLegacyMaverickUserDefinedRule=e=>"object"==typeof e&&null!==e&&(0,o.hasProperty)(e,"ruleId")&&(0,o.hasProperty)(e,"hashId")&&(0,o.hasProperty)(e,"domain")&&(0,o.hasProperty)(e,"newSignification");t.isArrayOfLegacyMaverickUserDefinedRules=e=>e instanceof Array&&!e.find((e=>!(0,t.isLegacyMaverickUserDefinedRule)(e)));t.isArrayOfUserAutofillCorrections=e=>e instanceof Array&&!e.find((e=>{return!("object"==typeof(t=e)&&null!==t&&(0,o.hasProperty)(t,"id")&&(0,o.hasProperty)(t,"fieldIdentifier")&&(0,o.hasProperty)(t,"domain"));var t}));t.isDashlaneDisabledPermanently=e=>"none"===e.correctedDataSource},73737:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(35017),t),n(r(19503),t),n(r(53893),t)},35017:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AutofillEngineSignificationToDataSource=t.AutofillEngineSignification=void 0;const o=r(53893);var n;!function(e){e.UserDefinedCredentialEmail="userDefinedCredentialEmail",e.UserDefinedCredentialLogin="userDefinedCredentialLogin",e.UserDefinedCredentialLoginSecondary="userDefinedCredentialLoginSecondary",e.PasswordUnknown="password_unknown",e.CreditCardNumber="creditCardNumber",e.MonthCreditCard="monthCreditCard",e.YearCreditCard="yearCreditCard",e.SecurityCodeCreditCard="securityCodeCreditCard",e.CreditCardOwner="creditCardOwner",e.CreditCardOwnerFirstName="creditCardOwner_firstname",e.CreditCardOwnerLastName="creditCardOwner_lastname",e.BankName="bankName",e.FullName="fullname",e.FirstName="firstname",e.MiddleName="middlename",e.MiddleNameInitial="middlenameinitial",e.LastName="lastname",e.Age="age",e.BirthDay="birthday",e.BirthPlace="birthdayPlace",e.EmailUnkown="email_unknown",e.PhoneNumber="phoneNumber",e.PhoneNumberExtension="phoneNumberExtension",e.PhoneCountryCode="phoneCountryCode",e.SocialSecurityNumber="socialSecurityNumber",e.FiscalNumber="fiscalNumber",e.Company="company",e.Job="job",e.Website="website",e.Address="address",e.ZipCode="zipCode",e.City="city",e.Country="country",e.Door="door",e.Floor="floor",e.StreetNumber="streetNumber",e.StreetTitle="streetTitle",e.StreetName="streetName",e.State="state",e.StateCode="stateCode",e.PassportNumber="passportNumber",e.PassportFirstName="passportFirstname",e.PassportLastName="passportLastname",e.PassportFullName="passportFullname",e.PassportDateOfBirth="passportDateOfBirth",e.PassportSex="passportSex",e.PassportDeliveryDate="passportDeliveryDate",e.PassportExpireDate="passportExpireDate",e.PassportDeliveryPlace="passportDeliveryPlace",e.PassportNationality="passportNationality",e.IdCardNumber="idCardNumber",e.IdCardFirstName="idCardFirstname",e.IdCardLastName="idCardLastname",e.IdCardFullName="idCardFullname",e.IdCardDateOfBirth="idCardDateOfBirth",e.IdCardSex="idCardSex",e.IdCardDeliveryDate="idCardDeliveryDate",e.IdCardExpireDate="idCardExpireDate",e.IdCardNationality="idCardNationality",e.DriverLicenseNumber="driverLicenceNumber",e.DriverLicenseFirstName="driverLicenceFirstname",e.DriverLicenseLastName="driverLicenceLastname",e.DriverLicenseFullName="driverLicenceFullname",e.DriverLicenseSex="driverLicenceSex",e.DriverLicenseDeliveryDate="driverLicenceDeliveryDate",e.DriverLicenseExpireDate="driverLicenceExpireDate",e.DriverLicenseState="driverLicenceState",e.BankDetailsAccountNumber="bankDetailsAccountNumber",e.BankDetailsOwner="bankDetailsOwner",e.BankDetailsBank="bankDetailsBank",e.BankDetailsIBAN="bankDetailsIBAN",e.Nothing="nothing"}(n=t.AutofillEngineSignification||(t.AutofillEngineSignification={})),t.AutofillEngineSignificationToDataSource={[n.UserDefinedCredentialEmail]:{[o.VaultSourceType.Credential]:"email"},[n.UserDefinedCredentialLogin]:{[o.VaultSourceType.Credential]:"login"},[n.UserDefinedCredentialLoginSecondary]:{[o.VaultSourceType.Credential]:"secondaryLogin"},[n.PasswordUnknown]:{[o.VaultSourceType.Credential]:"password"},[n.CreditCardNumber]:{[o.VaultSourceType.PaymentCard]:"cardNumber"},[n.MonthCreditCard]:{[o.VaultSourceType.PaymentCard]:"expireMonth"},[n.YearCreditCard]:{[o.VaultSourceType.PaymentCard]:"expireYear"},[n.SecurityCodeCreditCard]:{[o.VaultSourceType.PaymentCard]:"securityCode"},[n.CreditCardOwner]:{[o.VaultSourceType.PaymentCard]:"ownerName"},[n.CreditCardOwnerFirstName]:{[o.VaultSourceType.PaymentCard]:"ownerName"},[n.CreditCardOwnerLastName]:{[o.VaultSourceType.PaymentCard]:"ownerName"},[n.BankName]:{[o.VaultSourceType.PaymentCard]:"bank"},[n.FullName]:{[o.VaultSourceType.Identity]:"firstName"},[n.FirstName]:{[o.VaultSourceType.Identity]:"firstName"},[n.MiddleName]:{[o.VaultSourceType.Identity]:"middleName"},[n.MiddleNameInitial]:{[o.VaultSourceType.Identity]:"middleName"},[n.LastName]:{[o.VaultSourceType.Identity]:"lastName"},[n.Age]:{[o.VaultSourceType.Identity]:"birthDate"},[n.BirthDay]:{[o.VaultSourceType.Identity]:"birthDate"},[n.BirthPlace]:{[o.VaultSourceType.Identity]:"birthPlace"},[n.EmailUnkown]:{[o.VaultSourceType.Email]:"email"},[n.PhoneNumber]:{[o.VaultSourceType.Phone]:"number"},[n.PhoneNumberExtension]:{[o.VaultSourceType.Phone]:"number"},[n.PhoneCountryCode]:{[o.VaultSourceType.Phone]:"numberInternational"},[n.SocialSecurityNumber]:{[o.VaultSourceType.SocialSecurityId]:"idNumber"},[n.FiscalNumber]:{[o.VaultSourceType.FiscalId]:"idNumber"},[n.Company]:{[o.VaultSourceType.Company]:"name"},[n.Job]:{[o.VaultSourceType.Company]:"jobTitle"},[n.Website]:{[o.VaultSourceType.PersonalWebsite]:"website"},[n.Address]:{[o.VaultSourceType.Address]:"addressFull"},[n.ZipCode]:{[o.VaultSourceType.Address]:"zipCode"},[n.City]:{[o.VaultSourceType.Address]:"city"},[n.Country]:{[o.VaultSourceType.Address]:"country"},[n.Door]:{[o.VaultSourceType.Address]:"door"},[n.Floor]:{[o.VaultSourceType.Address]:"floor"},[n.StreetNumber]:{[o.VaultSourceType.Address]:"streetNumber"},[n.StreetTitle]:{[o.VaultSourceType.Address]:"streetTitle"},[n.StreetName]:{[o.VaultSourceType.Address]:"streetName"},[n.State]:{[o.VaultSourceType.Address]:"state"},[n.StateCode]:{[o.VaultSourceType.Address]:"stateLevel2"},[n.PassportNumber]:{[o.VaultSourceType.Passport]:"idNumber"},[n.PassportFirstName]:{[o.VaultSourceType.Identity]:"firstName"},[n.PassportLastName]:{[o.VaultSourceType.Identity]:"lastName"},[n.PassportFullName]:{[o.VaultSourceType.Passport]:"name"},[n.PassportDateOfBirth]:{[o.VaultSourceType.Identity]:"birthDate"},[n.PassportSex]:{[o.VaultSourceType.Identity]:"title"},[n.PassportDeliveryDate]:{[o.VaultSourceType.Passport]:"issueYear"},[n.PassportExpireDate]:{[o.VaultSourceType.Passport]:"expirationYear"},[n.PassportDeliveryPlace]:{[o.VaultSourceType.Passport]:"deliveryPlace"},[n.PassportNationality]:{[o.VaultSourceType.Passport]:"country"},[n.IdCardNumber]:{[o.VaultSourceType.IdCard]:"idNumber"},[n.IdCardFirstName]:{[o.VaultSourceType.Identity]:"firstName"},[n.IdCardLastName]:{[o.VaultSourceType.Identity]:"lastName"},[n.IdCardFullName]:{[o.VaultSourceType.IdCard]:"name"},[n.IdCardDateOfBirth]:{[o.VaultSourceType.Identity]:"birthDate"},[n.IdCardSex]:{[o.VaultSourceType.Identity]:"title"},[n.IdCardDeliveryDate]:{[o.VaultSourceType.IdCard]:"issueYear"},[n.IdCardExpireDate]:{[o.VaultSourceType.IdCard]:"expirationYear"},[n.IdCardNationality]:{[o.VaultSourceType.IdCard]:"country"},[n.DriverLicenseNumber]:{[o.VaultSourceType.DriverLicense]:"idNumber"},[n.DriverLicenseFirstName]:{[o.VaultSourceType.Identity]:"firstName"},[n.DriverLicenseLastName]:{[o.VaultSourceType.Identity]:"lastName"},[n.DriverLicenseFullName]:{[o.VaultSourceType.DriverLicense]:"name"},[n.DriverLicenseSex]:{[o.VaultSourceType.Identity]:"title"},[n.DriverLicenseDeliveryDate]:{[o.VaultSourceType.DriverLicense]:"issueYear"},[n.DriverLicenseExpireDate]:{[o.VaultSourceType.DriverLicense]:"expirationYear"},[n.DriverLicenseState]:{[o.VaultSourceType.DriverLicense]:"state"},[n.BankDetailsAccountNumber]:{[o.VaultSourceType.BankAccount]:"BIC"},[n.BankDetailsOwner]:{[o.VaultSourceType.BankAccount]:"owner"},[n.BankDetailsBank]:{[o.VaultSourceType.BankAccount]:"bank"},[n.BankDetailsIBAN]:{[o.VaultSourceType.BankAccount]:"IBAN"},[n.Nothing]:"none"}},19503:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isOtherDataSource=t.isVaultDataSource=t.isOtherSourceType=t.isVaultSourceType=t.OtherSourceType=void 0;const o=r(53893);var n;!function(e){e.NewPassword="newPassword",e.SubmitButton="submitButton"}(n=t.OtherSourceType||(t.OtherSourceType={}));t.isVaultSourceType=e=>e in o.VaultSourceType;t.isOtherSourceType=e=>Object.values(n).includes(e);t.isVaultDataSource=e=>(0,t.isVaultSourceType)(e.type);t.isOtherDataSource=e=>(0,t.isOtherSourceType)(e.type)},53893:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vaultSourceTypeToDataModelTypeMap=t.VaultSourceType=void 0;const o=r(97211);var n;!function(e){e.Address="Address",e.BankAccount="BankAccount",e.Company="Company",e.Credential="Credential",e.CredentialCategory="CredentialCategory",e.DriverLicense="DriverLicense",e.Email="Email",e.FiscalId="FiscalId",e.GeneratedPassword="GeneratedPassword",e.IdCard="IdCard",e.Identity="Identity",e.NoteCategory="NoteCategory",e.Note="Note",e.Passport="Passport",e.PaymentCard="PaymentCard",e.PersonalWebsite="PersonalWebsite",e.Phone="Phone",e.SocialSecurityId="SocialSecurityId"}(n=t.VaultSourceType||(t.VaultSourceType={})),t.vaultSourceTypeToDataModelTypeMap={[n.Address]:o.DataModelType.KWAddress,[n.BankAccount]:o.DataModelType.KWBankStatement,[n.Company]:o.DataModelType.KWCompany,[n.Credential]:o.DataModelType.KWAuthentifiant,[n.CredentialCategory]:o.DataModelType.KWAuthCategory,[n.DriverLicense]:o.DataModelType.KWDriverLicence,[n.Email]:o.DataModelType.KWEmail,[n.FiscalId]:o.DataModelType.KWFiscalStatement,[n.GeneratedPassword]:o.DataModelType.KWGeneratedPassword,[n.IdCard]:o.DataModelType.KWIDCard,[n.Identity]:o.DataModelType.KWIdentity,[n.NoteCategory]:o.DataModelType.KWSecureNoteCategory,[n.Note]:o.DataModelType.KWSecureNote,[n.Passport]:o.DataModelType.KWPassport,[n.PaymentCard]:o.DataModelType.KWPaymentMean_creditCard,[n.PersonalWebsite]:o.DataModelType.KWPersonalWebsite,[n.Phone]:o.DataModelType.KWPhone,[n.SocialSecurityId]:o.DataModelType.KWSocialSecurityStatement}},13721:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(63983),n=r(41843);t.config={commands:{changeMasterPassword:{handler:o.changeMasterPassword}},queries:{},liveQueries:{liveChangeMasterPasswordStatus:{subject:n.getChangeMasterPasswordStatus$}}}},41843:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getChangeMasterPasswordStatus$=t.emitChangeMasterPasswordStatus=void 0;const o=new(r(18948).Subject);t.emitChangeMasterPasswordStatus=e=>o.next(e);t.getChangeMasterPasswordStatus$=()=>o},38716:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeMasterPasswordStepNeeded=t.ChangeMasterPasswordCode=t.ChangeMPFlowPath=void 0;var o=r(37730);Object.defineProperty(t,"ChangeMPFlowPath",{enumerable:!0,get:function(){return o.ChangeMPFlowPath}}),Object.defineProperty(t,"ChangeMasterPasswordCode",{enumerable:!0,get:function(){return o.ChangeMasterPasswordCode}}),Object.defineProperty(t,"ChangeMasterPasswordStepNeeded",{enumerable:!0,get:function(){return o.ChangeMasterPasswordStepNeeded}})},898:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(13721);t.bootstrap=e=>{e.register(o.config)}},63983:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.changeMasterPassword=void 0;const o=r(41843),n=r(37730),a=r(16242),i=r(8661),s=r(47907),c=r(12941),d=r(3742),l=r(15876),u=r(33441),p=r(97605),S=r(8153),g=r(78),m=r(72879),y=r(19935),v=r(59610);t.changeMasterPassword=async(e,t)=>{const{storeService:r,masterPasswordEncryptorService:A,remoteDataEncryptorService:E,sessionService:f,localStorageService:h,storageService:_,eventLoggerService:T}=e,{flow:I}=t,C=await(0,a.preValidationForChangeMP)(e,t);if(!1===C.success)return C;const P=r.getState(),D=(0,S.isRemoteKeyActivatedSelector)(P)?E:A;(0,o.emitChangeMasterPasswordStatus)({type:n.ChangeMasterPasswordStepNeeded.DOWNLOAD,value:10});const O=(0,S.userLoginSelector)(P);if(!O)return(0,a.makeReturnErrorObject)(n.ChangeMasterPasswordCode.UNEXPECTED_STATE,I);r.dispatch((0,g.changeMPStart)());const b=await(0,l.getDataForMasterPasswordChange)(r,O,{});if((0,l.isApiError)(b))return(0,v.logChangeMasterPasswordError)(T,y.ChangeMasterPasswordError.DownloadError),r.dispatch((0,g.changeMPDone)()),(0,a.makeUnexpectedErrorObject)(b.message,I);const{serverKey:w}=r.getUserSession();if(!(0,a.isOtpStatusValid)(b.otpStatus,w))return(0,v.logChangeMasterPasswordError)(T,y.ChangeMasterPasswordError.LoginError),r.dispatch((0,g.changeMPDone)()),(0,a.makeReturnErrorObject)(n.ChangeMasterPasswordCode.OTP_PROBLEM,I);const{timestamp:N}=b,{transactions:R,sharingKeys:L}=b.data;try{const l=await(0,a.deCipherAllTransactions)(f,D,R),S=h.getInstance(),A=await S.doesLocalKeyExist();let E=null;A&&(E=await S.getLocalKey());const{publicKey:C}=L,P=await(0,a.decipherPrivateKey)(r,D,L);let O;switch(await(0,m.cleanRememberMeStorageData)(r,_.getLocalStorage()),t.flow){case n.ChangeMPFlowPath.MP_TO_SSO:O=await(0,s.handleMigrationMPtoSso)(e,t,l,P,C,N);break;case n.ChangeMPFlowPath.SSO_TO_MP:O=await(0,c.handleMigrationSSOtoMP)(e,t,l,P,C,N);break;case n.ChangeMPFlowPath.TO_EMAIL_TOKEN:O=await(0,i.handleMigrationToEmailToken)(e,t,l,P,C,N);break;case n.ChangeMPFlowPath.ACCOUNT_RECOVERY:case n.ChangeMPFlowPath.USER_CHANGING_MP:default:O=await(0,d.handleUserChangingMP)(e,t,l,P,C,N)}return O.success?(E&&await f.getInstance().user.persistLocalKey(E),await(0,p.storeSessionCredentialForRecovery)(r,h),(0,o.emitChangeMasterPasswordStatus)({type:n.ChangeMasterPasswordStepNeeded.DONE,value:100}),await(0,a.resetMigrationState)(e,I),I!==n.ChangeMPFlowPath.ACCOUNT_RECOVERY&&I!==n.ChangeMPFlowPath.MP_TO_SSO&&I!==n.ChangeMPFlowPath.SSO_TO_MP||await(0,u.sessionDidOpen)(e),(0,v.logChangeMasterPasswordComplete)(T),r.dispatch((0,g.changeMPDone)()),{success:!0,response:{reason:n.ChangeMasterPasswordCode.SUCCESS}}):((0,v.logChangeMasterPasswordError)(T,y.ChangeMasterPasswordError.UnknownError),r.dispatch((0,g.changeMPDone)()),O)}catch(r){if((0,v.logChangeMasterPasswordError)(T,y.ChangeMasterPasswordError.UnknownError),t.flow===n.ChangeMPFlowPath.TO_EMAIL_TOKEN||t.flow===n.ChangeMPFlowPath.USER_CHANGING_MP||t.flow===n.ChangeMPFlowPath.ACCOUNT_RECOVERY){const r=(0,a.extractCurrentPassword)(P,t);(0,a.revertOnError)(e,D,{currentPassword:r,serverKey:w})}else(0,a.logoutUserOnError)(e);return(0,a.makeUnexpectedErrorObject)(r.message,I)}}},8661:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handleMigrationToEmailToken=void 0;const o=r(19935),n=r(8153),a=r(41843),i=r(37730),s=r(16242),c=r(15876),d=r(75897),l=r(59610);t.handleMigrationToEmailToken=async(e,t,r,u,p,S)=>{const{storeService:g,sessionService:m,masterPasswordEncryptorService:y,eventLoggerService:v}=e,{newPassword:A,flow:E,currentPassword:f}=t,{serverKey:h}=g.getUserSession(),_=g.getState(),T=(0,n.userLoginSelector)(_);if(!T)return(0,l.logChangeMasterPasswordError)(v,o.ChangeMasterPasswordError.LoginError),(0,s.makeReturnErrorObject)(i.ChangeMasterPasswordCode.UNEXPECTED_STATE,E);const I=(0,s.returnProperCryptoConfig)(g);y.setInstance({raw:A},"",I),g.dispatch((0,d.updateMasterPassword)(A)),g.dispatch((0,d.updateServerKey)(""));g.dispatch((0,d.updateIsRemoteKeyActivated)(!1));const{authTicket:C}=(0,n.authTicketInfoSelector)(_),P=await(0,s.cipherTransactionWithNewMP)(g,m,y,r,E),D=await(0,s.cipherPrivateKey)(y,u),O={timestamp:S,transactions:(0,s.formatTransaction)(P),updateVerification:{type:"email_token"},sharingKeys:{publicKey:p,privateKey:D},authTicket:C};(0,a.emitChangeMasterPasswordStatus)({type:i.ChangeMasterPasswordStepNeeded.UPLOADING,value:95});const b=await(0,c.uploadDataForMasterPasswordChange)(g,T,O);if((0,c.isApiError)(b))return(0,l.logChangeMasterPasswordError)(v,o.ChangeMasterPasswordError.UploadError),(0,s.revertOnError)(e,y,{currentPassword:f,serverKey:h}),(0,s.makeUnexpectedErrorObject)(b.message,E);const w=await(0,c.confirmMasterPasswordChangeDone)(g,T,{});return(0,c.isApiError)(w)?((0,l.logChangeMasterPasswordError)(v,o.ChangeMasterPasswordError.ConfirmationError),(0,s.revertOnError)(e,y,{currentPassword:f,serverKey:h}),(0,s.makeUnexpectedErrorObject)(w.message,E)):{success:!0,response:{reason:i.ChangeMasterPasswordCode.SUCCESS}}}},47907:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handleMigrationMPtoSso=void 0;const o=r(19935),n=r(40837),a=r(8153),i=r(41843),s=r(37730),c=r(16242),d=r(15876),l=r(75897),u=r(59610);t.handleMigrationMPtoSso=async(e,t,r,p,S,g)=>{const{storeService:m,sessionService:y,remoteDataEncryptorService:v,eventLoggerService:A}=e,{newPassword:E,flow:f}=t,h=m.getState(),_=(0,a.userLoginSelector)(h);if(!_)return(0,u.logChangeMasterPasswordError)(A,o.ChangeMasterPasswordError.LoginError),(0,c.makeReturnErrorObject)(s.ChangeMasterPasswordCode.UNEXPECTED_STATE,f);const{remoteKey:T,serverKeyBase64:I}=await(0,n.prepareRemoteDataEncryptionServices)(e,E);m.dispatch((0,l.updateIsRemoteKeyActivated)(!0));const C=[T],P={type:"sso",ssoServerKey:I},{authTicket:D}=(0,a.authTicketInfoSelector)(h),O=await(0,c.cipherTransactionWithNewMP)(m,y,v,r,f),b=await(0,c.cipherPrivateKey)(v,p),w={timestamp:g,transactions:(0,c.formatTransaction)(O),remoteKeys:C,updateVerification:P,sharingKeys:{publicKey:S,privateKey:b},authTicket:D};(0,i.emitChangeMasterPasswordStatus)({type:s.ChangeMasterPasswordStepNeeded.UPLOADING,value:95});const N=await(0,d.uploadDataForMasterPasswordChange)(m,_,w);if((0,d.isApiError)(N))return(0,u.logChangeMasterPasswordError)(A,o.ChangeMasterPasswordError.UploadError),(0,c.logoutUserOnError)(e),(0,c.makeUnexpectedErrorObject)(N.message,f);const R=await(0,d.confirmMasterPasswordChangeDone)(m,_,{});return(0,d.isApiError)(R)?((0,u.logChangeMasterPasswordError)(A,o.ChangeMasterPasswordError.ConfirmationError),(0,c.logoutUserOnError)(e),(0,c.makeUnexpectedErrorObject)(R.message,f)):{success:!0,response:{reason:s.ChangeMasterPasswordCode.SUCCESS}}}},12941:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handleMigrationSSOtoMP=void 0;const o=r(19935),n=r(8153),a=r(41843),i=r(37730),s=r(16242),c=r(15876),d=r(75897),l=r(59610);t.handleMigrationSSOtoMP=async(e,t,r,u,p,S)=>{const{storeService:g,sessionService:m,masterPasswordEncryptorService:y,eventLoggerService:v}=e,{newPassword:A,flow:E}=t,f=g.getState(),h=(0,n.userLoginSelector)(f);if(!h)return(0,l.logChangeMasterPasswordError)(v,o.ChangeMasterPasswordError.LoginError),(0,s.makeReturnErrorObject)(i.ChangeMasterPasswordCode.UNEXPECTED_STATE,E);const _=(0,s.returnProperCryptoConfig)(g);y.setInstance({raw:A},"",_),g.dispatch((0,d.updateMasterPassword)(A)),g.dispatch((0,d.updateServerKey)(""));g.dispatch((0,d.updateIsRemoteKeyActivated)(!1));const{authTicket:T}=(0,n.authTicketInfoSelector)(f),I=await(0,s.cipherTransactionWithNewMP)(g,m,y,r,E),C=await(0,s.cipherPrivateKey)(y,u),P={timestamp:S,transactions:(0,s.formatTransaction)(I),updateVerification:{type:"email_token"},sharingKeys:{publicKey:p,privateKey:C},authTicket:T};(0,a.emitChangeMasterPasswordStatus)({type:i.ChangeMasterPasswordStepNeeded.UPLOADING,value:95});const D=await(0,c.uploadDataForMasterPasswordChange)(g,h,P);if((0,c.isApiError)(D))return(0,l.logChangeMasterPasswordError)(v,o.ChangeMasterPasswordError.UploadError),(0,s.logoutUserOnError)(e),(0,s.makeUnexpectedErrorObject)(D.message,E);const O=await(0,c.confirmMasterPasswordChangeDone)(g,h,{});return(0,c.isApiError)(O)?((0,l.logChangeMasterPasswordError)(v,o.ChangeMasterPasswordError.ConfirmationError),(0,s.logoutUserOnError)(e),(0,s.makeUnexpectedErrorObject)(O.message,E)):{success:!0,response:{reason:i.ChangeMasterPasswordCode.SUCCESS}}}},3742:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handleUserChangingMP=void 0;const o=r(19935),n=r(8153),a=r(41843),i=r(37730),s=r(16242),c=r(15876),d=r(75897),l=r(59610),u=r(38716);t.handleUserChangingMP=async(e,t,r,p,S,g)=>{const{storeService:m,sessionService:y,masterPasswordEncryptorService:v,eventLoggerService:A}=e,E=m.getState(),{newPassword:f,flow:h}=t,_=(0,s.extractCurrentPassword)(E,t),{serverKey:T}=m.getUserSession(),I=(0,n.userLoginSelector)(E);if(!I)return(0,l.logChangeMasterPasswordError)(A,o.ChangeMasterPasswordError.LoginError),(0,s.makeReturnErrorObject)(i.ChangeMasterPasswordCode.UNEXPECTED_STATE,h);v.setInstance({raw:f},T),m.dispatch((0,d.updateMasterPassword)(f));const C=await(0,s.cipherTransactionWithNewMP)(m,y,v,r),P=await(0,s.cipherPrivateKey)(v,p),D={timestamp:g,transactions:(0,s.formatTransaction)(C),sharingKeys:{publicKey:S,privateKey:P},uploadReason:h===u.ChangeMPFlowPath.ACCOUNT_RECOVERY?"complete_account_recovery":void 0};(0,a.emitChangeMasterPasswordStatus)({type:i.ChangeMasterPasswordStepNeeded.UPLOADING,value:95});const O=await(0,c.uploadDataForMasterPasswordChange)(m,I,D);if((0,c.isApiError)(O))return(0,l.logChangeMasterPasswordError)(A,o.ChangeMasterPasswordError.UploadError),(0,s.revertOnError)(e,v,{currentPassword:_,serverKey:T}),(0,s.makeUnexpectedErrorObject)(O.message,h);const b=await(0,c.confirmMasterPasswordChangeDone)(m,I,{});return(0,c.isApiError)(b)?((0,l.logChangeMasterPasswordError)(A,o.ChangeMasterPasswordError.ConfirmationError),(0,s.revertOnError)(e,v,{currentPassword:_,serverKey:T}),(0,s.makeUnexpectedErrorObject)(b.message,h)):{success:!0,response:{reason:i.ChangeMasterPasswordCode.SUCCESS}}}},73937:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(898);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},59610:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logChangeMasterPasswordError=t.logChangeMasterPasswordComplete=t.logChangeMasterPasswordCancel=t.logChangeMasterPasswordStart=void 0;const o=r(19935),n=(e,t,r)=>{e.logEvent(new o.UserChangeMasterPasswordEvent({flowStep:t,errorName:r||void 0}))};t.logChangeMasterPasswordStart=e=>n(e,o.FlowStep.Start);t.logChangeMasterPasswordCancel=e=>n(e,o.FlowStep.Cancel);t.logChangeMasterPasswordComplete=e=>n(e,o.FlowStep.Complete);t.logChangeMasterPasswordError=(e,t)=>n(e,o.FlowStep.Error,t)},78261:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.changeMPinProgressSelector=void 0;t.changeMPinProgressSelector=e=>e.userSession.changeMPData.changeMPinProgress},18059:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cipherPrivateKey=void 0;const o=r(53494);t.cipherPrivateKey=async(e,t)=>{const r=(0,o.utf16ToDeflatedUtf8)(t,{skipDeflate:!0});return await e.getInstance().encrypt(r)}},79936:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cipherTransactionWithNewMP=void 0;const o=r(37730),n=r(16242),a=r(30848),i=r(63836),s=r(35488),c=r(10423),d=r(77176),l=r(77333);t.cipherTransactionWithNewMP=async(e,t,r,u,p,S=!0)=>{const{announce:g}=t.getInstance().user.getSyncArgs(),m=await Promise.all(u.map((async t=>{if(p&&"SETTINGS"===t.type&&t.content){const r={...t,content:await(0,n.getBaseModelFromXml)(g,t.content)};switch(p){case o.ChangeMPFlowPath.MP_TO_SSO:const a={...r.content,CryptoUserPayload:c.CRYPTO_NODERIVATION_HMAC64};return{...r,content:(0,s.getTransactionXml)(a)};case o.ChangeMPFlowPath.SSO_TO_MP:const i={forceSalt:(0,d.getRandomValues)(16),cryptoConfig:(0,n.returnProperCryptoConfig)(e)},u=(0,n.returnProperSettingContent)(e,r,i);return e.dispatch((0,l.editPersonalSettings)(u)),{...t,content:(0,s.getTransactionXml)(u)};case o.ChangeMPFlowPath.ACCOUNT_RECOVERY:case o.ChangeMPFlowPath.USER_CHANGING_MP:case o.ChangeMPFlowPath.TO_EMAIL_TOKEN:}}return t}))),y=m.length,v=S?(0,n.initializeProgress)(o.ChangeMasterPasswordStepNeeded.ENCRYPTING,100,y):null,A=async(e,t)=>{v&&v(),t(await(0,i.encryptSingleTransaction)(r,e))};return await new Promise((e=>{(0,a.asyncMapLimit)(m,A,e,100)}))}},12992:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deCipherAllTransactions=void 0;const o=r(59778),n=r(37730),a=r(16242),i=r(30848),s=r(63836),c=r(59707),d=r(59125),l=r(73144);t.deCipherAllTransactions=async(e,t,r,u=!0)=>{const{announce:p}=e.getInstance().user.getSyncArgs(),S=t.getInstance(),g=r.length,m=u?(0,a.initializeProgress)(n.ChangeMasterPasswordStepNeeded.DECRYPTING,100,g):null,y=async(e,t)=>{var r;if(m&&m(),e.content)try{const r=await(0,s.decryptTransactionContent)(S,p,e);t({...e,content:r})}catch(n){if(e.type===o.TransactionType.SETTINGS){const t=l.CarbonError.fromAnyError(n).addContextInfo("CHANGE_MP","decipherAllTransactions").addAdditionalInfo({comment:null!==(r=n.message)&&void 0!==r?r:`Transaction of type ${e.type} couldn't be decrypted`});throw(0,d.sendExceptionLog)({error:t}),n}t(null)}else t(e)},v=await new Promise((e=>{(0,i.asyncMapLimit)(r,y,e,100)}));return(0,c.sanitizeTransactions)(v)}},29132:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decipherPrivateKey=void 0;const o=r(53494),n=r(75897);t.decipherPrivateKey=async(e,t,r)=>{const a=await t.getInstance().decrypt(r.privateKey),i=(0,o.deflatedUtf8ToUtf16)(a,{skipInflate:!0}),s={privateKey:i,publicKey:r.publicKey};return e.dispatch((0,n.updateKeyPair)(s)),i}},65119:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatTransaction=void 0;t.formatTransaction=e=>e.map((({action:e,content:t,identifier:r,time:o,type:n})=>({action:e,content:t,identifier:r,time:o,type:n})))},55570:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBaseModelFromXml=void 0;const o=r(98982),n=r(63836),a=r(71693);t.getBaseModelFromXml=async(e,t)=>{const r=await(0,n.parseTransactionContentXml)(e,t);return a.fixPersonalSettingTypes.fromTransaction((0,o.fixKwType)(r))}},16242:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(18059),t),n(r(79936),t),n(r(29132),t),n(r(12992),t),n(r(65119),t),n(r(55570),t),n(r(73159),t),n(r(33843),t),n(r(23051),t),n(r(69473),t),n(r(13133),t),n(r(45392),t),n(r(56452),t),n(r(28359),t),n(r(10692),t),n(r(63028),t),n(r(45475),t)},73159:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initializeProgress=void 0;const o=r(41843),n=r(37730);t.initializeProgress=(e,t,r)=>{const a=e===n.ChangeMasterPasswordStepNeeded.DECRYPTING?10:50;let i=0;return()=>{i++,i%t!=0&&i!==r||(0,o.emitChangeMasterPasswordStatus)({type:e,value:a+Math.round(40*i/r)})}}},33843:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isOtpStatusValid=void 0;t.isOtpStatusValid=(e,t)=>{switch(e){case"login":return t&&t.length>0;case"disabled":case"newDevice":case"sso":return!t||0===t.length;default:return!1}}},23051:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logoutUserOnError=void 0;const o=r(78),n=r(55015),a=r(8153);t.logoutUserOnError=async e=>{const{storeService:t,storageService:r,sessionService:i}=e,s=(0,a.userLoginSelector)(t.getState());t.dispatch((0,o.changeMPDone)()),s&&(0,n.wipeOutLocalAccounts)(r.getLocalStorage(),[s]),i.close()}},69473:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeReturnErrorObject=void 0;const o=r(41843),n=r(37730),a=r(59125);t.makeReturnErrorObject=(e,t)=>{(0,o.emitChangeMasterPasswordStatus)({type:n.ChangeMasterPasswordStepNeeded.ERROR,value:100});const r=new Error(`[ChangeMP] ${t}: ${e}`);return(0,a.sendExceptionLog)({error:r}),{success:!1,error:{code:e}}}},13133:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeUnexpectedErrorObject=void 0;const o=r(37730),n=r(59125);t.makeUnexpectedErrorObject=(e,t)=>{const r=new Error(`[ChangeMP] - Unexpected - ${t}: ${e}`);return(0,n.sendExceptionLog)({error:r}),{success:!1,error:{code:o.ChangeMasterPasswordCode.UNKNOWN_ERROR,message:e}}}},45392:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.preValidationForChangeMP=t.extractCurrentPassword=void 0;const o=r(37730),n=r(16242),a=r(45854),i=r(8153),s=r(15443),c=r(14122),d=r(16242),l=r(49914),u=r(2420);t.extractCurrentPassword=(e,t)=>t.flow===o.ChangeMPFlowPath.ACCOUNT_RECOVERY?(0,s.recoveryDataSelector)(e).currentPassword:t.currentPassword;t.preValidationForChangeMP=async(e,t)=>{const{masterPasswordEncryptorService:r,storeService:s}=e,{newPassword:p,flow:S}=t;if(!await(0,n.waitUntilSyncComplete)(s))return(0,d.makeReturnErrorObject)(o.ChangeMasterPasswordCode.SYNC_PROGRESS,S);const g=s.getState(),m=(0,c.featuresSelector)(g);if(!s.getAccountInfo().isAuthenticated)return(0,d.makeReturnErrorObject)(o.ChangeMasterPasswordCode.INNACTIVE_SESSION,S);if(m[o.CHANGEMP_WEB_BLOCKED_FEATURE_FLIP])return(0,d.makeReturnErrorObject)(o.ChangeMasterPasswordCode.FEATURE_BLOCKED,S);const y=await(0,a.evaluatePasswordStrengthOutOfFive)(p);if(!p||!y||y<u.minAcceptablePasswordStrength)return(0,d.makeReturnErrorObject)(o.ChangeMasterPasswordCode.MP_STRENGTH_ERROR,S);const v=(0,i.isRemoteKeyActivatedSelector)(g),A=9e5,{authTicket:E,date:f}=(0,i.authTicketInfoSelector)(g);if(!(0,i.userLoginSelector)(g))return(0,d.makeReturnErrorObject)(o.ChangeMasterPasswordCode.UNEXPECTED_STATE,S);switch(t.flow){case o.ChangeMPFlowPath.MP_TO_SSO:if(!E||!f||Date.now()-f>A)return(0,d.makeReturnErrorObject)(o.ChangeMasterPasswordCode.INVALID_TOKEN,S);if(v)return(0,d.makeReturnErrorObject)(o.ChangeMasterPasswordCode.UNEXPECTED_STATE,S);break;case o.ChangeMPFlowPath.SSO_TO_MP:if(!E||!f||Date.now()-f>A)return(0,d.makeReturnErrorObject)(o.ChangeMasterPasswordCode.INVALID_TOKEN,S);if(!v)return(0,d.makeReturnErrorObject)(o.ChangeMasterPasswordCode.UNEXPECTED_STATE,S);break;case o.ChangeMPFlowPath.ACCOUNT_RECOVERY:break;case o.ChangeMPFlowPath.TO_EMAIL_TOKEN:case o.ChangeMPFlowPath.USER_CHANGING_MP:{const{currentPassword:e}=t;if(e===p)return(0,d.makeReturnErrorObject)(o.ChangeMasterPasswordCode.MP_ERROR,S);if(!await(0,l.validateMasterPassword)(s,r,e))return(0,d.makeReturnErrorObject)(o.ChangeMasterPasswordCode.WRONG_PASSWORD,S)}break;default:return(0,d.makeReturnErrorObject)(o.ChangeMasterPasswordCode.UNEXPECTED_STATE,S)}return{success:!0}}},56452:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetMigrationState=void 0;const o=r(37730),n=r(94722),a=r(84335);t.resetMigrationState=async(e,t)=>{if(t===o.ChangeMPFlowPath.USER_CHANGING_MP||t===o.ChangeMPFlowPath.TO_EMAIL_TOKEN)return;const{storeService:r}=e;r.dispatch((0,n.resetRecoverySessionData)()),r.dispatch((0,a.resetSSOSettings)()),t===o.ChangeMPFlowPath.MP_TO_SSO&&r.dispatch((0,a.storeSSOSettings)({ssoUser:!0}))}},28359:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.returnProperCryptoConfig=void 0;const o=r(53494),n=r(53528),a=r(8811);t.returnProperCryptoConfig=e=>{let t=o.ARGON2_DEFAULT_PAYLOAD;const r=(0,a.currentSpaceInfoSelector)(e.getState());(null==r?void 0:r.cryptoForcedPayload)&&(t=r.cryptoForcedPayload);try{return(0,n.parsePayload)(t).cryptoConfig}catch(e){return(0,n.makeFlexibleMarkerCryptoConfig)("argon2d")}}},10692:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.returnProperSettingContent=void 0;const o=r(53494),n=r(24555),a=r(16075),i=r(8811);t.returnProperSettingContent=(e,t,r)=>{let s=o.ARGON2_DEFAULT_PAYLOAD;const c=(0,i.currentSpaceInfoSelector)(e.getState());return(null==c?void 0:c.cryptoForcedPayload)&&(s=c.cryptoForcedPayload),{...(0,a.makeBasePersonalSettings)(),...t.content,CryptoUserPayload:s,CryptoFixedSalt:(0,n.bufferToBase64)(r.forceSalt)}}},63028:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.revertOnError=void 0;const o=r(78),n=r(75897);t.revertOnError=async(e,t,r)=>{const{currentPassword:a,serverKey:i}=r,{storeService:s}=e;t.setInstance({raw:a},i),s.dispatch((0,n.updateMasterPassword)(a)),s.dispatch((0,n.updateServerKey)(i)),s.dispatch((0,o.changeMPDone)())}},45475:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.waitUntilSyncComplete=void 0;const o=r(61666);t.waitUntilSyncComplete=async e=>{if(!1===(0,o.isSyncInProgress)(e))return!0;return new Promise((t=>{const r=Date.now(),n=setInterval((()=>!1===(0,o.isSyncInProgress)(e)?(clearInterval(n),t(!0)):Date.now()-r>6e4?t(!1):void 0),1e3)}))}},37730:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeMasterPasswordStepNeeded=t.CHANGEMP_WEB_BLOCKED_FEATURE_FLIP=t.ChangeMasterPasswordCode=t.ChangeMPFlowPath=void 0,function(e){e.USER_CHANGING_MP="USER_CHANGING_MP",e.MP_TO_SSO="MP_TO_SSO",e.SSO_TO_MP="SSO_TO_MP",e.TO_EMAIL_TOKEN="EMAIL_TOKEN",e.ACCOUNT_RECOVERY="ACCOUNT_RECOVERY"}(t.ChangeMPFlowPath||(t.ChangeMPFlowPath={})),function(e){e.FEATURE_BLOCKED="feature_blocked",e.INNACTIVE_SESSION="inactive_session",e.INVALID_TOKEN="invalid_token",e.OTP_PROBLEM="otp_problem",e.MP_ERROR="mp_error",e.MP_STRENGTH_ERROR="mp_strength_error",e.SUCCESS="success",e.SYNC_PROGRESS="sync_in_progress",e.UNKNOWN_ERROR="unknown_error",e.WRONG_PASSWORD="wrong_password",e.UNEXPECTED_STATE="unexpected_state"}(t.ChangeMasterPasswordCode||(t.ChangeMasterPasswordCode={})),t.CHANGEMP_WEB_BLOCKED_FEATURE_FLIP="disableChangeMpOnWeb",function(e){e.DOWNLOAD="download",e.DECRYPTING="decrypting",e.ENCRYPTING="encrypting",e.UPLOADING="uploading",e.DONE="done",e.ERROR="error"}(t.ChangeMasterPasswordStepNeeded||(t.ChangeMasterPasswordStepNeeded={}))},78568:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.abTestsLiveQueries=t.abTestsQueries=t.abTestsCommands=void 0;const o=r(72931);t.abTestsCommands={participateToUserABTest:(0,o.slot)()},t.abTestsQueries={getUserABTestVariant:(0,o.slot)()},t.abTestsLiveQueries={liveUserABTestVariant:(0,o.slot)()}},99496:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountCreationLiveQueries=void 0;const o=r(32164);t.accountCreationLiveQueries={liveAccountCreated:(0,o.liveSlot)()}},19399:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.authenticationLiveQueries=t.authenticationQueries=t.authenticationCommands=void 0;const o=r(72931),n=r(32164);t.authenticationCommands={requestExtraDeviceToken:(0,o.slot)(),requestEmailToken:(0,o.slot)(),setReactivationStatus:(0,o.slot)(),refreshU2FDevicesList:(0,o.slot)(),removeU2FAuthenticator:(0,o.slot)(),refreshTwoFactorAuthenticationInfo:(0,o.slot)(),enableWebAuthnAuthentication:(0,o.slot)(),initEnableWebAuthnAuthentication:(0,o.slot)(),refreshAvailableWebAuthnAuthenticators:(0,o.slot)(),refreshWebAuthnAuthenticators:(0,o.slot)(),initRegisterWebAuthnAuthenticator:(0,o.slot)(),registerWebAuthnAuthenticator:(0,o.slot)(),initOpenSessionWithWebAuthnAuthenticator:(0,o.slot)(),openSessionWithWebAuthnAuthenticator:(0,o.slot)(),disableWebAuthnAuthentication:(0,o.slot)(),removeWebAuthnAuthenticator:(0,o.slot)(),startTwoFactorAuthenticationEnableFlow:(0,o.slot)(),stopTwoFactorAuthenticationEnableFlow:(0,o.slot)(),continueTwoFactorAuthenticationEnableFlow:(0,o.slot)(),backTwoFactorAuthenticationEnableFlow:(0,o.slot)(),startTwoFactorAuthenticationDisableFlow:(0,o.slot)(),stopTwoFactorAuthenticationDisableFlow:(0,o.slot)(),continueTwoFactorAuthenticationDisableFlow:(0,o.slot)(),backTwoFactorAuthenticationDisableFlow:(0,o.slot)()},t.authenticationQueries={getHasOtpType:(0,o.slot)(),getUserOtpType:(0,o.slot)(),getLocalAccounts:(0,o.slot)(),getReactivationStatus:(0,o.slot)(),getU2FDevicesList:(0,o.slot)(),getWebAuthnAuthenticators:(0,o.slot)(),getWebAuthnAuthenticationOptedIn:(0,o.slot)(),getTwoFactorAuthenticationEnableStage:(0,o.slot)(),getTwoFactorAuthenticationDisableStage:(0,o.slot)(),getTwoFactorAuthenticationInfo:(0,o.slot)()},t.authenticationLiveQueries={liveReactivationStatus:(0,n.liveSlot)(),liveU2FDevicesList:(0,n.liveSlot)(),liveWebAuthnAuthenticators:(0,n.liveSlot)(),liveWebAuthnAuthenticationOptedIn:(0,n.liveSlot)(),liveTwoFactorAuthenticationEnableStage:(0,n.liveSlot)(),liveTwoFactorAuthenticationDisableStage:(0,n.liveSlot)(),liveTwoFactorAuthenticationInfo:(0,n.liveSlot)()}},22854:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.changeMasterPasswordLiveQueries=t.changeMasterPasswordQueries=t.changeMasterPasswordCommands=void 0;const o=r(72931),n=r(32164);t.changeMasterPasswordCommands={changeMasterPassword:(0,o.slot)()},t.changeMasterPasswordQueries={},t.changeMasterPasswordLiveQueries={liveChangeMasterPasswordStatus:(0,n.liveSlot)()}},46356:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contactInfoLiveQueries=t.contactInfoQueries=t.contactInfoCommands=void 0;const o=r(72931),n=r(32164);t.contactInfoCommands={editContactInfo:(0,o.slot)()},t.contactInfoQueries={getContactInfo:(0,o.slot)()},t.contactInfoLiveQueries={liveContactInfo:(0,n.liveSlot)()}},68140:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOtpLiveQueries=t.credentialOtpQueries=t.credentialOtpCommands=void 0;const o=r(72931),n=r(32164);t.credentialOtpCommands={generateCredentialOTP:(0,o.slot)()},t.credentialOtpQueries={getCredentialOTP:(0,o.slot)()},t.credentialOtpLiveQueries={liveCredentialOTP:(0,n.liveSlot)()}},29147:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cryptoMigrationLiveQueries=t.cryptoMigrationQueries=t.cryptoMigrationCommands=void 0;const o=r(72931),n=r(32164);t.cryptoMigrationCommands={changeUserCrypto:(0,o.slot)()},t.cryptoMigrationQueries={getCanUserChangeCrypto:(0,o.slot)(),getUserDerivationMethod:(0,o.slot)()},t.cryptoMigrationLiveQueries={liveUserDerivationMethod:(0,n.liveSlot)()}},64225:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.darkWebLiveQueries=t.darkWebQueries=t.darkWebCommands=void 0;const o=r(72931),n=r(32164);t.darkWebCommands={confirmDataLeaksEmailToken:(0,o.slot)(),optinDataLeaksMonitoring:(0,o.slot)(),optoutDataLeaksMonitoring:(0,o.slot)(),refreshDataLeaksEmailStatusList:(0,o.slot)(),updateDarkWebOnboardingState:(0,o.slot)()},t.darkWebQueries={getDataLeaksEmailStatusList:(0,o.slot)(),getDarkWebOnboardingState:(0,o.slot)()},t.darkWebLiveQueries={liveDataLeaksEmailStatusList:(0,n.liveSlot)(),liveDarkWebOnboardingState:(0,n.liveSlot)()}},90631:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dataManagementCommands=t.dataManagementLiveQueries=t.dataManagementQueries=void 0;const o=r(72931),n=r(32164);t.dataManagementQueries={getAddresses:(0,o.slot)(),getAddress:(0,o.slot)(),getAnonymousUserId:(0,o.slot)(),getBankAccount:(0,o.slot)(),getBankAccounts:(0,o.slot)(),getBreach:(0,o.slot)(),getBreaches:(0,o.slot)(),getBreachesPage:(0,o.slot)(),getBreachesPaginationToken:(0,o.slot)(),getCompanies:(0,o.slot)(),getCompany:(0,o.slot)(),canUserAddNewCredential:(0,o.slot)(),getCredential:(0,o.slot)(),getCredentialCategories:(0,o.slot)(),getCredentials:(0,o.slot)(),getCredentialsByDomain:(0,o.slot)(),getCredentialsCount:(0,o.slot)(),getCredentialLimitStatus:(0,o.slot)(),getCredentialsHealthScore:(0,o.slot)(),getCredentialsPage:(0,o.slot)(),getCredentialsPaginationToken:(0,o.slot)(),getCompromisedCredentialsCount:(0,o.slot)(),getReusedCredentialsCount:(0,o.slot)(),getShouldShowRequireMasterPassword:(0,o.slot)(),getWeakCredentialsCount:(0,o.slot)(),getDriverLicense:(0,o.slot)(),getDriverLicenses:(0,o.slot)(),getAutofillDriverLicenseData:(0,o.slot)(),getAutofillDriverLicensesData:(0,o.slot)(),getEmail:(0,o.slot)(),getEmails:(0,o.slot)(),getFiscalId:(0,o.slot)(),getFiscalIds:(0,o.slot)(),getIdentities:(0,o.slot)(),getIdentitiesCount:(0,o.slot)(),getIdentity:(0,o.slot)(),getImportPersonalDataStatus:(0,o.slot)(),getGeneratedPassword:(0,o.slot)(),getGeneratedPasswordsCount:(0,o.slot)(),getGeneratedPasswords:(0,o.slot)(),getGeneratedPasswordsPage:(0,o.slot)(),getGeneratedPasswordsPaginationToken:(0,o.slot)(),getIdCard:(0,o.slot)(),getIdCards:(0,o.slot)(),getAutofillIdCardData:(0,o.slot)(),getAutofillIdCardsData:(0,o.slot)(),getIsForcedDomainsEnabled:(0,o.slot)(),getNote:(0,o.slot)(),getNoteCategories:(0,o.slot)(),getNotes:(0,o.slot)(),getNotesCount:(0,o.slot)(),getNotesPage:(0,o.slot)(),getNotesPaginationToken:(0,o.slot)(),getPasswordHistory:(0,o.slot)(),getHasPasswordHistory:(0,o.slot)(),getPasswordHistoryPage:(0,o.slot)(),getPasswordHistoryPaginationToken:(0,o.slot)(),getPassport:(0,o.slot)(),getPassports:(0,o.slot)(),getAutofillPassportData:(0,o.slot)(),getAutofillPassportsData:(0,o.slot)(),getPaymentCard:(0,o.slot)(),getPaymentCards:(0,o.slot)(),getPersonalWebsite:(0,o.slot)(),getPersonalWebsites:(0,o.slot)(),getPhone:(0,o.slot)(),getPhones:(0,o.slot)(),getSocialSecurityId:(0,o.slot)(),getSocialSecurityIds:(0,o.slot)(),getAutofillSocialSecurityIdData:(0,o.slot)(),getAutofillSocialSecurityIdsData:(0,o.slot)(),getBreachesUpdateStatus:(0,o.slot)(),getSpace:(0,o.slot)(),getSpaces:(0,o.slot)(),getAnalysisDisabledStatusOnUrl:(0,o.slot)(),getAnalysisEnabledStatusOnUrl:(0,o.slot)(),getAutofillOptionsOnUrl:(0,o.slot)(),getIsUrlBanished:(0,o.slot)(),arePasswordsProtected:(0,o.slot)(),getSecureFilesInfoList:(0,o.slot)(),getFileDownloadProgress:(0,o.slot)(),getFileUploadProgress:(0,o.slot)(),getSecureFilesQuota:(0,o.slot)(),getAutofillProtectionContext:(0,o.slot)()},t.dataManagementLiveQueries={liveAddress:(0,n.liveSlot)(),liveAddresses:(0,n.liveSlot)(),liveBankAccount:(0,n.liveSlot)(),liveBankAccounts:(0,n.liveSlot)(),liveBreach:(0,n.liveSlot)(),liveBreaches:(0,n.liveSlot)(),liveBreachesBatch:(0,n.liveSlot)(),liveCanUserAddNewCredential:(0,n.liveSlot)(),liveCredential:(0,n.liveSlot)(),liveCredentials:(0,n.liveSlot)(),liveCredentialsByDomain:(0,n.liveSlot)(),liveCredentialsBatch:(0,n.liveSlot)(),liveCredentialsCount:(0,n.liveSlot)(),liveCredentialsHealthScore:(0,n.liveSlot)(),liveCompromisedCredentialsCount:(0,n.liveSlot)(),liveDriverLicense:(0,n.liveSlot)(),liveDriverLicenses:(0,n.liveSlot)(),liveCredentialLimitStatus:(0,n.liveSlot)(),liveReusedCredentialsCount:(0,n.liveSlot)(),liveWeakCredentialsCount:(0,n.liveSlot)(),liveCompanies:(0,n.liveSlot)(),liveCompany:(0,n.liveSlot)(),liveEmail:(0,n.liveSlot)(),liveEmails:(0,n.liveSlot)(),liveFiscalId:(0,n.liveSlot)(),liveFiscalIds:(0,n.liveSlot)(),liveGeneratedPasswords:(0,n.liveSlot)(),liveGeneratedPasswordsCount:(0,n.liveSlot)(),liveIdentities:(0,n.liveSlot)(),liveIdentitiesCount:(0,n.liveSlot)(),liveIdentity:(0,n.liveSlot)(),liveIdCard:(0,n.liveSlot)(),liveIdCards:(0,n.liveSlot)(),liveImportPersonalDataStatus:(0,n.liveSlot)(),liveNote:(0,n.liveSlot)(),liveNotes:(0,n.liveSlot)(),liveNotesBatch:(0,n.liveSlot)(),liveNotesCount:(0,n.liveSlot)(),livePassport:(0,n.liveSlot)(),livePassports:(0,n.liveSlot)(),livePasswordHistory:(0,n.liveSlot)(),livePasswordHistoryBatch:(0,n.liveSlot)(),livePaymentCard:(0,n.liveSlot)(),livePaymentCards:(0,n.liveSlot)(),livePersonalWebsite:(0,n.liveSlot)(),livePersonalWebsites:(0,n.liveSlot)(),livePhone:(0,n.liveSlot)(),livePhones:(0,n.liveSlot)(),liveSocialSecurityId:(0,n.liveSlot)(),liveSocialSecurityIds:(0,n.liveSlot)(),liveBreachesUpdaterStatus:(0,n.liveSlot)(),liveArePasswordsProtected:(0,n.liveSlot)(),liveFileDownloadProgress:(0,n.liveSlot)(),liveFileUploadProgress:(0,n.liveSlot)(),liveSecureFilesQuota:(0,n.liveSlot)()},t.dataManagementCommands={addBankAccount:(0,o.slot)(),addDriverLicense:(0,o.slot)(),addFiscalId:(0,o.slot)(),addIdCard:(0,o.slot)(),addPassport:(0,o.slot)(),addPaymentCard:(0,o.slot)(),addSecureNote:(0,o.slot)(),updateSecureNote:(0,o.slot)(),deleteSecureNote:(0,o.slot)(),addSocialSecurityId:(0,o.slot)(),deleteBankAccount:(0,o.slot)(),deleteDriverLicense:(0,o.slot)(),deleteFiscalId:(0,o.slot)(),deleteIdCard:(0,o.slot)(),deletePassport:(0,o.slot)(),deletePaymentCard:(0,o.slot)(),deleteSocialSecurityId:(0,o.slot)(),editDriverLicense:(0,o.slot)(),editFiscalId:(0,o.slot)(),editPassport:(0,o.slot)(),getPersonalDataExport:(0,o.slot)(),saveGeneratedPassword:(0,o.slot)(),toggleDashlane:(0,o.slot)(),updateBankAccount:(0,o.slot)(),updateBreachStatus:(0,o.slot)(),updateCredential:(0,o.slot)(),editIdCard:(0,o.slot)(),updatePaymentCard:(0,o.slot)(),editSocialSecurityId:(0,o.slot)(),updateProtectPasswordsSetting:(0,o.slot)(),setupDefaultCredentialsCategories:(0,o.slot)(),setupDefaultNoteCategories:(0,o.slot)(),importPersonalData:(0,o.slot)(),validatePersonalDataArchive:(0,o.slot)(),dismissPersonalDataImportNotifications:(0,o.slot)(),deleteSecureFile:(0,o.slot)(),downloadSecureFile:(0,o.slot)(),chunkTransferDone:(0,o.slot)(),addSecureFile:(0,o.slot)(),validateSecureFile:(0,o.slot)(),commitSecureFile:(0,o.slot)(),initSecureFilesStorageInfo:(0,o.slot)(),clearSecureFilesState:(0,o.slot)(),disableVaultItemProtection:(0,o.slot)()}},94024:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deviceQueries=void 0;const o=r(72931);t.deviceQueries={getAnonymousComputerId:(0,o.slot)({noBuffer:!0})}},88250:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.eventLoggerCommands=void 0;const o=r(72931);t.eventLoggerCommands={logPageView:(0,o.slot)(),logEvent:(0,o.slot)(),flushQueue:(0,o.slot)()}},18580:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.exceptionCommands=void 0;const o=r(72931);t.exceptionCommands={logException:(0,o.slot)()}},35777:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.familyCommands=void 0;const o=r(72931);t.familyCommands={getFamilyDetails:(0,o.slot)(),joinFamily:(0,o.slot)(),leaveFamily:(0,o.slot)(),removeFamilyMember:(0,o.slot)(),resetFamilyJoinToken:(0,o.slot)()}},14272:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.featureLiveQueries=t.featureQueries=void 0;const o=r(72931),n=r(32164);t.featureQueries={getHasFeature:(0,o.slot)(),getFeatures:(0,o.slot)()},t.featureLiveQueries={liveHasFeature:(0,n.liveSlot)()}},30734:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.remoteFilesLiveQueries=t.remoteFilesQueries=void 0;const o=r(32164),n=r(72931);t.remoteFilesQueries={getFileContent:(0,n.slot)()},t.remoteFilesLiveQueries={liveFileMeta:(0,o.liveSlot)()}},33484:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.globalExtensionSettingsCommands=void 0;const o=r(72931);t.globalExtensionSettingsCommands={setGlobalExtensionSettings:(0,o.slot)(),getGlobalExtensionSettings:(0,o.slot)()}},89446:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.healthCommands=void 0;const o=r(72931);t.healthCommands={evaluatePassword:(0,o.slot)()}},33128:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.killswitchLiveQueries=t.killswitchQueries=void 0;const o=r(72931),n=r(32164);t.killswitchQueries={getIsBrazeContentDisabled:(0,o.slot)()},t.killswitchLiveQueries={liveIsBrazeContentDisabled:(0,n.liveSlot)()}},46554:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginNotificationsLiveQueries=t.loginNotificationsQueries=t.loginNotificationsCommands=void 0;const o=r(72931),n=r(32164);t.loginNotificationsCommands={clearAllStoredLoginNotification:(0,o.slot)()},t.loginNotificationsQueries={getLoginNotifications:(0,o.slot)()},t.loginNotificationsLiveQueries={liveLoginNotifications:(0,n.liveSlot)()}},58960:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginLiveQueries=t.loginQueries=t.loginCommands=void 0;const o=r(72931),n=r(32164);t.loginCommands={abortDeviceLimitFlow:(0,o.slot)(),loginViaSSO:(0,o.slot)(),unlinkPreviousDevice:(0,o.slot)(),unlinkMultipleDevices:(0,o.slot)()},t.loginQueries={getLoginDeviceLimitFlow:(0,o.slot)()},t.loginLiveQueries={liveLoginDeviceLimitFlow:(0,n.liveSlot)()}},48865:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginStepInfoLiveQueries=t.loginStepInfoQueries=t.loginStepInfoCommands=void 0;const o=r(72931);t.loginStepInfoCommands={updateLoginStepInfo:(0,o.slot)(),resetLoginStepInfo:(0,o.slot)()},t.loginStepInfoQueries={getLoginStepInfo:(0,o.slot)()},t.loginStepInfoLiveQueries={liveLoginStepInfo:(0,o.slot)()}},64515:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notificationsLiveQueries=t.notificationsQueries=t.notificationsCommands=void 0;const o=r(72931),n=r(32164);t.notificationsCommands={markNotificationAsInteracted:(0,o.slot)(),markNotificationAsSeen:(0,o.slot)()},t.notificationsQueries={getNotificationStatus:(0,o.slot)()},t.notificationsLiveQueries={liveNotificationStatus:(0,n.liveSlot)()}},29974:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.passwordGeneratorQueries=t.passwordGeneratorCommands=void 0;const o=r(72931);t.passwordGeneratorCommands={generatePassword:(0,o.slot)(),generateAndSavePassword:(0,o.slot)(),savePasswordGenerationSettings:(0,o.slot)()},t.passwordGeneratorQueries={getPasswordGenerationSettings:(0,o.slot)()}},94856:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.passwordLeakLiveQueries=t.passwordLeakCommands=void 0;const o=r(72931),n=r(32164);t.passwordLeakCommands={isPasswordLeaked:(0,o.slot)()},t.passwordLeakLiveQueries={liveIsPasswordLeaked:(0,n.liveSlot)()}},75128:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.passwordChangeLiveQueries=t.passwordChangeQueries=t.passwordChangeCommands=void 0;const o=r(72931),n=r(32164);t.passwordChangeCommands={createPasswordChange:(0,o.slot)(),getRecipe:(0,o.slot)(),generatePasswordForCredential:(0,o.slot)(),getSupportedCredentialsForPasswordChange:(0,o.slot)(),answerPasswordChangeUserPrompt:(0,o.slot)(),sendPasswordChangeDumps:(0,o.slot)(),deletePasswordChangeDumps:(0,o.slot)(),dismissPasswordChangeNotifications:(0,o.slot)(),registerPasswordChangeChangeAttempt:(0,o.slot)(),updateRelatedPasswordChangerCredentials:(0,o.slot)()},t.passwordChangeQueries={getPasswordChanges:(0,o.slot)(),hasPendingPasswordChangeDumps:(0,o.slot)(),getPasswordChangeNotifications:(0,o.slot)()},t.passwordChangeLiveQueries={livePasswordChanges:(0,n.liveSlot)(),liveHasPendingPasswordChangeDumps:(0,n.liveSlot)(),livePasswordChangeNotifications:(0,n.liveSlot)()}},31465:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.paymentsQueries=t.paymentsCommands=void 0;const o=r(72931);t.paymentsCommands={cancelAutoRenew:(0,o.slot)(),downloadCustomerInvoice:(0,o.slot)(),fetchInvoiceList:(0,o.slot)(),requestRefund:(0,o.slot)()},t.paymentsQueries={getInvoicesCount:(0,o.slot)(),getInvoiceList:(0,o.slot)(),getInvoiceListYears:(0,o.slot)()}},45709:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.protectedItemsUnlockerLiveQueries=t.protectedItemsUnlockerQueries=t.protectedItemsUnlockerCommands=void 0;const o=r(72931),n=r(32164);t.protectedItemsUnlockerCommands={disableCredentialProtection:(0,o.slot)(),unlockProtectedItems:(0,o.slot)()},t.protectedItemsUnlockerQueries={areProtectedItemsUnlocked:(0,o.slot)()},t.protectedItemsUnlockerLiveQueries={liveAreProtectedItemsUnlocked:(0,n.liveSlot)()}},64540:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountRecoveryRequestLiveQueries=t.recoveryQueries=t.recoveryCommands=void 0;const o=r(72931),n=r(32164);t.recoveryCommands={activateAccountRecovery:(0,o.slot)(),setupMasterPasswordForRecovery:(0,o.slot)(),deactivateAccountRecovery:(0,o.slot)(),registerDeviceForRecovery:(0,o.slot)(),startAccountRecovery:(0,o.slot)(),sendRecoveryRequest:(0,o.slot)(),cancelRecoveryRequest:(0,o.slot)(),checkRecoveryRequestStatus:(0,o.slot)(),recoverUserData:(0,o.slot)(),checkDoesLocalRecoveryKeyExist:(0,o.slot)(),isRecoveryRequestPending:(0,o.slot)()},t.recoveryQueries={getRecoveryOptInSetting:(0,o.slot)(),getShouldShowFeatureActivationModal:(0,o.slot)(),getAccountRecoveryRequestCount:(0,o.slot)()},t.accountRecoveryRequestLiveQueries={liveAccountRecoveryRequestCount:(0,n.liveSlot)()}},76793:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.remoteFilesLiveQueries=void 0;const o=r(32164);t.remoteFilesLiveQueries={liveFileMeta:(0,o.liveSlot)()}},24945:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.saexMigrationLiveQueries=t.saexMigrationQueries=t.saexMigrationCommands=void 0;const o=r(72931),n=r(32164);t.saexMigrationCommands={updateMigrationOnboarding:(0,o.slot)()},t.saexMigrationQueries={getMigrationOnboarding:(0,o.slot)(),getDesktopLogin:(0,o.slot)()},t.saexMigrationLiveQueries={liveMigrationOnboarding:(0,n.liveSlot)()}},19764:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sessionLiveQueries=t.sessionQueries=t.sessionCommands=void 0;const o=r(72931),n=r(32164);t.sessionCommands={validateToken:(0,o.slot)(),validateMasterPassword:(0,o.slot)(),resetProtectedItemAutofillTimer:(0,o.slot)(),forceSync:(0,o.slot)(),updatePremiumChurningDismissDate:(0,o.slot)(),setCredentialSearchOrder:(0,o.slot)()},t.sessionQueries={getActiveSpaces:(0,o.slot)(),getDidOpen:(0,o.slot)(),getMasterPasswordAndServerKey:(0,o.slot)(),getSyncInfo:(0,o.slot)(),getIsSyncInProgress:(0,o.slot)(),getPremiumStatus:(0,o.slot)({noBuffer:!0}),getIsAuthenticated:(0,o.slot)(),getIsSSOUser:(0,o.slot)(),getSSOMigrationInfo:(0,o.slot)(),getUserLogin:(0,o.slot)(),getPublicUserId:(0,o.slot)(),getAnalyticsInstallationId:(0,o.slot)(),getUserLoginStatus:(0,o.slot)(),getWebOnboardingMode:(0,o.slot)(),getPremiumChurningDismissDate:(0,o.slot)(),getIsPaymentFailureChurningDismissed:(0,o.slot)(),getCredentialSearchOrder:(0,o.slot)(),getPlatformName:(0,o.slot)({noBuffer:!0})},t.sessionLiveQueries={liveDidOpen:(0,n.liveSlot)(),liveSyncInfo:(0,n.liveSlot)(),liveIsSyncInProgress:(0,n.liveSlot)(),liveLoginStatus:(0,n.liveSlot)(),livePremiumStatus:(0,n.liveSlot)(),liveServiceProviderUrl:(0,n.liveSlot)(),liveWebOnboardingMode:(0,n.liveSlot)()}},79900:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingLiveQueries=t.sharingQueries=void 0;const o=r(72931),n=r(32164);t.sharingQueries={getAllSharedItemIds:(0,o.slot)(),getGroupRecipients:(0,o.slot)(),getHasNotifications:(0,o.slot)(),getIsShared:(0,o.slot)(),getItemItemGroup:(0,o.slot)(),getMyAcceptedItemGroupUserMembers:(0,o.slot)(),getMyAcceptedUserGroups:(0,o.slot)(),getPendingItemGroups:(0,o.slot)(),getPendingUserGroups:(0,o.slot)(),getRecipientsCount:(0,o.slot)(),getSharingCapacity:(0,o.slot)(),getUserRecipients:(0,o.slot)(),isAllowedToShare:(0,o.slot)(),getUserGroups:(0,o.slot)(),getUserGroup:(0,o.slot)(),getSharingUsers:(0,o.slot)(),getUserGroupPermissionLevel:(0,o.slot)(),getSharingUserPermissionLevel:(0,o.slot)(),getUserGroupMembers:(0,o.slot)()},t.sharingLiveQueries={liveAllSharedItemIds:(0,n.liveSlot)(),liveGroupRecipients:(0,n.liveSlot)(),liveHasNotifications:(0,n.liveSlot)(),liveIsShared:(0,n.liveSlot)(),liveMyAcceptedItemGroupUserMembers:(0,n.liveSlot)(),liveMyAcceptedUserGroups:(0,n.liveSlot)(),livePendingItemGroups:(0,n.liveSlot)(),livePendingUserGroups:(0,n.liveSlot)(),liveRecipientsCount:(0,n.liveSlot)(),liveSharingCapacity:(0,n.liveSlot)(),liveUserRecipients:(0,n.liveSlot)(),liveUserGroups:(0,n.liveSlot)(),liveSharingUsers:(0,n.liveSlot)(),liveUserGroupPermissionLevel:(0,n.liveSlot)(),liveSharingUserPermissionLevel:(0,n.liveSlot)()}},84496:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.staticDataQueries=void 0;const o=r(72931);t.staticDataQueries={getAllBanks:(0,o.slot)(),getAllCallingCodes:(0,o.slot)(),getBanks:(0,o.slot)(),getSecureDocumentsExtensionsList:(0,o.slot)()}},93733:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptionCodeLiveQueries=t.subscriptionCodeQueries=void 0;const o=r(72931),n=r(32164);t.subscriptionCodeQueries={getSubscriptionCode:(0,o.slot)()},t.subscriptionCodeLiveQueries={liveSubscriptionCode:(0,n.liveSlot)()}},68361:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.teamAdminLiveQueries=t.teamAdminQueries=t.teamAdminCommands=void 0;const o=r(72931),n=r(32164);t.teamAdminCommands={completeTeamDomainRegistration:(0,o.slot)(),deactivateTeamDomain:(0,o.slot)(),getTeamDomains:(0,o.slot)(),getTeamDevice:(0,o.slot)(),registerTeamDomain:(0,o.slot)(),registerTeamDevice:(0,o.slot)(),getEncryptionServiceConfig:(0,o.slot)(),generateAndSaveEncryptionServiceConfig:(0,o.slot)(),getTeamDeviceEncryptedConfig:(0,o.slot)(),updateTeamDeviceEncryptedConfig:(0,o.slot)(),createSSOConnectorConfig:(0,o.slot)(),generateSSOConnectorKey:(0,o.slot)(),getReport:(0,o.slot)(),getTeamInfoLogs:(0,o.slot)(),getAuditLogs:(0,o.slot)()},t.teamAdminQueries={getAdministrableUserGroup:(0,o.slot)(),getAdministrableUserGroups:(0,o.slot)(),isGroupNameAvailable:(0,o.slot)()},t.teamAdminLiveQueries={liveAdministrableUserGroup:(0,n.liveSlot)(),liveAdministrableUserGroups:(0,n.liveSlot)()}},73153:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.teamQueries=t.teamCommands=void 0;const o=r(72931);t.teamCommands={getTeamInfo:(0,o.slot)()},t.teamQueries={getIsRecoveryEnabled:(0,o.slot)(),getIsSharingEnabled:(0,o.slot)()}},95861:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userAutofillCorrectionsQueries=t.userAutofillCorrectionsCommands=void 0;const o=r(72931);t.userAutofillCorrectionsCommands={saveUserAutofillCorrections:(0,o.slot)(),saveUserAutofillCorrectionsForMaverick:(0,o.slot)()},t.userAutofillCorrectionsQueries={getUserAutofillCorrections:(0,o.slot)(),getUserAutofillCorrectionsForMaverick:(0,o.slot)()}},13523:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userMessagesLiveQueries=t.userMessagesQueries=t.userMessagesCommands=void 0;const o=r(72931),n=r(32164);t.userMessagesCommands={dismissUserMessages:(0,o.slot)()},t.userMessagesQueries={getVisibleUserMessages:(0,o.slot)()},t.userMessagesLiveQueries={liveVisibleUserMessages:(0,n.liveSlot)()}},59194:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vpnLives=t.vpnQueries=t.vpnCommands=void 0;const o=r(32164),n=r(72931);t.vpnCommands={activateVpnAccount:(0,n.slot)(),clearVpnAccountErrors:(0,n.slot)(),completeVpnAccountActivation:(0,n.slot)()},t.vpnQueries={getVpnAccount:(0,n.slot)(),getVpnCapabilitySetting:(0,n.slot)()},t.vpnLives={liveVpnAccount:(0,o.liveSlot)()}},24056:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.apiEvents=void 0;const o=r(72931),n=r(37912),a=r(42452),i=r(9364);t.apiEvents=(0,o.combineEvents)(n.commandsEvents,a.queriesEvents,i.liveEvents)},37912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.commandsEvents=void 0;const o=r(72931),n=r(78568),a=r(19399),i=r(46356),s=r(68140),c=r(22854),d=r(29147),l=r(64225),u=r(35777),p=r(33484),S=r(89446),g=r(58960),m=r(46554),y=r(64515),v=r(75128),A=r(94856),E=r(45709),f=r(64540),h=r(19764),_=r(24945),T=r(68361),I=r(73153),C=r(90631),P=r(29974),D=r(88250),O=r(18580),b=r(59194),w=r(31465),N=r(13523),R=r(48865),L=r(95861);t.commandsEvents=(0,o.combineEvents)(n.abTestsCommands,a.authenticationCommands,i.contactInfoCommands,s.credentialOtpCommands,c.changeMasterPasswordCommands,d.cryptoMigrationCommands,l.darkWebCommands,C.dataManagementCommands,u.familyCommands,p.globalExtensionSettingsCommands,S.healthCommands,g.loginCommands,m.loginNotificationsCommands,R.loginStepInfoCommands,y.notificationsCommands,v.passwordChangeCommands,A.passwordLeakCommands,E.protectedItemsUnlockerCommands,f.recoveryCommands,_.saexMigrationCommands,T.teamAdminCommands,I.teamCommands,h.sessionCommands,P.passwordGeneratorCommands,D.eventLoggerCommands,O.exceptionCommands,N.userMessagesCommands,b.vpnCommands,w.paymentsCommands,L.userAutofillCorrectionsCommands)},9364:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.liveEvents=void 0;const o=r(78568),n=r(99496),a=r(64540),i=r(19399),s=r(22854),c=r(46356),d=r(68140),l=r(29147),u=r(64225),p=r(90631),S=r(14272),g=r(33128),m=r(46554),y=r(58960),v=r(64515),A=r(94856),E=r(75128),f=r(45709),h=r(24945),_=r(19764),T=r(79900),I=r(93733),C=r(68361),P=r(13523),D=r(48865),O=r(72931),b=r(59194),w=r(76793);t.liveEvents=(0,O.combineEvents)(o.abTestsLiveQueries,n.accountCreationLiveQueries,a.accountRecoveryRequestLiveQueries,i.authenticationLiveQueries,c.contactInfoLiveQueries,d.credentialOtpLiveQueries,l.cryptoMigrationLiveQueries,s.changeMasterPasswordLiveQueries,u.darkWebLiveQueries,p.dataManagementLiveQueries,S.featureLiveQueries,g.killswitchLiveQueries,y.loginLiveQueries,m.loginNotificationsLiveQueries,D.loginStepInfoLiveQueries,v.notificationsLiveQueries,E.passwordChangeLiveQueries,A.passwordLeakLiveQueries,f.protectedItemsUnlockerLiveQueries,h.saexMigrationLiveQueries,_.sessionLiveQueries,T.sharingLiveQueries,I.subscriptionCodeLiveQueries,C.teamAdminLiveQueries,P.userMessagesLiveQueries,b.vpnLives,w.remoteFilesLiveQueries)},42452:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queriesEvents=void 0;const o=r(72931),n=r(78568),a=r(19399),i=r(46356),s=r(93733),c=r(68140),d=r(22854),l=r(29147),u=r(64225),p=r(90631),S=r(94024),g=r(14272),m=r(33128),y=r(58960),v=r(46554),A=r(48865),E=r(64515),f=r(75128),h=r(31465),_=r(45709),T=r(64540),I=r(24945),C=r(19764),P=r(79900),D=r(84496),O=r(73153),b=r(68361),w=r(29974),N=r(13523),R=r(59194),L=r(95861),U=r(30734);t.queriesEvents=(0,o.combineEvents)(n.abTestsQueries,a.authenticationQueries,i.contactInfoQueries,c.credentialOtpQueries,u.darkWebQueries,S.deviceQueries,d.changeMasterPasswordQueries,l.cryptoMigrationQueries,p.dataManagementQueries,g.featureQueries,m.killswitchQueries,y.loginQueries,v.loginNotificationsQueries,A.loginStepInfoQueries,E.notificationsQueries,f.passwordChangeQueries,w.passwordGeneratorQueries,h.paymentsQueries,_.protectedItemsUnlockerQueries,T.recoveryQueries,I.saexMigrationQueries,C.sessionQueries,P.sharingQueries,D.staticDataQueries,s.subscriptionCodeQueries,O.teamQueries,b.teamAdminQueries,N.userMessagesQueries,R.vpnQueries,L.userAutofillCorrectionsQueries,U.remoteFilesQueries)},33673:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToDebugEvents=void 0;const o=r(31891),n=e=>(t,r)=>{const{message:o,details:n={}}=r;t[e]({date:(new Date).toJSON(),message:o,optionalParams:Object.keys(n).reduce(((e,t)=>[...e,n[t]]),[])})};t.subscribeToDebugEvents=function(e){(0,o.redirectConsoleLogs)((t=>{const{level:r=o.LogLevel.Debug}=t,a=(e=>{switch(e){case o.LogLevel.Error:return n("error");case o.LogLevel.Warn:return n("warning");case o.LogLevel.Info:return n("info");case o.LogLevel.Debug:case o.LogLevel.Verbose:default:return n("log")}})(r);a(e,t)}))}},63272:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToDiagnosticEvents=void 0;let r=null;t.subscribeToDiagnosticEvents=function(e){r=e,e.decipheringDiagnosticLogEvent.on((e=>e))},t.default=function(){return r}},80563:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.carbonE2EConnector=void 0;const o=r(72931);t.carbonE2EConnector={registerFreeTrial:(0,o.slot)(),getTeamTokens:(0,o.slot)(),confirmFreeTrial:(0,o.slot)(),getPremiumStatus:(0,o.slot)({noBuffer:!0}),proposeMembers:(0,o.slot)(),acceptTeamInvite:(0,o.slot)(),getTokenForTestUser:(0,o.slot)(),getServiceProviderToken:(0,o.slot)(),getSubscriptionTokenForTestUser:(0,o.slot)(),createOrUpdateDarkWebBreach:(0,o.slot)(),addPrivateBreach:(0,o.slot)(),createPublicBreach:(0,o.slot)(),forceBreachRefresh:(0,o.slot)(),getUserCryptoPayload:(0,o.slot)()}},72357:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToE2EEvents=void 0;const o=r(61020),n=r(64803),a=r(26148),i=r(58366),s=r(53916),c=r(98003),d=r(7835);t.subscribeToE2EEvents=function(e,t){const r=(0,n.getCoreServices)(t),l=(0,o.makeTeamAdminController)(r.storeService,r.wsService);e.registerFreeTrial.on(l.registerFreeTrial),e.getTeamTokens.on(l.getTeamTokens),e.confirmFreeTrial.on(l.confirmFreeTrial),e.getPremiumStatus.on(l.getPremiumStatus),e.proposeMembers.on(l.proposeMembers),e.acceptTeamInvite.on(l.acceptTeamInvite),e.getTokenForTestUser.on((e=>(0,a.getTokenForKwUser)(r,e))),e.getServiceProviderToken.on((e=>(0,i.getServiceProviderToken)(r,e))),e.getSubscriptionTokenForTestUser.on((e=>(0,s.getSubscriptionTokenForTestUser)(r,e))),e.createOrUpdateDarkWebBreach.on((e=>(0,d.createOrUpdateDarkWebBreachHelper)(r,e))),e.addPrivateBreach.on((e=>(0,d.addPrivateBreachHelper)(r,e))),e.createPublicBreach.on((e=>(0,d.createPublicBreachHelper)(r,e))),e.forceBreachRefresh.on((()=>{(0,c.forceBreachRefreshHandler)(r)})),e.getUserCryptoPayload.on((()=>r.storeService.getPersonalSettings().CryptoUserPayload))}},44992:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToE2EEvents=t.carbonE2EConnector=void 0;var o=r(80563);Object.defineProperty(t,"carbonE2EConnector",{enumerable:!0,get:function(){return o.carbonE2EConnector}});var n=r(72357);Object.defineProperty(t,"subscribeToE2EEvents",{enumerable:!0,get:function(){return n.subscribeToE2EEvents}})},38029:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setEventBus=void 0;let r=null;t.setEventBus=e=>{r=e},t.default=function(){return r}},66280:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToLeelooEvents=void 0;const o=r(4449),n=r(59125),a=r(61828),i=r(1064),s=r(22029),c=r(64803),d=r(84146),l=r(93918),u=r(33441),p=r(52745),S=r(61020),g=r(86635),m=r(95187),y=r(90842),v=r(89558),A=r(34688),E=r(32234),f=r(46168),h=r(11367),_=r(38029);t.subscribeToLeelooEvents=function(e,t){(0,_.setEventBus)(e);const r=(0,c.getCoreServices)(t),{storeService:T,localStorageService:I,wsService:C,sessionService:P,storageService:D,perfLogService:O}=r,b=(0,o.makeAccountCreationController)(r),w=(0,d.makeSessionController)(r),N=(0,u.makeLoginController)(r),R=(0,h.makeDataManagementController)(r),L=(0,p.makeRecoveryController)(T,C),U=(0,f.makeSettingsController)(T,C),M=(0,S.makeTeamAdminController)(T,C),k=(0,m.makeLogsControllerServices)({storeService:T,perfLogService:O}),F=(0,v.makeSharingService)(T,C),B=(0,y.makeDirectorySyncController)({storeService:T,localStorageService:I,wsService:C,sessionService:P,sharingService:F}),G=(0,A.makeStaticDataController)();e.getUki.on((()=>w.getUki())),e.getLoginStatus.on((()=>w.getLoginStatus())),e.savePaymentCard.on((e=>{R.savePaymentCardFromClient(e,"MANUAL")})),e.savePersonalDataItem.on((e=>{R.savePersonalDataItem(e)})),e.removePersonalDataItem.on((e=>R.removePersonalDataItem(e.id))),e.saveSyncBackupPersonalSetting.on((e=>{R.eraseBackedupData(e.SyncBackup,w.getUki().uki)})),e.getAccountInfo.on((()=>w.getAndTriggerRefreshAccountInfo())),e.getDevicesList.on((()=>w.getDevicesList().then((e=>({devicesList:e}))))),e.getLocalAccountsList.on((()=>(0,s.getLocalAccounts)(T,D.getLocalStorage()).then((e=>({localAccounts:e}))))),e.getTemporaryToken.on((()=>w.getTemporaryToken().then((e=>({temporaryToken:e}))))),e.deactivateDevice.on((e=>{w.deactivateDevice(e.deviceId)})),e.changeDeviceName.on((e=>{w.changeDeviceName(e.deviceId,e.updatedName)})),e.cancelPremiumSubscription.on((()=>w.cancelPremiumSubscription())),e.updatePaymentCardToken.on((e=>{w.updateCardToken(e.tokenId,e.stripeAccount)})),e.getInvoices.on((()=>w.getInvoices().then((e=>({invoices:e}))))),e.closeSession.on((()=>w.closeSession())),e.resumeSession.on((()=>w.resumeSession())),e.getPersonalSettings.on((()=>w.getPersonalSettings().then((e=>e)))),e.openSession.on((({login:e,password:t})=>{N.openSession(e,{password:t})})),e.openSessionWithToken.on((({login:e,password:t,token:r,persistData:o,deviceName:n})=>{N.openSessionWithToken(e,t,r,o?i.PersistData.PERSIST_DATA_YES:i.PersistData.PERSIST_DATA_NO,n)})),e.openSessionWithDashlaneAuthenticator.on((({login:e,password:t,persistData:r,deviceName:o})=>{N.openSessionWithDashlaneAuthenticator(e,t,r?i.PersistData.PERSIST_DATA_YES:i.PersistData.PERSIST_DATA_NO,o)})),e.cancelDashlaneAuthenticatorRegistration.on((()=>{N.cancelDashlaneAuthenticatorRegistration()})),e.openSessionResendToken.on((e=>{N.openSessionResendToken(e.login)})),e.openSessionWithOTP.on((e=>{N.openSessionWithOTP(e.login,e.password,e.otp)})),e.openSessionWithOTPForNewDevice.on((({login:e,password:t,otp:r,persistData:o,deviceName:n})=>{N.openSessionWithOTPForNewDevice(e,t,r,o?i.PersistData.PERSIST_DATA_YES:i.PersistData.PERSIST_DATA_NO,n)})),e.openSessionWithMasterPassword.on((e=>N.openSessionWithMasterPassword(e.login,e.password,{rememberMasterPassword:e.rememberPassword,requiredPermissions:e.requiredPermissions,serverKey:e.serverKey}))),e.openExtraDeviceSession.on((e=>{N.openExtraDeviceSession(e.login,{password:e.password,serverKey:e.serverKey})})),e.openSessionWithExtraDeviceToken.on((e=>N.openSessionWithExtraDeviceToken(e.login,e.extraDeviceToken,e.persistData?i.PersistData.PERSIST_DATA_YES:i.PersistData.PERSIST_DATA_NO,{password:e.password,deviceName:e.deviceName}))),e.sessionForceSync.on((()=>w.sessionForceSync())),e.exceptionLog.on((e=>(0,n.sendTypedExceptionLog)("leelooException",e))),e.perfLog.on((e=>k.sendPerfLog(e))),e.installerLog.on((e=>(0,a.sendInstallerLog)(T,e))),e.usageLog.on((e=>(0,d.sendUsageLog)(T,e))),e.retrieveCredentialLoginUrl.on((e=>{w.sendCredentialLoginUrl(e.credentialId,e.requestId)})),e.teamUpdated.on((e=>M.teamUpdateHandler(e).then((e=>({errors:e}))))),e.createUserGroup.on((e=>M.createUserGroupAction(P,e))),e.deleteUserGroup.on((e=>M.deleteUserGroupAction(e))),e.renameUserGroup.on((e=>M.renameUserGroupAction(e))),e.inviteUserGroupMembers.on((e=>M.inviteUserGroupMembersAction(e))),e.revokeUserGroupMembers.on((e=>M.revokeUserGroupMembersAction(e))),e.updateUserGroupMembers.on((e=>M.updateUserGroupMembersAction(e))),e.createAccountStep1.on((e=>b.createAccount(e))),e.createAccountStep2.on((e=>b.confirmAccountCreation(e))),e.checkLogin.on((e=>b.checkLogin(e))),e.getMasterPasswordResetDemandList.on((e=>L.getMasterPasswordResetDemandList(e))),e.acceptMasterPasswordResetDemand.on((e=>L.acceptMasterPasswordResetDemand(e))),e.checkIfMasterPasswordIsValid.on((e=>w.validateMasterPassword(e.masterPassword).then((e=>({isMasterPasswordValid:e}))))),e.declineMasterPasswordResetDemand.on((e=>L.declineMasterPasswordResetDemand(e))),e.getMembers.on((e=>M.getMembers(e))),e.addTeamAdmin.on((e=>M.addTeamAdmin(e))),e.removeTeamAdmin.on((e=>M.removeTeamAdmin(e))),e.setTeamSettings.on((e=>U.setTeamSettings(e))),e.updateWebOnboardingMode.on((e=>l.updateWebOnboardingMode(T,P,e))),e.openWebOnboardingTab.on((e=>l.openWebOnboardingTab(T,e))),e.checkDirectorySyncKeyResponse.on((e=>{const{teamId:t,publicKey:r,requestId:o,response:n}=e;"validated"===n?B.keyValidatedByTacAdmin(t,r):"rejected"===n&&B.keyRejectedByTacAdmin(t,o)})),e.queryStaticDataCollections.on((e=>G.query(e))),e.sendSharingResponse.on((e=>(0,g.handleSharingResponse)(T,P,e))),e.shareItem.on((({itemId:e,permission:t,recipients:r,sharingSender:o})=>(0,g.handleShareItemRequest)(T,P,C,e,t,r,o))),e.getDataModel.on((()=>(0,E.getDataUpdates)(T).obfuscatedPersonalDataToSend)),e.getSharingSync.on((()=>T.getState().userSession.sharingSync)),e.getSharingData.on((()=>T.getSharingData())),e.revokeSharing.on((({itemGroupId:e,recipient:t,sharingSender:r})=>(0,g.handleRevokeSharing)(T,P,C,e,t,r))),e.getOtpForCredential.on((e=>w.getOtpForCredential(e))),e.updateSharingPermission.on((({itemGroupId:e,recipient:t,permission:r,sharingSender:o})=>(0,g.handleUpdateSharingPermission)(T,P,C,e,t,r,o))),e.setPendingElementsAsSeen.on((e=>(0,g.setPendingElementsAsSeen)(T,I,e))),e.isUserLastAdminOnItem.on((e=>(0,g.isUserLastAdminOnItem)(T,e))),e.doesUserReceiveItemViaGroup.on((e=>(0,g.doesUserReceiveItemViaGroup)(T,e)))}},81489:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setEventBus=void 0;let r=null;t.setEventBus=e=>{r=e},t.default=function(){return r}},13331:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToMaverickEvents=void 0;const o=r(28060),n=r(17509),a=r(54090),i=r(11367),s=r(54670),c=r(81604),d=r(35488),l=r(95187),u=r(59125),p=r(61828),S=r(64803),g=r(93918),m=r(8368),y=r(84146),v=r(75897),A=r(75976),E=r(81659),f=r(88478),h=r(73420),_=r(1269),T=r(69698),I=r(81489);t.subscribeToMaverickEvents=function(e,t){(0,I.setEventBus)(e);const r=(0,S.getCoreServices)(t),C=y.makeSessionController(r),P=(0,i.makeDataManagementController)(r),D=(0,l.makeLogsControllerServices)({storeService:r.storeService,perfLogService:r.perfLogService});e.getOtpForCredential.on((e=>C.getOtpForCredential(e))),e.savePersonalDataItem.on((e=>{P.savePersonalDataItem(e)})),e.analysisDisabled.on((e=>{const t=C.askWebsiteInfo(e.url);return{disabled:(0,A.disableAutofillSelector)(r.storeService.getState())||t.disabledFromSpaces||t.disabledAutologinOnDomain||t.disabledAutologinOnPage,onlyFillLoginInfo:t.disabledAutofillOnDomain||t.disabledAutofillOnPage}})),e.filledDataItem.on((e=>P.updateMetadataItemFilledOnPage(e.id,e.url,e.dataType))),e.exceptionLog.on((e=>(0,u.sendTypedExceptionLog)("maverickException",e))),e.perfLog.on((e=>D.sendPerfLog(e))),e.installerLog.on((e=>(0,p.sendInstallerLog)(r.storeService,e))),e.usageLog.on((e=>y.sendUsageLog(r.storeService,e))),e.generatedPassword.on((({domain:e})=>C.generateAndSavePassword(e))),e.saveCredentialDisabled.on((e=>C.isSaveCredentialDisabled(e))),e.signalSaveCredentialDisabled.on((e=>C.signalSaveCredentialDisabled(e))),e.evaluatePasswordStrength.on((e=>(0,c.evaluatePasswordStrength)(e))),e.updateWebOnboardingMode.on((e=>(0,g.updateWebOnboardingMode)(r.storeService,r.sessionService,e))),e.updateLastMasterPasswordCheckForSSOUsers.on((()=>{r.storeService.dispatch((0,v.updateLastMasterPasswordCheck)())})),e.checkMasterPassword.on((e=>C.validateMasterPassword(e))),e.autofillIsPasswordProtected.on((e=>{const t=r.storeService.getState(),o=(0,m.isSSOUserSelector)(t);let n;if("credential"===e.dataType)n=e.id;else{const e=(0,E.paymentCardsSelector)(t);n=e.length>0?e[0].Id:""}return{isProtected:(0,T.autofillProtectionContextSelector)(t,n).isProtected,dataBackendHasBiometry:!1,isSSOUser:o||!1}})),e.fetchSpacesInfo.on((()=>(0,s.viewedSpacesSelector)(r.storeService.getState()))),e.queryDataModel.on((({id:e,url:t,content:i,type:c})=>{if("all"!==c)throw new Error("Carbon can only handle 'all' user data queries");const d=(0,a.getWebsitesAssociatedToUrl)(t),l=C.getPersonalData();return{id:e,type:c,content:{userData:(0,o.pick)(i,{ADDRESS:l.addresses,AUTHENTIFIANT:l.credentials.filter((e=>e.Url&&""!==e.Url&&d.includes((0,n.getParsedUrl)(e.Url).rootDomain))),AUTH_CATEGORY:l.credentialCategories,BANKSTATEMENT:l.bankAccounts,COMPANY:l.companies,DRIVERLICENCE:l.driverLicenses,EMAIL:l.emails,FISCALSTATEMENT:l.fiscalIds,GENERATED_PASSWORD:l.generatedPasswords.filter((e=>d.includes(e.Domain))),IDENTITY:l.identities,IDCARD:l.idCards,PASSPORT:l.passports,PAYMENTMEANS_CREDITCARD:l.paymentCards,PAYMENTMEAN_PAYPAL:l.paypalAccounts,PERSONALWEBSITE:l.personalWebsites,PHONE:l.phones,SOCIALSECURITYSTATEMENT:l.socialSecurityIds}),spacesInfos:(0,s.viewedSpacesSelector)(r.storeService.getState())}}})),e.getSaveCapabilities.on((()=>(0,d.getFlippedDataTypesForUpload)(r.storeService))),e.isReactivationEnabled.on((()=>Promise.resolve((0,f.reactivationStatusSelector)(r.storeService.getState())!==_.ReactivationStatus.DISABLED))),e.disableReactivation.on((()=>{r.storeService.dispatch((0,h.reactivationStatusUpdated)(_.ReactivationStatus.DISABLED))}))}},91359:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setEventBus=void 0;let r=null;t.setEventBus=e=>{r=e},t.default=function(){return r}},20367:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToExtensionEvents=void 0;const o=r(54516),n=r(22029),a=r(59125),i=r(61828),s=r(93918),c=r(1064),d=r(64803),l=r(84146),u=r(33441),p=r(95187),S=r(91359);t.subscribeToExtensionEvents=function(e,t){(0,S.setEventBus)(e);const r=(0,d.getCoreServices)(t),{storeService:g,storageService:m}=r,y=(0,u.makeLoginController)(r),v=(0,l.makeSessionController)(r),A=(0,p.makeLogsControllerServices)({storeService:r.storeService,perfLogService:r.perfLogService});e.getAccountInfo.on((()=>v.getAndTriggerRefreshAccountInfo())),e.getDevicesList.on((()=>v.getDevicesList().then((e=>({devicesList:e}))))),e.getLocalAccountsList.on((()=>(0,n.getLocalAccounts)(g,m.getLocalStorage()).then((e=>({localAccounts:e}))))),e.getAnonymousLogsMetadata.on((()=>({anonymouscomputerid:(0,o.getCommonAppSetting)("anonymousComputerId")}))),e.askWebsiteInfo.on((({fullUrl:e})=>v.askWebsiteInfo(e))),e.toggleDashlaneOnPage.on((e=>v.toggleDashlaneOnPage(e))),e.toggleDashlaneOnSite.on((e=>v.toggleDashlaneOnSite(e))),e.deactivateDevice.on((e=>{v.deactivateDevice(e.deviceId)})),e.changeDeviceName.on((e=>{v.changeDeviceName(e.deviceId,e.updatedName)})),e.checkIfMasterPasswordIsValid.on((e=>v.validateMasterPassword(e.masterPassword).then((e=>({isMasterPasswordValid:e}))))),e.closeSession.on((()=>v.closeSession())),e.openSession.on((({login:e,password:t})=>{y.openSession(e,{password:t})})),e.openSessionWithToken.on((({login:e,password:t,token:r,persistData:o,deviceName:n})=>{y.openSessionWithToken(e,t,r,o?c.PersistData.PERSIST_DATA_YES:c.PersistData.PERSIST_DATA_NO,n)})),e.openSessionWithDashlaneAuthenticator.on((({login:e,password:t,persistData:r,deviceName:o})=>{y.openSessionWithDashlaneAuthenticator(e,t,r?c.PersistData.PERSIST_DATA_YES:c.PersistData.PERSIST_DATA_NO,o)})),e.cancelDashlaneAuthenticatorRegistration.on((()=>{y.cancelDashlaneAuthenticatorRegistration()})),e.openSessionResendToken.on((e=>{y.openSessionResendToken(e.login)})),e.openSessionWithOTP.on((e=>{y.openSessionWithOTP(e.login,e.password,e.otp)})),e.openSessionWithOTPForNewDevice.on((({login:e,password:t,otp:r,persistData:o,deviceName:n})=>{y.openSessionWithOTPForNewDevice(e,t,r,o?c.PersistData.PERSIST_DATA_YES:c.PersistData.PERSIST_DATA_NO,n)})),e.openSessionWithMasterPassword.on((e=>{y.openSessionWithMasterPassword(e.login,e.password,{rememberMasterPassword:e.rememberPassword,serverKey:e.serverKey})})),e.openExtraDeviceSession.on((e=>{y.openExtraDeviceSession(e.login,{password:e.password,serverKey:e.serverKey})})),e.openSessionWithExtraDeviceToken.on((e=>y.openSessionWithExtraDeviceToken(e.login,e.extraDeviceToken,e.persistData?c.PersistData.PERSIST_DATA_YES:c.PersistData.PERSIST_DATA_NO,{password:e.password,deviceName:e.deviceName}))),e.sessionForceSync.on((()=>{v.sessionForceSync()})),e.updateWebOnboardingMode.on((e=>{s.updateWebOnboardingMode(r.storeService,r.sessionService,e)})),e.openDevSession.on((()=>{})),e.exceptionLog.on((e=>(0,a.sendTypedExceptionLog)("extensionException",e))),e.perfLog.on((e=>A.sendPerfLog(e))),e.installerLog.on((e=>(0,i.sendInstallerLog)(r.storeService,e))),e.usageLog.on((e=>(0,l.sendUsageLog)(r.storeService,e)))}},37223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(85270),n=r(56069),a=r(25764);t.config={commands:{generateCredentialOTP:{handler:o.generateCredentialOTP}},queries:{getCredentialOTP:{selector:a.credentialOTPSelector}},liveQueries:{liveCredentialOTP:{operator:n.credentialOTP$}}}},76631:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GenerateCredentialOTPError=t.GenerateCredentialOTPStatus=void 0;var o=r(44241);Object.defineProperty(t,"GenerateCredentialOTPStatus",{enumerable:!0,get:function(){return o.GenerateCredentialOTPStatus}}),Object.defineProperty(t,"GenerateCredentialOTPError",{enumerable:!0,get:function(){return o.GenerateCredentialOTPError}})},23771:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(37223);t.bootstrap=e=>{e.register(o.config)}},85270:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateCredentialOTP=t.getNextOtpRefresh=void 0;const o=r(9496),n=r(92909),a=r(44241),i=r(1237),s=3e4;function c(){const e=Math.floor(Date.now()/s)*s;return new Date(e+s).getTime()}t.getNextOtpRefresh=c,t.generateCredentialOTP=async function({storeService:e},t){const r=e.getState(),d=(0,i.credentialSelector)(r,t);if(!d)return{status:a.GenerateCredentialOTPStatus.ERROR,error:{code:a.GenerateCredentialOTPError.NoCredentialFound}};if(!d.OtpSecret)return{status:a.GenerateCredentialOTPStatus.ERROR,error:{code:a.GenerateCredentialOTPError.NoOTPSecret}};const l=(0,o.generateOtpFromSecret)(d.OtpSecret);if(0===l.length)return{status:a.GenerateCredentialOTPStatus.ERROR,error:{code:a.GenerateCredentialOTPError.OTPGenerationError}};const u=c(),p={code:l,validityTime:s,validityEndDate:u};return e.dispatch((0,n.credentialOTPUpdatedAction)(t,p)),{status:a.GenerateCredentialOTPStatus.SUCCESS,credentialOtp:p}}},8961:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(23771);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},56069:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTP$=void 0;const o=r(18948),n=r(3343),a=r(25764);t.credentialOTP$=e=>(0,o.pipe)((0,n.map)((t=>(0,a.credentialOTPSelector)(t,e))),(0,n.distinctUntilChanged)())},25764:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPSelector=t.credentialOTPsSelector=void 0;t.credentialOTPsSelector=e=>e.userSession.credentialOTPs;t.credentialOTPSelector=(e,r)=>(0,t.credentialOTPsSelector)(e)[r]},44241:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GenerateCredentialOTPError=t.GenerateCredentialOTPStatus=void 0,function(e){e.SUCCESS="success",e.ERROR="error"}(t.GenerateCredentialOTPStatus||(t.GenerateCredentialOTPStatus={})),function(e){e.NoCredentialFound="No credential found",e.OTPGenerationError="OTP generation error",e.NoOTPSecret="Credential does not support otp"}(t.GenerateCredentialOTPError||(t.GenerateCredentialOTPError={}))},14362:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(40851),n=r(59452);t.config={commands:{changeUserCrypto:{handler:n.changeUserCrypto}},queries:{getCanUserChangeCrypto:{selector:o.canUserSelectCryptoSelector},getUserDerivationMethod:{selector:o.userDerivationMethodSelector}},liveQueries:{liveUserDerivationMethod:{operator:o.userDerivationMethodSelector$}}}},22736:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SupportedDerivationMethods=void 0;var o=r(88812);Object.defineProperty(t,"SupportedDerivationMethods",{enumerable:!0,get:function(){return o.SupportedDerivationMethods}})},27181:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(14362);t.bootstrap=e=>{e.register(o.config)}},99673:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(27181);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},40851:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userDerivationMethodSelector$=t.userDerivationMethodSelector=t.canUserSelectCryptoSelector=t.teamCryptoForcedPayloadSelector=t.hasCryptoMigrationPhase2EnabledSelector=t.hasCryptoMigrationPhase1EnabledSelector=void 0;const o=r(18948),n=r(3343),a=r(54670),i=r(14122),s=r(53528),c=r(8153),d=r(88812);t.hasCryptoMigrationPhase1EnabledSelector=e=>(0,i.hasFeatureSelector)(e,"itadmin_SAEX_CryptoMigration_Phase1");t.hasCryptoMigrationPhase2EnabledSelector=e=>(0,i.hasFeatureSelector)(e,"itadmin_SAEX_CryptoMigration_Phase2");t.teamCryptoForcedPayloadSelector=e=>{var t;const r=(0,a.activeSpacesSelector)(e)[0];return null!==(t=null==r?void 0:r.details.info.cryptoForcedPayload)&&void 0!==t?t:""};t.canUserSelectCryptoSelector=e=>!(0,t.teamCryptoForcedPayloadSelector)(e);t.userDerivationMethodSelector=e=>{switch((0,c.userDefaultCryptoSelector)(e)){case s.ARGON2_DEFAULT_PAYLOAD:return d.SupportedDerivationMethods.ARGON2D;case s.PBKDF2_DEFAULT_PAYLOAD:return d.SupportedDerivationMethods.PBKDF2;case s.KWC3_DEFAULT_PAYLOAD:return d.SupportedDerivationMethods.KWC3;default:return null}};t.userDerivationMethodSelector$=()=>(0,o.pipe)((0,n.map)(t.userDerivationMethodSelector),(0,n.distinctUntilChanged)())},59452:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.changeUserCrypto=void 0;const o=r(19935),n=r(37254),a=r(66275);t.changeUserCrypto=async function(e,{newDerivationMethod:t}){const{storeService:r}=e,i=r.getPersonalSettings().CryptoUserPayload,s=(0,a.getNewCryptoPayload)(t);if(!s)throw new Error(`[changeUserCrypto] - client sent wrong derivation value (${t})`);return await(0,n.migrateUserCrypto)(e,i,s,o.CryptoMigrationType.SettingsChange)}},8321:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decryptAllUserData=void 0;const o=r(16242),n=r(63836);t.decryptAllUserData=async function(e,t,r,{transactions:a,sharingKeys:i}){try{const{announce:s}=e.getInstance().user.getSyncArgs(),c=a.map((async e=>({...e,content:await(0,n.decryptTransactionContent)(r.getInstance(),s,e)}))),d=await Promise.all(c);return{clearTransactions:d,clearPrivateKey:await(0,o.decipherPrivateKey)(t,r,i)}}catch(e){throw new Error(`decipherAllUserData failed with error: ${e}`)}}},62063:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDataToMigrate=void 0;const o=r(19935),n=r(15876),a=r(8153);t.getDataToMigrate=async function(e,t){try{const t=e.getState(),r=(0,a.userLoginSelector)(t),o=await(0,n.getDataForMasterPasswordChange)(e,r,{});if((0,n.isApiError)(o))throw new Error(`getDataDoMigrate failed with error: ${o}`);return{transactions:o.data.transactions,sharingKeys:o.data.sharingKeys,timestamp:o.timestamp}}catch(e){throw t(o.CryptoMigrationStatus.ErrorDownload),new Error(`getDataDoMigrate failed with error: ${e}`)}}},66275:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNewCryptoPayload=void 0;const o=r(53528),n=r(45082);t.getNewCryptoPayload=function(e){switch(e){case n.SupportedDerivationMethods.ARGON2D:return o.ARGON2_DEFAULT_PAYLOAD;case n.SupportedDerivationMethods.PBKDF2:return o.PBKDF2_DEFAULT_PAYLOAD;case n.SupportedDerivationMethods.KWC3:return o.KWC3_DEFAULT_PAYLOAD;default:return}}},67721:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reEncryptAllUserData=void 0;const o=r(19935),n=r(16242),a=r(63836);t.reEncryptAllUserData=async function(e,{clearTransactions:t,clearPrivateKey:r},i){try{const o=t.map((t=>(0,a.encryptSingleTransaction)(e,t))),i=await Promise.all(o);return{encryptedTransactions:i,encryptedPrivateKey:await(0,n.cipherPrivateKey)(e,r)}}catch(e){throw i(o.CryptoMigrationStatus.ErrorReencryption),new Error(`reEncryptAllUserData failed with error: ${e}`)}}},36642:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetMasterPasswordEncryptorService=void 0;const o=r(53528),n=r(8153);t.resetMasterPasswordEncryptorService=function(e,t){const{storeService:r,masterPasswordEncryptorService:a}=e,i=r.getState(),s=(0,n.masterPasswordSelector)(i),c=(0,n.serverKeySelector)(i),d=t===o.KWC3_DEFAULT_PAYLOAD?(0,o.getLegacyCryptoConfig)(t):(0,o.parsePayload)(t).cryptoConfig;a.setInstance({raw:s},c,d)}},57709:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateAndPersistLocalData=void 0;const o=r(19935),n=r(24555),a=r(77176),i=r(77333);t.updateAndPersistLocalData=async function(e,t,r,s,c){try{e.dispatch((0,i.editPersonalSettings)({CryptoUserPayload:s,CryptoFixedSalt:(0,n.bufferToBase64)((0,a.getRandomValues)(16))})),await t.getInstance().user.persistPersonalSettings();const o=await r.getInstance().getLocalKey();await t.getInstance().user.persistLocalKey(o)}catch(e){throw c(o.CryptoMigrationStatus.ErrorUpdateLocalData),new Error(`updateAndPersistLocalData failed with error: ${e}`)}}},20987:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uploadDataOnServer=void 0;const o=r(19935),n=r(16242),a=r(15876),i=r(50427),s=r(8153);t.uploadDataOnServer=async function(e,t,r){try{const r=e.getState(),o=(0,s.userLoginSelector)(r),c={...t,transactions:(0,n.formatTransaction)(t.transactions)},d=await(0,i.uploadDataForCryptoChange)(e,o,c);if((0,a.isApiError)(d))throw new Error(`uploadDataForCryptoChange failed with error: ${d}`)}catch(e){throw r(o.CryptoMigrationStatus.ErrorUpload),new Error(`uploadDataForCryptoChange failed with error: ${e}`)}}},37254:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.migrateUserCrypto=void 0;const o=r(19935),n=r(53528),a=r(59125),i=r(8321),s=r(62063),c=r(67721),d=r(36642),l=r(57709),u=r(20987),p=r(88812),S={[n.KWC3_DEFAULT_PAYLOAD]:o.CryptoAlgorithm.Kwc3,[n.ARGON2_DEFAULT_PAYLOAD]:o.CryptoAlgorithm.Argon2d,[n.PBKDF2_DEFAULT_PAYLOAD]:o.CryptoAlgorithm.Pbkdf2};t.migrateUserCrypto=async function(e,t,r,n){try{const{sessionService:a,storeService:p,masterPasswordEncryptorService:g,localStorageService:m,eventLoggerService:y}=e,v=e=>y.logEvent(new o.UserMigrateCryptoEvent({newCrypto:S[r],previousCrypto:S[t],type:n,status:e})),{transactions:A,sharingKeys:E,timestamp:f}=await(0,s.getDataToMigrate)(p,v),{clearTransactions:h,clearPrivateKey:_}=await(0,i.decryptAllUserData)(a,p,g,{transactions:A,sharingKeys:E});(0,d.resetMasterPasswordEncryptorService)(e,r);const{encryptedTransactions:T,encryptedPrivateKey:I}=await(0,c.reEncryptAllUserData)(g,{clearTransactions:h,clearPrivateKey:_},v);return await(0,u.uploadDataOnServer)(p,{timestamp:f,transactions:T,sharingKeys:{publicKey:E.publicKey,privateKey:I}},v),await(0,l.updateAndPersistLocalData)(p,a,m,r,v),v(o.CryptoMigrationStatus.Success),{success:!0}}catch(r){return(0,d.resetMasterPasswordEncryptorService)(e,t),(0,a.sendExceptionLog)({funcName:"migrateUserCrypto",fileName:"/carbon/src/CryptoMigration/services/migrate-user-crypto.ts",message:`Migration from KWC3 to Argon2 failed with error: ${r}`}),{success:!1,error:{code:p.ApiErrorType.ChangeUserCryptoFailed,message:r.message}}}}},71008:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(37254),n=r(19935),a=r(40851),i=r(53528),s=r(8153);t.setupSubscriptions=function(e,t){e.sessionOpened.on((()=>{const{storeService:e}=t,r=e.getState(),c=(0,a.hasCryptoMigrationPhase1EnabledSelector)(r),d=(0,a.hasCryptoMigrationPhase2EnabledSelector)(r),l=(0,a.teamCryptoForcedPayloadSelector)(r),u=(0,s.userDefaultCryptoSelector)(r);!c||l||u!==i.KWC3_DEFAULT_PAYLOAD?d&&l&&l!==u&&(0,o.migrateUserCrypto)(t,u,l,n.CryptoMigrationType.TeamEnforced):(0,o.migrateUserCrypto)(t,i.KWC3_DEFAULT_PAYLOAD,i.ARGON2_DEFAULT_PAYLOAD,n.CryptoMigrationType.MigrateLegacy)}))}},88812:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SupportedDerivationMethods=t.ApiErrorType=void 0,function(e){e.ChangeUserCryptoFailed="CHANGE_USER_CRYPTO_FAILED"}(t.ApiErrorType||(t.ApiErrorType={})),function(e){e.ARGON2D="argon2d",e.PBKDF2="pbkdf2",e.KWC3="kwc3"}(t.SupportedDerivationMethods||(t.SupportedDerivationMethods={}))},12879:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(21081),n=r(22285),a=r(37980),i=r(96377),s=r(85794),c=r(97869),d=r(25755);t.config={commands:{confirmDataLeaksEmailToken:{handler:d.confirmDataLeaksEmailToken},optinDataLeaksMonitoring:{handler:o.optinDataLeaks},optoutDataLeaksMonitoring:{handler:n.optoutDataLeaks},refreshDataLeaksEmailStatusList:{handler:a.refreshDataLeaksEmailStatusList},updateDarkWebOnboardingState:{handler:i.updateDarkWebOnboardingState}},queries:{getDataLeaksEmailStatusList:{selector:c.dataLeaksEmailStatusListSelector},getDarkWebOnboardingState:{selector:c.darkWebOnboardingStateSelector}},liveQueries:{liveDataLeaksEmailStatusList:{operator:s.dataLeaksEmailStatusList$},liveDarkWebOnboardingState:{operator:s.darkWebOnboardingState$}}}},457:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(92847),t)},37104:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(12879);t.bootstrap=e=>{e.register(o.config)}},58289:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(37104);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},85794:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.darkWebOnboardingState$=t.dataLeaksEmailStatusList$=void 0;const o=r(18948),n=r(3343),a=r(97869);t.dataLeaksEmailStatusList$=()=>(0,o.pipe)((0,n.map)(a.dataLeaksEmailStatusListSelector),(0,n.distinctUntilChanged)());t.darkWebOnboardingState$=()=>(0,o.pipe)((0,n.map)(a.darkWebOnboardingStateSelector),(0,n.distinctUntilChanged)())},86644:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.persistDarkWeb=void 0;const o=r(1064),n=r(97869);t.persistDarkWeb=async function(e,t){const{persistData:r,isAuthenticated:a}=t.getAccountInfo();if(!a||r===o.PersistData.PERSIST_DATA_NO)return!0;if(e)try{await e.storeDarkWeb((0,n.darkWebSelector)(t.getState()))}catch{return!1}return!0}},97869:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.darkWebOnboardingStateSelector=t.dataLeaksEmailStatusListSelector=t.darkWebSelector=void 0;t.darkWebSelector=e=>e.userSession.darkWeb;t.dataLeaksEmailStatusListSelector=e=>(0,t.darkWebSelector)(e).emails;t.darkWebOnboardingStateSelector=e=>(0,t.darkWebSelector)(e).onboardingState},25755:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.confirmDataLeaksEmailToken=void 0;const o=r(81948),n=r(8153),a=r(59125),i=r(14122),s=r(38024);t.confirmDataLeaksEmailToken=async function({wsService:e,storeService:t},r){const c=e.dataleaks,d=t.getState(),l=(0,n.premiumStatusSelector)(d),u=(0,i.featuresSelector)(d);if(!(0,s.hasDarkWebMonitoringFeature)(u,l))return{success:!1};try{const e=await c.confirm({token:r.token});if((0,o.isWSDataLeaksEmailResponseSuccess)(e))return{success:!0};return{success:!1,error:{code:e.content}}}catch(e){const t=new Error("Error when confirming email monitoring token");(0,a.sendExceptionLog)({error:t})}return{success:!1}}},38024:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hasDarkWebMonitoringFeature=t.isValidErrorCode=void 0,t.isValidErrorCode=function(e,t){return Object.keys(t).map((e=>t[e])).includes(e)},t.hasDarkWebMonitoringFeature=function(e,t){if(!e.darkwebMonitoringWebRelease)return!1;if(!t)return!1;const{capabilities:r}=t;return Boolean(r&&r.dataLeak)}},13014:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initializeDarkWebState=void 0;const o=r(97869),n=r(295),a=r(92847),i=r(82526),s=r(86644);t.initializeDarkWebState=async function(e){const{localStorageService:t,wsService:r,storeService:c}=e,{success:d}=await(0,n.syncAndPersistDataLeaksEmailStatusList)(c,t,r);if(d){const e=c.getState(),r=(0,o.darkWebOnboardingStateSelector)(e),n=function(e,t){if(t===a.DarkWebOnboardingState.UNKNOWN)return 0===e.length?a.DarkWebOnboardingState.NOT_SEEN:a.DarkWebOnboardingState.SEEN;return t}((0,o.dataLeaksEmailStatusListSelector)(e),r);c.dispatch((0,i.darkWebOnboardingStateUpdated)(n)),await(0,s.persistDarkWeb)(t.getInstance(),c)}}},21081:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.optinDataLeaks=void 0;const o=r(22029),n=r(92847),a=r(81948),i=r(8153),s=r(38024),c=r(43728),d=r(59125),l=r(295),u=r(14122),p=r(38024);t.optinDataLeaks=async function(e,t){const r=e.wsService.dataleaks,S=e.storeService.getState(),g=(0,i.userIdSelector)(S),m=(0,i.premiumStatusSelector)(S),y=(0,u.featuresSelector)(S);if(!(0,p.hasDarkWebMonitoringFeature)(y,m))return{success:!1};try{if(!(0,c.looksLikeEmail)(t.email))return{success:!1,error:{code:n.OptinDataLeaksResultErrorCode.INVALID_EMAIL}};{const i=(0,o.ukiSelector)(S),c=await r.optin({emails:[t.email],uki:i,login:g});if((0,a.isWSDataLeaksEmailResponseSuccess)(c))return await(0,l.syncAndPersistDataLeaksEmailStatusList)(e.storeService,e.localStorageService,e.wsService),{success:!0};const d=(0,a.getWSDataLeaksEmailErrorCode)(c);if(d&&(0,s.isValidErrorCode)(d,n.OptinDataLeaksResultErrorCode))return{success:!1,error:{code:d}}}}catch(e){const t=new Error("Error when opting-in user email");(0,d.sendExceptionLog)({error:t})}return{success:!1}}},22285:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.optoutDataLeaks=void 0;const o=r(22029),n=r(92847),a=r(81948),i=r(38024),s=r(8153),c=r(14122),d=r(43728),l=r(59125),u=r(295);t.optoutDataLeaks=async function(e,t){const r=e.wsService.dataleaks,p=e.storeService.getState(),S=(0,s.userIdSelector)(p);if(!(0,c.featuresSelector)(p).darkwebMonitoringWebRelease)return{success:!1};try{if(!(0,d.looksLikeEmail)(t.email))return{success:!1,error:{code:n.OptoutDataLeaksResultErrorCode.INVALID_EMAIL}};{const s=(0,o.ukiSelector)(p),c=await r.optout({emails:[t.email],uki:s,login:S});if((0,a.isWSDataLeaksEmailResponseSuccess)(c))return await(0,u.syncAndPersistDataLeaksEmailStatusList)(e.storeService,e.localStorageService,e.wsService),{success:!0};const d=(0,a.getWSDataLeaksEmailErrorCode)(c);if(d&&(0,i.isValidErrorCode)(d,n.OptoutDataLeaksResultErrorCode))return{success:!1,error:{code:d}}}}catch(e){const t=new Error("Error when opting-out user email");(0,l.sendExceptionLog)({error:t})}return{success:!1}}},37980:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refreshDataLeaksEmailStatusList=void 0;const o=r(295),n=r(12642);t.refreshDataLeaksEmailStatusList=async function({localStorageService:e,storeService:t,wsService:r}){const a=await(0,o.syncAndPersistDataLeaksEmailStatusList)(t,e,r);if(a.success){const e=(0,n.getInstance)(t,r);await e.refresh({forceRefresh:!0})}return a}},295:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.syncAndPersistDataLeaksEmailStatusList=void 0;const o=r(82526),n=r(8153),a=r(86644),i=r(88478),s=r(59125),c=r(14122);t.syncAndPersistDataLeaksEmailStatusList=async function(e,t,r){const d=e.getState();if(!(0,c.featuresSelector)(d).darkwebMonitoringWebRelease)return{success:!1};try{const{code:s,content:c}=await async function(e,t){const r=(0,n.userIdSelector)(e),o=(0,i.ukiSelector)(e);return await t.status({login:r,uki:o,wantsLeaks:!1,includeDisabled:!1})}(e.getState(),r.dataleaks);if(200===s){e.getStore().dispatch((0,o.dataLeaksEmailStatusListUpdated)(c.emails));return{success:await(0,a.persistDarkWeb)(t.getInstance(),e)}}}catch(e){const t=new Error("Error when fetching dataleaks emails statuses");(0,s.sendExceptionLog)({error:t})}return{success:!1}}},96377:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateDarkWebOnboardingState=void 0;const o=r(82526),n=r(86644);t.updateDarkWebOnboardingState=async function({storeService:e,localStorageService:t},r){return e.dispatch((0,o.darkWebOnboardingStateUpdated)(r)),{success:await(0,n.persistDarkWeb)(t.getInstance(),e)}}},66625:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(13014);t.setupSubscriptions=async function(e,t){e.sessionOpened.on((async()=>{await(0,o.initializeDarkWebState)(t)}))}},92847:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DarkWebOnboardingState=t.DataLeaksEmailStatus=t.DataLeaksBreachesResultErrorCode=t.ConfirmDataLeaksResultErrorCode=t.OptoutDataLeaksResultErrorCode=t.OptinDataLeaksResultErrorCode=void 0,function(e){e.INVALID_EMAIL="EMAIL_IS_INVALID",e.ALREADY_SUBSCRIBED="USER_HAS_ALREADY_AN_ACTIVE_SUBSCRIPTION",e.TOO_MANY_SUBSCRIPTIONS="USER_HAS_TOO_MANY_SUBSCRIPTIONS"}(t.OptinDataLeaksResultErrorCode||(t.OptinDataLeaksResultErrorCode={})),function(e){e.INVALID_EMAIL="EMAIL_IS_INVALID",e.NO_SUBSCRIPTION="USER_HAS_NO_SUBSCRIPTION"}(t.OptoutDataLeaksResultErrorCode||(t.OptoutDataLeaksResultErrorCode={})),function(e){e.MISSING_ARGUMENT="Missing argument",e.TOKEN_NOT_FOUND="TOKEN_NOT_FOUND",e.TOKEN_HAS_EXPIRED="TOKEN_HAS_EXPIRED",e.USER_HAS_NO_PENDING_SUBSCRIPTION="USER_HAS_NO_PENDING_SUBSCRIPTION",e.ANOTHER_USER_HAS_ALREADY_AN_ACTIVE_SUBSCRIPTION="ANOTHER_USER_HAS_ALREADY_AN_ACTIVE_SUBSCRIPTION",e.USER_IS_NOT_ALLOWED="USER_IS_NOT_ALLOWED"}(t.ConfirmDataLeaksResultErrorCode||(t.ConfirmDataLeaksResultErrorCode={})),t.DataLeaksBreachesResultErrorCode||(t.DataLeaksBreachesResultErrorCode={}),function(e){e.PENDING="pending",e.ACTIVE="active",e.DISABLED="disabled"}(t.DataLeaksEmailStatus||(t.DataLeaksEmailStatus={})),function(e){e.UNKNOWN="UNKNOWN",e.SEEN="SEEN",e.NOT_SEEN="NOT_SEEN"}(t.DarkWebOnboardingState||(t.DarkWebOnboardingState={}))},17514:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCredentialSmartCategorized=t.isSpaceQuarantined=void 0;const o=r(11814);t.isSpaceQuarantined=function(e){return!!e&&(!("accepted"===e.details.status.toLowerCase()||!e.details.info)&&(Boolean(e.details.info.forcedDomainsEnabled)&&Boolean(e.details.info.removeForcedContentEnabled)))},t.isCredentialSmartCategorized=function(e,t){if(!e)return!1;let r="";if(e.Url){const t=o.url.getDomainForUrl(e.Url);r=t?t.toLowerCase():""}const n=e.Email?e.Email.toLowerCase():"",a=e.Login?e.Login.toLowerCase():"",i=e.SecondaryLogin?e.SecondaryLogin.toLowerCase():"";return t.filter((e=>{const t=e.toLowerCase();return r.includes(t)||n.includes(t)||a.includes(t)||i.includes(t)})).length>0}},78022:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(47515),n=r(31889),a=r(38677),i=r(25616),s=r(71611),c=r(2061),d=r(15447),l=r(5789),u=r(72290),p=r(24173),S=r(87919),g=r(20681),m=r(82438),y=r(69892),v=r(5810),A=r(7919),E=r(35890),f=r(62723),h=r(2248),_=r(39875),T=r(93982),I=r(15678),C=r(22004),P=r(44650),D=r(71518),O=r(10163);t.config={commands:{...g.config.commands,...O.vaultConfig.commands,...o.config.commands,...n.config.commands,...m.config.commands,...a.config.commands,...i.config.commands,...s.config.commands,...y.config.commands,...v.config.commands,...c.config.commands,..._.config.commands,...A.config.commands,...d.config.commands,...D.importApiConfig.commands,...h.config.commands,...l.config.commands,...u.config.commands,...p.config.commands,...E.config.commands,...f.config.commands,...T.config.commands,...P.config.commands,...I.config.commands,...S.config.commands},queries:{...g.config.queries,...O.vaultConfig.queries,...o.config.queries,...n.config.queries,...m.config.queries,...a.config.queries,...s.config.queries,...y.config.queries,...v.config.queries,...c.config.queries,..._.config.queries,...A.config.queries,...d.config.queries,...D.importApiConfig.queries,...h.config.queries,...l.config.queries,...u.config.queries,...p.config.queries,...E.config.queries,...f.config.queries,...T.config.queries,...I.config.queries,...S.config.queries,...C.config.queries},liveQueries:{...g.config.liveQueries,...o.config.liveQueries,...n.config.liveQueries,...m.config.liveQueries,...a.config.liveQueries,...s.config.liveQueries,...y.config.liveQueries,...c.config.liveQueries,..._.config.liveQueries,...A.config.liveQueries,...d.config.liveQueries,...D.importApiConfig.liveQueries,...h.config.liveQueries,...l.config.liveQueries,...u.config.liveQueries,...p.config.liveQueries,...E.config.liveQueries,...f.config.liveQueries,...T.config.liveQueries,...I.config.liveQueries,...S.config.liveQueries}}},14573:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(63507),t),n(r(36690),t),n(r(24086),t),n(r(91049),t),n(r(45804),t),n(r(31224),t),n(r(54213),t),n(r(54159),t),n(r(67573),t),n(r(61298),t),n(r(70993),t),n(r(90032),t),n(r(90003),t),n(r(86257),t),n(r(20188),t),n(r(84974),t),n(r(79384),t),n(r(16862),t),n(r(74817),t)},54090:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getWebsitesAssociatedToUrl=t.populateAssociatedWebsitesIndex=t.reduceAssociatedDomainsLists=t.fromObjectToArray=void 0;const o=r(49526),n=r(29684),a=r(73529),i=r(17509);function s(e){const t=[];return Object.keys(e).forEach((r=>{t.push([r].concat(e[r]))})),t}t.fromObjectToArray=s;const c=(e,t)=>{const r=[],o=[];e.forEach((e=>{return n=t,e.some((e=>n.includes(e)))?r.push(e):o.push(e);var n}));const n=r.concat([t]).flat();return o.concat([n])};function d(e){const t={};return e.forEach((e=>{e.forEach((r=>{t[r]=e}))})),t}t.reduceAssociatedDomainsLists=(e,t,r)=>e.concat(t,r).reduce(c,[]),t.populateAssociatedWebsitesIndex=d;const l=d((0,t.reduceAssociatedDomainsLists)(o,s(a),s(n)).map((e=>[...new Set(e)])));t.getWebsitesAssociatedToUrl=function(e){const t=(0,i.getParsedUrl)(e).rootDomain;return t?l[t]||[t]:[]}},47515:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(59414),n=r(85374),a=r(85770);t.config={commands:{addBankAccount:{handler:a.addBankAccountHandler},updateBankAccount:{handler:a.updateBankAccountHandler},deleteBankAccount:{handler:a.deleteBankAccountHandler}},queries:{getBankAccount:{selector:o.viewedBankAccountSelector},getBankAccounts:{selector:o.viewedQueriedBankAccountsSelector}},liveQueries:{liveBankAccount:{operator:n.getBankAccount$},liveBankAccounts:{operator:n.bankAccounts$}}}},63507:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(78959),t)},86844:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNewBankAccount=t.addBankAccountHandler=void 0;const o=r(19935),n=r(78959),a=r(35436),i=r(44051),s=r(18491),c=r(1005),d=r(36109),l=r(57254),u=r(59125),p=r(68410),S=r(70240);function g(e){const t=(0,d.getUnixTimestamp)();return{kwType:"KWBankStatement",Id:(0,l.generateItemUuid)(),LastBackupTime:0,LocaleFormat:(0,i.defaultToUS)(e.country),AnonId:(0,l.generateItemUuid)(),SpaceId:(0,i.defaultToEmptyString)(e.spaceId),CreationDatetime:t,UserModificationDatetime:t,BankAccountName:(0,i.defaultToEmptyString)(e.name),BankAccountOwner:(0,i.defaultToEmptyString)(e.owner),BankAccountIBAN:(0,i.defaultToEmptyString)(e.IBAN),BankAccountBIC:(0,i.defaultToEmptyString)(e.BIC),BankAccountBank:(0,i.defaultToEmptyString)(e.bank)}}t.addBankAccountHandler=async function(e,t){if(""===t.BIC&&""===t.IBAN)return{success:!1,error:{code:n.AddBankAccountResultErrorCode.EMPTY_BIC_AND_IBAN}};try{await async function({storeService:e,sessionService:t,eventLoggerService:r},o){if(!e.isAuthenticated())throw new Error("No session available to saveBankAccount");const n=e.getPersonalData(),a=g((0,p.sanitizeInputPersonalData)(o));(0,S.logAddVaultItem)(r,a),o.usageLogComponentName&&(0,s.sendPersonalDataEditionUsageLogs)(e,{action:"add",from:o.usageLogComponentName,itemEdited:a,currentItemsCount:n.bankAccounts.length});e.dispatch((0,c.savePersonalDataItem)(a,a.kwType)),t.getInstance().user.persistPersonalData()}(e,t);return(0,a.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},o.Trigger.Save),{success:!0}}catch(e){return(0,u.sendExceptionLog)({error:e}),{success:!1}}},t.getNewBankAccount=g},57155:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBankAccountHandler=void 0;const o=r(19935),n=r(59414),a=r(78959),i=r(35436),s=r(18491),c=r(37821),d=r(59125),l=r(70240);t.deleteBankAccountHandler=function(e,{id:t}){const r=(({storeService:e,eventLoggerService:t},r)=>{const o=e.getState();try{if(!e.isAuthenticated())return{success:!1,error:{code:a.DeleteBankAccountErrorCode.NOT_AUTHORIZED}};const i=(0,n.bankAccountSelector)(o,r);if(!i)return{success:!1,error:{code:a.DeleteBankAccountErrorCode.NOT_FOUND}};(0,l.logDeleteVaultItem)(t,i),(0,s.sendPersonalDataEditionUsageLogs)(e,{action:"remove",from:"MANUAL",itemEdited:i,currentItemsCount:(0,n.bankAccountsSelector)(o).length});const d=(0,c.removePersonalItem)(i.kwType,i.Id,null);return e.dispatch(d),{success:!0}}catch(e){const t=new Error(`[BankAccounts] - deleteBankAccount: ${e}`);return(0,d.sendExceptionLog)({error:t}),{success:!1,error:{code:a.DeleteBankAccountErrorCode.INTERNAL_ERROR}}}})(e,t);if(r.success){(0,i.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},o.Trigger.Save)}return Promise.resolve(r)}},85770:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(86844),t),n(r(60521),t),n(r(57155),t)},60521:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateBankAccountHandler=t.getUpdatedBankAccount=t.getBankAccountModifiedProperties=void 0;const o=r(19935),n=r(59414),a=r(78959),i=r(35436),s=r(18491),c=r(1005),d=r(36109),l=r(59125),u=r(42824),p=r(68410),S=r(70240),g=e=>{if(void 0===e)return!1;return void 0===(0,u.getAllBanks)()[e]};function m(e,r){const o=(0,n.bankAccountSelector)(e,r.id);if(!o)return;const a=(0,t.getBankAccountModifiedProperties)(r,o),i=(0,d.getUnixTimestamp)();return{...o,...a,UserModificationDatetime:i}}t.getBankAccountModifiedProperties=(e,t)=>{var r,o,n,a,i,s,c;return{BankAccountName:null!==(r=e.name)&&void 0!==r?r:t.BankAccountName,BankAccountOwner:null!==(o=e.owner)&&void 0!==o?o:t.BankAccountOwner,BankAccountIBAN:null!==(n=e.IBAN)&&void 0!==n?n:t.BankAccountIBAN,BankAccountBIC:null!==(a=e.BIC)&&void 0!==a?a:t.BankAccountBIC,BankAccountBank:null!==(i=e.bank)&&void 0!==i?i:g(e.country)?"":t.BankAccountBank,SpaceId:null!==(s=e.spaceId)&&void 0!==s?s:t.SpaceId,LocaleFormat:null!==(c=e.country)&&void 0!==c?c:t.LocaleFormat}},t.getUpdatedBankAccount=m,t.updateBankAccountHandler=function(e,t){try{const r=function({storeService:e,sessionService:t,eventLoggerService:r},o){if(!e.isAuthenticated())throw new Error("No session available to updateBankAccount");const i=e.getState(),d=m(i,(0,p.sanitizeInputPersonalData)(o));if(!d)return{success:!1};if(""===d.BankAccountBIC&&""===d.BankAccountIBAN)return{success:!1,error:{code:a.UpdateBankAccountResultErrorCode.EMPTY_BIC_AND_IBAN}};const l=(0,n.bankAccountSelector)(i,o.id);return(0,S.logEditVaultItem)(r,d,l),o.usageLogComponentName&&(0,s.sendPersonalDataEditionUsageLogs)(e,{action:"edit",from:o.usageLogComponentName,itemEdited:d,currentItemsCount:(0,n.bankAccountsSelector)(i).length}),e.dispatch((0,c.savePersonalDataItem)(d,d.kwType)),t.getInstance().user.persistPersonalData(),{success:!0}}(e,t);if(!r.success)return Promise.resolve(r);return(0,i.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},o.Trigger.Save),Promise.resolve({success:!0})}catch(e){return(0,l.sendExceptionLog)({error:e}),Promise.resolve({success:!1})}}},44051:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultToUS=t.defaultToEmptyString=void 0;const o=r(28060),n=r(97211);t.defaultToEmptyString=(0,o.defaultTo)(""),t.defaultToUS=(0,o.defaultTo)(n.Country.US)},96970:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeBankAccountSpecificProps=t.makeNewBankAccount=t.makeUpdatedBankAccount=void 0;const o=r(28060),n=r(36109),a=r(11117);function i(e){const t=(0,o.defaultTo)("");return{BankAccountName:t(e.name),BankAccountOwner:t(e.owner),BankAccountIBAN:t(e.IBAN),BankAccountBIC:t(e.BIC),BankAccountBank:t(e.bank)}}t.makeUpdatedBankAccount=async function(e,t){const r=(0,a.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,n.getUnixTimestamp)()});return{...t,...r,...i(e.content)}},t.makeNewBankAccount=async function(e){return{...(0,a.makeNewPersonalDataItemBase)(e),...i(e.content)}},t.makeBankAccountSpecificProps=i},85374:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBankAccount$=t.bankAccounts$=void 0;const o=r(18948),n=r(3343),a=r(85564),i=r(59414);t.bankAccounts$=(0,a.getLivePersonalInfo)(i.getLiveBankAccountsSelector);t.getBankAccount$=e=>{const t=(0,i.getViewedBankAccountSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},69450:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBankAccountMappers=void 0;const o=r(10675);t.getBankAccountMappers=()=>({spaceId:e=>e.SpaceId,accountName:e=>e.BankAccountName,bankName:e=>e.BankAccountBank,lastUse:o.lastUseMapper,id:e=>e.Id})},35686:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bankAccountMatch=t.searchGetters=void 0;const o=r(37047),n=r(57748);t.searchGetters=[(0,n.stringProp)("BankAccountName"),(0,n.stringProp)("BankAccountOwner"),(0,n.stringProp)("BankAccountBank")],t.bankAccountMatch=(0,o.match)(t.searchGetters)},59414:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedBankAccountSelector=t.viewedBankAccountSelector=t.getLiveBankAccountsSelector=t.viewedQueriedBankAccountsSelector=t.bankAccountMappersSelector=t.bankAccountSelector=t.bankAccountsSelector=void 0;const o=r(28060),n=r(35686),a=r(39588),i=r(3259),s=r(80398),c=r(66771),d=r(41147),l=r(32034),u=r(69450),p=r(52931),S=r(86965);t.bankAccountsSelector=(0,l.createSelector)((e=>e.userSession.personalData.bankAccounts),p.quarantinedSpacesSelector,S.filterOutQuarantinedItems);t.bankAccountSelector=(e,r)=>{const o=(0,t.bankAccountsSelector)(e);return(0,d.findDataModelObject)(r,o)};t.bankAccountMappersSelector=e=>(0,u.getBankAccountMappers)();const g=()=>n.bankAccountMatch,m=(0,i.getQuerySelector)(t.bankAccountsSelector,g,t.bankAccountMappersSelector);t.viewedQueriedBankAccountsSelector=(0,o.compose)((0,s.viewListResults)(a.listView),m),t.getLiveBankAccountsSelector=(0,c.makeLiveSelectorGetter)(t.bankAccountsSelector,(()=>a.listView),g,t.bankAccountMappersSelector);t.viewedBankAccountSelector=(e,r)=>{const o=(0,t.bankAccountSelector)(e,r);return(0,a.detailView)(o)};t.getViewedBankAccountSelector=e=>{const r=(0,l.createSelector)(t.bankAccountsSelector,(t=>(0,d.findDataModelObject)(e,t)));return(0,l.createSelector)(r,a.detailView)}},78959:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateBankAccountResultErrorCode=t.AddBankAccountResultErrorCode=t.DeleteBankAccountErrorCode=void 0,function(e){e[e.NOT_AUTHORIZED=0]="NOT_AUTHORIZED",e[e.NOT_FOUND=1]="NOT_FOUND",e[e.INTERNAL_ERROR=2]="INTERNAL_ERROR"}(t.DeleteBankAccountErrorCode||(t.DeleteBankAccountErrorCode={})),function(e){e.EMPTY_BIC_AND_IBAN="EMPTY_BIC_AND_IBAN"}(t.AddBankAccountResultErrorCode||(t.AddBankAccountResultErrorCode={})),function(e){e.EMPTY_BIC_AND_IBAN="EMPTY_BIC_AND_IBAN"}(t.UpdateBankAccountResultErrorCode||(t.UpdateBankAccountResultErrorCode={}))},39588:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.detailView=void 0;const o=r(18758),n=r(44051),a=r(42824),i=e=>{var t;const r=(0,n.defaultToUS)(e.LocaleFormat),{banks:o}=(0,a.getBanks)({country:r}),i=((e,t)=>{var r;if(t){const[o,a]=(0,n.defaultToEmptyString)(e).split("-");return(null===(r=t.find((({code:e})=>[o,a].includes(e))))||void 0===r?void 0:r.code)||"NO_TYPE"}return""})(e.BankAccountBank,o),s=(null==i?void 0:i.length)>0?`${r}-${i}`:"",c=(0,n.defaultToEmptyString)(null===(t=null==o?void 0:o.find((({code:e})=>e===i)))||void 0===t?void 0:t.localizedString);return{country:r,bankCode:i,bankLocalizedName:c,bank:s}},s=e=>{const t=i(e);return{name:(0,n.defaultToEmptyString)(e.BankAccountName),owner:(0,n.defaultToEmptyString)(e.BankAccountOwner),IBAN:(0,n.defaultToEmptyString)(e.BankAccountIBAN),BIC:(0,n.defaultToEmptyString)(e.BankAccountBIC),bank:t.bank,country:t.country,bankCode:t.bankCode,bankLocalizedName:t.bankLocalizedName}};t.detailView=e=>({...(0,o.dataModelDetailView)(e),...s(e)});t.itemView=e=>({...(0,o.dataModelItemView)(e),...s(e)});t.listView=e=>e.map(t.itemView)},31889:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(63453),n=r(89699),a=r(20614);t.config={commands:{updateBreachStatus:{handler:a.updateBreachStatusHandler}},queries:{getBreach:{selector:o.viewedBreachSelector},getBreaches:{selector:o.viewedQueriedBreachesSelector},getBreachesPage:{selector:o.breachesPageSelector},getBreachesPaginationToken:{selector:o.breachesPaginationTokenSelector},getBreachesUpdateStatus:{selector:o.breachesUpdaterStatusSelector}},liveQueries:{liveBreach:{operator:n.getBreach$},liveBreaches:{operator:n.breaches$},liveBreachesBatch:{operator:n.breachesBatch$},liveBreachesUpdaterStatus:{operator:n.breachesUpdaterStatus$}}}},36690:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BreachesUpdaterStatus=t.BreachStatus=t.BreachLeakedDataType=void 0;var o=r(59638);Object.defineProperty(t,"BreachLeakedDataType",{enumerable:!0,get:function(){return o.BreachLeakedDataType}}),Object.defineProperty(t,"BreachStatus",{enumerable:!0,get:function(){return o.BreachStatus}});var n=r(9237);Object.defineProperty(t,"BreachesUpdaterStatus",{enumerable:!0,get:function(){return n.BreachesUpdaterStatus}})},12642:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearInstance=t.getInstance=void 0;const o=r(59125),n=r(15528),a=r(22029),i=r(8153),s=r(14122),c=r(25384),d=r(9237),l=r(42335),u=r(21894),p=r(44371),S=r(37821);class g{constructor(e,t,r,o){this.storeService=e,this.credentialVault=t,this.breachVault=r,this.gateway=o,this.lastRefreshTimestamp=0,this.refreshInProgress=!1}async refresh(e){try{if(this.refreshInProgress)return{vaultSyncNeeded:!1};this.refreshInProgress=!0,this.storeService.dispatch((0,S.updateBreachesUpdaterStatus)(d.BreachesUpdaterStatus.SYNCING));const t=Boolean(e&&e.forceRefresh);if(!this.isFeatureFlipped()||!this.isSessionOpened()||!this.isRefreshNeeded(t))return this.storeService.dispatch((0,S.updateBreachesUpdaterStatus)(d.BreachesUpdaterStatus.SKIPPED)),this.refreshInProgress=!1,{vaultSyncNeeded:!1};const{breachVault:r,credentialVault:o}=this,n=await this.fetchLatestPublicBreaches(),a=await this.fetchLatestPrivateBreaches();this.resetTimer();const i=o.getAllCredentials(),s=r.getAllBreaches(),l=[...n.breaches,...a.breaches],u=(0,c.getChangesFromIncomingBreaches)(i,s,l);await r.applyChangesFromSync(u,n.revision,a.refreshDate);const p=this.isVaultSyncNeeded(u);return this.storeService.dispatch((0,S.updateBreachesUpdaterStatus)(p?d.BreachesUpdaterStatus.UPDATED:d.BreachesUpdaterStatus.UNCHANGED)),{vaultSyncNeeded:p}}catch(e){this.storeService.dispatch((0,S.updateBreachesUpdaterStatus)(d.BreachesUpdaterStatus.ERROR));const t=new Error(`[Breaches] - refresh: ${e}`);return(0,o.sendExceptionLog)({error:t,code:n.ExceptionCriticality.WARNING}),{vaultSyncNeeded:!1}}finally{this.refreshInProgress=!1}}isFeatureFlipped(){const{storeService:e}=this,t=e.getState(),r=(0,s.featuresSelector)(t);return Boolean(r)&&r[g.BREACHES_REFRESH_FEATURE_FLIP]}isSessionOpened(){const{storeService:e}=this,t=e.getState(),r=(0,i.userLoginSelector)(t),o=(0,a.ukiSelector)(t);return Boolean(o&&r)}isRefreshNeeded(e){return e||Date.now()-this.lastRefreshTimestamp>=g.BREACHES_REFRESH_INTERVAL_MS}resetTimer(){this.lastRefreshTimestamp=Date.now()}isVaultSyncNeeded(e){return e.updates.length+e.deletions.length>0}async fetchLatestPublicBreaches(){const e=this.breachVault.getLatestPublicBreachesRevision();return this.gateway.getLatestPublicBreaches(e)}async fetchLatestPrivateBreaches(){const e=this.breachVault.getPrivateBreachesRefreshDate();let t,r=[];try{const o=await this.gateway.getLatestPrivateBreaches(e);o&&(r=o.breaches,t=o.refreshDate)}catch(e){const t=new Error(`[Breaches] - refresh: fetchPrivateBreaches error: ${e}`);(0,o.sendExceptionLog)({error:t,code:n.ExceptionCriticality.WARNING})}return{breaches:r,refreshDate:t}}}g.BREACHES_REFRESH_INTERVAL_MS=864e5,g.BREACHES_REFRESH_FEATURE_FLIP="breachesFetchWeb";let m=null;t.getInstance=(e,t)=>(null===m&&(m=new g(e,new u.CredentialVault(e),new l.BreachVault(e),new p.BreachesWS(t,e))),m);t.clearInstance=()=>{m=null}},25384:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getChangesFromIncomingBreaches=void 0;const o=r(583),n=r(59638),a=r(96066),i=r(2144),s=r(36777),c=e=>({updates:[e],deletions:[]}),d=e=>t=>{const r=(0,o.getDomainForCredential)(t)||"";return(e.domains||[]).includes(r)},l=e=>Boolean(e.Password),u=e=>Array.from(new Set(e)),p=(e,t)=>{const{content:r}=e,{leakedPasswords:o}=e;let a=o;if((0,s.hasBreachLeakedDataOfType)(r,n.BreachLeakedDataType.Password)){const{eventDate:e}=r,n=t.filter((e=>t=>1e3*(t.ModificationDatetime||t.CreationDatetime||0)<Date.parse(e))(e)).filter(l).map((e=>e.Password));a=[...o,...n]}return u(a||[])},S=function(e,t,r){const{content:o}=r,l=(S=r,e.filter(d(S.content)));var S;const g=p(r,l);if(((e,t,r)=>{const o=!(0,a.isDataLeaksBreachContent)(e),n=r.length>0,i=(0,s.hasBreachLeakedPrivateInfo)(e),c=t.length>0;return o&&!n&&(!i||!c)})(o,l,g))return{updates:[],deletions:[]};const{id:m,lastModificationRevision:y}=o,v=(0,s.findByBreachId)(m,t);return v?y<=v.ContentRevision?{updates:[],deletions:[]}:(0,s.isBreachDeleted)(o)?{updates:[],deletions:[v.Id]}:c(((e,t,r)=>{const o=u(e.LeakedPasswords||[]),a=u([...e.LeakedPasswords,...r]),i=o.length!==a.length?n.BreachStatus.PENDING:e.Status;return{...e,Content:t,ContentRevision:t.lastModificationRevision,LeakedPasswords:a,Status:i}})(v,o,g)):c((0,i.makeBreachFromContent)(o,g))};t.getChangesFromIncomingBreaches=function(e,t,r){return r.reduce(((r,o)=>{return n=r,a=S(e,t,o),{updates:[...n.updates,...a.updates],deletions:[...n.deletions,...a.deletions]};var n,a}),{updates:[],deletions:[]})}},2144:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeBreachFromContent=void 0;const o=r(97211),n=r(57254),a=r(59638);t.makeBreachFromContent=(e,t)=>({kwType:o.DataModelType.KWSecurityBreach,LastBackupTime:0,Id:(0,n.generateItemUuid)(),AnonId:(0,n.generateItemUuid)(),BreachId:e.id,Content:e,ContentRevision:e.lastModificationRevision,Status:a.BreachStatus.PENDING,LeakedPasswords:t})},9237:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BreachesUpdaterStatus=void 0,function(e){e.UNKNOWN="unknown",e.SYNCING="syncing",e.SKIPPED="skipped",e.UNCHANGED="unchanged",e.UPDATED="updated",e.ERROR="error"}(t.BreachesUpdaterStatus||(t.BreachesUpdaterStatus={}))},20614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateBreachStatus=t.updateBreachStatusHandler=void 0;const o=r(19935),n=r(1005),a=r(35436),i=r(59125),s=r(31891),c=r(63453);function d(e,t){if(!e.isAuthenticated())throw new Error("No session available to update Breach");const r=e.getState(),o=(0,c.breachSelector)(r,t.id);if(!o)throw new Error("Breach does not exist, cant update");const a={...o,Status:t.status};e.dispatch((0,n.savePersonalDataItem)(a,a.kwType))}t.updateBreachStatusHandler=async function(e,t){const{storeService:r,sessionService:n}=e;try{d(r,t);return(0,a.getDebounceSync)(r,n)({immediateCall:!0},o.Trigger.Save),{success:!0}}catch(e){return s.Debugger.error(e),(0,i.sendExceptionLog)({error:e}),{success:!1}}},t.updateBreachStatus=d},44371:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BreachesWS=void 0;const o=r(28060),n=r(62550),a=r(75202),i=r(96045),s=r(30507),c=r(34929),d=r(24555),l=r(20550),u=r(59125),p=r(15528),S=r(8153),g=r(14122),m=r(22029),y=r(38024),v=r(96066),A=r(36777),E=r(7215),f=r(53494);t.BreachesWS=class{constructor(e,t){this.wsService=e,this.storeService=t}async getLatestPublicBreaches(e){const t=this.storeService.getState(),r=(0,S.userLoginSelector)(t),o=(0,m.ukiSelector)(t);if(null===r||null===o)throw new Error("[Breaches] - getLatestPublicBreaches: no current authenticated user");const n=await this.wsService.breaches.get({login:r,uki:o,revision:e});if(!(0,l.isWSResponseSuccess)(n)){const e=`[Breaches] getLatestPublicBreaches: ${n.message}(statusCode: ${n.code})`;throw new Error(e)}const{content:a}=n,{latest:i,filesToDownload:s,revision:c}=a,d=[...i,...await this.downloadFileBreaches(s)].filter(v.isSupportedBreachContent);return{revision:c,breaches:(0,A.deduplicateBreachContents)(d).map((e=>(0,E.makeIncomingBreach)(e,[])))}}async getLatestPrivateBreaches(e){const t=this.storeService.getState(),r=(0,S.premiumStatusSelector)(t),o=(0,g.featuresSelector)(t);if(!(0,y.hasDarkWebMonitoringFeature)(o,r))return null;const n=(0,S.userLoginSelector)(t),a=(0,m.ukiSelector)(t);if(null===n||null===a)throw new Error("[Breaches] - getLatestPrivateBreaches: no current authenticated user");const i=await this.wsService.dataleaks.leaks({login:n,uki:a,wantsDetails:!0,includeDisabled:!1,lastUpdateDate:e});if(!(0,l.isWSResponseSuccess)(i)){if((0,E.isBreachesWSResponseNotModified)(i))return{breaches:[],refreshDate:e};const t=i.error&&i.error.code?`, code: ${i.error.code}`:"",r=`[Breaches] - getLatestPrivateBreaches: ${i.message} (statusCode: ${i.code}${t})`;throw new Error(r)}const{content:s}=i,{details:c,leaks:d,lastUpdateDate:u}=s,p=await this.extractLeakedPasswords(c),f=d.filter(v.isSupportedBreachContent);return{breaches:(0,A.deduplicateBreachContents)(f).map((e=>(0,E.makeIncomingBreach)(e,p[e.id]||[]))),refreshDate:u}}async downloadFileBreaches(e){return(0,o.flatten)(await(0,a.asyncMap)(e,this.downloadFileBreach))}async downloadFileBreach(e){try{const{data:t}=await(0,n.get)(e);return t.breaches}catch(e){const t=new Error(`[Breaches] - downloadFileBreach: ${e}`);return(0,u.sendExceptionLog)({error:t,code:p.ExceptionCriticality.ERROR}),[]}}async extractLeakedPasswords(e){try{if(!e||!e.cipheredKey||!e.cipheredInfo)return{};const t=this.storeService.getState(),r=(0,S.sharingKeysSelector)(t);if(!r||!r.publicKey||!r.privateKey)return{};const{privateKey:o}=r,n=(0,i.makeAsymmetricEncryption)({hashAlgorithm:s.HashAlgorithm.SHA_1}),a=await n.decrypt(o,e.cipheredKey),l=(0,c.makeDataEncryptorService)(this.storeService),u=(0,d.base64ToBuffer)(a),p=(0,d.arrayBufferToText)(u);l.setInstance({raw:p},"");const g=await l.getInstance().decrypt(e.cipheredInfo),m=(0,f.deflatedUtf8ToUtf16)(g,{skipInflate:!0}),y=JSON.parse(m);return(0,E.getLeakedPasswordFromIncomingDataLeakDetails)(y)}catch(e){const t=new Error(`[Breaches] - extractLeakedPasswords: ${e}`);return(0,u.sendExceptionLog)({error:t}),{}}}}},87576:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isIncomingDataLeakPasswordInfo=t.isIncomingDataLeakBreachDetails=void 0;const o=r(28060);t.isIncomingDataLeakBreachDetails=e=>(0,o.is)(Object,e)&&"string"==typeof e.breachId&&""!==e.breachId&&Array.isArray(e.data);t.isIncomingDataLeakPasswordInfo=e=>(0,o.is)(Object,e)&&"password"===e.type&&"plaintext"===e.hashMethod&&"string"==typeof e.value&&""!==e.value},7215:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isBreachesWSResponseNotModified=t.getLeakedPasswordFromIncomingDataLeakDetails=t.makeIncomingBreach=void 0;const o=r(87576);t.makeIncomingBreach=(e,t)=>({content:e,leakedPasswords:t});t.getLeakedPasswordFromIncomingDataLeakDetails=e=>{if(!Array.isArray(e))return{};const t=e=>(0,o.isIncomingDataLeakPasswordInfo)(e)?e.value:null;return e.reduce(((e,r)=>{if(!(0,o.isIncomingDataLeakBreachDetails)(r))return e;const{breachId:n,data:a}=r,i=a.map(t).filter(Boolean);return i.length?{...e,[n]:i}:e}),{})};t.isBreachesWSResponseNotModified=e=>304===e.code},42335:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BreachVault=void 0;const o=r(37821),n=r(78330),a=r(8962),i=r(63453);t.BreachVault=class{constructor(e){this.storeService=e}async applyChangesFromSync(e,t,r){const i=(0,o.breachesUpdated)(e,t,r);let s=null,c=null;const{updates:d,deletions:l}=e,u=d.length+l.length,p=(0,n.getInstance)(),S=(0,a.getInstance)();try{u&&(s=S.lockTopic("healthUpdates"),c=S.lockTopic("iconsUpdates"),await p.add("healthUpdates",{type:"breachUpdates"}),await p.add("iconsUpdates",{type:"breachUpdates",breachesIds:d.map((e=>e.Id))})),this.storeService.dispatch(i),u&&(S.releaseTopic("healthUpdates",s),S.releaseTopic("iconsUpdates",c))}catch(e){throw s&&S.releaseTopic("healthUpdates",s),c&&S.releaseTopic("iconsUpdates",c),e}}getAllBreaches(){const e=this.storeService.getState();return(0,i.breachesSelector)(e)}getLatestPublicBreachesRevision(){const e=this.storeService.getState();return(0,i.publicBreachesRevisionSelector)(e)}getPrivateBreachesRefreshDate(){const e=this.storeService.getState();return(0,i.privateBreachesLastUpdateTimestamp)(e)}}},21894:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CredentialVault=void 0;const o=r(36519);t.CredentialVault=class{constructor(e){this.storeService=e}getAllCredentials(){const e=this.storeService.getState();return(0,o.credentialsSelector)(e)}}},57900:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.detailItemView=void 0;const o=r(28060),n=r(97463),a=r(96066),i=r(2476),s=(0,o.defaultTo)([]);function c({name:e,domains:t}){if(e)return e;if(t.length>0){const[e]=t;return e}return""}function d(e,t){if(t&&0!==t.length)return(0,i.getIcon)(e)(t[0])}function l(e,t){const r=t.Content,o=(0,a.isDataLeaksBreach)(t)?t.Content.impactedEmails:[];return{domains:s(r.domains),breachType:(0,n.breachTypeMapper)(t),domainIcon:d(e,t.Content.domains),eventDate:r.eventDate,id:t.Id,impactedEmails:o,name:c(r),status:t.Status}}t.detailItemView=function(e,t,r){const o=r.Content,i=(0,a.isDataLeaksBreach)(r)?r.Content.impactedEmails:[],l=new Set;for(const e in t.credentialsHealth)t.credentialsHealth[e].credentialBreachIds.includes(r.BreachId)&&l.add(e);return{anonId:r.AnonId,breachType:(0,n.breachTypeMapper)(r),domains:s(o.domains),domainIcon:d(e,r.Content.domains),eventDate:o.eventDate,id:r.Id,impactedEmails:i,kwType:r.kwType,leakedData:s(o.leakedData),leakedPasswords:s(r.LeakedPasswords),name:c(o),status:r.Status,compromisedCredentialIds:[...l]}},t.itemView=l,t.listView=function(e,t){return t.map((t=>l(e,t)))}},36777:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hasBreachLeakedPrivateInfo=t.hasBreachLeakedDataOfType=t.isBreachDeleted=t.findByBreachId=t.deduplicateBreachContents=void 0;const o=r(28060),n=r(59638),a=r(96066),i=(0,o.takeLast)(1);t.deduplicateBreachContents=(0,o.pipe)((0,o.groupBy)((0,o.prop)("id")),(0,o.mapObjIndexed)((0,o.sortBy)((0,o.prop)("lastModificationRevision"))),(0,o.mapObjIndexed)((e=>i(e))),o.values,o.flatten);t.findByBreachId=(e,t)=>t.find((t=>t.BreachId===e));t.isBreachDeleted=e=>e.status===n.BreachEnvStatus.Deleted;t.hasBreachLeakedDataOfType=(e,t)=>(e.leakedData||[]).findIndex((e=>t===e))>=0;t.hasBreachLeakedPrivateInfo=e=>(0,a.isDataLeaksBreachContent)(e)||((e,t)=>(e.leakedData||[]).findIndex((e=>t.some((t=>t===e))))>=0)(e,[n.BreachLeakedDataType.Email,n.BreachLeakedDataType.Username,n.BreachLeakedDataType.CreditCard,n.BreachLeakedDataType.Phone,n.BreachLeakedDataType.Address,n.BreachLeakedDataType.SSN,n.BreachLeakedDataType.IP,n.BreachLeakedDataType.Location,n.BreachLeakedDataType.PersonalInfo,n.BreachLeakedDataType.SocialNetwork])},96066:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isPublicBreach=t.isDataLeaksBreach=t.isDataLeaksBreachContent=t.isBreach=t.isSupportedBreach=t.isSupportedBreachContent=void 0;const o=r(28060);function n(e){return t=e,(0,o.is)(Object,t)&&"number"==typeof e.breachModelVersion;var t}function a(e){return n(e)&&1===e.breachModelVersion&&Array.isArray(e.domains)&&"string"==typeof e.eventDate&&"string"==typeof e.id}function i(e){return s(e)&&a(e.Content)}function s(e){return Boolean(e)&&"KWSecurityBreach"===e.kwType}function c(e){return function(e){return"impactedEmails"in e&&Array.isArray(e.impactedEmails)}(e)&&e.impactedEmails.length>0}t.isSupportedBreachContent=a,t.isSupportedBreach=i,t.isBreach=s,t.isDataLeaksBreachContent=c;t.isDataLeaksBreach=e=>i(e)&&c(e.Content);t.isPublicBreach=e=>i(e)&&!c(e.Content)},89699:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.breachesUpdaterStatus$=t.getBreach$=t.breaches$=t.breachesBatch$=void 0;const o=r(18948),n=r(3343),a=r(6045),i=r(28807),s=r(85564),c=r(63453);t.breachesBatch$=e=>{const t=(0,a.parseToken)(e),r=(0,c.getViewedBreachesBatchSelector)(t);return(0,o.pipe)((0,n.map)(r),(0,n.distinctUntilChanged)(i.sameBatch))},t.breaches$=(0,s.getLivePersonalInfo)(c.getLiveBreachesSelector),t.getBreach$=function(e){const t=(0,c.getViewedBreachSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())};t.breachesUpdaterStatus$=()=>(0,o.pipe)((0,n.map)(c.breachesUpdaterStatusSelector),(0,n.distinctUntilChanged)())},97463:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBreachMappers=t.breachTypeMapper=void 0;const o=r(96066);function n(e){return(0,o.isDataLeaksBreach)(e)?"private":"public"}t.breachTypeMapper=n;t.getBreachMappers=()=>({breachType:e=>n(e),eventDate:e=>function({eventDate:e}){return Date.parse(e)}(e.Content),id:e=>e.Id,status:e=>e.Status})},91728:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBreachesBatch=t.viewBreachesBatch=t.getBreachesFirstToken=t.getBreacheSortToken=t.getBreachesFilterToken=void 0;const o=r(28060),n=r(51417),a=r(57900);t.getBreachesFilterToken=({filterCriteria:e})=>({filterCriteria:e||[]});t.getBreacheSortToken=({sortCriteria:e})=>({uniqField:"id",sortCriteria:e||[]});t.getBreachesFirstToken=(e,t,r,o)=>(0,n.generateFirstToken)(e,t,r.initialBatchSize||30,o);t.viewBreachesBatch=(e,t)=>(0,a.listView)(e,t),t.getBreachesBatch=(0,o.curry)(((e,t,r)=>(0,n.getBatch)(r,e,t)))},76314:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.breachMatch=t.searchGetters=void 0;const o=r(37047);t.searchGetters=[],t.breachMatch=(0,o.match)(t.searchGetters)},63453:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.breachesUpdaterStatusSelector=t.getViewedBreachSelector=t.getViewedBreachesBatchSelector=t.getLiveBreachesSelector=t.fieldMappersSelector=t.breachesQuerySelector=t.breachesPaginationTokenSelector=t.breachesPageSelector=t.viewedQueriedBreachesSelector=t.breachMappersSelector=t.viewedBreachSelector=t.breachSelector=t.privateBreachesLastUpdateTimestamp=t.publicBreachesRevisionSelector=t.publicBreachesSelector=t.privateBreachesSelector=t.breachesSelector=void 0;const o=r(18948),n=r(32034),a=r(96066),i=r(41147),s=r(80398),c=r(3259),d=r(6045),l=r(51417),u=r(66771),p=r(57900),S=r(97463),g=r(76314),m=r(91728),y=r(83477),v=r(5087),A=e=>e.userSession.personalData.securityBreaches,E=(0,n.createSelector)(A,(e=>e.filter(a.isSupportedBreach)));t.breachesSelector=(0,n.createSelector)(E,(e=>[...e.reduce(((e,t)=>{const r=e.get(t.BreachId);return(!r||r.LastBackupTime<t.LastBackupTime)&&e.set(t.BreachId,t),e}),new Map).values()])),t.privateBreachesSelector=(0,n.createSelector)(A,(e=>[...new Set(e.filter(a.isDataLeaksBreach))])),t.publicBreachesSelector=(0,n.createSelector)(A,(e=>[...new Set(e.filter(a.isPublicBreach))]));t.publicBreachesRevisionSelector=e=>e.userSession.personalData.securityBreachesMetadata.latestPublicBreachesRevision;function f(e,r){const o=(0,t.breachesSelector)(e);return(0,i.findDataModelObject)(r,o)}t.privateBreachesLastUpdateTimestamp=e=>e.userSession.personalData.securityBreachesMetadata.latestDataLeaksBreachesUpdate,t.breachSelector=f,t.viewedBreachSelector=function(e,t){const r=(0,y.iconsSelector)(e),o=f(e,t),n=(0,v.healthSelector)(e);return(0,p.detailItemView)(r,n,o)};t.breachMappersSelector=e=>(0,S.getBreachMappers)();const h=()=>g.breachMatch,_=(0,c.getQuerySelector)(t.breachesSelector,h,t.breachMappersSelector),T=(0,n.createSelector)(y.iconsSelector,(e=>t=>(0,m.viewBreachesBatch)(e,t)));t.viewedQueriedBreachesSelector=(e,t)=>{const r=_(e,t),o=T(e);return(0,s.viewListResults)(o)(r)},t.breachesPageSelector=function(e,r){const o=(0,d.parseToken)(r),{sortToken:n,filterToken:a}=o,i={sortToken:n,filterToken:a},s=(0,S.getBreachMappers)(),c=(0,t.breachesQuerySelector)(e,i),u=T(e),p=(0,l.generateNextToken)(s,o,c),g=(0,l.generatePrevToken)(s,o,c),m=(0,l.getBatch)(s,o,c),y=(0,d.stringifyToken)(p),v=(0,d.stringifyToken)(g);return{batch:u(m),nextToken:y,prevToken:v}};t.breachesPaginationTokenSelector=(e,r)=>{const o=(0,m.getBreacheSortToken)(r),n=(0,m.getBreachesFilterToken)(r),a=(0,S.getBreachMappers)(),i={sortToken:o,filterToken:n},s=(0,t.breachesQuerySelector)(e,i),c=(0,m.getBreachesFirstToken)(a,i,r,s);return(0,d.stringifyToken)(c)};const I=(0,d.createOptimizedSortTokenSelector)(((e,{sortToken:t})=>t),o.identity),C=(0,d.createOptimizedFilterTokenSelector)(((e,{filterToken:t})=>t),o.identity);t.breachesQuerySelector=(0,n.createSelector)(S.getBreachMappers,h,I,C,t.breachesSelector,d.queryData),t.fieldMappersSelector=(0,n.createSelector)(t.breachesSelector,S.getBreachMappers),t.getLiveBreachesSelector=(0,u.makeLiveSelectorGetter)(t.breachesSelector,T,h,t.breachMappersSelector);t.getViewedBreachesBatchSelector=e=>{const{sortToken:r,filterToken:o}=e,a={sortToken:r,filterToken:o},i=(0,m.getBreachesBatch)(e),s=(0,n.createSelector)((e=>(0,t.breachesQuerySelector)(e,a)),t.fieldMappersSelector,i),c=(0,d.optimizeBatchSelector)(s);return(0,n.createSelector)(y.iconsSelector,c,m.viewBreachesBatch)},t.getViewedBreachSelector=function(e){const r=(0,n.createSelector)(t.breachesSelector,(t=>(0,i.findDataModelObject)(e,t)));return(0,n.createSelector)(y.iconsSelector,v.healthSelector,r,p.detailItemView)};t.breachesUpdaterStatusSelector=e=>e.userSession.personalData.breachesUpdaterStatus},66172:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(12642);t.setupSubscriptions=async function(e,t){const{storeService:r,wsService:n}=t;e.syncSuccess.on((()=>{(0,o.getInstance)(r,n).refresh({forceRefresh:!1})}))}},59638:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BreachCriticality=t.BreachEnvStatus=t.BreachLeakedDataType=t.BreachStatus=void 0,function(e){e.PENDING="PENDING",e.VIEWED="VIEWED",e.ACKNOWLEDGED="ACKNOWLEDGED"}(t.BreachStatus||(t.BreachStatus={})),function(e){e.Username="username",e.Password="password",e.Email="email",e.CreditCard="creditcard",e.Phone="phone",e.Address="address",e.SSN="ssn",e.IP="ip",e.Location="geolocation",e.PersonalInfo="personalinfo",e.SocialNetwork="social"}(t.BreachLeakedDataType||(t.BreachLeakedDataType={})),function(e){e.Legacy="legacy",e.Live="live",e.Staging="staging",e.Deleted="deleted"}(t.BreachEnvStatus||(t.BreachEnvStatus={})),function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(t.BreachCriticality||(t.BreachCriticality={}))},13123:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentData=t.getChangeSet=t.getChangedProperties=t.getChangedPropertiesForRemoval=void 0;const o=r(28060),n=r(57254),a=r(36109),i={KWAuthentifiant:{Email:"",Login:"",Note:"",Password:"",SecondaryLogin:"",Title:"",Url:"",UserSelectedUrl:""},KWSecureNote:{Content:"",Title:""}};function s(e){const t=i[e.kwType];return Object.keys(t).filter((r=>e[r]&&e[r]!==t[r]))}function c(e,t){const r=i[e.kwType];return Object.keys(r).filter((r=>e[r]&&""!==e[r]&&e[r]!==t[r]))}function d(e){return Object.keys(i[e.kwType]).reduce(((t,r)=>(t[r]=e[r]||"",t)),{})}t.getChangedPropertiesForRemoval=s,t.getChangedProperties=c,t.getChangeSet=function(e){const{change:t,deviceName:r,oldItem:i,userLogin:l,platformInfo:u}=e;if((0,o.isNil)(i))return null;const p="removal"===t.type?s(i):c(i,t.updatedItem);return 0===p.length?null:{kwType:"KWChangeSet",ChangedProperties:p,CurrentData:d(i),Id:(0,n.generateItemUuid)(),Platform:u.platformName,DeviceName:r||"",ModificationDate:(0,a.getUnixTimestamp)(),Removed:(0,o.defaultTo)(!1,"removal"===t.type),User:l}},t.getCurrentData=d},94343:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeRemovalChange=t.makeUpdateChange=void 0;t.makeUpdateChange=e=>({type:"update",updatedItem:e});t.makeRemovalChange=e=>({type:"removal",itemId:e.Id,itemKwType:e.kwType})},49504:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUpdatedItemChangeHistory=t.isChangeHistoryCandidate=t.getEmptyChangeHistory=void 0;const o=r(28060),n=r(97211),a=r(57254),i=r(13123),s=r(9473),c=r(59778),d=r(41147);function l(e){const[t,r,o]="removal"===e.type?[e.itemId,e.itemKwType,""]:[e.updatedItem.Id,e.updatedItem.kwType,e.updatedItem.Title||""];return{kwType:"KWDataChangeHistory",ChangeSets:[],Id:(0,a.generateItemUuid)(),ObjectId:t,ObjectTitle:o,ObjectType:(0,c.getTransactionTypeFromDataModelType)(r),LastBackupTime:0}}t.getEmptyChangeHistory=l;t.isChangeHistoryCandidate=function(e){return(0,n.isCredential)(e)||(0,n.isNote)(e)},t.getUpdatedItemChangeHistory=function(e){const{deviceName:t,personalData:r,change:n,userLogin:a,platformInfo:c}=e,[u,p,S]="removal"===n.type?[n.itemId,n.itemKwType,""]:[n.updatedItem.Id,n.updatedItem.kwType,n.updatedItem.Title],g=s.default[p],m=(0,d.findDataModelObject)(u,r[g]),y=(0,i.getChangeSet)({deviceName:t,change:n,oldItem:m,userLogin:a,platformInfo:c});if(!y)return null;const v=r.changeHistories.find((e=>e.ObjectId.toUpperCase()===(u||"").toUpperCase())),A=v||l(n),E=(0,o.last)(A.ChangeSets);return E&&((e,t)=>(0,o.equals)(t.CurrentData,e.CurrentData))(E,y)?null:{...A,ObjectTitle:S,ChangeSets:A.ChangeSets.concat(y)}}},3458:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsHistoriesSelector=void 0;const o=r(32034),n=r(86965),a=r(75822),i=r(52931),s=r(59778),c=e=>e.ObjectType===s.TransactionType.AUTHENTIFIANT,d=(0,o.createSelector)((e=>e.userSession.personalData.changeHistories),(e=>e.filter(c)));t.credentialsHistoriesSelector=(0,o.createSelector)(d,i.quarantinedSpacesSelector,a.unsafeAllCredentialsSelector,n.filterOutQuarantinedItems)},25616:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(57750);t.config={commands:{setupDefaultCredentialsCategories:{handler:o.setupDefaultCredentialsCategoriesHandler}},queries:{},liveQueries:{}}},57750:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupDefaultCredentialsCategoriesHandler=void 0;const o=r(19935),n=r(31453),a=r(35436),i=r(37821),s=r(31267);t.setupDefaultCredentialsCategoriesHandler=async function(e,t){try{const{storeService:r,sessionService:c}=e;if(!r.isAuthenticated())return{success:!1};!function(e){const{storeService:t,sessionService:r,eventLoggerService:n}=e,c=t.getPersonalData().credentialCategories.filter((e=>e.CategoryName.startsWith("CATEGORY_CREDENTIAL"))).map((e=>{const t=(0,i.removePersonalItem)(e.kwType,e.Id,null);return n.logEvent(new o.UserUpdateVaultItemEvent({action:o.Action.Delete,itemId:e.Id,itemType:s.dataModelTypeToItemType[e.kwType],space:o.Space.All})),t}));c.forEach((e=>t.dispatch(e))),c.length>0&&(r.getInstance().user.persistPersonalData(),(0,a.getDebounceSync)(t,r)({immediateCall:!0},o.Trigger.Save))}(e);const d=r.getPersonalData().credentialCategories;if(!d||0===d.length){t.categories.forEach((e=>{(0,n.saveCredentialCategory)(r,{name:e})})),c.getInstance().user.persistPersonalData();(0,a.getDebounceSync)(r,c)({immediateCall:!0},o.Trigger.Save)}return{success:!0}}catch(e){return{success:!1}}}},31453:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUpdatedCredentialCategory=t.getNewCredentialCategory=t.saveCredentialCategory=void 0;const o=r(37821),n=r(31891),a=r(57254),i=r(41147);function s(e){n.Debugger.log(`[Data] Creating new Credential Category: ${e}`);return{kwType:"KWAuthCategory",Id:(0,a.generateItemUuid)(),CategoryName:e.trim(),LastBackupTime:0}}function c(e,t){const r=(0,i.findDataModelObject)(t.id,e);if(!r)throw new Error("UI asks to update an unknown Credential Category");return n.Debugger.log(`[Data] Updating existing Credential Category ${t.id}`),{...r,CategoryName:t.name.trim()}}t.saveCredentialCategory=function(e,t){if(!e.isAuthenticated())return void n.Debugger.error("No session available to saveCredentialCategory");const r=e.getPersonalData().credentialCategories;if(a=r,"string"!=typeof(i=t.name)||""===i.trim()||a.some((e=>e.CategoryName===i)))return void n.Debugger.error(new Error("Can not save Category with this name: Empty or already used"));var a,i;const d=t.id?c(r,t):s(t.name);return e.dispatch((0,o.saveCredentialCategory)(d)),d},t.getNewCredentialCategory=s,t.getUpdatedCredentialCategory=c},38677:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(46542),n=r(68930),a=r(98498),i=r(72578),s=r(14614),c=r(12601),d=r(83272),l=r(64521),u=r(50507),p=r(18853),S=r(65742),g=r(2315),m=r(60435),y=r(89258),v=r(88815),A=r(73469);t.config={commands:{updateCredential:{handler:A.updateCredentialHandler}},queries:{canUserAddNewCredential:{selector:o.canUserAddNewCredentialSelector},getCredential:{selector:g.viewedCredentialSelector},getCredentialCategories:{selector:S.viewedCredentialCategoriesSelector},getCredentials:{selector:m.viewedQueriedCredentialsSelector},getCredentialsByDomain:{selector:y.viewedQueriedCredentialsByDomainSelector},getCredentialsCount:{selector:n.credentialsCountSelector},getCredentialLimitStatus:{selector:a.credentialLimitStatusSelector},getCredentialsPage:{selector:i.credentialsPageSelector},getCredentialsPaginationToken:{selector:s.credentialsPaginationTokenSelector},getCredentialsHealthScore:{selector:p.credentialsHealthScoreSelector},getCompromisedCredentialsCount:{selector:c.compromisedCredentialsCountSelector},getReusedCredentialsCount:{selector:d.reusedCredentialsCountSelector},getShouldShowRequireMasterPassword:{selector:l.shouldShowRequireMasterPasswordSelector},getWeakCredentialsCount:{selector:u.weakCredentialsCountSelector}},liveQueries:{liveCanUserAddNewCredential:{operator:v.canUserAddNewCredential$},liveCredentialLimitStatus:{operator:v.credentialLimitStatus$},liveCredential:{operator:v.getCredential$},liveCredentials:{operator:v.credentials$},liveCredentialsByDomain:{operator:v.credentialsByDomain$},liveCredentialsBatch:{operator:v.credentialsBatch$},liveCredentialsCount:{operator:v.credentialsCount$},liveCredentialsHealthScore:{operator:v.credentialsHealthScore$},liveCompromisedCredentialsCount:{operator:v.compromisedCredentialsCount$},liveReusedCredentialsCount:{operator:v.reusedCredentialsCount$},liveWeakCredentialsCount:{operator:v.weakCredentialsCount$}}}},24086:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(54649),t)},99436:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handleLimitedSharedCredentialsPassword=t.removeCredentialsWithQuarantinedSpaces=t.fixCredentialsWithMissingTitles=t.fixCredentialWithMissingTitle=void 0;const o=r(17514),n=r(15448),a=r(583);function i(e){return e.Title?e:Object.assign({},e,{Title:(0,a.getDomainForCredential)(e)})}t.fixCredentialWithMissingTitle=i,t.fixCredentialsWithMissingTitles=function(e){return e.map(i)},t.removeCredentialsWithQuarantinedSpaces=function(e,t){if(!e.spaces||0===e.spaces.length)return t;const r=[];return e.spaces.filter(o.isSpaceQuarantined).forEach((e=>{const n=e.details.info&&e.details.info.teamDomains?e.details.info.teamDomains:[];t.filter((e=>(0,o.isCredentialSmartCategorized)(e,n))).forEach((t=>{""!==t.SpaceId&&t.SpaceId===e.details.teamId&&r.push(t)}))})),t.filter((e=>!r.includes(e)))},t.handleLimitedSharedCredentialsPassword=function(e,t,r){const o=(0,n.getLimitedSharedItemIds)(t,r);return e.map((e=>o[e.Id]?Object.assign({},e,{Password:"************",limitedPermissions:!0}):e))}},6105:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.countCredentials=void 0;const o=r(6045);t.countCredentials=(e,t,r,n)=>(0,o.filterData)(e,t,r,n).length},583:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDomainForCredential=void 0;const o=r(11814);t.getDomainForCredential=e=>o.url.getDomainForUrl(e.Url)},73469:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateCredentialHandler=void 0;const o=r(31891),n=r(59125),a=r(97747);t.updateCredentialHandler=async function(e,t){const{storeService:r,sessionService:i,eventLoggerService:s}=e;try{return await(0,a.updateCredential)({storeService:r,sessionService:i,eventLoggerService:s},t),{success:!0}}catch(e){return(0,o.logError)(e),(0,n.sendExceptionLog)({error:e}),{success:!1}}}},30729:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialsDisplayTitles=void 0;const o=r(583);t.getCredentialsDisplayTitles=function(e){const t=e.reduce(((e,t)=>{const{Id:r,Title:n}=t,a=n||(0,o.getDomainForCredential)(t);return e.concat([[r,a]])}),[]);return new Map(t)}},85816:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewCredential=t.afterCredentialSaved=t.notifySharersCredentialUpdated=t.makeCredentialSpecificProps=t.makeNewCredential=t.makeUpdatedCredential=t.beforeCredentialChange=t.sharedFields=t.SaveFrom=void 0;const o=r(28060),n=r(23464),a=r(97211),i=r(81604),s=r(11814),c=r(41569),d=r(62660),l=r(1005),u=r(36109);t.SaveFrom=(0,n.Enum)("MANUAL","SAVE_PASSWORD","DATACAPTURE","IMPORT");const p=r(59125),S=r(11117),g=r(40265),m=r(78674),y=r(70910),v=r(77222),A=r(40649),E=r(2476);t.sharedFields=["Email","Login","Note","OtpSecret","Password","SecondaryLogin","Title","Url","UseFixedUrl","UserSelectedUrl"];const f=(e,t)=>({...e,content:{...e.content,category:t}}),h=(0,o.defaultTo)("");function _(e,t){var r,o,n;const i=null!==(r=null==t?void 0:t.UserSelectedUrl)&&void 0!==r?r:"",s=null!==(o=null==t?void 0:t.UseFixedUrl)&&void 0!==o&&o,d=null!==(n=null==t?void 0:t.TrustedUrlGroup)&&void 0!==n?n:[],l=e.origin===a.SaveOrigin.MANUAL,u=(null==t?void 0:t.Url)!==e.content.url,p=(0,c.cleanUrlForPersonalData)(e.content.url,{keepQueryString:l}),S=l&&u?{UserSelectedUrl:p,UseFixedUrl:!0}:{UserSelectedUrl:i,UseFixedUrl:s};return{Url:p,TrustedUrlGroup:(0,c.getUpdatedTrustedUrlList)(d,p),...S}}async function T(e,t,r=(0,u.getUnixTimestamp)()){const{content:n}=e,{email:a,login:s,secondaryLogin:c}=(0,d.normalizeUsernames)(n.email,n.login,n.secondaryLogin),l=h(n.password),p=!t||t.Password!==l?{ModificationDatetime:r}:{},S=function(e,t){return({itemField:r,existingItemField:n,defaultValue:a})=>(0,o.isNil)(e[r])?t&&!(0,o.isNil)(t[n])?t[n]:a:e[r]}(n,t);return{AutoLogin:S({itemField:"autoLogin",existingItemField:"AutoLogin",defaultValue:!0}),AutoProtected:S({itemField:"protectWithMasterPassword",existingItemField:"AutoProtected",defaultValue:!1}),Category:S({itemField:"category",existingItemField:"Category",defaultValue:""}),Checked:S({itemField:"checked",existingItemField:"Checked",defaultValue:!1}),Email:a,Login:s,Note:S({itemField:"note",existingItemField:"Note",defaultValue:""}),Password:l,SecondaryLogin:c,Status:"ACCOUNT_NOT_VERIFIED",Strength:l?await(0,i.evaluatePasswordStrength)(l):0,SubdomainOnly:Boolean(n.onlyForThisSubdomain),Title:S({itemField:"title",existingItemField:"Title",defaultValue:""}),..._(e,t),OtpSecret:S({itemField:"otpSecret",existingItemField:"OtpSecret",defaultValue:void 0}),...p}}t.beforeCredentialChange=function(e,t){const r=t.credentialCategories,o=e.content.category;if(!o)return e;if(r.find((e=>e.Id===o)))return e;const n=r.find((e=>e.CategoryName===o));return f(e,n?n.Id:"")},t.makeUpdatedCredential=async function(e,t){const r=(0,u.getUnixTimestamp)(),o=await T(e,t,r);return{...t,...(0,S.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:r}),...o}},t.makeNewCredential=async function(e){const t=(0,u.getUnixTimestamp)(),r=await T(e,null,t);return function(e){const{Title:t,Url:r}=e;return{...e,Title:t||h(s.url.getDomainForUrl(r))}}({...(0,S.makeNewPersonalDataItemBase)(e,t),...r})},t.makeCredentialSpecificProps=T,t.notifySharersCredentialUpdated=async function(e,r,n){!(0,o.equals)((0,o.pick)(t.sharedFields,r),(0,o.pick)(t.sharedFields,n))&&await(0,S.notifySharersOnUpdate)(e,n).catch((e=>{const t=new Error(`[Sharing] - notifySharersCredentialUpdated: ${e}`);(0,p.sendExceptionLog)({error:t})}))},t.afterCredentialSaved=function(e,t){(0,g.associateGeneratedPasswordsToCredential)(e.getPersonalData().generatedPasswords,t).forEach((t=>{e.dispatch((0,l.saveGeneratedPassword)(t))}))},t.viewCredential=function(e,t,r,o,n,a,i,s,c){if(!e)return;const d=(0,y.getSharingStatusDetail)(a,o,n),l=(0,E.getIcon)(s),u=(0,v.getCategory)(i),p=(0,A.getCredentialHealthView)(t,r,c),S=(0,v.getSmartCategorizedSpace)(c);return(0,m.detailView)(d,u,l,p,S,e)}},88815:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.weakCredentialsCount$=t.reusedCredentialsCount$=t.compromisedCredentialsCount$=t.credentialsHealthScore$=t.credentialLimitStatus$=t.canUserAddNewCredential$=t.credentialsByDomain$=t.credentials$=t.credentialsCount$=t.getCredential$=t.credentialsBatch$=void 0;const o=r(18948),n=r(3343),a=r(46542),i=r(98498),s=r(12601),c=r(68930),d=r(18853),l=r(65699),u=r(62264),p=r(34162),S=r(83272),g=r(50507),m=r(48732),y=r(6045),v=r(28807),A=r(85564);t.credentialsBatch$=e=>{const t=(0,y.parseToken)(e),r=(0,p.getViewedCredentialsBatchSelector)(t);return(0,o.pipe)((0,n.map)(r),(0,n.distinctUntilChanged)(v.sameBatch))};t.getCredential$=e=>{const t=(0,u.getViewedCredentialSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())};t.credentialsCount$=e=>{const t=(0,y.parseToken)(e);return(0,o.pipe)((0,n.map)((e=>(0,c.credentialsCountSelector)(e,t))),(0,n.distinctUntilChanged)())},t.credentials$=(0,A.getLivePersonalInfo)(l.getLiveCredentialsSelector);t.credentialsByDomain$=e=>{const{domain:t,...r}=(0,y.parseToken)(e),a=(0,m.getLiveCredentialsByDomainSelector)(t)(r);return(0,o.pipe)((0,n.map)(a),(0,n.distinctUntilChanged)(((e,t)=>e.matchingCount===t.matchingCount&&(0,v.sameBatch)(e.items,t.items))))};t.canUserAddNewCredential$=()=>(0,o.pipe)((0,n.map)(a.canUserAddNewCredentialSelector),(0,n.distinctUntilChanged)());t.credentialLimitStatus$=()=>(0,o.pipe)((0,n.map)(i.credentialLimitStatusSelector),(0,n.distinctUntilChanged)());t.credentialsHealthScore$=e=>{const t=(0,y.parseToken)(e);return(0,o.pipe)((0,n.map)((e=>(0,d.credentialsHealthScoreSelector)(e,t))),(0,n.distinctUntilChanged)())};t.compromisedCredentialsCount$=e=>{const t=(0,y.parseToken)(e);return(0,o.pipe)((0,n.map)((e=>(0,s.compromisedCredentialsCountSelector)(e,t))),(0,n.distinctUntilChanged)())};t.reusedCredentialsCount$=e=>{const t=(0,y.parseToken)(e);return(0,o.pipe)((0,n.map)((e=>(0,S.reusedCredentialsCountSelector)(e,t))),(0,n.distinctUntilChanged)())};t.weakCredentialsCount$=e=>{const t=(0,y.parseToken)(e);return(0,o.pipe)((0,n.map)((e=>(0,g.weakCredentialsCountSelector)(e,t))),(0,n.distinctUntilChanged)())}},86259:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialMappers=t.credentialCompromisedDateMapper=t.credentialRiskLevelMapper=t.credentialStrengthMapper=t.credentialNumberReusedMapper=t.isCredentialWeakMapper=t.isCredentialAtRiskMapper=t.isCredentialReusedMapper=t.isCredentialCompromisedMapper=void 0;const o=r(28060),n=r(10675),a=r(43650),i=r(59403),s=r(88763),c=r(84318),d=r(10676),l=r(83617),u=r(70876),p=(0,o.curry)(((e,t)=>e.get(t.Id)||"")),S=e=>!!e.Attachments&&e.Attachments.length>0,g=(0,o.curry)(((e,t)=>!!e[t.Id])),m=e=>"boolean"==typeof e.Checked&&e.Checked;t.isCredentialCompromisedMapper=(e,t)=>{const r=new Map;return o=>{const n=o.Id,a=r.get(n);if(a)return a;const s=(0,i.getCredentialCompromisedInfo)(o,e,t),d=(0,c.healthInfoHasValue)(s,!0);return r.set(n,d),d}};t.isCredentialReusedMapper=(e,t)=>{const r=new Map;return o=>{const n=o.Id,a=r.get(n);if(a)return a;const i=(0,s.getCredentialPasswordReusedInfo)(o,e,t),d=(0,c.healthInfoHasValue)(i,!0);return r.set(n,d),d}};t.isCredentialAtRiskMapper=(e,t,r)=>{const o=new Map;return n=>{const d=n.Id,l=o.get(d);if(l)return l;const u=(0,s.getCredentialPasswordReusedInfo)(n,t,r),p=(0,a.getCredentialPasswordIsWeakInfo)(n,e,r),S=(0,i.getCredentialCompromisedInfo)(n,e,r),g=(0,c.healthInfoHasValue)(u,!0),m=(0,c.healthInfoHasValue)(p,!0),y=(0,c.healthInfoHasValue)(S,!0),v=!!n.Checked||g||m||y;return o.set(d,v),v}};t.isCredentialWeakMapper=(e,t)=>{const r=new Map;return o=>{const n=o.Id,i=r.get(n);if(i)return i;const s=(0,a.getCredentialPasswordIsWeakInfo)(o,e,t),d=(0,c.healthInfoHasValue)(s,!0);return r.set(n,d),d}};t.credentialNumberReusedMapper=(e,t)=>{const r=new Map;return o=>{const n=o.Id,a=r.get(n);if(a)return a;const i=(0,s.getCredentialSimilarCountInfo)(o,e,t),d=(0,c.unwrapHealthInfoValueOr)(i,0);return r.set(n,d),d}};t.credentialStrengthMapper=(e,t)=>{const r=new Map;return o=>{const n=o.Id,a=r.get(n);if(a)return a;const i=(0,d.getCredentialStrengthInfo)(o,e,t),s=(0,c.unwrapHealthInfoValueOr)(i,0);return r.set(n,s),s}};t.credentialRiskLevelMapper=(e,t,r)=>{const o=new Map;return n=>{const d=n.Id,l=o.get(d);if(l)return l;const u=(0,i.getCredentialCompromisedInfo)(n,e,r),p=(0,s.getCredentialPasswordReusedInfo)(n,t,r),S=(0,a.getCredentialPasswordIsWeakInfo)(n,e,r);if((0,c.healthInfoHasValue)(u,!0)){const e=3;return o.set(d,e),e}if((0,c.healthInfoHasValue)(p,!0)){const e=2;return o.set(d,e),e}if((0,c.healthInfoHasValue)(S,!0)){const e=1;return o.set(d,e),e}return o.set(d,0),0}};t.credentialCompromisedDateMapper=(e,t,r)=>{const o=new Map;return n=>{const a=n.Id,i=o.get(a);if(i)return i;const s=(0,l.getCredentialCompromisedView)(e,t,r,n),d=(0,c.unwrapHealthInfoValueOr)(s,{isCompromised:!1});if(!d.isCompromised){const e=0;return o.set(a,e),e}const u=Date.parse(d.details.date);if(isNaN(u)){const e=0;return o.set(a,e),e}return o.set(a,u),u}};const y=(0,o.curry)(((e,t)=>{const r=t.Category,o=(e||[]).find((e=>e.Id===r));return o&&o.CategoryName?o.CategoryName:"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz"}));t.getCredentialMappers=(e,r,o,a,i,s,c,d)=>({category:y(e),groupIds:e=>(0,u.getItemUserGroupIds)(d,e.Id),sharingUserIds:e=>(0,u.getItemUserIds)(d,e.Id),compromisedDate:(0,t.credentialCompromisedDateMapper)(a,s,c),hasAttachments:S,id:e=>e.Id,isAtRisk:(0,t.isCredentialAtRiskMapper)(a,i,c),isCompromised:(0,t.isCredentialCompromisedMapper)(a,c),isExcluded:m,isLimited:g(r),isReused:(0,t.isCredentialReusedMapper)(i,c),isWeak:(0,t.isCredentialWeakMapper)(a,c),lastUse:n.lastUseMapper,login:e=>e.Login,numberReused:(0,t.credentialNumberReusedMapper)(i,c),numberUse:e=>e.NumberUse,spaceId:e=>e.SpaceId,riskLevel:(0,t.credentialRiskLevelMapper)(a,i,c),strength:(0,t.credentialStrengthMapper)(a,c),title:p(o)})},15430:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialsBatch=t.viewCredentialsBatch=t.getCredentialsFirstToken=t.getCredentialsSortToken=t.getCredentialsFilterToken=void 0;const o=r(28060),n=r(51417),a=r(83082),i=r(70910),s=r(77222),c=r(40649),d=r(2476);t.getCredentialsFilterToken=({filterCriteria:e})=>({filterCriteria:e||[]});t.getCredentialsSortToken=({sortCriteria:e})=>({uniqField:"id",sortCriteria:e||[]});t.getCredentialsFirstToken=(e,t,r,o)=>(0,n.generateFirstToken)(e,t,r.initialBatchSize||30,o);t.viewCredentialsBatch=(e,t,r,o,n,l,u,p)=>{const S=(0,i.getSharingStatusItem)(t,r),g=(0,d.getIcon)(n),m=(0,s.getCategory)(o),y=(0,c.getCredentialHealthView)(l,u,p);return(0,a.listView)(S,m,g,y,e)},t.getCredentialsBatch=(0,o.curry)(((e,t,r)=>(0,n.getBatch)(r,e,t)))},73860:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialMatch=void 0;const o=r(37047),n=r(54090),a=r(57748),i=[(0,a.stringProp)("Email"),(0,a.stringProp)("Login"),(0,a.stringProp)("Title"),(0,a.stringProp)("Note"),(0,a.stringProp)("SecondaryLogin"),(0,a.stringProp)("CategoryName"),e=>(0,n.getWebsitesAssociatedToUrl)(e.Url).join(" ")];t.credentialMatch=(0,o.match)(i)},46542:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.canUserAddNewCredentialSelector=void 0;const o=r(32034),n=r(98498),a=r(14573);t.canUserAddNewCredentialSelector=(0,o.createSelector)(n.credentialLimitStatusSelector,(e=>e!==a.CredentialLimitStatus.AtOrAboveLimit))},12601:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.compromisedCredentialsCountSelector=void 0;const o=r(32034),n=r(30822),a=r(5087),i=r(54670),s=r(59403);t.compromisedCredentialsCountSelector=(0,o.createSelector)(n.credentialsQuerySelector,a.credentialsHealthSelector,i.spacesSelector,s.getCompromisedCredentialsCount)},56994:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.countAllCredentialsSelector=void 0;t.countAllCredentialsSelector=e=>e.userSession.personalData.credentials.length},65742:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewedCredentialCategoriesSelector=t.credentialCategoryNamesMapSelector=t.credentialCategoriesSelector=void 0;const o=r(32034),n=r(24627);t.credentialCategoriesSelector=e=>e.userSession.personalData.credentialCategories,t.credentialCategoryNamesMapSelector=(0,o.createSelector)([t.credentialCategoriesSelector],(e=>e.reduce(((e,t)=>(e[t.Id]=t.CategoryName,e)),{}))),t.viewedCredentialCategoriesSelector=(0,o.createSelector)(t.credentialCategoriesSelector,(e=>({items:(0,n.listView)(e),matchingCount:e.length})))},62505:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialMatchSelector=void 0;const o=r(73860);t.credentialMatchSelector=()=>o.credentialMatch},1237:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialSelector=void 0;const o=r(36519),n=r(41147);t.credentialSelector=(e,t)=>{const r=(0,o.credentialsSelector)(e);return(0,n.findDataModelObject)(t,r)}},17893:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialsByDomainSelector=void 0;const o=r(32034),n=r(36519),a=r(54090);t.getCredentialsByDomainSelector=e=>(0,o.createSelector)(n.credentialsSelector,(t=>t.filter((t=>(0,a.getWebsitesAssociatedToUrl)(t.Url).includes(e)))))},68930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsCountSelector=void 0;const o=r(32034),n=r(56598),a=r(36519),i=r(62505),s=r(6105),c=r(83016);t.credentialsCountSelector=(0,o.createSelector)(n.fieldMappersSelector,i.credentialMatchSelector,c.filterTokenSelector,a.credentialsSelector,s.countCredentials)},570:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialDisplayTitlesSelector=void 0;const o=r(32034),n=r(36519),a=r(30729);t.credentialDisplayTitlesSelector=(0,o.createSelector)(n.credentialsSelector,a.getCredentialsDisplayTitles)},18853:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsHealthScoreSelector=void 0;const o=r(32034),n=r(30822),a=r(5087),i=r(54670),s=r(96857);t.credentialsHealthScoreSelector=(0,o.createSelector)(n.credentialsQuerySelector,a.credentialsHealthSelector,a.similarPasswordsSelector,i.spacesSelector,s.getSecurityScore)},98498:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialLimitStatusSelector=void 0;const o=r(32034),n=r(14573),a=r(36519),i=r(8153);t.credentialLimitStatusSelector=(0,o.createSelector)(i.premiumStatusSelector,a.credentialsSelector,((e,t)=>{var r,o,a,i,s;if(!e||!e.capabilities)return n.CredentialLimitStatus.AtOrAboveLimit;if(!(null===(o=null===(r=e.capabilities)||void 0===r?void 0:r.passwordsLimit)||void 0===o?void 0:o.enabled))return n.CredentialLimitStatus.Unlimited;const c=t.length,d=null===(s=null===(i=null===(a=e.capabilities)||void 0===a?void 0:a.passwordsLimit)||void 0===i?void 0:i.info)||void 0===s?void 0:s.limit;return c>=d?n.CredentialLimitStatus.AtOrAboveLimit:c>=d-5?n.CredentialLimitStatus.NearLimit:n.CredentialLimitStatus.UnderLimit}))},72578:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsPageSelector=void 0;const o=r(51417),n=r(6045),a=r(56598),i=r(30822),s=r(57832);t.credentialsPageSelector=(e,t)=>{const r=(0,n.parseToken)(t),{sortToken:c,filterToken:d}=r,l={sortToken:c,filterToken:d},u=(0,a.fieldMappersSelector)(e),p=(0,i.credentialsQuerySelector)(e,l),S=(0,s.listViewSelector)(e),g=(0,o.generateNextToken)(u,r,p),m=(0,o.generatePrevToken)(u,r,p),y=(0,o.getBatch)(u,r,p),v=(0,n.stringifyToken)(g),A=(0,n.stringifyToken)(m);return{batch:S(y),nextToken:v,prevToken:A}}},14614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsPaginationTokenSelector=void 0;const o=r(15430),n=r(56598),a=r(30822),i=r(6045);t.credentialsPaginationTokenSelector=(e,t)=>{const r=(0,o.getCredentialsSortToken)(t),s=(0,o.getCredentialsFilterToken)(t),c=(0,n.fieldMappersSelector)(e),d={sortToken:r,filterToken:s},l=(0,a.credentialsQuerySelector)(e,d),u=(0,o.getCredentialsFirstToken)(c,d,t,l);return(0,i.stringifyToken)(u)}},30822:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsQuerySelector=void 0;const o=r(32034),n=r(56598),a=r(83016),i=r(83103),s=r(36519),c=r(62505),d=r(6045);t.credentialsQuerySelector=(0,o.createSelector)(n.fieldMappersSelector,c.credentialMatchSelector,i.sortTokenSelector,a.filterTokenSelector,s.credentialsSelector,d.queryData)},36519:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsSelector=void 0;const o=r(32034),n=r(75822),a=r(54825),i=r(52931),s=r(86965),c=r(14122),d=r(65742),l=(0,o.createSelector)([e=>(0,c.hasFeatureSelector)(e,"web_extension_credentialsDedupView")?(0,a.dedupedCredentialsSelector)(e):(0,n.unsafeAllCredentialsSelector)(e),d.credentialCategoryNamesMapSelector],((e,t)=>e.map((e=>({...e,CategoryName:t[e.Category]})))));t.credentialsSelector=(0,o.createSelector)(l,i.quarantinedSpacesSelector,s.filterOutQuarantinedItems)},54825:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dedupedCredentialsSelector=void 0;const o=r(32034),n=r(97629),a=r(26509),i=r(75822),s={Alias:a.genericMerge,Attachments:a.concatMerge,AutoLogin:a.strictEqual,AutoProtected:a.boolEqual,Category:a.genericMerge,Checked:a.strictEqual,ConnectionOptions:a.genericMerge,CreationDatetime:a.minMerge,Email:a.strictEqual,LastUse:a.maxMerge,Login:a.strictEqual,ModificationDatetime:a.maxMerge,Note:a.genericMerge,NumberUse:a.sumMerge,OtpSecret:a.strictEqual,Password:a.strictEqual,Port:a.genericMerge,SID:a.genericMerge,SecondaryLogin:a.strictEqual,Server:a.genericMerge,SharedObject:a.strictEqual,SpaceId:a.strictEqual,Status:a.strictEqual,Strength:a.strictEqual,SubdomainOnly:a.boolEqual,Title:a.strictEqual,TrustedUrlGroup:a.concatMerge,Url:a.strictEqual,UseFixedUrl:a.strictEqual,UserModificationDatetime:a.maxMerge,UserSelectedUrl:a.strictEqual,kwType:a.strictEqual,limitedPermissions:a.strictEqual};t.dedupedCredentialsSelector=(0,o.createSelector)(i.unsafeAllCredentialsSelector,(0,n.dedupItems)(["Password","Title","Url"],s))},56598:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fieldMappersSelector=void 0;const o=r(32034),n=r(86259),a=r(65742),i=r(570),s=r(63453),c=r(5087),d=r(54670),l=r(30590),u=r(61867);t.fieldMappersSelector=(0,o.createSelector)(a.credentialCategoriesSelector,l.limitedSharingItemsSelector,i.credentialDisplayTitlesSelector,c.credentialsHealthSelector,c.similarPasswordsSelector,s.breachesSelector,d.spacesSelector,u.acceptedItemGroupsSelector,n.getCredentialMappers)},83016:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.filterTokenSelector=void 0;const o=r(28060),n=r(6045);t.filterTokenSelector=(0,n.createOptimizedFilterTokenSelector)(((e,{filterToken:t})=>t),o.identity)},48732:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLiveCredentialsByDomainSelector=void 0;const o=r(66771),n=r(57832),a=r(56598),i=r(62505),s=r(17893);t.getLiveCredentialsByDomainSelector=e=>(0,o.makeLiveSelectorGetter)((0,s.getCredentialsByDomainSelector)(e),n.listViewSelector,i.credentialMatchSelector,a.fieldMappersSelector)},65699:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLiveCredentialsSelector=void 0;const o=r(66771),n=r(36519),a=r(57832),i=r(56598),s=r(62505);t.getLiveCredentialsSelector=(0,o.makeLiveSelectorGetter)(n.credentialsSelector,a.listViewSelector,s.credentialMatchSelector,i.fieldMappersSelector)},64521:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shouldShowRequireMasterPasswordSelector=void 0;const o=r(8368);t.shouldShowRequireMasterPasswordSelector=e=>!(0,o.isSSOUserSelector)(e)},62264:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedCredentialSelector=void 0;const o=r(32034),n=r(5087),a=r(63453),i=r(35054),s=r(30590),c=r(36519),d=r(65742),l=r(83477),u=r(8153),p=r(41147),S=r(54670),g=r(85816);t.getViewedCredentialSelector=e=>{const t=(0,o.createSelector)(c.credentialsSelector,(t=>(0,p.findDataModelObject)(e,t)));return(0,o.createSelector)(t,n.healthSelector,a.breachesSelector,i.sharingDataSelector,u.userIdSelector,s.limitedSharingItemsSelector,d.credentialCategoriesSelector,l.iconsSelector,S.spacesSelector,g.viewCredential)}},34162:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedCredentialsBatchSelector=void 0;const o=r(32034),n=r(5087),a=r(63453),i=r(30590),s=r(46730),c=r(65742),d=r(30822),l=r(56598),u=r(83477),p=r(54670),S=r(15430),g=r(6045);t.getViewedCredentialsBatchSelector=e=>{const{sortToken:t,filterToken:r}=e,m={sortToken:t,filterToken:r},y=(0,S.getCredentialsBatch)(e),v=(0,o.createSelector)((e=>(0,d.credentialsQuerySelector)(e,m)),l.fieldMappersSelector,y),A=(0,g.optimizeBatchSelector)(v);return(0,o.createSelector)(A,s.sortedSharedItemIdsSelector,i.limitedSharingItemsSelector,c.credentialCategoriesSelector,u.iconsSelector,n.healthSelector,a.breachesSelector,p.spacesSelector,S.viewCredentialsBatch)}},57832:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listViewSelector=void 0;const o=r(32034),n=r(15430),a=r(46730),i=r(30590),s=r(65742),c=r(83477),d=r(5087),l=r(63453),u=r(54670);t.listViewSelector=(0,o.createSelector)(a.sortedSharedItemIdsSelector,i.limitedSharingItemsSelector,s.credentialCategoriesSelector,c.iconsSelector,d.healthSelector,l.breachesSelector,u.spacesSelector,((e,t,r,o,a,i,s)=>c=>(0,n.viewCredentialsBatch)(c,e,t,r,o,a,i,s)))},43705:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryByDomainSelector=void 0;const o=r(3259),n=r(56598),a=r(62505),i=r(17893);t.getQueryByDomainSelector=e=>(0,o.getQuerySelector)((0,i.getCredentialsByDomainSelector)(e),a.credentialMatchSelector,n.fieldMappersSelector)},77669:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.querySelector=void 0;const o=r(3259),n=r(36519),a=r(56598),i=r(62505);t.querySelector=(0,o.getQuerySelector)(n.credentialsSelector,i.credentialMatchSelector,a.fieldMappersSelector)},83272:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reusedCredentialsCountSelector=void 0;const o=r(32034),n=r(30822),a=r(5087),i=r(54670),s=r(88763);t.reusedCredentialsCountSelector=(0,o.createSelector)(n.credentialsQuerySelector,a.similarPasswordsSelector,i.spacesSelector,s.getReusedCredentialsCount)},83103:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sortTokenSelector=void 0;const o=r(28060),n=r(6045);t.sortTokenSelector=(0,n.createOptimizedSortTokenSelector)(((e,{sortToken:t})=>t),o.identity)},75822:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unsafeAllCredentialsSelector=void 0;t.unsafeAllCredentialsSelector=e=>e.userSession.personalData.credentials},2315:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewedCredentialSelector=void 0;const o=r(85816),n=r(30590),a=r(35054),i=r(1237),s=r(65742),c=r(8153),d=r(5087),l=r(63453),u=r(83477),p=r(54670);t.viewedCredentialSelector=(e,t)=>{const r=(0,i.credentialSelector)(e,t);if(!r)return;const S=(0,s.credentialCategoriesSelector)(e),g=(0,a.sharingDataSelector)(e),m=(0,c.userIdSelector)(e),y=(0,n.limitedSharingItemsSelector)(e),v=(0,u.iconsSelector)(e),A=(0,d.healthSelector)(e),E=(0,l.breachesSelector)(e),f=(0,p.spacesSelector)(e);return(0,o.viewCredential)(r,A,E,g,m,y,S,v,f)}},89258:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewedQueriedCredentialsByDomainSelector=void 0;const o=r(43705),n=r(57832),a=r(80398);t.viewedQueriedCredentialsByDomainSelector=(e,t)=>{const{domain:r,...i}=t,s=(0,o.getQueryByDomainSelector)(r)(e,i),c=(0,n.listViewSelector)(e);return(0,a.viewListResults)(c)(s)}},60435:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewedQueriedCredentialsSelector=void 0;const o=r(80398),n=r(77669),a=r(57832);t.viewedQueriedCredentialsSelector=(e,t)=>{const r=(0,n.querySelector)(e,t),i=(0,a.listViewSelector)(e);return(0,o.viewListResults)(i)(r)}},50507:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.weakCredentialsCountSelector=void 0;const o=r(32034),n=r(30822),a=r(5087),i=r(54670),s=r(43650);t.weakCredentialsCountSelector=(0,o.createSelector)(n.credentialsQuerySelector,a.credentialsHealthSelector,i.spacesSelector,s.getWeakCredentialsCount)},71754:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createCredential=t.createBaseCredentialModel=void 0;const o=r(11814),n=r(97211),a=r(62660),i=r(68410),s=r(81604),c=r(57254),d=r(36109),l=r(28060),u=r(73431),p=r(73590);t.createBaseCredentialModel=e=>{const t=(0,d.getUnixTimestamp)();return{kwType:"KWAuthentifiant",Id:(0,c.generateItemUuid)(),AnonId:(0,c.generateItemUuid)(),CreationDatetime:t,LastBackupTime:0,LastUse:t,SpaceId:"",LocaleFormat:e||n.Country.US}},t.createCredential=async function({storeService:e,sessionService:r,eventLoggerService:c},d,S){var g;if(!e.isAuthenticated())throw new Error("No session available to updateCredential");const m=(0,p.getUrlFields)(d.url,!0),{email:y,login:v,secondaryLogin:A}=(0,a.normalizeUsernames)(d.email,d.login,""),E=e.getPersonalData(),f=e.getPlatformInfo(),h=(0,p.getCategoryIdByName)(E,d.category),_=(0,l.defaultTo)("",d.password),T=_?await(0,s.evaluatePasswordStrength)(_):0,I=S||(()=>({})),C=(0,i.sanitizeInputPersonalData)({...(0,t.createBaseCredentialModel)(n.Country[f.country]),Title:null!==(g=o.url.getDomainForUrl(d.url))&&void 0!==g?g:"",Email:y,Login:v,SecondaryLogin:A,Password:_,Strength:T,Status:"ACCOUNT_NOT_VERIFIED",Category:h,...m,...I(d)});(0,u.saveCredentialAsPersonalDataItem)({storeService:e,sessionService:r,eventLoggerService:c},C,d.usageLogComponentName)}},73590:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlFields=t.getCategoryIdByName=void 0;const o=r(41569);t.getCategoryIdByName=(e,t)=>{const r=e.credentialCategories;if(!t)return"";if(r.find((e=>e.Id===t)))return t;const o=r.find((e=>e.CategoryName===t));return null==o?void 0:o.Id};t.getUrlFields=(e,t,r)=>{var n,a,i;const s=(null==r?void 0:r.Url)!==e,c=(0,o.cleanUrlForPersonalData)(e,{keepQueryString:t}),d=t&&s?{UserSelectedUrl:c,UseFixedUrl:!0}:{UserSelectedUrl:null!==(n=null==r?void 0:r.UserSelectedUrl)&&void 0!==n?n:"",UseFixedUrl:null!==(a=null==r?void 0:r.UseFixedUrl)&&void 0!==a&&a};return{Url:c,TrustedUrlGroup:(0,o.getUpdatedTrustedUrlList)(null!==(i=null==r?void 0:r.TrustedUrlGroup)&&void 0!==i?i:[],c),...d}}},73431:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.saveCredentialAsPersonalDataItem=void 0;const o=r(97211),n=r(19935),a=r(1005),i=r(78330),s=r(8962),c=r(88478),d=r(49504),l=r(94343),u=r(18491),p=r(35436),S=r(85816),g=r(70240);t.saveCredentialAsPersonalDataItem=async function({storeService:e,sessionService:t,eventLoggerService:r},m,y,v){v&&(0,S.notifySharersCredentialUpdated)(e,v,m);const A=e.getPersonalData(),E=(0,d.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:A,change:(0,l.makeUpdateChange)(m),userLogin:e.getUserLogin(),platformInfo:(0,c.platformInfoSelector)(e.getState())});let f=null,h=null;const _=(0,i.getInstance)(),T=(0,s.getInstance)();try{f=T.lockTopic("healthUpdates"),h=T.lockTopic("iconsUpdates"),e.dispatch((0,a.savePersonalDataItem)(m,m.kwType,E)),await t.getInstance().user.persistPersonalData(),(0,S.afterCredentialSaved)(e,m);const i={credentialIds:[m.Id],type:"credentialUpdates"},s={type:"credentialUpdates",credentialIds:[m.Id]};await _.add("healthUpdates",i),await _.add("iconsUpdates",s),v?(0,g.logEditVaultItem)(r,m,v):(0,g.logAddVaultItem)(r,m),y&&(0,u.sendPersonalDataEditionUsageLogs)(e,{action:"edit",from:y,itemEdited:m,currentItemsCount:(0,p.getCurrentItems)(o.DataModelType.KWAuthentifiant,A).length});(0,p.getDebounceSync)(e,t)({immediateCall:!0},n.Trigger.Save)}finally{f&&T.releaseTopic("healthUpdates",f),h&&T.releaseTopic("iconsUpdates",h)}}},97747:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateCredential=void 0;const o=r(1237),n=r(36109),a=r(73431),i=r(73590);t.updateCredential=async function({storeService:e,sessionService:t,eventLoggerService:r},s,c){var d,l;if(!e.isAuthenticated())throw new Error("No session available to updateCredential");const u=e.getState(),p=(0,o.credentialSelector)(u,s.id);if(!p)throw new Error("Credential does not exist, cant update");const S=s.update.url?(0,i.getUrlFields)(s.update.url,s.update.isUrlSelectedByUser,p):{},g=c||(()=>({})),m={...p,...S,Password:void 0!==s.update.password?s.update.password:p.Password,Email:null!==(d=s.update.email)&&void 0!==d?d:p.Email,Login:null!==(l=s.update.login)&&void 0!==l?l:p.Login,Checked:void 0!==s.update.isExcludedFromHealth?s.update.isExcludedFromHealth:p.Checked,ModificationDatetime:(0,n.getUnixTimestamp)(),...g(s)};(0,a.saveCredentialAsPersonalDataItem)({storeService:e,sessionService:t,eventLoggerService:r},m,s.usageLogComponentName,p)}},54649:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CredentialLimitStatus=void 0,function(e){e.Unlimited="unlimited",e.UnderLimit="underLimit",e.NearLimit="nearLimit",e.AtOrAboveLimit="atOrAboveLimit"}(t.CredentialLimitStatus||(t.CredentialLimitStatus={}))},41569:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUpdatedTrustedUrlList=t.cleanUrlForPersonalData=t.getGoToUrlForCredential=t.getBestUrl=t.getFirstTrustedUrl=t.getBaseTrustedUrls=void 0;const o=r(51121),n=r(28060),a=r(11814),i=r(36109),s=e=>e.UseFixedUrl&&e.UserSelectedUrl?e.UserSelectedUrl:null,c=e=>/^[a-z]+:\/\//i.test(e)?e:["https://",e].join(""),d=e=>{if(/^(https?|ftps?):\/\/(.*)$/.test(e))return e;const t=(e=>{const t=e.match(/^(?:\w+:\/\/)?(.*)$/);return t&&t.length>=2?t[1]:""})(e);return`https://${t}`},l=(0,n.compose)((e=>{const{protocol:t,hostname:r,port:n}=(0,o.parse)(e);return t&&/^https?:/.test(t)?(0,o.format)({protocol:t,hostname:r,port:n}):null}),c,n.trim),u=e=>!(0,n.isNil)(e);t.getBaseTrustedUrls=(0,n.compose)((e=>e.filter(u)),(0,n.map)(l),(0,n.map)((0,n.prop)("TrustedUrl")),(0,n.defaultTo)([]));t.getFirstTrustedUrl=e=>(0,n.defaultTo)("")((0,n.head)((0,t.getBaseTrustedUrls)(e.TrustedUrlGroup)));t.getBestUrl=e=>{const r=s(e);return r&&r.length?r:e.Url&&e.Url.length?e.Url:(0,t.getFirstTrustedUrl)(e)};function p(e,t){if(!e)return"";let r=e;return{keepQueryString:!1,...t}.keepQueryString||(r=function(e){const t=e.indexOf("?");return t>-1?e.slice(0,t):e}(r)),c(r)}t.getGoToUrlForCredential=e=>{const r=s(e);if(r&&r.length)return d(r);if(e.Url&&e.Url.length)return d(e.Url);const o=(0,t.getBaseTrustedUrls)(e.TrustedUrlGroup),n=o.filter((e=>e.startsWith("https")));return n[0]?n[0]:o[0]?o[0]:null},t.cleanUrlForPersonalData=p,t.getUpdatedTrustedUrlList=function(e,t){const r=p(t),o=a.url.getDomainForUrl(r),n=(e||[]).filter((e=>a.url.getDomainForUrl(e.TrustedUrl)===o));if(n.some((e=>e.TrustedUrl===r)))return n;const s=n.length>=20?n.length-20+1:0;return n.slice(s).concat({TrustedUrl:r,TrustedUrlExpire:(0,i.getUnixTimestamp)().toString()})}},62660:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeUsernames=void 0;const o=r(28060),n=r(43728);t.normalizeUsernames=function(e,t,r){const a=(0,o.defaultTo)("");let i=e,s=t;return(0,n.looksLikeEmail)(t)?(i=t,(0,n.looksLikeEmail)(e)?(i=e,s=""):s=e):(0,n.looksLikeEmail)(e)||((0,o.isEmpty)(e)||(s=e),(0,n.looksLikeEmail)(t)?i=t:((0,o.isEmpty)(t)||(s=t),i="")),{email:a(i),login:a(s),secondaryLogin:a(r)}}},24627:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const o=(0,r(28060).defaultTo)("");t.detailView=e=>{if(e)return{id:e.Id,categoryName:o(e.CategoryName)}};t.listView=e=>e.map(t.detailView)},78674:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.detailView=void 0;const o=r(28060),n=r(18758),a=r(24627),i=r(583),s=r(41569),c=r(54090),d=(0,o.defaultTo)(""),l=(0,o.defaultTo)(!1);t.detailView=(0,o.curry)(((e,t,r,o,u,p)=>{const S=o(p),g=t(p.Category),m=e(p.Id),y=r(p.Url),v=d(p.Password),A=u(p),E=(0,c.getWebsitesAssociatedToUrl)(p.Url);return{...(0,n.dataModelDetailView)(p),autoLogin:p.AutoLogin||!1,autoProtected:l(p.AutoProtected),category:(0,a.detailView)(g),domainIcon:y,email:d(p.Email),health:S,isExcludedFromHealth:p.Checked,forceCategorizedSpace:A,login:d(p.Login),note:d(p.Note),hasOtp:Boolean(p.OtpSecret),otpSecret:d(p.OtpSecret),password:v,secondaryLogin:p.SecondaryLogin,sharingStatus:m,strength:p.Strength||0,subdomainOnly:p.SubdomainOnly||!1,title:d(p.Title||(0,i.getDomainForCredential)(p)),url:d(p.Url),redirectUrl:(0,s.getGoToUrlForCredential)(p),associatedWebsites:E}}))},83082:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=void 0;const o=r(28060),n=r(18758),a=r(24627),i=r(583),s=r(41569),c=(0,o.defaultTo)("");t.itemView=(0,o.curry)(((e,t,r,d,l)=>{const u=t(l.Category);return{...(0,n.dataModelItemView)(l),autoProtected:(0,o.defaultTo)(!1,l.AutoProtected),category:(0,a.detailView)(u),domainIcon:r(l.Url),email:c(l.Email),health:d(l),isExcludedFromHealth:l.Checked,login:c(l.Login),password:c(l.Password),sharingSatus:e(l.Id),title:c(l.Title||(0,i.getDomainForCredential)(l)),url:c(l.Url),redirectUrl:(0,s.getGoToUrlForCredential)(l)}}));t.listView=(e,r,o,n,a)=>{const i=(0,t.itemView)(e,r,o,n);return a.map(i)}},11367:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeDataManagementController=void 0;const o=r(28354),n=r(19935),a=r(52038),i=r(41447),s=r(14438),c=r(62737),d=r(35436),l={immediateCall:!0};t.makeDataManagementController=e=>{const t=(0,d.getDebounceSync)(e.storeService,e.sessionService);return{savePaymentCardFromClient:(r,o)=>function(e,t,r,o){(0,a.savePaymentCard)(e,r,o),t(l,n.Trigger.Save)}({storeService:e.storeService,sessionService:e.sessionService,eventLoggerService:e.eventLoggerService},t,r,o),savePersonalDataItem:r=>async function(e,t,r){"KWPaymentMean_creditCard"===r.kwType?(0,a.savePaymentCard)(e,r.content,(0,i.mapOrigin)(r.origin)):await(0,i.addPersonalDataItem)(e,r);t(l,n.Trigger.Save)}({storeService:e.storeService,sessionService:e.sessionService,eventLoggerService:e.eventLoggerService},t,r),removePersonalDataItem:r=>function(e,t,r){return(0,s.deletePersonalDataItem)(e,r).then((e=>(t(l,n.Trigger.Save),e)))}({storeService:e.storeService,wsService:e.wsService,eventLoggerService:e.eventLoggerService},t,r),updateMetadataItemFilledOnPage:(r,o,a)=>function(e,t,r,o,a){(0,i.updatePersonalDataUsageMetadata)(e,r,o,a),t({},n.Trigger.SaveMeta)}(e.storeService,t,r,o,a),eraseBackedupData:(r,a)=>function(e,t,r,a,i,s){e||i.backup.erase({login:r.getAccountInfo().login,uki:t,lock:(0,o.v4)(),service:"ALL"}).then((t=>{if(t.content&&"Erasure completed"===t.content)return(0,c.updatePersonalSettings)(r,a,{SyncBackup:e}),s({immediateCall:!0},n.Trigger.SettingsChange),!0;throw new Error("[Backup] problem occured during buckets erasure.")}));return(0,c.updatePersonalSettings)(r,a,{SyncBackup:e}),s({immediateCall:!0},n.Trigger.SettingsChange),!0}(r,a,e.storeService,e.sessionService,e.wsService,t)}}},97629:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dedupItems=t.merge=void 0;t.merge=(e,t,r)=>{const o={};return Object.keys(r).every((n=>{const a=r[n](e[n],t[n]);return a.success&&(o[n]=a.result),a.success}))?{success:!0,result:{...e,...t,...o}}:{success:!1}};t.dedupItems=(e,r)=>o=>{const n=[],a={};for(const i of o){const o=e.reduce(((e,t)=>`${e}${i[t]}`),"");if(o in a){const e=a[o];let s=!1;for(const o of e){const e=n[o],a=(0,t.merge)(i,e,r);if(a.success){n[o]=a.result,s=!0;break}}s||(n.push(i),e.push(n.length-1))}else n.push(i),a[o]=[n.length-1]}return n}},26509:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.concatMerge=t.minMerge=t.maxMerge=t.sumMerge=t.genericMerge=t.boolEqual=t.strictEqual=void 0;t.strictEqual=(e,t)=>e===t?{success:!0,result:e}:{success:!1};t.boolEqual=(e,t)=>Boolean(e)===Boolean(t)?{success:!0,result:e}:{success:!1};t.genericMerge=(e,t)=>e===t?{success:!0,result:e}:e&&t?{success:!1}:{success:!0,result:e||t};const r=e=>(t,r)=>({success:!0,result:void 0===t&&void 0===r?void 0:e(null!=t?t:0,null!=r?r:0)});t.sumMerge=r(((e,t)=>e+t)),t.maxMerge=r(Math.max),t.minMerge=r(Math.min);t.concatMerge=(e,t)=>({success:!0,result:void 0===e&&void 0===t?void 0:[...null!=e?e:[],...null!=t?t:[]]})},33299:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRemoveChangeHistory=void 0;const o=r(49504),n=r(88478),a=r(8153),i=r(47880),s=r(94343);t.getRemoveChangeHistory=function(e,t){const r=e.getState(),c=(0,i.personalDataSelector)(r),d=(0,n.platformInfoSelector)(r),l=(0,a.userLoginSelector)(r),{localSettings:u}=e.getState().userSession,p=u.deviceName,S=(0,s.makeRemovalChange)(t);return(0,o.getUpdatedItemChangeHistory)({change:S,deviceName:p,personalData:c,userLogin:l,platformInfo:d})}},14438:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deletePersonalDataItem=t.findPersonalDataItemToDelete=void 0;const o=r(28060),n=r(97211),a=r(15933),i=r(70876),s=r(31891),c=r(37821),d=r(33299),l=r(18491),u=r(41147),p=r(59125),S=r(13658),g=r(96045),m=r(69245),y=r(22029),v=r(8153),A=r(6261),E=r(78330),f=r(8962),h=r(70240),_=["addresses","bankAccounts","companies","credentialCategories","credentials","driverLicenses","emails","fiscalIds","idCards","identities","noteCategories","notes","passports","paymentCards","paypalAccounts","personalWebsites","phones","secureFileInfo","socialSecurityIds"];function T(e,t){let r,n=0;const a=e.getPersonalData(),i=(0,o.pick)(_,a);for(const e of Object.keys(i))if(r=(0,u.findDataModelObject)(t,i[e]),r){n=i[e].length;break}return{itemToDelete:r,currentItemsCountForDataType:n}}t.findPersonalDataItemToDelete=T,t.deletePersonalDataItem=async function({storeService:e,wsService:t,eventLoggerService:r},o,u){const{FORBIDDEN_GROUP_ITEM:_,FORBIDDEN_LAST_ADMIN:I,INTERNAL_ERROR:C,LEAVE_SHARING_FAILED:P,NOT_AUTHORIZED:D,NOT_FOUND:O}=n.RemovePersonalDataItemFailureReason;let b=null,w=null;const N=(0,E.getInstance)(),R=(0,f.getInstance)();try{if(!e.isAuthenticated()){const e="No session available to delete personal item";return s.Debugger.log(e),{success:!1,reason:D,message:e}}const{itemToDelete:p,currentItemsCountForDataType:E}=T(e,o);if(!p){const e=`Unable to find personal item to delete: ${o}`;return s.Debugger.error(e),{success:!1,reason:O,message:e}}if((0,n.isCredential)(p)||(0,n.isNote)(p)){const r=await(0,g.makeCryptoService)(),o=e.getUserLogin(),n=(0,y.ukiSelector)(e.getState()),{makeRefuseItemGroupEvent:s}=(0,S.makeItemGroupService)(t,r),{Id:c}=p,{userGroups:l,itemGroups:v}=e.getSharingData(),A=(0,i.findItemItemGroup)(c,v),E=u&&u.ignoreSharing;if(A&&!E){const e=(0,a.isUserLastAdmin)(A,o),t=(0,a.doesUserReceiveItemGroupViaGroup)(A,l,o);if(!(!e&&!t))return{success:!1,reason:e?I:_,message:"Unshare the item before deleting it"};try{const{groupId:e,revision:t}=A,{refuseItemGroup:r}=(0,m.makeItemGroupWS)(),a=await s(e,t,null);await r(o,n,a)}catch(e){return{success:!1,reason:P,message:`${e}`}}}b=(0,d.getRemoveChangeHistory)(e,p)}if((0,n.isCredential)(p)){w=R.lockTopic("healthUpdates");const e={credentialIds:[p.Id],type:"credentialUpdates"};await N.add("healthUpdates",e)}(0,h.logDeleteVaultItem)(r,p),(0,l.sendPersonalDataEditionUsageLogs)(e,{action:"remove",from:"MANUAL",itemEdited:p,currentItemsCount:E});const f=(0,c.removePersonalItem)(p.kwType,p.Id,b);if(e.dispatch(f),w&&R.releaseTopic("healthUpdates",w),(0,n.isCredential)(p)){const t=e.getState();if((0,v.isOnboardingNotificationShowingSelector)(t)){const t=(0,A.webOnboardingModeReset)();e.dispatch(t)}}return{success:!0}}catch(e){const t=`[DataManagement] - deletePersonalDataItem: ${e}`,r=new Error(t);return(0,p.sendExceptionLog)({error:r}),w&&R.releaseTopic("healthUpdates",w),{success:!1,reason:C,message:t}}}},75984:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.duplicateNoteOrCredential=void 0;const o=r(97211),n=r(1005),a=r(57254),i=r(41147),s=r(78330),c=r(8962);t.duplicateNoteOrCredential=async function(e,t){let r=null,d=null;const l=(0,s.getInstance)(),u=(0,c.getInstance)(),{notes:p,credentials:S,changeHistories:g}=e.getPersonalData(),m=[...p,...S],y=(0,i.findDataModelObject)(t,m);if(!y)return null;const v=(0,a.generateItemUuid)(),A={...y,Id:v},E=g.find((e=>e.ObjectId.toUpperCase()===t.toUpperCase()));if((0,o.isCredential)(y)){r=u.lockTopic("healthUpdates"),d=u.lockTopic("iconsUpdates");const e={credentialIds:[v],type:"credentialUpdates"};await l.add("healthUpdates",e);const t={credentialIds:[v],type:"credentialUpdates"};await l.add("iconsUpdates",t)}const f=(0,n.savePersonalDataItem)(A,A.kwType,E);return e.dispatch(f),r&&u.releaseTopic("healthUpdates",r),d&&u.releaseTopic("iconsUpdates",d),v}},5810:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(76616),n=r(42398);t.config={commands:{getPersonalDataExport:{handler:o.getPersonalDataExport}},queries:{getIsForcedDomainsEnabled:{selector:n.isForcedDomainsEnabledSelector}},liveQueries:{}}},42398:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isForcedDomainsEnabledSelector=void 0;const o=r(8153);t.isForcedDomainsEnabledSelector=e=>{var t,r;const n=(0,o.activeSpacesSelector)(e)[0];return null!==(r=null===(t=null==n?void 0:n.info)||void 0===t?void 0:t.forcedDomainsEnabled)&&void 0!==r&&r}},97385:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCSVExport=void 0;const o=r(24675);o.configure({useWebWorkers:!1});const n=r(69217),a=r(50137),i=r(19931),s=r(17255),c=r(59338),d=[{filename:"credentials",generator:n.getCredentialsExport},{filename:"personalInfo",generator:c.getPersonalInfoExport},{filename:"securenotes",generator:a.getSecureNotes},{filename:"payments",generator:i.getPaymentsExport},{filename:"ids",generator:s.getIdsExport}];t.getCSVExport=async function(e){const t=new o.ZipWriter(new o.Data64URIWriter("application/zip")),r=[];for(const{filename:n,generator:a}of d){const i="\ufeff"+a(e);r.push(t.add(`${n}.csv`,new o.BlobReader(new Blob([i],{type:"text/csv"}))))}return await Promise.all(r),await t.close()}},69217:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialsExport=void 0;const o=r(36519),n=r(77222),a=r(55981),i=r(70910),s=r(46730),c=r(30590),d=r(85805),l=r(42398),u=r(68192);t.getCredentialsExport=function(e){const{storeService:t}=e,r=t.getState(),p=(0,o.credentialsSelector)(r),S=(e=>e.userSession.personalData.credentialCategories)(r),g=(0,s.sortedSharedItemIdsSelector)(r),m=(0,c.limitedSharingItemsSelector)(r),y=(0,i.getSharingStatusItem)(g,m),v=(0,l.isForcedDomainsEnabledSelector)(r),A=[{headerKey:"username",dataKey:"Email"},{headerKey:"username2",dataKey:"Login"},{headerKey:"username3",dataKey:"SecondaryLogin"},{headerKey:"title",dataKey:"Title"},{headerKey:"password",dataKey:"Password"},{headerKey:"note",dataKey:"Note"},{headerKey:"url",dataKey:"Url"},{headerKey:"category",dataKey:"Category"},{headerKey:"otpSecret",dataKey:"OtpSecret"}],E=e=>e.map((e=>{const t=[e.Email,e.Login,e.SecondaryLogin].filter((e=>void 0!==e&&""!==e)),[r="",o="",a=""]=t;return A.map((t=>{var i;const s=null!==(i=e[t.dataKey])&&void 0!==i?i:"";if("Category"!==t.dataKey||""===s){if("Email"===t.dataKey)return(0,d.handleSpecialCharacter)(r);if("Login"===t.dataKey)return(0,d.handleSpecialCharacter)(o);if("SecondaryLogin"===t.dataKey)return(0,d.handleSpecialCharacter)(a);if("Note"===t.dataKey&&""!==s){const e=s.replaceAll("\n"," ");return(0,d.handleSpecialCharacter)(e)}if("Password"===t.dataKey){if((e=>{const t=y(e);return!(!t.isShared||"limited"!==t.permission)})(e.Id))return"";const t=`${s}`;return(0,d.handleSpecialCharacter)(t)}{const e=`${s}`;return(0,d.handleSpecialCharacter)(e)}}{const e=(0,n.getCategory)(S,s);if(void 0!==e)return(0,d.handleSpecialCharacter)(e.CategoryName)}})).join(",")}));return(0,u.formatDataToCSV)([(0,u.formatHeader)(A),(e=>{const t=v?e.filter((e=>e.SpaceId===a.PERSONAL_SPACE_ID)):e;return E(t).join("\r\n")})(p)])}},59272:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDashlaneSecureExport=void 0;const o=r(28060),n=r(53494),a=r(89422);t.getDashlaneSecureExport=async function(e,t){const r=(0,o.join)(";",(0,o.pluck)("Id",t)),i=(0,a.getDashlaneXml)(t),s=(0,n.utf16ToDeflatedUtf8)(i),c=await e.encrypt(s);return(0,o.join)("\n",["-------------------- Dashlane Secured Export ----------------------","--------------------        Id BEGIN         ----------------------",r,"--------------------         Id END          ----------------------","--------------------       Data BEGIN        ----------------------",c,"--------------------        Data END         ----------------------","--------------------       Files BEGIN       ----------------------","--------------------        Files END        ----------------------\n"])}},17255:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getIdsExport=void 0;const o=r(75513),n=r(91279),a=r(49277),i=r(36576),s=r(67634),c=r(47880),d=r(55981),l=r(42398),u=r(85805),p=r(68192);t.getIdsExport=function(e){const{storeService:t}=e,r=t.getState(),S=(0,c.personalDataSelector)(r),g=(0,a.idCardsWithIdentitySelector)(r),m=(0,i.passportsWithIdentitySelector)(r),y=(0,n.driverLicensesWithIdentitySelector)(r),v=(0,s.socialSecurityIdsWithIdentitySelector)(r),A=S.fiscalIds,E=(0,l.isForcedDomainsEnabledSelector)(r),f=[{headerKey:"type",dataKey:"type"},{headerKey:"number",dataKey:"Number"},{headerKey:"name",dataKey:"Fullname"},{headerKey:"issue_date",dataKey:"DeliveryDate"},{headerKey:"expiration_date",dataKey:"ExpireDate"},{headerKey:"place_of_issue",dataKey:"DeliveryPlace"},{headerKey:"state",dataKey:"State"}],h=e=>e.map((e=>f.map((t=>{var r,n;const a=`${null!==(r=e[t.dataKey])&&void 0!==r?r:""}`;if("type"===t.dataKey)return"card";if("Fullname"===t.dataKey&&e.identity){const t=null!==(n=(0,o.identityToName)(e.identity))&&void 0!==n?n:a;return(0,u.handleSpecialCharacter)(t)}return(0,u.handleSpecialCharacter)(a)})).join(","))),_=e=>e.map((e=>f.map((t=>{var r,n;const a=`${null!==(r=e[t.dataKey])&&void 0!==r?r:""}`;if("type"===t.dataKey)return"passport";if("Fullname"===t.dataKey&&e.identity){const t=null!==(n=(0,o.identityToName)(e.identity))&&void 0!==n?n:a;return(0,u.handleSpecialCharacter)(t)}return(0,u.handleSpecialCharacter)(a)})).join(","))),T=e=>e.map((e=>f.map((t=>{var r,n;const a=`${null!==(r=e[t.dataKey])&&void 0!==r?r:""}`;if("type"===t.dataKey)return"license";if("Fullname"===t.dataKey&&e.identity){const t=null!==(n=(0,o.identityToName)(e.identity))&&void 0!==n?n:a;return(0,u.handleSpecialCharacter)(t)}return(0,u.handleSpecialCharacter)(a)})).join(","))),I=e=>e.map((e=>f.map((t=>{var r;const n=`${null!==(r=e[t.dataKey])&&void 0!==r?r:""}`;if("type"===t.dataKey)return"social_security";if("Number"===t.dataKey){const t=e.SocialSecurityNumber;return(0,u.handleSpecialCharacter)(t)}if("Fullname"===t.dataKey){const t=e.identity?(0,o.identityToName)(e.identity):e.SocialSecurityFullname;return(0,u.handleSpecialCharacter)(t)}return(0,u.handleSpecialCharacter)(n)})).join(","))),C=e=>e.map((e=>f.map((t=>{var r;const o=`${null!==(r=e[t.dataKey])&&void 0!==r?r:""}`;if("type"===t.dataKey)return(0,u.handleSpecialCharacter)("tax_number");if("Number"===t.dataKey){const t=e.FiscalNumber;return(0,u.handleSpecialCharacter)(t)}{const e=`${o}`;return(0,u.handleSpecialCharacter)(e)}})).join(",")));return(0,p.formatDataToCSV)([(0,p.formatHeader)(f),(e=>E?h(e.filter((e=>e.SpaceId===d.PERSONAL_SPACE_ID))).join("\r\n"):h(e).join("\r\n"))(g),(e=>E?_(e.filter((e=>e.SpaceId===d.PERSONAL_SPACE_ID))).join("\r\n"):_(e).join("\r\n"))(m),(e=>E?T(e.filter((e=>e.SpaceId===d.PERSONAL_SPACE_ID))).join("\r\n"):T(e).join("\r\n"))(y),(e=>E?I(e.filter((e=>e.SpaceId===d.PERSONAL_SPACE_ID))).join("\r\n"):I(e).join("\r\n"))(v),(e=>E?C(e.filter((e=>e.SpaceId===d.PERSONAL_SPACE_ID))).join("\r\n"):C(e).join("\r\n"))(A)])}},19931:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPaymentsExport=void 0;const o=r(47880),n=r(85805),a=r(42398),i=r(55981),s=r(68192);t.getPaymentsExport=function(e){const{storeService:t}=e,r=t.getState(),c=(0,o.personalDataSelector)(r),d=c.bankAccounts,l=c.paymentCards,u=(0,a.isForcedDomainsEnabledSelector)(r),p=[{headerKey:"type",dataKey:"type"},{headerKey:"account_name",dataKey:"BankAccountName"},{headerKey:"account_holder",dataKey:"BankAccountOwner"},{headerKey:"cc_number",dataKey:"CardNumber"},{headerKey:"code",dataKey:"SecurityCode"},{headerKey:"expiration_month",dataKey:"ExpireMonth"},{headerKey:"expiration_year",dataKey:"ExpireYear"},{headerKey:"routing_number",dataKey:"BankAccountBIC"},{headerKey:"account_number",dataKey:"BankAccountIBAN"},{headerKey:"country",dataKey:"LocaleFormat"},{headerKey:"issuing_bank",dataKey:"BankAccountBank"}],S=e=>e.map((e=>p.map((t=>{var r;const o=`${null!==(r=e[t.dataKey])&&void 0!==r?r:""}`;if("type"===t.dataKey)return(0,n.handleSpecialCharacter)("bank");{const e=`${o}`;return(0,n.handleSpecialCharacter)(e)}})).join(","))),g=e=>e.map((e=>p.map((t=>{var r;const o=`${null!==(r=e[t.dataKey])&&void 0!==r?r:""}`;if("type"===t.dataKey)return(0,n.handleSpecialCharacter)("credit_card");if("BankAccountName"===t.dataKey){const t=e.OwnerName;return(0,n.handleSpecialCharacter)(t)}{const e=`${o}`;return(0,n.handleSpecialCharacter)(e)}})).join(",")));return(0,s.formatDataToCSV)([(0,s.formatHeader)(p),(y=d,u?S(y.filter((e=>e.SpaceId===i.PERSONAL_SPACE_ID))).join("\r\n"):S(y).join("\r\n")),(m=l,u?g(m.filter((e=>e.SpaceId===i.PERSONAL_SPACE_ID))).join("\r\n"):g(m).join("\r\n"))]);var m,y}},76616:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPersonalDataExport=t.getAllDataToExport=void 0;const o=r(28060),n=r(9473),a=r(59272),i=r(64811),s=r(34929),c=r(53528),d=r(97385),l=r(55981),u=r(42398),p=["changeHistories","generatedPasswords","securityBreaches"];function S(e){return(0,o.unnest)((0,o.values)((0,o.omit)(p,(0,o.pick)(n.PERSONAL_DATA_COLLECTIONS_KEYS,e.getPersonalData()))))}t.getAllDataToExport=S,t.getPersonalDataExport=async function(e,t){const{storeService:r}=e,n=r.getState(),{exportType:p,password:g}=t,m=(0,o.compose)((e=>e.filter((({SpaceId:e})=>e===l.PERSONAL_SPACE_ID))),S),y=(0,u.isForcedDomainsEnabledSelector)(n)?m(r):S(r);switch(p){case"csv":return{success:!0,response:{filename:"dashlane-credential-export.zip",content:await(0,d.getCSVExport)(e)}};case"secure-dashlane":if(!g)return{success:!1,error:{code:i.GetPersonalDataExportErrorMessage.UNDEFINED_PASSWORD_ERROR}};const t=(0,s.makeDataEncryptorService)(r),o=(0,c.makeFlexibleMarkerCryptoConfig)("argon2d");return t.setInstance({raw:g},"",o),{success:!0,response:{filename:"Dashlane Export.dash",content:await(0,a.getDashlaneSecureExport)(t.getInstance(),y)}};default:return{success:!1,error:{code:i.GetPersonalDataExportErrorMessage.UNSUPPORTED_DATATYPE_ERROR}}}}},59338:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPersonalInfoExport=void 0;const o=r(33321),n=r(47880),a=r(97211),i=r(85805),s=r(42398),c=r(55981),d=r(68192);t.getPersonalInfoExport=function(e){const{storeService:t}=e,r=t.getState(),l=(0,n.personalDataSelector)(r),u=l.identities,p=l.emails,S=l.phones,g=l.addresses,m=l.companies,y=l.personalWebsites,v=(0,s.isForcedDomainsEnabledSelector)(r),A=[{headerKey:"type",dataKey:"type"},{headerKey:"title",dataKey:"Title"},{headerKey:"first_name",dataKey:"FirstName"},{headerKey:"middle_name",dataKey:"MiddleName"},{headerKey:"last_name",dataKey:"LastName"},{headerKey:"login",dataKey:"Pseudo"},{headerKey:"date_of_birth",dataKey:"BirthDate"},{headerKey:"place_of_birth",dataKey:"BirthPlace"},{headerKey:"email",dataKey:"Email"},{headerKey:"email_type",dataKey:"Type"},{headerKey:"item_name",dataKey:"Name"},{headerKey:"phone_number",dataKey:"Number"},{headerKey:"address",dataKey:"AddressFull"},{headerKey:"country",dataKey:"Country"},{headerKey:"state",dataKey:"State"},{headerKey:"city",dataKey:"City"},{headerKey:"zip",dataKey:"ZipCode"},{headerKey:"address_recipient",dataKey:"Receiver"},{headerKey:"address_building",dataKey:"Building"},{headerKey:"address_apartment",dataKey:"Door"},{headerKey:"address_floor",dataKey:"Floor"},{headerKey:"address_door_code",dataKey:"DigitCode"},{headerKey:"job_title",dataKey:"JobTitle"},{headerKey:"url",dataKey:"Website"}],E=e=>e.map((e=>A.map((t=>{var r;const o=`${null!==(r=e[t.dataKey])&&void 0!==r?r:""}`;if("type"===t.dataKey)return(0,i.handleSpecialCharacter)("name");{const e=`${o}`;return(0,i.handleSpecialCharacter)(e)}})).join(","))),f=e=>e.map((e=>A.map((t=>{var r,o;const n=`${null!==(r=e[t.dataKey])&&void 0!==r?r:""}`;if("type"===t.dataKey)return(0,i.handleSpecialCharacter)("email");if("Type"===t.dataKey)return"PERSO"===n?(0,i.handleSpecialCharacter)("personal"):(0,i.handleSpecialCharacter)("business");if("Name"===t.dataKey){const t=null!==(o=e.EmailName)&&void 0!==o?o:"";return(0,i.handleSpecialCharacter)(t)}{const e=`${n}`;return(0,i.handleSpecialCharacter)(e)}})).join(","))),h=e=>e.map((e=>A.map((t=>{var r,n;const s=`${null!==(r=e[t.dataKey])&&void 0!==r?r:""}`;if("type"===t.dataKey)return(0,i.handleSpecialCharacter)("number");if("Type"===t.dataKey)return(0,i.handleSpecialCharacter)("");if("Name"===t.dataKey){const t=null!==(n=e.PhoneName)&&void 0!==n?n:"";return(0,i.handleSpecialCharacter)(t)}if("Number"===t.dataKey){const t=(e=>{const{LocaleFormat:t,Number:r}=e;if(t&&t!==a.Country.UNIVERSAL&&t!==a.Country.NO_TYPE&&(0,o.isSupportedCountry)(t)){const t=a.Country[e.LocaleFormat];return`+${(0,o.getCountryCallingCode)(t)}${r}`}return r})(e);return(0,i.handleSpecialCharacter)(t)}{const e=`${s}`;return(0,i.handleSpecialCharacter)(e)}})).join(","))),_=e=>e.map((e=>A.map((t=>{var r,o;const n=`${null!==(r=e[t.dataKey])&&void 0!==r?r:""}`;if("type"===t.dataKey)return(0,i.handleSpecialCharacter)("address");if("Name"===t.dataKey){const t=null!==(o=e.AddressName)&&void 0!==o?o:"";return(0,i.handleSpecialCharacter)(t)}{const e=`${n}`;return(0,i.handleSpecialCharacter)(e)}})).join(","))),T=e=>e.map((e=>A.map((t=>{var r;const o=`${null!==(r=e[t.dataKey])&&void 0!==r?r:""}`;if("type"===t.dataKey)return(0,i.handleSpecialCharacter)("company");{const e=`${o}`;return(0,i.handleSpecialCharacter)(e)}})).join(","))),I=e=>e.map((e=>A.map((t=>{var r;const o=`${null!==(r=e[t.dataKey])&&void 0!==r?r:""}`;if("type"===t.dataKey)return(0,i.handleSpecialCharacter)("website");{const e=`${o}`;return(0,i.handleSpecialCharacter)(e)}})).join(",")));return(0,d.formatDataToCSV)([(0,d.formatHeader)(A),(w=u,v?E(w.filter((e=>e.SpaceId===c.PERSONAL_SPACE_ID))).join("\r\n"):E(w).join("\r\n")),(b=p,v?f(b.filter((e=>e.SpaceId===c.PERSONAL_SPACE_ID))).join("\r\n"):f(b).join("\r\n")),(O=S,v?h(O.filter((e=>e.SpaceId===c.PERSONAL_SPACE_ID))).join("\r\n"):h(O).join("\r\n")),(D=g,v?_(D.filter((e=>e.SpaceId===c.PERSONAL_SPACE_ID))).join("\r\n"):_(D).join("\r\n")),(P=m,v?T(P.filter((e=>e.SpaceId===c.PERSONAL_SPACE_ID))).join("\r\n"):T(P).join("\r\n")),(C=y,v?I(C.filter((e=>e.SpaceId===c.PERSONAL_SPACE_ID))).join("\r\n"):I(C).join("\r\n"))]);var C,P,D,O,b,w}},50137:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSecureNotes=void 0;const o=r(73046),n=r(85805),a=r(55981),i=r(42398),s=r(68192);t.getSecureNotes=function(e){const{storeService:t}=e,r=t.getState(),c=(0,o.notesSelector)(r),d=(0,i.isForcedDomainsEnabledSelector)(r),l=[{headerKey:"title",dataKey:"Title"},{headerKey:"note",dataKey:"Content"}];return(0,s.formatDataToCSV)([(0,s.formatHeader)(l),(e=>d?e.filter((e=>e.SpaceId===a.PERSONAL_SPACE_ID)).map((e=>l.map((t=>{var r;const o=null!==(r=e[t.dataKey])&&void 0!==r?r:"";if("Content"===t.dataKey&&""!==o){const e=o.replaceAll("\n"," ");return(0,n.handleSpecialCharacter)(e)}{const e=`${o}`;return(0,n.handleSpecialCharacter)(e)}})).join(","))).join("\r\n"):e.map((e=>l.map((t=>{var r;const o=null!==(r=e[t.dataKey])&&void 0!==r?r:"";if("Content"===t.dataKey&&""!==o){const e=o.replaceAll("\n"," ");return(0,n.handleSpecialCharacter)(e)}{const e=`${o}`;return(0,n.handleSpecialCharacter)(e)}})).join(","))).join("\r\n"))(c)])}},85805:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handleSpecialCharacter=void 0,t.handleSpecialCharacter=function(e){if(void 0===e)return"";if(e.includes(",")||e.includes('"')){return['"',...e.split("").map((e=>'"'===e?'""':e)),'"'].join("")}return e}},68192:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatDataToCSV=t.formatHeader=void 0;t.formatHeader=e=>e.map((e=>e.headerKey)).join(","),t.formatDataToCSV=function(e){return e.filter((e=>e.length>0)).join("\r\n")}},64811:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetPersonalDataExportErrorMessage=void 0;!function(e){e.UNSUPPORTED_DATATYPE_ERROR="Unsupported Data Export Type",e.UNDEFINED_PASSWORD_ERROR="Undefined Password"}(t.GetPersonalDataExportErrorMessage||(t.GetPersonalDataExportErrorMessage={}))},39875:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(16021),n=r(96471),a=r(6530);t.config={commands:{saveGeneratedPassword:{handler:n.saveGeneratedPasswordHandler}},queries:{getGeneratedPassword:{selector:o.viewedGeneratedPasswordSelector},getGeneratedPasswordsCount:{selector:o.countAllGeneratedPasswordsSelector},getGeneratedPasswords:{selector:o.viewedQueriedGeneratedPasswordsSelector},getGeneratedPasswordsPage:{selector:o.generatedPasswordsPageSelector},getGeneratedPasswordsPaginationToken:{selector:o.generatedPasswordsPaginationTokenSelector}},liveQueries:{liveGeneratedPasswordsCount:{operator:a.generatedPasswordCount$},liveGeneratedPasswords:{operator:a.generatedPasswords$}}}},84974:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},40265:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findAssociatedCredential=t.associateGeneratedPasswordsToCredential=void 0;const o=r(583);t.associateGeneratedPasswordsToCredential=function(e,t){return e.filter((e=>!e.AuthId&&e.Domain===(0,o.getDomainForCredential)(t)&&e.Password===t.Password)).map((e=>({...e,AuthId:t.Id})))},t.findAssociatedCredential=function(e,t){if(null==e?void 0:e.AuthId)return(t||[]).find((t=>t.Id===e.AuthId))}},97728:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createGeneratedPassword=void 0;const o=r(97211),n=r(57254),a=r(36109);t.createGeneratedPassword=({Id:e=(0,n.generateItemUuid)(),LastBackupTime:t=0,AuthId:r,Domain:i,GeneratedDate:s=(0,a.getUnixTimestamp)(),Password:c,SpaceId:d,Platform:l})=>({kwType:o.DataModelType.KWGeneratedPassword,AuthId:r,Domain:i,GeneratedDate:s,Id:e,SpaceId:d,Password:c,LastBackupTime:t,Platform:l})},96471:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.saveGeneratedPasswordHandler=void 0;const o=r(64159);t.saveGeneratedPasswordHandler=async function(e,t){const{storeService:r,sessionService:n}=e;return(0,o.saveGeneratedPassword)(r,n,t.password,t.url)}},64159:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateAndSavePassword=t.saveGeneratedPassword=t.generatePassword=t.fixIncoherentSettings=t.getDefaultPasswordGenerationSettings=t.passwordGeneratorDefaultSettings=t.associateGeneratedPasswordsToCredential=void 0;const o=r(28255),n=r(28060),a=r(85465),i=r(31891),s=r(57254),c=r(36109),d=r(1005),l=r(59125),u=r(15528),p=r(97728),S=r(88478);var g=r(40265);function m(e){const r=(0,n.reject)((e=>(0,n.isNil)(e)||(0,n.isEmpty)(e)))({length:e.GeneratorDefaultSize,digits:e.GeneratorDefaultDigits,letters:e.GeneratorDefaultLetters,symbols:e.GeneratorDefaultSymbols,avoidAmbiguous:e.GeneratorDefaultAvoidAmbiguousChars});return y((0,n.merge)(t.passwordGeneratorDefaultSettings,r))}function y(e){return e.digits||e.letters||e.symbols||(e.digits=!0,e.letters=!0,e.symbols=!0),(void 0===e.length||e.length<1)&&(e.length=t.passwordGeneratorDefaultSettings.length),e}function v(e,t){const r=(0,n.isNil)(t)?m(e):y(t);if(!r.digits&&!r.letters&&r.symbols){const o=new Error("Should not generate password from symbols only"),n={length:e.GeneratorDefaultSize,digits:e.GeneratorDefaultDigits,letters:e.GeneratorDefaultLetters,symbols:e.GeneratorDefaultSymbols,avoidAmbiguous:e.GeneratorDefaultAvoidAmbiguousChars},a=`customSettings = ${JSON.stringify(t)}\npersonalSettingsGeneratorDefaults = ${JSON.stringify(n)}`;i.default.error(o),(0,l.sendExceptionLog)({error:o,code:u.ExceptionCriticality.WARNING,precisions:a}),r.digits=!0,r.letters=!0,r.symbols=!0}return(0,a.generate)(r)}function A(e,t,r,o){const n=(0,p.createGeneratedPassword)({Domain:null!=o?o:"",GeneratedDate:(0,c.getUnixTimestamp)(),Id:(0,s.generateItemUuid)(),Password:r,LastBackupTime:0,Platform:(0,S.platformInfoSelector)(e.getState()).platformName});e.dispatch(d.saveGeneratedPassword(n)),t.getInstance().user.persistPersonalData()}Object.defineProperty(t,"associateGeneratedPasswordsToCredential",{enumerable:!0,get:function(){return g.associateGeneratedPasswordsToCredential}}),t.passwordGeneratorDefaultSettings={length:16,digits:!0,letters:!0,symbols:!0,avoidAmbiguous:!0},t.getDefaultPasswordGenerationSettings=m,t.fixIncoherentSettings=y,t.generatePassword=v,t.saveGeneratedPassword=A,t.generateAndSavePassword=function(e,t,r){if(!e.isAuthenticated())return i.default.log("No session available to generateAndSavePassword"),null;const n=v(e.getPersonalSettings());return o((()=>{A(e,t,n,r)})),n}},6530:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generatedPasswords$=t.generatedPasswordCount$=void 0;const o=r(16021),n=r(85564),a=r(18948),i=r(3343);t.generatedPasswordCount$=()=>(0,a.pipe)((0,i.map)(o.countAllGeneratedPasswordsSelector),(0,i.distinctUntilChanged)()),t.generatedPasswords$=(0,n.getLivePersonalInfo)(o.getLiveGeneratedPasswordsSelector)},38273:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getGeneratedPasswordMappers=void 0;t.getGeneratedPasswordMappers=()=>({id:e=>e.Id,domain:e=>e.Domain,generatedDate:e=>e.GeneratedDate})},47266:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewGeneratedPasswordsBatch=t.getGeneratedPasswordsFirstToken=t.getGeneratedPasswordsSortToken=t.getGeneratedPasswordsFilterToken=void 0;const o=r(51417),n=r(99518);t.getGeneratedPasswordsFilterToken=({filterCriteria:e})=>({filterCriteria:e||[]});t.getGeneratedPasswordsSortToken=({sortCriteria:e})=>({uniqField:"id",sortCriteria:e||[]});t.getGeneratedPasswordsFirstToken=(e,t,r,n)=>(0,o.generateFirstToken)(e,t,r.initialBatchSize||30,n);t.viewGeneratedPasswordsBatch=e=>(0,n.listView)(e)},22630:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generatedPasswordMatch=t.searchGetters=void 0;const o=r(57748),n=r(37047);t.searchGetters=[(0,o.stringProp)("Domain")],t.generatedPasswordMatch=(0,n.match)(t.searchGetters)},16021:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generatedPasswordsQuerySelector=t.generatedPasswordsPaginationTokenSelector=t.generatedPasswordsPageSelector=t.getLiveGeneratedPasswordsSelector=t.viewedQueriedGeneratedPasswordsSelector=t.getGeneratedPasswordMappersSelector=t.generatedPasswordMappersSelector=t.viewedGeneratedPasswordSelector=t.generatedPasswordSelector=t.generatedPasswordsSelector=t.countAllGeneratedPasswordsSelector=void 0;const o=r(28060),n=r(80398),a=r(99518),i=r(3259),s=r(22630),c=r(38273),d=r(47266),l=r(32034),u=r(6045),p=r(18948),S=r(51417),g=r(52931),m=r(66771),y=r(86965),v=r(75822),A=r(41147);t.countAllGeneratedPasswordsSelector=e=>e.userSession.personalData.generatedPasswords.length,t.generatedPasswordsSelector=(0,l.createSelector)((e=>e.userSession.personalData.generatedPasswords),g.quarantinedSpacesSelector,v.unsafeAllCredentialsSelector,y.filterOutQuarantinedItems);t.generatedPasswordSelector=(e,r)=>{const o=(0,t.generatedPasswordsSelector)(e);return(0,A.findDataModelObject)(r,o)};t.viewedGeneratedPasswordSelector=(e,r)=>{const o=(0,t.generatedPasswordSelector)(e,r);return(0,a.itemView)(o)};t.generatedPasswordMappersSelector=e=>(0,c.getGeneratedPasswordMappers)();const E=()=>s.generatedPasswordMatch,f=(0,c.getGeneratedPasswordMappers)();t.getGeneratedPasswordMappersSelector=()=>f;const h=(0,i.getQuerySelector)(t.generatedPasswordsSelector,E,t.generatedPasswordMappersSelector);t.viewedQueriedGeneratedPasswordsSelector=(0,o.compose)((0,n.viewListResults)(a.listView),h),t.getLiveGeneratedPasswordsSelector=(0,m.makeLiveSelectorGetter)(t.generatedPasswordsSelector,(()=>a.listView),E,t.getGeneratedPasswordMappersSelector);t.generatedPasswordsPageSelector=(e,r)=>{const o=(0,u.parseToken)(r),{sortToken:n,filterToken:a}=o,i={sortToken:n,filterToken:a},s=(0,c.getGeneratedPasswordMappers)(),l=(0,t.generatedPasswordsQuerySelector)(e,i),p=(0,S.generateNextToken)(s,o,l),g=(0,S.generatePrevToken)(s,o,l),m=(0,S.getBatch)(s,o,l),y=(0,u.stringifyToken)(p),v=(0,u.stringifyToken)(g);return{batch:(0,d.viewGeneratedPasswordsBatch)(m),nextToken:y,prevToken:v}};t.generatedPasswordsPaginationTokenSelector=(e,r)=>{const o=(0,d.getGeneratedPasswordsSortToken)(r),n=(0,d.getGeneratedPasswordsFilterToken)(r),a=(0,c.getGeneratedPasswordMappers)(),i={sortToken:o,filterToken:n},s=(0,t.generatedPasswordsQuerySelector)(e,i),l=(0,d.getGeneratedPasswordsFirstToken)(a,i,r,s);return(0,u.stringifyToken)(l)};const _=(0,u.createOptimizedSortTokenSelector)(((e,{sortToken:t})=>t),p.identity),T=(0,u.createOptimizedFilterTokenSelector)(((e,{filterToken:t})=>t),p.identity);t.generatedPasswordsQuerySelector=(0,l.createSelector)(c.getGeneratedPasswordMappers,E,_,T,t.generatedPasswordsSelector,u.queryData)},99518:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=void 0;const o=(0,r(28060).defaultTo)("");t.itemView=e=>({domain:o(e.Domain),generatedDate:e.GeneratedDate,password:e.Password,id:e.Id,platform:e.Platform});t.listView=e=>e.map(t.itemView)},33607:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeEmptyIconUrls=t.computeIconUrls=void 0;t.computeIconUrls=(e,t)=>t.reduce(((t,r)=>{const o=e.find((e=>e&&e.type===r));return t[r]=o?o.url:null,t}),{});t.makeEmptyIconUrls=e=>(0,t.computeIconUrls)([],e)},13:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedDomainsFromUrls=t.decryptIconsDomains=void 0;const o=r(28060),n=r(11814),a=r(87459);t.decryptIconsDomains=(e,t)=>{const r=Array.from(e.keys()),o=new Map,n=t.reduce(((e,t)=>(e[(0,a.computeHashMD5)(t)]=t,e)),{});return r.forEach((t=>{const r=n[t];o.set(r,e.get(t))})),o};t.getFormattedDomainsFromUrls=e=>(0,o.uniq)(e.map(n.url.getSafeDomainForUrl)).filter((e=>"string"==typeof e&&e.length))},29278:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearInstance=t.getInstance=t.setInstance=void 0;const o=r(60756),n=r(33363);let a=null;t.setInstance=(e,t,r)=>(a=a||new o.IconsUpdater(t,e,new n.IconsWS(r)),a);t.getInstance=()=>a;t.clearInstance=()=>{a&&a.teardown(),a=null}},60756:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconsUpdater=void 0;const o=r(18948),n=r(3343),a=r(28354),i=r(63453),s=r(1237),c=r(36519),d=r(31891),l=r(83477),u=r(89284),p=r(40914),S=r(89337),g=r(59125),m=r(54173),y=r(32234),v=r(91359),A=r(55677);var E;!function(e){e.BreachesOperation="breachesOperation",e.CredentialsOperation="credentialsOperation",e.RefreshOperation="refreshOperation"}(E||(E={}));t.IconsUpdater=class{constructor(e,t,r){this.localStorageService=e,this.storeService=t,this.gateway=r,this._operation$=new o.Subject,this.subs=new Set,this.handleRefreshIcons=async()=>{const e=(0,a.v4)(),t=new Promise((t=>{const r=this._operationResults$.subscribe((o=>{o.id===e&&(t(o.success),r.unsubscribe(),this.subs.delete(r))}));this.subs.add(r)}));return this.triggerRefreshOperation(e),await t},this.handleCredentialUpdates=async e=>{const t=(0,a.v4)(),r=new Promise((e=>{const r=this._operationResults$.subscribe((o=>{o.id===t&&(e(o.success),r.unsubscribe(),this.subs.delete(r))}));this.subs.add(r)}));return this.triggerCredentialsOperation(t,e),await r},this.handleBreachesUpdates=async e=>{const t=(0,a.v4)(),r=new Promise((e=>{const r=this._operationResults$.subscribe((o=>{o.id===t&&(e(o.success),r.unsubscribe(),this.subs.delete(r))}));this.subs.add(r)}));return this.triggerBreachesOperation(t,e),await r},this.triggerCredentialsOperation=(e,t,r=A.defaultIconTypes)=>{this._operation$.next({credentialIds:t,id:e,type:E.CredentialsOperation,iconTypes:r})},this.triggerBreachesOperation=(e,t,r=A.defaultIconTypes)=>{this._operation$.next({breachesIds:t,id:e,type:E.BreachesOperation,iconTypes:r})},this.triggerRefreshOperation=(e,t=A.defaultIconTypes)=>{this._operation$.next({id:e,type:E.RefreshOperation,iconTypes:t})},this.handleOperation=async(e,t)=>{const{type:r,id:o}=t,n={id:o,type:r},a=this.localStorageService.getInstance(),i=this.storeService.getState();try{return await e(t),await a.storeIcons((0,l.iconsCacheSelector)(i)),{...n,success:!0}}catch(e){const r=`[Icons Updater] - handle operation: operation ${t.type} failed with ${e}`;d.default.error(r);const o=new Error(r);return(0,g.sendExceptionLog)({error:o}),console.error(o),{...n,success:!1}}},this.onOperation=async e=>{switch(e.type){case E.CredentialsOperation:return this.handleOperation(((e,t)=>async({credentialIds:r,iconTypes:o})=>{const n=e.getState(),a=r.map((e=>(0,s.credentialSelector)(n,e))).filter((e=>!!e)),i=await(0,S.fetchIconsForCredentials)(n,t,a,o);e.dispatch((0,u.iconsUpdated)(i)),(0,v.default)()&&i.length>0&&(0,y.reportDataUpdate)(e)})(this.storeService,this.gateway),e);case E.BreachesOperation:return this.handleOperation(((e,t)=>async({breachesIds:r,iconTypes:o})=>{const n=e.getState(),a=r.map((e=>(0,i.breachSelector)(n,e))).filter((e=>!!e)),s=await(0,S.fetchIconsForBreaches)(n,t,a,o);e.dispatch((0,u.iconsUpdated)(s))})(this.storeService,this.gateway),e);case E.RefreshOperation:return this.handleOperation(((e,t)=>async({iconTypes:r})=>{const o=e.getState(),n=(0,l.iconsCacheSelector)(o);if((0,m.isIconsCacheValid)(n))return;const a=(0,c.credentialsSelector)(o),s=(0,i.breachesSelector)(o),d=await(0,S.fetchIconsForAllItems)(t,a,s,r);e.dispatch((0,u.iconsRefreshed)(d)),(0,v.default)()&&(0,y.reportDataUpdate)(e)})(this.storeService,this.gateway),e);default:return(0,p.assertUnreachable)(e)}},this.setupOperationsHandling=()=>{const e=this._operation$.pipe((0,n.concatMap)(this.onOperation),(0,n.share)()),t=e.subscribe();this.subs.add(t),this._operationResults$=e},this.setupOperationsHandling()}teardown(){this.subs.forEach((e=>e.unsubscribe()))}}},54173:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isIconsCacheValid=void 0;const o=r(36109),n=86400*(7+Math.random());t.isIconsCacheValid=e=>!(!e||!e.lastUpdateTimeSeconds)&&(0,o.getUnixTimestamp)()-e.lastUpdateTimeSeconds<n},55677:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultIconTypes=void 0,t.defaultIconTypes=["46x30@2x","160x106@2x","118x98@2x"]},89337:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fetchIconsForAllItems=t.fetchIconsForCredentials=t.getCredentialsWithWebsiteIcon=t.fetchIconsForBreaches=t.getIconsUrlsForBreaches=t.getIconsUrlsForCredentials=void 0;const o=r(28060),n=r(13),a=r(83477),i=r(33607),s=r(11814);t.getIconsUrlsForCredentials=e=>e.map((e=>e.Url));t.getIconsUrlsForBreaches=e=>e.reduce(((e,t)=>{const r=t.Content.domains;return r&&0!==r.length?[...e,r[0]]:e}),[]);t.fetchIconsForBreaches=async(e,r,i,s)=>{const c=(0,t.getIconsUrlsForBreaches)(i),d=(0,n.getFormattedDomainsFromUrls)(c),l=(0,n.decryptIconsDomains)((0,a.iconsSelector)(e),d),u=Array.from(l.keys()),p=(0,o.difference)(d,u);return r.getIcons(p,s)};t.getCredentialsWithWebsiteIcon=(e,t,r)=>{const n={backgroundColor:null,mainColor:null,urls:(0,i.makeEmptyIconUrls)(r)};return e.map((e=>{const r=t.get(s.url.getSafeDomainForUrl(e.Url)),a=(0,o.defaultTo)(n,r);return{...e,domainIcon:a}}))};t.fetchIconsForCredentials=async(e,r,i,s)=>{const c=(0,t.getIconsUrlsForCredentials)(i),d=(0,n.getFormattedDomainsFromUrls)(c),l=(0,n.decryptIconsDomains)((0,a.iconsSelector)(e),d),u=Array.from(l.keys()),p=(0,o.difference)(d,u);return r.getIcons(p,s)};t.fetchIconsForAllItems=async(e,r,o,a)=>{const i=[...(0,t.getIconsUrlsForBreaches)(o),...(0,t.getIconsUrlsForCredentials)(r)],s=(0,n.getFormattedDomainsFromUrls)(i);return e.getIcons(s,a)}},44085:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.iconsUpdatesHook=void 0;const o=r(40914),n=r(29278);t.iconsUpdatesHook=async e=>{const t=(0,n.getInstance)();if(!t)return!1;switch(e.type){case"breachUpdates":return t.handleBreachesUpdates(e.breachesIds);case"credentialUpdates":return t.handleCredentialUpdates(e.credentialIds);case"refresh":return t.handleRefreshIcons();default:return(0,o.assertUnreachable)(e)}}},87093:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatFetchedIcons=t.makeIconDataWithDomain=t.getDomainsIconsToBeFetched=t.getDomainIconsToBeFetched=void 0;const o=r(28060),n=r(33607),a=(0,o.defaultTo)(null);t.getDomainIconsToBeFetched=(e,t)=>t.reduce(((t,r)=>[...t,{domain:e,type:r}]),[]);t.getDomainsIconsToBeFetched=(e,r)=>e.reduce(((e,o)=>[...e,...(0,t.getDomainIconsToBeFetched)(o,r)]),[]);t.makeIconDataWithDomain=(e,t)=>{const r=(0,o.head)(e)||{};return{urls:(0,n.computeIconUrls)(e,t),backgroundColor:a(r.backgroundColor),mainColor:a(r.mainColor),domain:a(r.domain)}};t.formatFetchedIcons=(e,r,o)=>{const n=r.length;return[...Array(o)].reduce(((o,a,i)=>{const s=i*n,c=s+n,d=e.slice(s,c);return[...o,(0,t.makeIconDataWithDomain)(d,r)]}),[])}},33363:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconsWS=void 0;const o=r(87093),n=r(20550);t.IconsWS=class{constructor(e){this.wsService=e}async getIcons(e,t){if(!e||!e.length)return[];const r=(0,o.getDomainsIconsToBeFetched)(e,t),a=await this.wsService.iconCrawler.getIcons(r);if(!(0,n.isWSResponseSuccess)(a)){const e=`[Icons] getIcons: ${a.message}(statusCode: ${a.code})`;throw new Error(e)}const{content:i}=a;return(0,o.formatFetchedIcons)(i,t,e.length)}}},2476:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getIcon=void 0;const o=r(11814),n=r(87459);t.getIcon=e=>t=>{const r=o.url.getSafeDomainForUrl(t);if(!r)return;const a=(0,n.computeHashMD5)(r);return e.get(a)}},83477:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.iconsSelector=t.iconsCacheSelector=void 0;t.iconsCacheSelector=e=>e.userSession.iconsCache;t.iconsSelector=e=>(0,t.iconsCacheSelector)(e).domains},95467:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(78330),n=r(8962),a=async()=>{const e=(0,o.getInstance)(),t=(0,n.getInstance)(),r=t.lockTopic("iconsUpdates");await e.add("iconsUpdates",{type:"refresh"}),t.releaseTopic("iconsUpdates",r)};t.setupSubscriptions=async function(e,t){e.syncSuccess.on((async()=>{await a()})),e.syncFailure.on((async()=>{await a()}))}},71611:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(91279),n=r(6110),a=r(72262);t.config={commands:{addDriverLicense:{handler:a.addDriverLicenseHandler},editDriverLicense:{handler:a.editDriverLicenseHandler},deleteDriverLicense:{handler:a.deleteDriverLicenseHandler}},queries:{getDriverLicense:{selector:o.viewedDriverLicenseSelector},getDriverLicenses:{selector:o.viewedQueriedDriverLicensesSelector},getAutofillDriverLicenseData:{selector:o.viewedAutofillDriverLicenseDataSelector},getAutofillDriverLicensesData:{selector:o.viewedQueriedAutofillDriverLicensesDataSelector}},liveQueries:{liveDriverLicense:{operator:n.getDriverLicense$},liveDriverLicenses:{operator:n.driverLicenses$}}}},91049:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(79277),t)},85469:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDriverLicenseHandler=void 0;const o=r(97211),n=r(75513),a=r(32767),i=({expirationDate:e,idNumber:t,issueDate:r,name:a,state:i})=>({DateOfBirth:"",DeliveryDate:(0,n.viewDateToVaultDate)(r),ExpireDate:(0,n.viewDateToVaultDate)(e),Fullname:null!=a?a:"",LinkedIdentity:"",Number:null!=t?t:"",kwType:o.DataModelType.KWDriverLicence,State:null!=i?i:"",Sex:""});t.addDriverLicenseHandler=(e,t)=>(0,a.addIdHandler)(e,t,i)},32995:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteDriverLicenseHandler=void 0;const o=r(96989),n=r(91279);t.deleteDriverLicenseHandler=(e,t)=>(0,o.deleteIdHandler)(e,t,n.driverLicenseSelector)},15118:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.editDriverLicenseHandler=t.handleDriverLicenseFields=void 0;const o=r(91279),n=r(75513),a=r(74278);t.handleDriverLicenseFields=(e,t)=>{var r,o,a;return{DeliveryDate:void 0===e.issueDate?t.DeliveryDate:(0,n.viewDateToVaultDate)(e.issueDate),ExpireDate:void 0===e.expirationDate?t.ExpireDate:(0,n.viewDateToVaultDate)(e.expirationDate),Fullname:null!==(r=e.name)&&void 0!==r?r:t.Fullname,Number:null!==(o=e.idNumber)&&void 0!==o?o:t.Number,State:null!==(a=e.state)&&void 0!==a?a:t.State,LinkedIdentity:void 0===e.name?t.LinkedIdentity:""}};t.editDriverLicenseHandler=(e,r)=>(0,a.updateIdHandler)(e,r,t.handleDriverLicenseFields,o.driverLicenseSelector)},72262:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(85469),t),n(r(15118),t),n(r(32995),t)},6110:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDriverLicense$=t.driverLicenses$=void 0;const o=r(18948),n=r(3343),a=r(85564),i=r(91279);t.driverLicenses$=(0,a.getLivePersonalInfo)(i.getLiveDriverLicensesSelector);t.getDriverLicense$=e=>{const t=(0,i.getViewedDriverLicenseSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},79725:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDriverLicenseMappers=void 0;const o=r(10675),n=r(75513);t.getDriverLicenseMappers=()=>({spaceId:e=>e.SpaceId,name:e=>(0,n.identityToName)(e.identity)||e.Fullname,idNumber:e=>e.Number,lastUse:o.lastUseMapper,id:e=>e.Id,creationDate:e=>e.CreationDatetime})},96497:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.driverLicenseMatch=t.searchGetters=void 0;const o=r(37047),n=r(57748),a=r(75513);t.searchGetters=[(0,n.stringProp)("Number"),e=>(0,a.identityToName)(e.identity)||e.Fullname],t.driverLicenseMatch=(0,o.match)(t.searchGetters)},91279:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedDriverLicenseSelector=t.viewedAutofillDriverLicenseDataSelector=t.viewedQueriedAutofillDriverLicensesDataSelector=t.viewedDriverLicenseSelector=t.getLiveDriverLicensesSelector=t.viewedQueriedDriverLicensesSelector=t.driverLicensesWithIdentitySelector=t.driverLicenseMappersSelector=t.driverLicenseSelector=t.driverLicensesSelector=void 0;const o=r(28060),n=r(32034),a=r(96497),i=r(17350),s=r(3259),c=r(80398),d=r(66771),l=r(41147),u=r(79725),p=r(86324),S=r(86965),g=r(52931);t.driverLicensesSelector=(0,n.createSelector)((e=>e.userSession.personalData.driverLicenses),g.quarantinedSpacesSelector,S.filterOutQuarantinedItems);t.driverLicenseSelector=(e,r)=>{const o=(0,t.driverLicensesSelector)(e);return(0,l.findDataModelObject)(r,o)};t.driverLicenseMappersSelector=e=>(0,u.getDriverLicenseMappers)(),t.driverLicensesWithIdentitySelector=(0,n.createSelector)([t.driverLicensesSelector,p.identitiesByIdSelector],((e,t)=>e.map((e=>({...e,identity:t[e.LinkedIdentity]})))));const m=(0,n.createSelector)([t.driverLicenseSelector,e=>(0,p.identitiesByIdSelector)(e)],((e,t)=>({...e,identity:t[e.LinkedIdentity]}))),y=()=>a.driverLicenseMatch,v=(0,s.getQuerySelector)(t.driverLicensesWithIdentitySelector,y,t.driverLicenseMappersSelector);t.viewedQueriedDriverLicensesSelector=(0,o.compose)((0,c.viewListResults)(i.listView),v),t.getLiveDriverLicensesSelector=(0,d.makeLiveSelectorGetter)(t.driverLicensesWithIdentitySelector,(()=>i.listView),y,t.driverLicenseMappersSelector);t.viewedDriverLicenseSelector=(e,t)=>{const r=m(e,t);return(0,i.maybeDetailView)(r)},t.viewedQueriedAutofillDriverLicensesDataSelector=(0,o.compose)((0,c.viewListResults)(i.autofillListView),v);t.viewedAutofillDriverLicenseDataSelector=(e,t)=>{const r=m(e,t);return(0,i.maybeAutofillView)(r)};t.getViewedDriverLicenseSelector=e=>{const r=(0,n.createSelector)(t.driverLicensesSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,n.createSelector)(r,p.identitiesSelector,((e,t)=>(0,i.maybeDetailView)({...e,identity:(0,l.findDataModelObject)(e.LinkedIdentity,t)})))}},79277:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},17350:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.autofillListView=t.maybeAutofillView=t.autofillView=t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const o=r(18758),n=r(75513),a=({DeliveryDate:e,ExpireDate:t,Fullname:r,LocaleFormat:o,Number:a,State:i,CreationDatetime:s,identity:c})=>({country:(0,n.vaultCountryToViewCountry)(o),expirationDate:(0,n.vaultDateToViewDate)(t),idNumber:null!=a?a:"",issueDate:(0,n.vaultDateToViewDate)(e),name:(0,n.identityToName)(c)||r||"",state:null!=i?i:"",creationDate:null!=s?s:0});t.detailView=e=>({...(0,o.dataModelDetailView)(e),...a(e)}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView);t.itemView=e=>({...(0,o.dataModelItemView)(e),...a(e)});t.listView=e=>e.map(t.itemView);const i=({DeliveryDate:e,ExpireDate:t,Fullname:r,LocaleFormat:o,Number:a,State:i,CreationDatetime:s,identity:c})=>{const d=(0,n.epochToDate)((0,n.vaultDateToViewDate)(t)),l=(0,n.epochToDate)((0,n.vaultDateToViewDate)(e));return{idNumber:null!=a?a:"",country:(0,n.vaultCountryToViewCountry)(o),expirationDay:d.getDate(),expirationMonth:d.getMonth()+n.ZERO_INDEX_BASED_MONTH_OFFSET,expirationYear:d.getFullYear(),issueDay:l.getDate(),issueMonth:l.getMonth()+n.ZERO_INDEX_BASED_MONTH_OFFSET,issueYear:l.getFullYear(),name:(0,n.identityToName)(c)||r||"",state:null!=i?i:"",creationDate:null!=s?s:0}};t.autofillView=e=>({...(0,o.dataModelItemView)(e),...i(e)}),t.maybeAutofillView=(0,o.maybeDataModelDetailView)(t.autofillView);t.autofillListView=e=>e.map(t.autofillView)},2061:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(70862),n=r(13722),a=r(67458);t.config={commands:{addFiscalId:{handler:a.addFiscalIdHandler},editFiscalId:{handler:a.editFiscalIdHandler},deleteFiscalId:{handler:a.deleteFiscalIdHandler}},queries:{getFiscalId:{selector:o.viewedFiscalIdSelector},getFiscalIds:{selector:o.viewedQueriedFiscalIdsSelector}},liveQueries:{liveFiscalId:{operator:n.getFiscalId$},liveFiscalIds:{operator:n.fiscalIds$}}}},45804:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(78170),t)},34648:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addFiscalIdHandler=void 0;const o=r(97211),n=r(32767),a=({idNumber:e,teledeclarantNumber:t})=>({FiscalNumber:null!=e?e:"",kwType:o.DataModelType.KWFiscalStatement,TeledeclarantNumber:null!=t?t:""});t.addFiscalIdHandler=(e,t)=>(0,n.addIdHandler)(e,t,a)},82892:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteFiscalIdHandler=void 0;const o=r(96989),n=r(70862);t.deleteFiscalIdHandler=(e,t)=>(0,o.deleteIdHandler)(e,t,n.fiscalIdSelector)},5279:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.editFiscalIdHandler=t.handleFiscalIdFields=void 0;const o=r(70862),n=r(74278);t.handleFiscalIdFields=(e,t)=>{var r,o;return{FiscalNumber:null!==(r=e.idNumber)&&void 0!==r?r:t.FiscalNumber,TeledeclarantNumber:null!==(o=e.teledeclarantNumber)&&void 0!==o?o:t.TeledeclarantNumber}};t.editFiscalIdHandler=(e,r)=>(0,n.updateIdHandler)(e,r,t.handleFiscalIdFields,o.fiscalIdSelector)},67458:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(34648),t),n(r(5279),t),n(r(82892),t)},13722:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFiscalId$=t.fiscalIds$=void 0;const o=r(18948),n=r(3343),a=r(85564),i=r(70862);t.fiscalIds$=(0,a.getLivePersonalInfo)(i.getLiveFiscalIdsSelector);t.getFiscalId$=e=>{const t=(0,i.getViewedFiscalIdSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},18319:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFiscalIdMappers=void 0;const o=r(10675);t.getFiscalIdMappers=()=>({spaceId:e=>e.SpaceId,idNumber:e=>e.FiscalNumber,teledeclarantNumber:e=>e.TeledeclarantNumber,lastUse:o.lastUseMapper,id:e=>e.Id,creationDate:e=>e.CreationDatetime})},1790:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fiscalIdMatch=t.searchGetters=void 0;const o=r(37047),n=r(57748);t.searchGetters=[(0,n.stringProp)("FiscalNumber"),(0,n.stringProp)("TeledeclarantNumber")],t.fiscalIdMatch=(0,o.match)(t.searchGetters)},70862:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedFiscalIdSelector=t.viewedFiscalIdSelector=t.getLiveFiscalIdsSelector=t.viewedQueriedFiscalIdsSelector=t.fiscalIdMappersSelector=t.fiscalIdSelector=t.fiscalIdsSelector=void 0;const o=r(28060),n=r(32034),a=r(1790),i=r(86864),s=r(3259),c=r(80398),d=r(66771),l=r(41147),u=r(18319),p=r(86965),S=r(52931);t.fiscalIdsSelector=(0,n.createSelector)((e=>e.userSession.personalData.fiscalIds),S.quarantinedSpacesSelector,p.filterOutQuarantinedItems);t.fiscalIdSelector=(e,r)=>{const o=(0,t.fiscalIdsSelector)(e);return(0,l.findDataModelObject)(r,o)};t.fiscalIdMappersSelector=e=>(0,u.getFiscalIdMappers)();const g=()=>a.fiscalIdMatch,m=(0,s.getQuerySelector)(t.fiscalIdsSelector,g,t.fiscalIdMappersSelector);t.viewedQueriedFiscalIdsSelector=(0,o.compose)((0,c.viewListResults)(i.listView),m),t.getLiveFiscalIdsSelector=(0,d.makeLiveSelectorGetter)(t.fiscalIdsSelector,(()=>i.listView),g,t.fiscalIdMappersSelector);t.viewedFiscalIdSelector=(e,r)=>{const o=(0,t.fiscalIdSelector)(e,r);return(0,i.maybeDetailView)(o)};t.getViewedFiscalIdSelector=e=>{const r=(0,n.createSelector)(t.fiscalIdsSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,n.createSelector)(r,i.maybeDetailView)}},78170:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},86864:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const o=r(18758),n=r(75513),a=({FiscalNumber:e,TeledeclarantNumber:t,LocaleFormat:r,CreationDatetime:o})=>({country:(0,n.vaultCountryToViewCountry)(r),idNumber:null!=e?e:"",teledeclarantNumber:null!=t?t:"",creationDate:null!=o?o:0});t.detailView=e=>({...(0,o.dataModelDetailView)(e),...a(e)}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView);t.itemView=e=>({...(0,o.dataModelItemView)(e),...a(e)});t.listView=e=>e.map(t.itemView)},15447:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(49277),n=r(55104),a=r(37346);t.config={commands:{addIdCard:{handler:a.addIdCardHandler},editIdCard:{handler:a.editIdCardHandler},deleteIdCard:{handler:a.deleteIdCardHandler}},queries:{getIdCard:{selector:o.viewedIdCardSelector},getIdCards:{selector:o.viewedQueriedIdCardsSelector},getAutofillIdCardData:{selector:o.viewedAutofillIdCardDataSelector},getAutofillIdCardsData:{selector:o.viewedQueriedAutofillIdCardsDataSelector}},liveQueries:{liveIdCard:{operator:n.getIdCard$},liveIdCards:{operator:n.idCards$}}}},31224:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(72890),t)},73313:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addIdCardHandler=void 0;const o=r(97211),n=r(75513),a=r(32767),i=({expirationDate:e,idNumber:t,issueDate:r,name:a})=>({DateOfBirth:"",DeliveryDate:(0,n.viewDateToVaultDate)(r),ExpireDate:(0,n.viewDateToVaultDate)(e),Fullname:null!=a?a:"",LinkedIdentity:"",Number:null!=t?t:"",kwType:o.DataModelType.KWIDCard,Sex:""});t.addIdCardHandler=(e,t)=>(0,a.addIdHandler)(e,t,i)},34390:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteIdCardHandler=void 0;const o=r(96989),n=r(49277);t.deleteIdCardHandler=(e,t)=>(0,o.deleteIdHandler)(e,t,n.idCardSelector)},72645:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.editIdCardHandler=t.handleIdCardFields=void 0;const o=r(49277),n=r(75513),a=r(74278);t.handleIdCardFields=(e,t)=>{var r,o;return{DeliveryDate:void 0===e.issueDate?t.DeliveryDate:(0,n.viewDateToVaultDate)(e.issueDate),ExpireDate:void 0===e.expirationDate?t.ExpireDate:(0,n.viewDateToVaultDate)(e.expirationDate),Fullname:null!==(r=e.name)&&void 0!==r?r:t.Fullname,Number:null!==(o=e.idNumber)&&void 0!==o?o:t.Number,LinkedIdentity:void 0===e.name?t.LinkedIdentity:""}};t.editIdCardHandler=(e,r)=>(0,a.updateIdHandler)(e,r,t.handleIdCardFields,o.idCardSelector)},37346:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(73313),t),n(r(72645),t),n(r(34390),t)},55104:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getIdCard$=t.idCards$=void 0;const o=r(18948),n=r(3343),a=r(85564),i=r(49277);t.idCards$=(0,a.getLivePersonalInfo)(i.getLiveIdCardsSelector);t.getIdCard$=e=>{const t=(0,i.getViewedIdCardSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},89112:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getIdCardMappers=void 0;const o=r(10675),n=r(75513);t.getIdCardMappers=()=>({spaceId:e=>e.SpaceId,name:e=>(0,n.identityToName)(e.identity)||e.Fullname,idNumber:e=>e.Number,lastUse:o.lastUseMapper,id:e=>e.Id,creationDate:e=>e.CreationDatetime})},83693:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.idCardMatch=t.searchGetters=void 0;const o=r(37047),n=r(57748),a=r(75513);t.searchGetters=[(0,n.stringProp)("Number"),e=>(0,a.identityToName)(e.identity)||e.Fullname],t.idCardMatch=(0,o.match)(t.searchGetters)},49277:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedIdCardSelector=t.viewedAutofillIdCardDataSelector=t.viewedQueriedAutofillIdCardsDataSelector=t.viewedIdCardSelector=t.getLiveIdCardsSelector=t.viewedQueriedIdCardsSelector=t.idCardMappersSelector=t.idCardsWithIdentitySelector=t.idCardSelector=t.idCardsSelector=void 0;const o=r(28060),n=r(32034),a=r(83693),i=r(27272),s=r(3259),c=r(80398),d=r(66771),l=r(41147),u=r(89112),p=r(86324),S=r(86965),g=r(52931);t.idCardsSelector=(0,n.createSelector)((e=>e.userSession.personalData.idCards),g.quarantinedSpacesSelector,S.filterOutQuarantinedItems);t.idCardSelector=(e,r)=>{const o=(0,t.idCardsSelector)(e);return(0,l.findDataModelObject)(r,o)},t.idCardsWithIdentitySelector=(0,n.createSelector)([t.idCardsSelector,p.identitiesByIdSelector],((e,t)=>e.map((e=>({...e,identity:t[e.LinkedIdentity]})))));const m=(0,n.createSelector)([t.idCardSelector,e=>(0,p.identitiesByIdSelector)(e)],((e,t)=>({...e,identity:t[e.LinkedIdentity]})));t.idCardMappersSelector=e=>(0,u.getIdCardMappers)();const y=()=>a.idCardMatch,v=(0,s.getQuerySelector)(t.idCardsWithIdentitySelector,y,t.idCardMappersSelector);t.viewedQueriedIdCardsSelector=(0,o.compose)((0,c.viewListResults)(i.listView),v),t.getLiveIdCardsSelector=(0,d.makeLiveSelectorGetter)(t.idCardsWithIdentitySelector,(()=>i.listView),y,t.idCardMappersSelector);t.viewedIdCardSelector=(e,t)=>{const r=m(e,t);return(0,i.maybeDetailView)(r)},t.viewedQueriedAutofillIdCardsDataSelector=(0,o.compose)((0,c.viewListResults)(i.autofillListView),v);t.viewedAutofillIdCardDataSelector=(e,t)=>{const r=m(e,t);return(0,i.maybeAutofillView)(r)};t.getViewedIdCardSelector=e=>{const r=(0,n.createSelector)(t.idCardsSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,n.createSelector)(r,p.identitiesSelector,((e,t)=>(0,i.maybeDetailView)({...e,identity:(0,l.findDataModelObject)(e.LinkedIdentity,t)})))}},72890:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},27272:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.autofillListView=t.maybeAutofillView=t.autofillView=t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const o=r(18758),n=r(75513),a=({DeliveryDate:e,ExpireDate:t,Fullname:r,LocaleFormat:o,Number:a,CreationDatetime:i,identity:s})=>({country:(0,n.vaultCountryToViewCountry)(o),expirationDate:(0,n.vaultDateToViewDate)(t),idNumber:null!=a?a:"",issueDate:(0,n.vaultDateToViewDate)(e),name:(0,n.identityToName)(s)||r||"",creationDate:null!=i?i:0});t.detailView=e=>({...(0,o.dataModelDetailView)(e),...a(e)}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView);t.itemView=e=>({...(0,o.dataModelItemView)(e),...a(e)});t.listView=e=>e.map(t.itemView);const i=({DeliveryDate:e,ExpireDate:t,Fullname:r,LocaleFormat:o,Number:a,CreationDatetime:i,identity:s})=>{const c=(0,n.epochToDate)((0,n.vaultDateToViewDate)(t)),d=(0,n.epochToDate)((0,n.vaultDateToViewDate)(e));return{idNumber:null!=a?a:"",country:(0,n.vaultCountryToViewCountry)(o),expirationDay:c.getDate(),expirationMonth:c.getMonth()+n.ZERO_INDEX_BASED_MONTH_OFFSET,expirationYear:c.getFullYear(),issueDay:d.getDate(),issueMonth:d.getMonth()+n.ZERO_INDEX_BASED_MONTH_OFFSET,issueYear:d.getFullYear(),name:(0,n.identityToName)(s)||r||"",creationDate:null!=i?i:0}};t.autofillView=e=>({...(0,o.dataModelItemView)(e),...i(e)}),t.maybeAutofillView=(0,o.maybeDataModelDetailView)(t.autofillView);t.autofillListView=e=>e.map(t.autofillView)},5789:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(36576),n=r(22657),a=r(70104);t.config={commands:{addPassport:{handler:a.addPassportHandler},editPassport:{handler:a.editPassportHandler},deletePassport:{handler:a.deletePassportHandler}},queries:{getPassport:{selector:o.viewedPassportSelector},getPassports:{selector:o.viewedQueriedPassportsSelector},getAutofillPassportData:{selector:o.viewedAutofillPassportDataSelector},getAutofillPassportsData:{selector:o.viewedQueriedAutofillPassportsDataSelector}},liveQueries:{livePassport:{operator:n.getPassport$},livePassports:{operator:n.passports$}}}},54213:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(32821),t)},90534:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addPassportHandler=void 0;const o=r(97211),n=r(75513),a=r(32767),i=({expirationDate:e,idNumber:t,issueDate:r,name:a,deliveryPlace:i})=>({DateOfBirth:"",DeliveryDate:(0,n.viewDateToVaultDate)(r),ExpireDate:(0,n.viewDateToVaultDate)(e),Fullname:null!=a?a:"",LinkedIdentity:"",Number:null!=t?t:"",kwType:o.DataModelType.KWPassport,DeliveryPlace:null!=i?i:"",Sex:""});t.addPassportHandler=(e,t)=>(0,a.addIdHandler)(e,t,i)},85396:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deletePassportHandler=void 0;const o=r(96989),n=r(36576);t.deletePassportHandler=(e,t)=>(0,o.deleteIdHandler)(e,t,n.passportSelector)},62982:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.editPassportHandler=t.handlePassportFields=void 0;const o=r(36576),n=r(75513),a=r(74278);t.handlePassportFields=(e,t)=>{var r,o,a;return{DeliveryDate:void 0===e.issueDate?t.DeliveryDate:(0,n.viewDateToVaultDate)(e.issueDate),ExpireDate:void 0===e.expirationDate?t.ExpireDate:(0,n.viewDateToVaultDate)(e.expirationDate),Fullname:null!==(r=e.name)&&void 0!==r?r:t.Fullname,Number:null!==(o=e.idNumber)&&void 0!==o?o:t.Number,DeliveryPlace:null!==(a=e.deliveryPlace)&&void 0!==a?a:t.DeliveryPlace,LinkedIdentity:void 0===e.name?t.LinkedIdentity:""}};t.editPassportHandler=(e,r)=>(0,a.updateIdHandler)(e,r,t.handlePassportFields,o.passportSelector)},70104:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(90534),t),n(r(62982),t),n(r(85396),t)},22657:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPassport$=t.passports$=void 0;const o=r(18948),n=r(3343),a=r(85564),i=r(36576);t.passports$=(0,a.getLivePersonalInfo)(i.getLivePassportsSelector);t.getPassport$=e=>{const t=(0,i.getViewedPassportSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},8853:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPassportMappers=void 0;const o=r(10675),n=r(75513);t.getPassportMappers=()=>({spaceId:e=>e.SpaceId,name:e=>(0,n.identityToName)(e.identity)||e.Fullname,idNumber:e=>e.Number,lastUse:o.lastUseMapper,id:e=>e.Id,creationDate:e=>e.CreationDatetime})},33346:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.passportMatch=t.searchGetters=void 0;const o=r(37047),n=r(57748),a=r(75513);t.searchGetters=[(0,n.stringProp)("Number"),e=>(0,a.identityToName)(e.identity)||e.Fullname],t.passportMatch=(0,o.match)(t.searchGetters)},36576:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedPassportSelector=t.viewedAutofillPassportDataSelector=t.viewedQueriedAutofillPassportsDataSelector=t.viewedPassportSelector=t.getLivePassportsSelector=t.viewedQueriedPassportsSelector=t.passportMappersSelector=t.passportsWithIdentitySelector=t.passportSelector=t.passportsSelector=void 0;const o=r(28060),n=r(32034),a=r(33346),i=r(11607),s=r(3259),c=r(80398),d=r(66771),l=r(41147),u=r(8853),p=r(86324),S=r(86965),g=r(52931);t.passportsSelector=(0,n.createSelector)((e=>e.userSession.personalData.passports),g.quarantinedSpacesSelector,S.filterOutQuarantinedItems);t.passportSelector=(e,r)=>{const o=(0,t.passportsSelector)(e);return(0,l.findDataModelObject)(r,o)},t.passportsWithIdentitySelector=(0,n.createSelector)([t.passportsSelector,p.identitiesByIdSelector],((e,t)=>e.map((e=>({...e,identity:t[e.LinkedIdentity]})))));const m=(0,n.createSelector)([t.passportSelector,e=>(0,p.identitiesByIdSelector)(e)],((e,t)=>({...e,identity:t[e.LinkedIdentity]})));t.passportMappersSelector=e=>(0,u.getPassportMappers)();const y=()=>a.passportMatch,v=(0,s.getQuerySelector)(t.passportsWithIdentitySelector,y,t.passportMappersSelector);t.viewedQueriedPassportsSelector=(0,o.compose)((0,c.viewListResults)(i.listView),v),t.getLivePassportsSelector=(0,d.makeLiveSelectorGetter)(t.passportsWithIdentitySelector,(()=>i.listView),y,t.passportMappersSelector);t.viewedPassportSelector=(e,t)=>{const r=m(e,t);return(0,i.maybeDetailView)(r)},t.viewedQueriedAutofillPassportsDataSelector=(0,o.compose)((0,c.viewListResults)(i.autofillListView),v);t.viewedAutofillPassportDataSelector=(e,t)=>{const r=m(e,t);return(0,i.maybeAutofillView)(r)};t.getViewedPassportSelector=e=>{const r=(0,n.createSelector)(t.passportsSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,n.createSelector)(r,p.identitiesSelector,((e,t)=>(0,i.maybeDetailView)({...e,identity:(0,l.findDataModelObject)(e.LinkedIdentity,t)})))}},32821:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},11607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.autofillListView=t.maybeAutofillView=t.autofillView=t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const o=r(18758),n=r(75513),a=({DeliveryDate:e,ExpireDate:t,Fullname:r,LocaleFormat:o,Number:a,DeliveryPlace:i,CreationDatetime:s,identity:c})=>({country:(0,n.vaultCountryToViewCountry)(o),expirationDate:(0,n.vaultDateToViewDate)(t),idNumber:null!=a?a:"",issueDate:(0,n.vaultDateToViewDate)(e),name:(0,n.identityToName)(c)||r||"",deliveryPlace:null!=i?i:"",creationDate:null!=s?s:0});t.detailView=e=>({...(0,o.dataModelDetailView)(e),...a(e)}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView);t.itemView=e=>({...(0,o.dataModelItemView)(e),...a(e)});t.listView=e=>e.map(t.itemView);const i=({DeliveryDate:e,ExpireDate:t,Fullname:r,LocaleFormat:o,Number:a,DeliveryPlace:i,CreationDatetime:s,identity:c})=>{const d=(0,n.epochToDate)((0,n.vaultDateToViewDate)(t)),l=(0,n.epochToDate)((0,n.vaultDateToViewDate)(e));return{idNumber:null!=a?a:"",country:(0,n.vaultCountryToViewCountry)(o),expirationDay:d.getDate(),expirationMonth:d.getMonth()+n.ZERO_INDEX_BASED_MONTH_OFFSET,expirationYear:d.getFullYear(),issueDay:l.getDate(),issueMonth:l.getMonth()+n.ZERO_INDEX_BASED_MONTH_OFFSET,issueYear:l.getFullYear(),name:(0,n.identityToName)(c)||r||"",deliveryPlace:null!=i?i:"",creationDate:null!=s?s:0}};t.autofillView=e=>({...(0,o.dataModelItemView)(e),...i(e)}),t.maybeAutofillView=(0,o.maybeDataModelDetailView)(t.autofillView);t.autofillListView=e=>e.map(t.autofillView)},87919:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(67634),n=r(28e3),a=r(97301);t.config={commands:{addSocialSecurityId:{handler:a.addSocialSecurityIdHandler},editSocialSecurityId:{handler:a.editSocialSecurityIdHandler},deleteSocialSecurityId:{handler:a.deleteSocialSecurityIdHandler}},queries:{getSocialSecurityId:{selector:o.viewedSocialSecurityIdSelector},getSocialSecurityIds:{selector:o.viewedQueriedSocialSecurityIdsSelector},getAutofillSocialSecurityIdData:{selector:o.viewedAutofillSocialSecurityIdDataSelector},getAutofillSocialSecurityIdsData:{selector:o.viewedQueriedAutofillSocialSecurityIdsDataSelector}},liveQueries:{liveSocialSecurityId:{operator:n.getSocialSecurityId$},liveSocialSecurityIds:{operator:n.socialSecurityIds$}}}},54159:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(83213),t)},16706:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addSocialSecurityIdHandler=void 0;const o=r(97211),n=r(32767),a=e=>{var t,r;return{DateOfBirth:"",LinkedIdentity:"",SocialSecurityFullname:null!==(t=e.name)&&void 0!==t?t:"",SocialSecurityNumber:null!==(r=e.idNumber)&&void 0!==r?r:"",kwType:o.DataModelType.KWSocialSecurityStatement,Sex:""}};t.addSocialSecurityIdHandler=(e,t)=>(0,n.addIdHandler)(e,t,a)},7494:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSocialSecurityIdHandler=void 0;const o=r(96989),n=r(67634);t.deleteSocialSecurityIdHandler=(e,t)=>(0,o.deleteIdHandler)(e,t,n.socialSecurityIdSelector)},15148:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.editSocialSecurityIdHandler=t.handleSocialSecurityIdFields=void 0;const o=r(67634),n=r(74278);t.handleSocialSecurityIdFields=(e,t)=>{var r,o;return{SocialSecurityFullname:null!==(r=e.name)&&void 0!==r?r:t.SocialSecurityFullname,SocialSecurityNumber:null!==(o=e.idNumber)&&void 0!==o?o:t.SocialSecurityNumber,LinkedIdentity:void 0===e.name?t.LinkedIdentity:""}};t.editSocialSecurityIdHandler=(e,r)=>(0,n.updateIdHandler)(e,r,t.handleSocialSecurityIdFields,o.socialSecurityIdSelector)},97301:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(16706),t),n(r(15148),t),n(r(7494),t)},28e3:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSocialSecurityId$=t.socialSecurityIds$=void 0;const o=r(18948),n=r(3343),a=r(85564),i=r(67634);t.socialSecurityIds$=(0,a.getLivePersonalInfo)(i.getLiveSocialSecurityIdsSelector);t.getSocialSecurityId$=e=>{const t=(0,i.getViewedSocialSecurityIdSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},63182:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSocialSecurityIdMappers=void 0;const o=r(10675),n=r(75513);t.getSocialSecurityIdMappers=()=>({spaceId:e=>e.SpaceId,name:e=>(0,n.identityToName)(e.identity)||e.SocialSecurityFullname,idNumber:e=>e.SocialSecurityNumber,lastUse:o.lastUseMapper,id:e=>e.Id,creationDate:e=>e.CreationDatetime})},32748:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.socialSecurityIdMatch=t.searchGetters=void 0;const o=r(37047),n=r(57748),a=r(75513);t.searchGetters=[(0,n.stringProp)("SocialSecurityNumber"),e=>(0,a.identityToName)(e.identity)||e.SocialSecurityFullname],t.socialSecurityIdMatch=(0,o.match)(t.searchGetters)},67634:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedSocialSecurityIdSelector=t.viewedAutofillSocialSecurityIdDataSelector=t.viewedQueriedAutofillSocialSecurityIdsDataSelector=t.viewedSocialSecurityIdSelector=t.getLiveSocialSecurityIdsSelector=t.viewedQueriedSocialSecurityIdsSelector=t.socialSecurityIdMappersSelector=t.socialSecurityIdsWithIdentitySelector=t.socialSecurityIdSelector=t.socialSecurityIdsSelector=void 0;const o=r(28060),n=r(32034),a=r(32748),i=r(70255),s=r(3259),c=r(80398),d=r(66771),l=r(41147),u=r(63182),p=r(86324),S=r(52931),g=r(86965);t.socialSecurityIdsSelector=(0,n.createSelector)((e=>e.userSession.personalData.socialSecurityIds),S.quarantinedSpacesSelector,g.filterOutQuarantinedItems);t.socialSecurityIdSelector=(e,r)=>{const o=(0,t.socialSecurityIdsSelector)(e);return(0,l.findDataModelObject)(r,o)},t.socialSecurityIdsWithIdentitySelector=(0,n.createSelector)([t.socialSecurityIdsSelector,p.identitiesByIdSelector],((e,t)=>e.map((e=>({...e,identity:t[e.LinkedIdentity]})))));const m=(0,n.createSelector)([t.socialSecurityIdSelector,e=>(0,p.identitiesByIdSelector)(e)],((e,t)=>({...e,identity:t[e.LinkedIdentity]})));t.socialSecurityIdMappersSelector=e=>(0,u.getSocialSecurityIdMappers)();const y=()=>a.socialSecurityIdMatch,v=(0,s.getQuerySelector)(t.socialSecurityIdsWithIdentitySelector,y,t.socialSecurityIdMappersSelector);t.viewedQueriedSocialSecurityIdsSelector=(0,o.compose)((0,c.viewListResults)(i.listView),v),t.getLiveSocialSecurityIdsSelector=(0,d.makeLiveSelectorGetter)(t.socialSecurityIdsWithIdentitySelector,(()=>i.listView),y,t.socialSecurityIdMappersSelector);t.viewedSocialSecurityIdSelector=(e,t)=>{const r=m(e,t);return(0,i.maybeDetailView)(r)},t.viewedQueriedAutofillSocialSecurityIdsDataSelector=(0,o.compose)((0,c.viewListResults)(i.autofillListView),v);t.viewedAutofillSocialSecurityIdDataSelector=(e,t)=>{const r=m(e,t);return(0,i.maybeAutofillView)(r)};t.getViewedSocialSecurityIdSelector=e=>{const r=(0,n.createSelector)(t.socialSecurityIdsSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,n.createSelector)(r,p.identitiesSelector,((e,t)=>(0,i.maybeDetailView)({...e,identity:(0,l.findDataModelObject)(e.LinkedIdentity,t)})))}},83213:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},70255:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.autofillListView=t.maybeAutofillView=t.autofillView=t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const o=r(18758),n=r(75513),a=e=>{var t,r;return{name:(0,n.identityToName)(e.identity)||e.SocialSecurityFullname||"",idNumber:null!==(t=e.SocialSecurityNumber)&&void 0!==t?t:"",country:(0,n.vaultCountryToViewCountry)(e.LocaleFormat),creationDate:null!==(r=e.CreationDatetime)&&void 0!==r?r:0}};t.detailView=e=>({...(0,o.dataModelDetailView)(e),...a(e)}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView);t.itemView=e=>({...(0,o.dataModelItemView)(e),...a(e)});t.listView=e=>e.map(t.itemView);const i=e=>{var t,r;return{name:(0,n.identityToName)(e.identity)||e.SocialSecurityFullname||"",idNumber:null!==(t=e.SocialSecurityNumber)&&void 0!==t?t:"",country:(0,n.vaultCountryToViewCountry)(e.LocaleFormat),creationDate:null!==(r=e.CreationDatetime)&&void 0!==r?r:0}};t.autofillView=e=>({...(0,o.dataModelItemView)(e),...i(e)}),t.maybeAutofillView=(0,o.maybeDataModelDetailView)(t.autofillView);t.autofillListView=e=>e.map(t.autofillView)},32767:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addIdHandler=void 0;const o=r(19935),n=r(9473),a=r(67573),i=r(35436),s=r(18491),c=r(1005),d=r(36109),l=r(57254),u=r(31891),p=r(59125),S=r(68410),g=r(75513),m=r(70240);t.addIdHandler=({sessionService:e,storeService:t,eventLoggerService:r},y,v)=>{var A,E;if(""===y.idNumber)return Promise.resolve({success:!1,error:{code:a.AddIdResultErrorCode.MISSING_ID_NUMBER}});const f=({country:e,spaceId:t})=>{const r=(0,d.getUnixTimestamp)();return{AnonId:(0,l.generateItemUuid)(),CreationDatetime:r,Id:(0,l.generateItemUuid)(),LastBackupTime:0,LocaleFormat:(0,g.viewCountryToVaultCountry)(e),SpaceId:null!=t?t:"",UserModificationDatetime:r}};try{if(!t.isAuthenticated())return Promise.resolve({success:!1,error:{code:a.IdErrorCode.NOT_AUTHENTICATED}});const d=(0,S.sanitizeInputPersonalData)(y),l={...f(h=d),...v(h)},u=l.kwType,p=n.default[u],g=null!==(E=null===(A=t.getPersonalData()[p])||void 0===A?void 0:A.length)&&void 0!==E?E:0;t.dispatch((0,c.savePersonalDataItem)(l,u)),e.getInstance().user.persistPersonalData();return(0,i.getDebounceSync)(t,e)({immediateCall:!0},o.Trigger.Save),(0,m.logAddVaultItem)(r,l),y.usageLogComponentName&&(0,s.sendPersonalDataEditionUsageLogs)(t,{action:"add",from:y.usageLogComponentName,itemEdited:l,currentItemsCount:g}),Promise.resolve({success:!0})}catch(e){const t=new Error(`[IDs] - addIdHandler: ${e}`);return(0,p.sendExceptionLog)({error:t}),(0,u.logError)(t),Promise.resolve({success:!1,error:{code:a.IdErrorCode.INTERNAL_ERROR}})}var h}},96989:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteIdHandler=void 0;const o=r(19935),n=r(67573),a=r(35436),i=r(18491),s=r(37821),c=r(9473),d=r(31891),l=r(59125),u=r(70240);t.deleteIdHandler=({sessionService:e,storeService:t,eventLoggerService:r},{id:p},S)=>{var g,m;const y=t.getState();try{if(!t.isAuthenticated())return Promise.resolve({success:!1,error:{code:n.IdErrorCode.NOT_AUTHENTICATED}});const d=S(y,p);if(!d)return Promise.resolve({success:!1,error:{code:n.IdErrorCode.NOT_FOUND}});const l=t.getPersonalData(),v=d.kwType,A=null!==(m=null===(g=l[c.default[v]])||void 0===g?void 0:g.length)&&void 0!==m?m:0,E=(0,s.removePersonalItem)(d.kwType,d.Id,null);t.dispatch(E);return(0,a.getDebounceSync)(t,e)({immediateCall:!0},o.Trigger.Save),(0,u.logDeleteVaultItem)(r,d),(0,i.sendPersonalDataEditionUsageLogs)(t,{action:"remove",from:"MANUAL",itemEdited:d,currentItemsCount:A}),Promise.resolve({success:!0})}catch(e){const t=new Error(`[IDs] - deleteIdHandler: ${e}`);return(0,l.sendExceptionLog)({error:t}),(0,d.logError)(t),Promise.resolve({success:!1,error:{code:n.IdErrorCode.INTERNAL_ERROR}})}}},74278:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateIdHandler=void 0;const o=r(19935),n=r(67573),a=r(35436),i=r(18491),s=r(1005),c=r(9473),d=r(36109),l=r(31891),u=r(59125),p=r(68410),S=r(75513),g=r(70240);t.updateIdHandler=({sessionService:e,storeService:t,eventLoggerService:r},m,y,v)=>{var A,E;if(""===m.idNumber)return Promise.resolve({success:!1,error:{code:n.UpdateIdResultErrorCode.MISSING_ID_NUMBER}});const f=({country:e,spaceId:t},r)=>({SpaceId:null!=t?t:r.SpaceId,LocaleFormat:void 0===e?r.LocaleFormat:(0,S.viewCountryToVaultCountry)(e)}),h=(e,t)=>({...f(e,t),...y(e,t)});try{if(!t.isAuthenticated())return Promise.resolve({success:!1,error:{code:n.IdErrorCode.NOT_AUTHENTICATED}});const l=t.getState(),u=(0,p.sanitizeInputPersonalData)(m),S=v(l,m.id);if(!S)return Promise.resolve({success:!1,error:{code:n.IdErrorCode.NOT_FOUND}});const y={...S,...h(u,S),UserModificationDatetime:(0,d.getUnixTimestamp)()},f=t.getPersonalData(),_=y.kwType;t.dispatch((0,s.savePersonalDataItem)(y,_)),e.getInstance().user.persistPersonalData();(0,a.getDebounceSync)(t,e)({immediateCall:!0},o.Trigger.Save);const T=v(l,m.id);if((0,g.logEditVaultItem)(r,y,T),m.usageLogComponentName){const e=c.default[_];(0,i.sendPersonalDataEditionUsageLogs)(t,{action:"edit",from:m.usageLogComponentName,itemEdited:y,currentItemsCount:null!==(E=null===(A=f[e])||void 0===A?void 0:A.length)&&void 0!==E?E:0})}return Promise.resolve({success:!0})}catch(e){const t=new Error(`[IDs] - updateIdHandler: ${e}`);return(0,u.sendExceptionLog)({error:t}),(0,l.logError)(t),Promise.resolve({success:!1,error:{code:n.IdErrorCode.INTERNAL_ERROR}})}}},75513:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.identityToName=t.viewCountryToVaultCountry=t.vaultCountryToViewCountry=t.vaultDateToViewDate=t.viewDateToVaultDate=t.epochToDate=t.ZERO_INDEX_BASED_MONTH_OFFSET=void 0;const o=r(97211);t.ZERO_INDEX_BASED_MONTH_OFFSET=1;t.epochToDate=e=>new Date(1e3*e);t.viewDateToVaultDate=e=>null===e?"":(e=>{const r=(0,t.epochToDate)(e);return`${r.getUTCFullYear()}-${r.getUTCMonth()+1}-${r.getUTCDate()}`})(e);t.vaultDateToViewDate=e=>{if(!e)return null;const t=(e=>{if(!e)return 0;const[t,r,o]=e.split(/[-/]/).map((e=>Number.parseInt(e,10))),n=new Date;n.setUTCHours(0,0,0,0);const a=n.setUTCFullYear(t,r-1,o);return Math.floor(a/1e3)})(e);return Number.isNaN(t)?null:t};t.vaultCountryToViewCountry=e=>{const t=o.Country[e];return void 0===t||t===o.Country.NO_TYPE?o.Country.UNIVERSAL:t},t.viewCountryToVaultCountry=t.vaultCountryToViewCountry;t.identityToName=e=>e?[e.FirstName,e.MiddleName,e.LastName,e.LastName2].filter(Boolean).join(" "):""},67573:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateIdResultErrorCode=t.AddIdResultErrorCode=t.IdErrorCode=void 0,function(e){e.INTERNAL_ERROR="INTERNAL_ERROR",e.NOT_AUTHENTICATED="NOT_AUTHENTICATED",e.NOT_FOUND="NOT_FOUND"}(t.IdErrorCode||(t.IdErrorCode={})),function(e){e.MISSING_ID_NUMBER="MISSING_ID_NUMBER"}(t.AddIdResultErrorCode||(t.AddIdResultErrorCode={})),function(e){e.MISSING_ID_NUMBER="MISSING_ID_NUMBER"}(t.UpdateIdResultErrorCode||(t.UpdateIdResultErrorCode={}))},71518:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.importApiConfig=void 0;const o=r(82496),n=r(76703),a=r(4760),i=r(16417),s=r(24255);t.importApiConfig={commands:{importPersonalData:{handler:a.importPersonalDataHandler},validatePersonalDataArchive:{handler:i.validatePersonalDataArchiveHandler},dismissPersonalDataImportNotifications:{handler:s.dismissDataImportHandler}},queries:{getImportPersonalDataStatus:{selector:n.importPersonalDataStateSelector}},liveQueries:{liveImportPersonalDataStatus:{operator:o.importPersonalDataState$}}}},79384:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ImportPersonalDataStateType=t.ImportPersonalDataErrorType=t.ImportFormats=t.ImportCSVItemType=void 0,function(e){e.Credentials="credentials"}(t.ImportCSVItemType||(t.ImportCSVItemType={})),function(e){e.Csv="csv",e.Dash="dash"}(t.ImportFormats||(t.ImportFormats={})),function(e){e.Unavailable="unavailable",e.InvalidFormat="invalid",e.BadPassword="bad_password",e.Unknown="unknown"}(t.ImportPersonalDataErrorType||(t.ImportPersonalDataErrorType={})),function(e){e.Idle="idle",e.Processing="processing",e.Success="success",e.Error="error"}(t.ImportPersonalDataStateType||(t.ImportPersonalDataStateType={}))},24255:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dismissDataImportHandler=t.dismissDataImport=void 0;const o=r(45082),n=r(75392);t.dismissDataImport=async e=>{await e.waitReady(),e.onNewState({status:o.ImportPersonalDataStateType.Idle})};t.dismissDataImportHandler=e=>(0,t.dismissDataImport)((0,n.makeImportService)(e))},4760:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.importPersonalDataHandler=t.importPersonalData=void 0;const o=r(45082),n=r(31891),a=r(59125),i=r(75392),s=r(16417);t.importPersonalData=async(e,t)=>{const r=await(0,s.validatePersonalDataArchive)(e,t);if(!r.success)return e.onNewState({status:o.ImportPersonalDataStateType.Error,name:t.name}),r;try{e.onNewState({status:o.ImportPersonalDataStateType.Processing,name:t.name});const r=await e.getObjectsFromImportCommand(t);return(async()=>{try{const n=await e.importPersonalDataItems(r);e.onNewState({status:o.ImportPersonalDataStateType.Success,name:t.name,totalItemsCount:n.countTotal,importedItemsCount:n.countSuccess}),await e.log({format:t.format,success:!0})}catch(r){const i=new Error(`[import] - importError: ${r}`);(0,a.sendExceptionLog)({error:i}),(0,n.logError)(i),e.onNewState({status:o.ImportPersonalDataStateType.Error,name:t.name}),await e.log({format:t.format,success:!1})}})(),{success:!0}}catch(r){const i=new Error(`[import] - formatError: ${r}`);return(0,a.sendExceptionLog)({error:i}),(0,n.logError)(i),e.onNewState({status:o.ImportPersonalDataStateType.Error,name:t.name}),{success:!1,error:o.ImportPersonalDataErrorType.Unknown}}};t.importPersonalDataHandler=(e,r)=>(0,t.importPersonalData)((0,i.makeImportService)(e),r)},16417:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validatePersonalDataArchiveHandler=t.validatePersonalDataArchive=void 0;const o=r(45082),n=r(75392);t.validatePersonalDataArchive=async(e,t)=>{if(!e.canDoImport())return{success:!1,error:o.ImportPersonalDataErrorType.Unavailable};try{return await e.tryReadPersonalDataArchive(t)}catch(e){return{success:!1,error:o.ImportPersonalDataErrorType.InvalidFormat}}};t.validatePersonalDataArchiveHandler=(e,r)=>{const o=(0,n.makeImportService)(e);return(0,t.validatePersonalDataArchive)(o,r)}},82496:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.importPersonalDataState$=void 0;const o=r(18948),n=r(3343),a=r(76703);t.importPersonalDataState$=()=>(0,o.pipe)((0,n.map)(a.importPersonalDataStateSelector,(0,n.distinctUntilChanged)()))},76703:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isImportPersonalDataAvailableSelector=t.importPersonalDataStateSelector=void 0;const o=r(45082),n=r(78261);t.importPersonalDataStateSelector=e=>{var t;return null!==(t=e.userSession.importPersonalData.state)&&void 0!==t?t:{status:o.ImportPersonalDataStateType.Idle}};t.isImportPersonalDataAvailableSelector=e=>!(0,n.changeMPinProgressSelector)(e)&&(0,t.importPersonalDataStateSelector)(e).status!==o.ImportPersonalDataStateType.Processing},92587:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.csvToSaveEvents=t.getImportedPersonalDataCredentials=t.parseCSV=t.getFileNewLineSeparator=t.replaceEscapedDelimiter=void 0;const o=r(17509),n=r(11814),a=r(43728),i=r(71754),s=r(73590),c=r(28060),d=r(45082),l=r(40914),u=[",\n","\r\n","\n"],p=["url","username","password"],S={possibleNewLineSeparators:u},g=({emailOrUsername:e,password:t,domain:r,url:o},c)=>{var d;const l=e&&(0,a.looksLikeEmail)(e)?e:"",u=e&&!(0,a.looksLikeEmail)(e)?e:"";return{...(0,i.createBaseCredentialModel)(c),...(0,s.getUrlFields)(o,!0),SubdomainOnly:!0,Login:u,SecondaryLogin:"",Email:l,Password:null!=t?t:"",Category:"",AutoLogin:!0,Title:null!==(d=n.url.getDomainForUrl(r))&&void 0!==d?d:"",Note:"",AutoProtected:!1,Strength:0}};t.replaceEscapedDelimiter=(e,t,r,o,n)=>e.map((e=>e.map((e=>e.replace(t,r).replace(o,n)))));const m=(0,c.compose)(o.omitCredentialsFromUrl,o.omitQueryStringFromUrl);t.getFileNewLineSeparator=(e,t)=>{if(!t.length)return"";if(1===t.length)return t[0];return t.filter((t=>e.includes(t))).sort(((t,r)=>e.indexOf(t)<e.indexOf(r)?-1:1))[0]||""};function y(e,{delimiter:r=",",possibleNewLineSeparators:o=u}){if(!e)return[];let n,a,i=!0;const s=(0,t.getFileNewLineSeparator)(e,o);try{n=new RegExp("(?<!\\\\)"+r,"g"),a=new RegExp("(?<!\\\\)"+s,"g")}catch(e){i=!1,n=new RegExp(r,"g"),a=new RegExp(s,"g")}if(i){e=function(e,t,r,o,n){const a=`(?<=${t}|${o}|^)"(.*?)"(?=${t}|${o}|$)`;return e.replace(new RegExp(a,"gs"),((e,a)=>a.replace(new RegExp(t,"gs"),r).replace(new RegExp(o,"gs"),n)))}(e,r,"\\"+r,s,"\\"+s)}const c=e.split(a).filter((e=>!!e)).map((e=>e.split(n)));let d;if(i){const e=new RegExp("\\\\"+r,"g"),o=new RegExp("\\\\"+r,"g");d=(0,t.replaceEscapedDelimiter)(c,e,r,o,s)}else d=[...c];const[l,...S]=d,g=l.map((e=>e.toLowerCase()));if(m=g,!p.every((e=>m.includes(e))))return[];var m;const y=v(g);return E(S,y)}t.parseCSV=y;const v=e=>{const t={url:-1,username:-1,password:-1,domain:-1};p.forEach((r=>t[r]=e.indexOf(r)));const r=e.indexOf("name");return t.domain=-1===r?e.indexOf("title"):r,t},A=["http://sn"],E=(e,t)=>{const r=[];return e.forEach((e=>{const n=e[t.url],a=n&&(0,o.isUrl)(n)&&m(n)||"",i={url:A.includes(a)?"":a,emailOrUsername:e[t.username],password:e[t.password],domain:e[t.domain]};r.push(i)})),r};t.getImportedPersonalDataCredentials=({content:e},t)=>{const r=((e,t)=>e.map((e=>g(e,t))))(y(e,S),t);return r};t.csvToSaveEvents=(e,r,o)=>{if(e===d.ImportCSVItemType.Credentials)return(0,t.getImportedPersonalDataCredentials)({content:r},o);(0,l.assertUnreachable)(e)}},75529:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSaveEventsFromDash=t.getXmlData=t.checkPassword=t.parseDashData=void 0;const o=r(98982),n=r(46566),a=r(53494),i=r(34929),s=r(89422),c=r(31891),d=r(59125),l=e=>new RegExp(`-+\\s+${e} BEGIN\\s+-+\n(.+)\n-+\\s+${e} END`);t.parseDashData=e=>{const[t,r]=["Id","Data"].map(l).map((t=>t.exec(e))).map((e=>e[1]));return{ids:t.split(";"),encryptedData:r}};t.checkPassword=async(e,t,r)=>{const o=(0,i.makeDataEncryptorService)(e);o.setInstance({raw:r},"");try{return(0,a.deflatedUtf8ToUtf16)(await o.getInstance().decrypt(t.encryptedData)),!0}catch(e){const r=`[import] - checkPassword: ${e}, ${t.encryptedData}`,o=new Error(r);(0,d.sendExceptionLog)({error:o}),(0,c.logError)(o)}return!1};t.getXmlData=async(e,t,r)=>{const o=(0,i.makeDataEncryptorService)(e);o.setInstance({raw:r},"");const n=await o.getInstance().decrypt(t.encryptedData),c=(0,a.deflatedUtf8ToUtf16)(n),d=await(0,s.parseDashlaneXml)(c);return Array.isArray(d)?d:[d]};t.getSaveEventsFromDash=async(e,r,a)=>(await(0,t.getXmlData)(e,r,a)).map((e=>(0,n.fixPersonalDataItemFromExternalSource)((0,o.fixKwType)(e))))},75392:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeImportService=void 0;const o=r(97211),n=r(19935),a=r(45082),i=r(88478),s=r(40914),c=r(84717),d=r(3343),l=r(82496),u=r(76703),p=r(55139),S=r(92587),g=r(75529),m=r(21385),y={[a.ImportFormats.Csv]:n.BackupFileType.Csv,[a.ImportFormats.Dash]:n.BackupFileType.SecureVault};t.makeImportService=e=>{const{storeService:t}=e;return{getObjectsFromImportCommand:e=>(async(e,t)=>{const r=(0,i.platformInfoSelector)(e.getState());switch(t.format){case a.ImportFormats.Csv:return(0,S.csvToSaveEvents)(t.csvContentType,t.content,o.Country[r.country]);case a.ImportFormats.Dash:return await(0,g.getSaveEventsFromDash)(e,(0,g.parseDashData)(t.content),t.password)}(0,s.assertUnreachable)(t)})(t,e),tryReadPersonalDataArchive:e=>(async(e,t)=>{const r=(0,i.platformInfoSelector)(e.getState());switch(t.format){case a.ImportFormats.Csv:return 0===(0,S.csvToSaveEvents)(t.csvContentType,t.content,o.Country[r.country]).length?{success:!1,error:a.ImportPersonalDataErrorType.InvalidFormat}:{success:!0};case a.ImportFormats.Dash:{const r=(0,g.parseDashData)(t.content);return await(0,g.checkPassword)(e,r,t.password)?{success:!0}:{success:!1,error:a.ImportPersonalDataErrorType.BadPassword}}}(0,s.assertUnreachable)(t)})(t,e),canDoImport:()=>(0,u.isImportPersonalDataAvailableSelector)(t.getState()),importPersonalDataItems:t=>(0,m.importXml)(e,t),onNewState:e=>t.dispatch((0,p.notifyNewImportPersonalDataStateAction)(e)),waitReady:async()=>{await(0,l.importPersonalDataState$)()(t.getState$()).pipe((0,d.first)((e=>e.status!==a.ImportPersonalDataStateType.Processing))).toPromise()},log:async({format:t,success:r})=>{await(0,c.logEvent)(e,{event:new n.UserImportDataEvent({backupFileType:y[t],importDataStatus:r?n.ImportDataStatus.Success:n.ImportDataStatus.FailureDuringImport})})}}}},21385:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.importXml=void 0;const o=r(97211),n=r(19935),a=r(57254),i=r(1005),s=r(78330),c=r(8962),d=r(88478),l=r(49504),u=r(94343),p=r(85816),S=r(70240),g=r(35436),m=r(81604),y=r(73590),v=r(47880),A=r(68410),E=e=>(0,o.isDataModelObject)({SpaceId:"",...e}),f=e=>{var t;return{...e,Id:(0,a.generateItemUuid)(),AnonId:(0,a.generateItemUuid)(),SpaceId:null!==(t=e.SpaceId)&&void 0!==t?t:""}};t.importXml=async(e,t)=>{const{storeService:r,eventLoggerService:a,sessionService:h}=e,_=r.getState(),T=(0,s.getInstance)(),I=(0,c.getInstance)(),C=(0,d.platformInfoSelector)(_),P=e=>(0,l.getUpdatedItemChangeHistory)({deviceName:r.getLocalSettings().deviceName,personalData:r.getPersonalData(),change:(0,u.makeUpdateChange)(e),userLogin:r.getUserLogin(),platformInfo:C}),D=t.filter((e=>e.kwType!==o.DataModelType.KWAuthCategory)).filter(E).map(f).map(A.sanitizeInputPersonalData),O=(b=t,w=(0,v.personalDataSelector)(_),b.reduce(((e,t)=>{if((0,o.isCredentialCategory)(t)){const r=(0,y.getCategoryIdByName)(w,t.CategoryName);r&&e.set(t.Id,r)}return e}),new Map));var b,w;const N=(e=>e.reduce(((e,t)=>{const r=e.get(t.kwType)||new Array;return r.push(t),e.set(t.kwType,r),e}),new Map))(D),R=(N.get(o.DataModelType.KWAuthentifiant)||[]).filter(o.isCredential);await Promise.all(R.map((e=>(async(e,t)=>{var r;e.Category=null!==(r=t.get(e.Category))&&void 0!==r?r:"",e.Strength=e.Password?await(0,m.evaluatePasswordStrength)(e.Password):0})(e,O))));const L=I.lockTopic("healthUpdates"),U=I.lockTopic("iconsUpdates");try{const e=(0,g.getDebounceSync)(r,h);for(const[e,t]of N.entries()){const o=t.filter(l.isChangeHistoryCandidate).map(P).filter((e=>!!e));r.dispatch((0,i.savePersonalDataItems)(t,e,o))}await h.getInstance().user.persistPersonalData();for(const e of R)(0,p.afterCredentialSaved)(r,e);for(const e of D)(0,S.logAddVaultItem)(a,e);const t=R.map((e=>e.Id));if(t.length){const r={type:"credentialUpdates",credentialIds:t},o={type:"credentialUpdates",credentialIds:t};return await T.add("healthUpdates",r),await T.add("iconsUpdates",o),e({immediateCall:!0},n.Trigger.Save),{countSuccess:D.length,countTotal:D.length}}return e({immediateCall:!0},n.Trigger.Save),{countSuccess:D.length,countTotal:D.length}}finally{I.releaseTopic("healthUpdates",L),I.releaseTopic("iconsUpdates",U)}}},55139:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notifyNewImportPersonalDataStateAction=t.NOTIFY_NEW_PERSONAL_DATA_STATE=void 0,t.NOTIFY_NEW_PERSONAL_DATA_STATE="NOTIFY_NEW_PERSONAL_DATA_STATE";t.notifyNewImportPersonalDataStateAction=e=>({type:t.NOTIFY_NEW_PERSONAL_DATA_STATE,newState:e})},94664:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ImportDataStateReducer=void 0;const o=r(45082),n=r(55139);t.ImportDataStateReducer=(e,t)=>t.type===n.NOTIFY_NEW_PERSONAL_DATA_STATE?{state:t.newState}:null!=e?e:{state:{status:o.ImportPersonalDataStateType.Idle}}},72290:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(88299),n=r(96471),a=r(19323);t.config={commands:{saveGeneratedPassword:{handler:n.saveGeneratedPasswordHandler}},queries:{getPasswordHistory:{selector:o.viewedQueriedPasswordHistorySelector},getPasswordHistoryPage:{selector:o.passwordHistoryPageSelector},getPasswordHistoryPaginationToken:{selector:o.passwordHistoryPaginationTokenSelector},getHasPasswordHistory:{selector:o.hasPasswordHistorySelector}},liveQueries:{livePasswordHistory:{operator:a.passwordHistory$},livePasswordHistoryBatch:{operator:a.passwordHistoryBatch$}}}},19323:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.passwordHistoryBatch$=t.passwordHistory$=void 0;const o=r(18948),n=r(3343),a=r(88299),i=r(85564),s=r(6045),c=r(28807);t.passwordHistory$=(0,i.getLivePersonalInfo)(a.getLivePasswordHistorySelector);t.passwordHistoryBatch$=e=>{const t=(0,s.parseToken)(e),r=(0,a.getViewedPasswordHistoryBatchSelector)(t);return(0,o.pipe)((0,n.map)(r),(0,n.distinctUntilChanged)(c.sameBatch))}},23518:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPasswordHistoryMappers=void 0;t.getPasswordHistoryMappers=()=>({primaryInfo:e=>e.primaryInfo,timestamp:e=>e.timestamp,type:e=>e.type,id:e=>e.id,credentialId:e=>"credentialId"in e&&e.credentialId||""})},14955:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPasswordHistoryBatch=t.viewPasswordHistoryBatch=t.getPasswordHistoryFirstToken=t.getPasswordHistorySortToken=t.getPasswordHistoryFilterToken=void 0;const o=r(51417),n=r(73898),a=r(28060),i=r(70910),s=r(2476);t.getPasswordHistoryFilterToken=({filterCriteria:e})=>({filterCriteria:e||[]});t.getPasswordHistorySortToken=({sortCriteria:e})=>({uniqField:"id",sortCriteria:e||[]});t.getPasswordHistoryFirstToken=(e,t,r,n)=>(0,o.generateFirstToken)(e,t,r.initialBatchSize||30,n);t.viewPasswordHistoryBatch=(e,t,r,o)=>{const a=(0,i.getSharingStatusItem)(t,r),c=(0,s.getIcon)(o);return(0,n.listView)(a,c,e)},t.getPasswordHistoryBatch=(0,a.curry)(((e,t,r)=>(0,o.getBatch)(r,e,t)))},83425:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.passwordHistoryItemMatch=t.searchGettersForGeneratedPassword=t.searchGettersForCredential=void 0;const o=r(57748),n=r(61298),a=r(37047),i=r(54090);t.searchGettersForCredential=[(0,o.stringProp)("primaryInfo"),(0,o.stringProp)("domain"),(0,o.stringProp)("email"),(0,o.stringProp)("login"),(0,o.stringProp)("secondaryLogin"),e=>(0,i.getWebsitesAssociatedToUrl)(e.domain).join(" ")],t.searchGettersForGeneratedPassword=[(0,o.stringProp)("primaryInfo")];t.passwordHistoryItemMatch=(e,r)=>r.type===n.PasswordHistoryItemType.Credential?(0,a.match)(t.searchGettersForCredential)(e,r):(0,a.match)(t.searchGettersForGeneratedPassword)(e,r)},88299:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedPasswordHistoryBatchSelector=t.passwordHistoryQuerySelector=t.passwordHistoryPaginationTokenSelector=t.passwordHistoryPageSelector=t.getLivePasswordHistorySelector=t.viewedQueriedPasswordHistorySelector=t.passwordHistoryListViewSelector=t.getPasswordHistoryMappersSelector=t.passwordHistoryMappersSelector=t.hasPasswordHistorySelector=t.passwordHistorySelector=void 0;const o=r(11814),n=r(32034),a=r(18948),i=r(3259),s=r(16021),c=r(3458),d=r(36519),l=r(83425),u=r(61298),p=r(80398),S=r(14955),g=r(23518),m=r(66771),y=r(6045),v=r(51417),A=r(46730),E=r(30590),f=r(83477),h=e=>"ChangedProperties"in e&&e.ChangedProperties.some((e=>"password"===e.toLowerCase())),_=(0,n.createSelector)(d.credentialsSelector,(e=>e.reduce(((e,t)=>e.set(t.Id,t)),new Map)));t.passwordHistorySelector=(0,n.createSelector)(s.generatedPasswordsSelector,c.credentialsHistoriesSelector,_,E.limitedSharingItemsSelector,((e,t,r,n)=>{const a=e.filter((e=>!e.AuthId)).map((e=>{var t;return{type:u.PasswordHistoryItemType.Generated,primaryInfo:null!==(t=e.Domain)&&void 0!==t?t:"",secondaryInfo:"",domain:e.Domain,password:e.Password,timestamp:e.GeneratedDate,id:e.Id,isProtected:!1}})),i=t.reduce(((e,t)=>{if(n[t.ObjectId]||!t.hasOwnProperty("ChangeSets"))return e;const a=r.get(t.ObjectId);if(!a)return e;const i=null==a?void 0:a.Title,s=null==a?void 0:a.Url,c=null==a?void 0:a.Email,d=null==a?void 0:a.Login,l=(null==a?void 0:a.AutoProtected)||!1,p=t.ChangeSets.reduce(((e,t)=>{var r,n,p,S,g,m;if(!h(t)||(void 0===(m=t.CurrentData).Email&&void 0===m.Login||void 0===m.Url||void 0===m.Password))return e;const y={type:u.PasswordHistoryItemType.Credential,primaryInfo:null!==(r=i||o.url.getDomainForUrl(s))&&void 0!==r?r:"",secondaryInfo:null!==(n=c||d)&&void 0!==n?n:"",domain:s||t.CurrentData.Url,password:t.CurrentData.Password,timestamp:t.ModificationDate,id:t.Id,credentialId:null==a?void 0:a.Id,isProtected:l,email:null!==(p=null==a?void 0:a.Email)&&void 0!==p?p:"",login:null!==(S=null==a?void 0:a.Login)&&void 0!==S?S:"",secondaryLogin:null!==(g=null==a?void 0:a.SecondaryLogin)&&void 0!==g?g:""};return e.concat(y)}),[]);return e.concat(p)}),[]);return a.concat(i)}));t.hasPasswordHistorySelector=(e,t)=>{const r=(0,E.limitedSharingItemsSelector)(e);return(0,c.credentialsHistoriesSelector)(e).some((e=>{return e.ObjectId===t&&!((o=e.ObjectId)in r&&r[o])&&e.ChangeSets.filter(h).length>0;var o}))};t.passwordHistoryMappersSelector=e=>(0,g.getPasswordHistoryMappers)();const T=(0,g.getPasswordHistoryMappers)();t.getPasswordHistoryMappersSelector=()=>T;const I=()=>l.passwordHistoryItemMatch,C=(0,i.getQuerySelector)(t.passwordHistorySelector,I,t.passwordHistoryMappersSelector);t.passwordHistoryListViewSelector=(0,n.createSelector)(A.sortedSharedItemIdsSelector,E.limitedSharingItemsSelector,f.iconsSelector,t.passwordHistorySelector,((e,t,r)=>o=>(0,S.viewPasswordHistoryBatch)(o,e,t,r)));t.viewedQueriedPasswordHistorySelector=(e,r)=>{const o=C(e,r),n=(0,t.passwordHistoryListViewSelector)(e);return(0,p.viewListResults)(n)(o)},t.getLivePasswordHistorySelector=(0,m.makeLiveSelectorGetter)(t.passwordHistorySelector,t.passwordHistoryListViewSelector,I,t.getPasswordHistoryMappersSelector);t.passwordHistoryPageSelector=(e,r)=>{const o=(0,y.parseToken)(r),{sortToken:n,filterToken:a}=o,i=(0,g.getPasswordHistoryMappers)(),s=(0,t.passwordHistoryQuerySelector)(e,{sortToken:n,filterToken:a}),c=(0,t.passwordHistoryListViewSelector)(e),d=(0,v.generateNextToken)(i,o,s),l=(0,v.generatePrevToken)(i,o,s),u=(0,v.getBatch)(i,o,s),p=(0,y.stringifyToken)(d),S=(0,y.stringifyToken)(l);return{batch:c(u),nextToken:p,prevToken:S}};t.passwordHistoryPaginationTokenSelector=(e,r)=>{const o=(0,S.getPasswordHistorySortToken)(r),n=(0,S.getPasswordHistoryFilterToken)(r),a=(0,g.getPasswordHistoryMappers)(),i={sortToken:o,filterToken:n},s=(0,t.passwordHistoryQuerySelector)(e,i),c=(0,S.getPasswordHistoryFirstToken)(a,i,r,s);return(0,y.stringifyToken)(c)};const P=(0,n.createSelector)(t.passwordHistorySelector,g.getPasswordHistoryMappers),D=(0,y.createOptimizedSortTokenSelector)(((e,{sortToken:t})=>t),a.identity),O=(0,y.createOptimizedFilterTokenSelector)(((e,{filterToken:t})=>t),a.identity);t.passwordHistoryQuerySelector=(0,n.createSelector)(g.getPasswordHistoryMappers,I,D,O,t.passwordHistorySelector,y.queryData);t.getViewedPasswordHistoryBatchSelector=e=>{const{sortToken:r,filterToken:o}=e,a=(0,S.getPasswordHistoryBatch)(e),i=(0,n.createSelector)((e=>(0,t.passwordHistoryQuerySelector)(e,{filterToken:o,sortToken:r})),P,a),s=(0,y.optimizeBatchSelector)(i);return(0,n.createSelector)(s,A.sortedSharedItemIdsSelector,E.limitedSharingItemsSelector,f.iconsSelector,S.viewPasswordHistoryBatch)}},61298:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordHistoryItemType=void 0,function(e){e.Credential="credential",e.Generated="generated"}(t.PasswordHistoryItemType||(t.PasswordHistoryItemType={}))},73898:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=void 0;const o=r(61298);t.listView=(e,t,r)=>r.map((r=>r.type===o.PasswordHistoryItemType.Credential?{type:o.PasswordHistoryItemType.Credential,id:r.id,primaryInfo:r.primaryInfo,secondaryInfo:r.secondaryInfo,password:r.password,timestamp:r.timestamp,credentialId:r.credentialId,icons:t(r.domain),sharingStatus:e(r.credentialId),isProtected:r.isProtected}:{type:o.PasswordHistoryItemType.Generated,id:r.id,primaryInfo:r.primaryInfo,password:r.password,timestamp:r.timestamp}))},24173:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(81659),n=r(37709),a=r(96021);t.config={commands:{addPaymentCard:{handler:a.addPaymentCardHandler},deletePaymentCard:{handler:a.deletePaymentCardHandler},updatePaymentCard:{handler:a.updatePaymentCardHandler}},queries:{getPaymentCard:{selector:o.viewedPaymentCardSelector},getPaymentCards:{selector:o.viewedQueriedPaymentCardsSelector}},liveQueries:{livePaymentCard:{operator:n.getPaymentCard$},livePaymentCards:{operator:n.paymentCards$}}}},70993:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(56690),t)},61188:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addPaymentCardHandler=t.getNewPaymentCard=void 0;const o=r(19935),n=r(97211),a=r(35436),i=r(67174),s=r(18491),c=r(1005),d=r(36109),l=r(57254),u=r(59125),p=r(68410),S=r(56690),g=r(70240);function m(e){e=(0,p.sanitizeInputPersonalData)(e);const t=(0,d.getUnixTimestamp)(),r=(0,i.defaultToEmptyString)(e.cardNumber).replace(/ /g,"");if(!r&&!e.securityCode)throw new i.RequestError("[addPaymentCard]: refusing to add a payment card without card number or security code.",S.PaymentCardSaveResultErrorCode.EMPTY_CARD_NUMBER_AND_SECURITY_CODE);return{kwType:"KWPaymentMean_creditCard",AnonId:(0,l.generateItemUuid)(),Bank:"US-NO_TYPE",CardNumber:r,CardNumberLastDigits:(0,i.getLastDigitsFromCardNumber)(r),CreationDatetime:t,Color:(0,i.defaultToFallbackColor)(e.color),ExpireMonth:(0,i.defaultToEmptyString)(e.expireMonth),ExpireYear:(0,i.defaultToEmptyString)(e.expireYear),Id:(0,l.generateItemUuid)(),IssueNumber:"",Name:(0,i.defaultToEmptyString)(e.name),OwnerName:(0,i.defaultToEmptyString)(e.ownerName),CCNote:(0,i.defaultToEmptyString)(e.personalNote),LocaleFormat:n.Country.US,SecurityCode:(0,i.defaultToEmptyString)(e.securityCode),SpaceId:(0,i.defaultToEmptyString)(e.spaceId),StartYear:"",StartMonth:"",Type:(0,i.getPaymentTypeFromCardNumber)(r),UserModificationDatetime:t,LastBackupTime:0}}t.getNewPaymentCard=m,t.addPaymentCardHandler=function(e,t){try{!function({storeService:e,sessionService:t,eventLoggerService:r},o){if(!e.isAuthenticated())throw new Error("No session available to addPaymentCard");const n=e.getPersonalData(),a=m(o);(0,g.logAddVaultItem)(r,a),o.usageLogComponentName&&(0,s.sendPersonalDataEditionUsageLogs)(e,{action:"add",from:o.usageLogComponentName,itemEdited:a,currentItemsCount:n.bankAccounts.length}),e.dispatch((0,c.savePersonalDataItem)(a,a.kwType)),t.getInstance().user.persistPersonalData()}(e,t);return(0,a.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},o.Trigger.Save),Promise.resolve({success:!0})}catch(e){return(0,u.sendExceptionLog)({error:e}),e instanceof i.RequestError&&void 0!==e.code?Promise.resolve({success:!1,error:{code:e.code}}):Promise.resolve({success:!1})}}},91656:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deletePaymentCardHandler=void 0;const o=r(19935),n=r(35436),a=r(81659),i=r(56690),s=r(18491),c=r(59125),d=r(37821),l=r(70240);t.deletePaymentCardHandler=function(e,{id:t}){const r=(({storeService:e,eventLoggerService:t},r)=>{const o=e.getState();try{if(!e.isAuthenticated())return{success:!1,error:{code:i.DeletePaymentCardErrorCode.NOT_AUTHORIZED}};const n=(0,a.paymentCardSelector)(o,r);if(!n)return{success:!1,error:{code:i.DeletePaymentCardErrorCode.NOT_FOUND}};const c=(0,a.paymentCardsSelector)(o).length,u=(0,d.removePersonalItem)(n.kwType,n.Id,null);return e.dispatch(u),(0,l.logDeleteVaultItem)(t,n),(0,s.sendPersonalDataEditionUsageLogs)(e,{action:"remove",from:"MANUAL",itemEdited:n,currentItemsCount:c}),{success:!0}}catch(e){const t=new Error(`[PaymentCards] - deletePaymentCard: ${e}`);return(0,c.sendExceptionLog)({error:t}),{success:!1,error:{code:i.DeletePaymentCardErrorCode.INTERNAL_ERROR}}}})(e,t);if(r.success){(0,n.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},o.Trigger.Save)}return Promise.resolve(r)}},96021:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(61188),t),n(r(91656),t),n(r(37928),t)},37928:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updatePaymentCardHandler=t.getUpdatedPaymentCard=void 0;const o=r(19935),n=r(81659),a=r(35436),i=r(67174),s=r(18491),c=r(1005),d=r(36109),l=r(59125),u=r(68410),p=r(56690),S=r(70240);function g(e,t){var r,o,n,a,s,c,l,S,g;if(!e)throw new i.RequestError("[updatePaymentCard]: unable to find payment card to update.",p.PaymentCardSaveResultErrorCode.NOT_FOUND);t=(0,u.sanitizeInputPersonalData)(t);const m=(0,i.defaultToEmptyString)(null!==(r=t.cardNumber)&&void 0!==r?r:e.CardNumber).replace(/ /g,""),y=(0,d.getUnixTimestamp)(),v={CardNumber:m,CardNumberLastDigits:(0,i.getLastDigitsFromCardNumber)(m),Color:null!==(o=t.color)&&void 0!==o?o:e.Color,ExpireMonth:null!==(n=t.expireMonth)&&void 0!==n?n:e.ExpireMonth,ExpireYear:null!==(a=t.expireYear)&&void 0!==a?a:e.ExpireYear,Name:null!==(s=t.name)&&void 0!==s?s:e.Name,OwnerName:null!==(c=t.ownerName)&&void 0!==c?c:e.OwnerName,SecurityCode:null!==(l=t.securityCode)&&void 0!==l?l:e.SecurityCode,SpaceId:null!==(S=t.spaceId)&&void 0!==S?S:e.SpaceId,Type:(0,i.getPaymentTypeFromCardNumber)(m),UserModificationDatetime:y,CCNote:null!==(g=t.personalNote)&&void 0!==g?g:e.CCNote},A={...e,...v};if(!m&&!A.SecurityCode)throw new i.RequestError("[updatePaymentCard]: refusing to add a payment card without card number or security code.",p.PaymentCardSaveResultErrorCode.EMPTY_CARD_NUMBER_AND_SECURITY_CODE);return A}t.getUpdatedPaymentCard=g,t.updatePaymentCardHandler=function(e,t){try{!function({storeService:e,sessionService:t,eventLoggerService:r},o){if(!e.isAuthenticated())throw new Error("No session available to updatePaymentCard");const a=e.getPersonalData(),i=(0,n.paymentCardSelector)(e.getState(),o.id),d=g(i,o);(0,S.logEditVaultItem)(r,d,i),o.usageLogComponentName&&(0,s.sendPersonalDataEditionUsageLogs)(e,{action:"add",from:o.usageLogComponentName,itemEdited:d,currentItemsCount:a.bankAccounts.length}),e.dispatch((0,c.savePersonalDataItem)(d,d.kwType)),t.getInstance().user.persistPersonalData()}(e,t);return(0,a.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},o.Trigger.Save),Promise.resolve({success:!0})}catch(e){return(0,l.sendExceptionLog)({error:e}),e instanceof i.RequestError&&void 0!==e.code?Promise.resolve({success:!1,error:{code:e.code}}):Promise.resolve({success:!1})}}},67174:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RequestError=t.getPaymentTypeFromCardNumber=t.getLastDigitsFromCardNumber=t.defaultToFallbackColor=t.defaultToEmptyString=void 0;const o=r(28060),n=r(97211);t.defaultToEmptyString=(0,o.defaultTo)(""),t.defaultToFallbackColor=(0,o.defaultTo)(n.PaymentCardColor.BLUE_1),t.getLastDigitsFromCardNumber=function(e){const r=(0,t.defaultToEmptyString)(e).trim();return r.length>=4?r.slice(-4):""},t.getPaymentTypeFromCardNumber=function(e){if(!e)return n.PaymentCardType.PAYMENT_TYPE_VISA;const t=(e,t)=>t.some((t=>e.startsWith(t)));switch(e.length){case 19:case 13:if(e.startsWith("4"))return n.PaymentCardType.PAYMENT_TYPE_VISA;break;case 16:if(e.startsWith("6011"))return n.PaymentCardType.PAYMENT_TYPE_DISCOVER;if(t(e,["50","51","52","53","54","55"]))return n.PaymentCardType.PAYMENT_TYPE_MASTERCARD;if(e.startsWith("4"))return n.PaymentCardType.PAYMENT_TYPE_VISA;if(e.startsWith("3"))return n.PaymentCardType.PAYMENT_TYPE_JCB;break;case 15:if(t(e,["2131","1800"]))return n.PaymentCardType.PAYMENT_TYPE_JCB;if(t(e,["34","37"]))return n.PaymentCardType.PAYMENT_TYPE_AMEX;break;case 14:if(t(e,["300","301","302","303","304","305","36","38"]))return n.PaymentCardType.PAYMENT_TYPE_DINERSCLUB}return n.PaymentCardType.PAYMENT_TYPE_VISA};class a extends Error{constructor(e,t){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name="RequestError",this.code=t}}t.RequestError=a},52038:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUpdatedPaymentCard=t.getNewPaymentCard=t.savePaymentCard=void 0;const o=r(28060),n=r(97211),a=r(31891),i=r(37821),s=r(57254),c=r(36109),d=r(18491),l=r(41147),u=r(67174),p=r(70240);function S(e){a.default.log("[Data] Creating new Payment Card");const t=(0,c.getUnixTimestamp)(),r=(0,u.defaultToEmptyString)(e.cardNumber).replace(/ /g,"");return{kwType:"KWPaymentMean_creditCard",AnonId:(0,s.generateItemUuid)(),Bank:"US-NO_TYPE",CardNumber:r,CardNumberLastDigits:(0,u.getLastDigitsFromCardNumber)(r),CreationDatetime:t,Color:(0,o.defaultTo)(n.PaymentCardColor.BLUE_1,e.color),ExpireMonth:(0,u.defaultToEmptyString)(e.expireMonth),ExpireYear:(0,u.defaultToEmptyString)(e.expireYear),Id:(0,s.generateItemUuid)(),IssueNumber:"",Name:(0,o.defaultTo)("Card",e.cardName),OwnerName:(0,u.defaultToEmptyString)(e.ownerName),CCNote:(0,u.defaultToEmptyString)(e.personalNote),LocaleFormat:n.Country.US,SecurityCode:(0,u.defaultToEmptyString)(e.securityCode),SpaceId:e.spaceId||"",StartYear:"",StartMonth:"",Type:(0,u.getPaymentTypeFromCardNumber)(r),UserModificationDatetime:t,LastBackupTime:0}}function g(e,t){const r=(0,l.findDataModelObject)(t.id,e);if(!r)return void a.default.log("Client asks to update an unknown Payment Card");a.default.log(`[Data] Updating existing Payment Card ${t.id}`);const n=(0,c.getUnixTimestamp)(),i=(0,u.defaultToEmptyString)(t.cardNumber).replace(/ /g,""),s={CardNumber:i,CardNumberLastDigits:(0,u.getLastDigitsFromCardNumber)(i),Color:t.color?t.color:r.Color,ExpireMonth:(0,u.defaultToEmptyString)(t.expireMonth),ExpireYear:(0,u.defaultToEmptyString)(t.expireYear),Name:(0,o.defaultTo)("Card",t.cardName),OwnerName:(0,u.defaultToEmptyString)(t.ownerName),SecurityCode:(0,u.defaultToEmptyString)(t.securityCode),Type:(0,u.getPaymentTypeFromCardNumber)(t.cardNumber),UserModificationDatetime:n,CCNote:(0,u.defaultToEmptyString)(t.personalNote)};return{...r,...s}}t.savePaymentCard=function({storeService:e,sessionService:t,eventLoggerService:r},o,n){if(!e.isAuthenticated())return void a.default.log("No session available to savePaymentCard");const s=e.getPersonalData(),c=o.id?g(s.paymentCards,o):S(o);if(o.id){const e=(0,l.findDataModelObject)(c.Id,s.paymentCards);(0,p.logEditVaultItem)(r,c,e)}else(0,p.logAddVaultItem)(r,c);(0,d.sendPersonalDataEditionUsageLogs)(e,{action:o.id?"edit":"add",from:n,itemEdited:c,currentItemsCount:s.paymentCards.length}),e.dispatch((0,i.savePaymentCard)(c)),t.getInstance().user.persistPersonalData()},t.getNewPaymentCard=S,t.getUpdatedPaymentCard=g},37709:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPaymentCard$=t.paymentCards$=void 0;const o=r(18948),n=r(3343),a=r(85564),i=r(81659);t.paymentCards$=(0,a.getLivePersonalInfo)(i.getLivePaymentCardsSelector);t.getPaymentCard$=e=>{const t=(0,i.getViewedPaymentCardSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},39013:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPaymentCardMappers=void 0;const o=r(10675);t.getPaymentCardMappers=()=>({spaceId:e=>e.SpaceId,name:e=>e.Name,lastUse:o.lastUseMapper,id:e=>e.Id})},93653:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.paymentCardMatch=t.searchGetters=void 0;const o=r(57748),n=r(37047);t.searchGetters=[(0,o.stringProp)("Name"),(0,o.stringProp)("OwnerName")],t.paymentCardMatch=(0,n.match)(t.searchGetters)},81659:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedPaymentCardSelector=t.viewedPaymentCardSelector=t.getLivePaymentCardsSelector=t.viewedQueriedPaymentCardsSelector=t.paymentCardMappersSelector=t.paymentCardSelector=t.paymentCardsSelector=void 0;const o=r(28060),n=r(93653),a=r(18935),i=r(3259),s=r(80398),c=r(66771),d=r(41147),l=r(32034),u=r(39013),p=r(86965),S=r(52931);t.paymentCardsSelector=(0,l.createSelector)((e=>e.userSession.personalData.paymentCards),S.quarantinedSpacesSelector,p.filterOutQuarantinedItems);t.paymentCardSelector=(e,r)=>{const o=(0,t.paymentCardsSelector)(e);return(0,d.findDataModelObject)(r,o)};t.paymentCardMappersSelector=e=>(0,u.getPaymentCardMappers)();const g=()=>n.paymentCardMatch,m=(0,i.getQuerySelector)(t.paymentCardsSelector,g,t.paymentCardMappersSelector);t.viewedQueriedPaymentCardsSelector=(0,o.compose)((0,s.viewListResults)(a.listView),m),t.getLivePaymentCardsSelector=(0,c.makeLiveSelectorGetter)(t.paymentCardsSelector,(()=>a.listView),g,t.paymentCardMappersSelector);t.viewedPaymentCardSelector=(e,r)=>{const o=(0,t.paymentCardSelector)(e,r);return(0,a.maybeDetailView)(o)};t.getViewedPaymentCardSelector=e=>{const r=(0,l.createSelector)(t.paymentCardsSelector,(t=>(0,d.findDataModelObject)(e,t)));return(0,l.createSelector)(r,a.maybeDetailView)}},56690:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeletePaymentCardErrorCode=t.PaymentCardSaveResultErrorCode=void 0,function(e){e.EMPTY_CARD_NUMBER_AND_SECURITY_CODE="EMPTY_CARD_NUMBER_AND_SECURITY_CODE",e.NOT_FOUND="NOT_FOUND"}(t.PaymentCardSaveResultErrorCode||(t.PaymentCardSaveResultErrorCode={})),function(e){e.NOT_AUTHORIZED="NOT_AUTHORIZED",e.NOT_FOUND="NOT_FOUND",e.INTERNAL_ERROR="INTERNAL_ERROR"}(t.DeletePaymentCardErrorCode||(t.DeletePaymentCardErrorCode={}))},18935:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const o=r(28060),n=r(18758),a=r(67174),i=(0,o.defaultTo)(""),s="BLUE_1";t.detailView=e=>({...(0,n.dataModelDetailView)(e),bank:i(e.Bank),cardNumber:i(e.CardNumber),cardNumberLastDigits:(0,a.getLastDigitsFromCardNumber)(e.CardNumber),color:e.Color||s,expireMonth:i(e.ExpireMonth),expireYear:i(e.ExpireYear),issueNumber:i(e.IssueNumber),name:i(e.Name),ownerName:i(e.OwnerName),personalNote:i(e.CCNote),securityCode:i(e.SecurityCode),startMonth:i(e.StartMonth),startYear:i(e.StartYear),type:e.Type}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView);t.itemView=e=>({...(0,n.dataModelItemView)(e),cardNumber:i(e.CardNumber),cardNumberLastDigits:(0,a.getLastDigitsFromCardNumber)(e.CardNumber),color:e.Color||s,expireMonth:i(e.ExpireMonth),expireYear:i(e.ExpireYear),name:i(e.Name),ownerName:i(e.OwnerName),personalNote:i(e.CCNote),type:e.Type});t.listView=e=>e.map(t.itemView)},41447:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makePersonalDataItem=t.updatePersonalDataUsageMetadata=t.addPersonalDataItems=t.addPersonalDataItem=t.mapOrigin=void 0;const o=r(97211),n=r(17509),a=r(9473),i=r(41569),s=r(49504),c=r(94343),d=r(18491),l=r(35436),u=r(59125),p=r(15528),S=r(36109),g=r(31891),m=r(1005),y=r(77429),v=r(66347),A=r(14960),E=r(96887),f=r(98247),h=r(58429),_=r(21046),T=r(85816),I=r(96970),C=r(78330),P=r(8962),D=r(68410),O=r(88478),b=r(70240),w=r(41147),N={[o.DataModelType.KWAuthentifiant]:{beforeChange:T.beforeCredentialChange,create:T.makeNewCredential,update:T.makeUpdatedCredential,notifySharersOnUpdate:T.notifySharersCredentialUpdated,afterSave:T.afterCredentialSaved},[o.DataModelType.KWBankStatement]:{create:I.makeNewBankAccount,update:I.makeUpdatedBankAccount},[o.DataModelType.KWSecureNote]:{create:_.makeNewNote,update:_.makeUpdatedNote,notifySharersOnUpdate:_.notifySharersNoteUpdated},[o.DataModelType.KWCompany]:{create:y.makeNewCompany,update:y.makeUpdatedCompany},[o.DataModelType.KWEmail]:{create:v.makeNewEmail,update:v.makeUpdatedEmail},[o.DataModelType.KWPersonalWebsite]:{create:A.makeNewPersonalWebsite,update:A.makeUpdatedPersonalWebsite},[o.DataModelType.KWIdentity]:{create:E.makeNewIdentity,update:E.makeUpdatedIdentity},[o.DataModelType.KWPhone]:{create:f.makeNewPhone,update:f.makeUpdatedPhone},[o.DataModelType.KWAddress]:{create:h.makeNewAddress,update:h.makeUpdatedAddress}};function R(e){switch(e){case o.SaveOrigin.MAV_SAVE_CREDENTIAL:return"SAVE_PASSWORD";case o.SaveOrigin.MAV_DATACAPTURE:return"DATACAPTURE";default:return e}}async function L(e,t,r){t.content||(g.default.error(`[Data] PersonalInfoItem: ${t.kwType}, has no content`),u.sendExceptionLog({message:`[makePersonalDataItem] No content found for PersonalDataItem of kwType: ${t.kwType}`,code:p.ExceptionCriticality.WARNING}),t={...t,content:{}});let o=null;if(t.content.id){const e=(0,l.getCurrentItems)(t.kwType,r);o=(0,w.findDataModelObject)(t.content.id,e)}const n=N[t.kwType];if(!n)return g.default.error(`[Data] Could not make PersonalDataItem of kwType: ${t.kwType}`),null;let a;return t=function(e){return{...e,content:(0,D.sanitizeInputPersonalData)(e.content)}}(t),n.beforeChange&&(t=n.beforeChange(t,r)),o?(a=await n.update(t,o),n.notifySharersOnUpdate&&await n.notifySharersOnUpdate(e,o,a)):a=await n.create(t),a}t.mapOrigin=R,t.addPersonalDataItem=async function({storeService:e,sessionService:t,eventLoggerService:r},n){var i;if(!e.isAuthenticated())return void g.default.log("No session available to addPersonalDataItem");const u=e.getPersonalData(),p=await L(e,n,u);if(!p)return;const S=Boolean(null==n?void 0:n.content.id);let y=null,v=null;const A=(0,C.getInstance)(),E=(0,P.getInstance)();if(S){const e=a.default[p.kwType],t=(0,w.findDataModelObject)(p.Id,u[e]);(0,b.logEditVaultItem)(r,p,t)}else(0,b.logAddVaultItem)(r,p);(0,d.sendPersonalDataEditionUsageLogs)(e,{action:S?"edit":"add",from:R(n.origin),itemEdited:p,currentItemsCount:(0,l.getCurrentItems)(n.kwType,u).length});const f=(0,O.platformInfoSelector)(e.getState()),h=(0,s.isChangeHistoryCandidate)(p)&&S?(0,s.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:u,change:(0,c.makeUpdateChange)(p),userLogin:e.getUserLogin(),platformInfo:f}):null;if(e.dispatch((0,m.savePersonalDataItem)(p,p.kwType,h)),(0,o.isCredential)(p)){y=E.lockTopic("healthUpdates"),v=E.lockTopic("iconsUpdates");const e={credentialIds:[p.Id],type:"credentialUpdates"};await A.add("healthUpdates",e);const t={credentialIds:[p.Id],type:"credentialUpdates"};await A.add("iconsUpdates",t),"************"===(null==p?void 0:p.Password)&&(0,g.logWarn)({message:"Saving credentials using a placeholder",tag:"Credentials"})}(null===(i=N[n.kwType])||void 0===i?void 0:i.afterSave)&&N[n.kwType].afterSave(e,p),y&&E.releaseTopic("healthUpdates",y),v&&E.releaseTopic("iconsUpdates",v),t.getInstance().user.persistPersonalData()},t.addPersonalDataItems=async function(e,t,r){var n;if(!e.isAuthenticated())return g.default.log("No session available to addPersonalDataItems"),null;if(!r.length)return[];const a=r[0].kwType;if(r.find((e=>e.kwType!==a)))return g.default.log("Can not call addPersonalDataItems with different kwType"),null;const i=e.getPersonalData(),l=[],u=[],p=[],S=(0,O.platformInfoSelector)(e.getState());for(const t of r){const r=await L(e,t,i);if(r){l.push(r);const a=Boolean(null===(n=t.content)||void 0===n?void 0:n.id);(0,o.isCredential)(r)&&p.push(r.Id),a&&(0,s.isChangeHistoryCandidate)(r)&&u.push((0,s.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:i,change:(0,c.makeUpdateChange)(r),userLogin:e.getUserLogin(),platformInfo:S}))}}const y=l.map((t=>({action:"add",from:"csv_import",itemEdited:t,currentItemsCount:e.getPersonalData().credentials.length})));if((0,d.sendPersonalDataEditionUsageLogsMultiple)(e,y),!l.length)return[];let v=null;const A=(0,C.getInstance)(),E=(0,P.getInstance)();if(p.length>0){v=E.lockTopic("healthUpdates");const e={credentialIds:p,type:"credentialUpdates"};await A.add("healthUpdates",e);const t={credentialIds:p,type:"credentialUpdates"};await A.add("iconsUpdates",t)}return e.dispatch((0,m.savePersonalDataItems)(l,a,u)),N[a]&&N[a].afterSave&&l.forEach((t=>N[a].afterSave(e,t))),v&&E.releaseTopic("healthUpdates",v),t.getInstance().user.persistPersonalData(),l},t.updatePersonalDataUsageMetadata=function(e,t,r,s){const c=a.default[s],d=(0,i.cleanUrlForPersonalData)(r),l=e.getPersonalData()[c],y=Array.isArray(l)?(0,w.findDataModelObject)(t,l):null;if(!y)return void u.sendExceptionLog({message:`[PersonalData] - updatePersonalDataUsageMetadata: No ${c} found for provided ID to update usage metadata`,code:p.ExceptionCriticality.WARNING});g.default.log(`[Data] Updating ${c} ${t} usage metadata`);const v={...y,LastUse:(0,S.getUnixTimestamp)()};if((0,o.isCredential)(v)){const{NumberUse:e,TrustedUrlGroup:t,UseFixedUrl:r}=v;v.NumberUse=("number"==typeof e?e:0)+1,v.TrustedUrlGroup=(0,i.getUpdatedTrustedUrlList)(t,d),r||(0,n.getParsedUrl)(v.Url).rootDomain!==(0,n.getParsedUrl)(d).rootDomain||(v.Url=d)}e.dispatch((0,m.savePersonalDataItem)(v,s))},t.makePersonalDataItem=L},70240:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logDeleteVaultItem=t.logAddVaultItem=t.logEditVaultItem=void 0;const o=r(19935),n=r(97211),a=r(17509),i=r(55981),s=r(31267),c=async(e,t,r,c)=>{const d=r.SpaceId===i.PERSONAL_SPACE_ID?o.Space.Personal:o.Space.Professional,l=void 0!==c?c.map((e=>(0,s.getHermesFieldFromProperty)(r,e))).filter((e=>e)):void 0,u=s.dataModelTypeToItemType[r.kwType];if(e.logEvent(new o.UserUpdateVaultItemEvent({action:t,itemId:r.Id,itemType:u,fieldsEdited:l,space:d})),r.kwType===n.DataModelType.KWAuthentifiant){const n=r,i=(0,a.extractRootDomain)(n.Url),s="string"==typeof i?i:"";e.logEvent(new o.AnonymousUpdateCredentialEvent({action:t,domain:{id:await(0,o.hashDomain)(s),type:o.DomainType.Web},fieldList:l,space:d}))}};t.logEditVaultItem=(e,t,r)=>{const n=(0,s.getUpdatedProperties)(t,r);c(e,o.Action.Edit,t,n)};t.logAddVaultItem=(e,t)=>c(e,o.Action.Add,t);t.logDeleteVaultItem=(e,t)=>c(e,o.Action.Delete,t)},31267:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUpdatedProperties=t.getHermesFieldFromProperty=t.dataModelTypeToItemType=void 0;const o=r(19935),n=r(97211);t.dataModelTypeToItemType={[n.DataModelType.KWAuthentifiant]:o.ItemType.Credential,[n.DataModelType.KWSecureNote]:o.ItemType.SecureNote,[n.DataModelType.KWIdentity]:o.ItemType.Identity,[n.DataModelType.KWEmail]:o.ItemType.Email,[n.DataModelType.KWPhone]:o.ItemType.Phone,[n.DataModelType.KWAddress]:o.ItemType.Address,[n.DataModelType.KWCompany]:o.ItemType.Company,[n.DataModelType.KWPersonalWebsite]:o.ItemType.Website,[n.DataModelType.KWPaymentMean_creditCard]:o.ItemType.CreditCard,[n.DataModelType.KWBankStatement]:o.ItemType.BankStatement,[n.DataModelType.KWIDCard]:o.ItemType.IdCard,[n.DataModelType.KWSocialSecurityStatement]:o.ItemType.SocialSecurity,[n.DataModelType.KWDriverLicence]:o.ItemType.DriverLicence,[n.DataModelType.KWPassport]:o.ItemType.Passport,[n.DataModelType.KWFiscalStatement]:o.ItemType.FiscalStatement};const a={Title:o.Field.Title,Content:o.Field.Content,Category:o.Field.Category,SpaceId:o.Field.Space},i={Title:o.Field.Title,FirstName:o.Field.FirstName,MiddleName:o.Field.MiddleName,LastName:o.Field.LastName,BirthDate:o.Field.BirthDate,BirthPlace:o.Field.BirthPlace,Pseudo:o.Field.Pseudo,SpaceId:o.Field.Space},s={Email:o.Field.Email,Type:o.Field.Type,EmailName:o.Field.EmailName,SpaceId:o.Field.Space},c={Number:o.Field.Number,PhoneName:o.Field.PhoneName,Type:o.Field.Type,SpaceId:o.Field.Space},d={StreetNumber:o.Field.StreetNumber,StreetName:o.Field.StreetName,StreetTitle:o.Field.StreetTitle,City:o.Field.City,State:o.Field.State,StateLevel2:o.Field.StateLevel2,StateNumber:o.Field.StateNumber,ZipCode:o.Field.ZipCode,Country:o.Field.Country,AddressName:o.Field.AddressName,Receiver:o.Field.Receiver,Building:o.Field.Building,Floor:o.Field.Floor,Door:o.Field.Door,LinkedPhone:o.Field.LinkedPhone,PersonalNote:o.Field.Note,SpaceId:o.Field.Space},l={Name:o.Field.Name,JobTitle:o.Field.JobTitle,SpaceId:o.Field.Space},u={Website:o.Field.Website,Name:o.Field.Name,SpaceId:o.Field.Space},p={Name:o.Field.Name,OwnerName:o.Field.OwnerName,CardNumber:o.Field.CardNumber,SecurityCode:o.Field.SecurityCode,ExpireMonth:o.Field.ExpireDate,ExpireYear:o.Field.ExpireDate,Color:o.Field.Color,SpaceId:o.Field.Space},S={BankAccountName:o.Field.Name,BankAccountOwner:o.Field.Owner,BankAccountBIC:o.Field.Bic,BankAccountIBAN:o.Field.Iban,BankAccountBank:o.Field.Bank,SpaceId:o.Field.Space},g={Fullname:o.Field.Fullname,Number:o.Field.Number,DeliveryDate:o.Field.DeliveryDate,ExpireDate:o.Field.ExpireDate,LinkedIdentity:o.Field.LinkedIdentity,Sex:o.Field.Sex,DateOfBirth:o.Field.DateOfBirth,SpaceId:o.Field.Space},m={SocialSecurityFullname:o.Field.SocialSecurityFullname,SocialSecurityNumber:o.Field.SocialSecurityNumber,LinkedIdentity:o.Field.LinkedIdentity,Sex:o.Field.Sex,DateOfBirth:o.Field.DateOfBirth,SpaceId:o.Field.Space},y={Fullname:o.Field.Fullname,Number:o.Field.Number,DeliveryDate:o.Field.DeliveryDate,ExpireDate:o.Field.ExpireDate,State:o.Field.State,LinkedIdentity:o.Field.LinkedIdentity,Sex:o.Field.Sex,DateOfBirth:o.Field.DateOfBirth,SpaceId:o.Field.Space},v={Fullname:o.Field.Fullname,Number:o.Field.Number,DeliveryDate:o.Field.DeliveryDate,DeliveryPlace:o.Field.DeliveryPlace,ExpireDate:o.Field.ExpireDate,LinkedIdentity:o.Field.LinkedIdentity,Sex:o.Field.Sex,DateOfBirth:o.Field.DateOfBirth,SpaceId:o.Field.Space},A={FiscalNumber:o.Field.FiscalNumber,TeledeclarantNumber:o.Field.TeledeclarantNumber,SpaceId:o.Field.Space};t.getHermesFieldFromProperty=(e,t)=>{switch(e.kwType){case n.DataModelType.KWAuthentifiant:return((e,t)=>{switch(t){case"Email":return o.Field.Email;case"Login":return o.Field.Login;case"SecondaryLogin":return o.Field.SecondaryLogin;case"Password":return o.Field.Password;case"AutoLogin":return e.AutoLogin?o.Field.AutoLoginOn:o.Field.AutoLoginOff;case"AutoProtected":return e.AutoProtected?o.Field.MpProtectedOn:o.Field.MpProtectedOff;case"Url":return o.Field.Website;case"Category":return o.Field.Category;case"Note":return o.Field.Note;case"SubdomainOnly":return e.SubdomainOnly?o.Field.SubdomainOnlyOn:o.Field.SubdomainOnlyOff;case"Title":return o.Field.Title;case"SpaceId":return o.Field.Space}})(e,t);case n.DataModelType.KWSecureNote:return a[t];case n.DataModelType.KWIdentity:return i[t];case n.DataModelType.KWEmail:return s[t];case n.DataModelType.KWPhone:return c[t];case n.DataModelType.KWAddress:return d[t];case n.DataModelType.KWCompany:return l[t];case n.DataModelType.KWPersonalWebsite:return u[t];case n.DataModelType.KWPaymentMean_creditCard:return p[t];case n.DataModelType.KWBankStatement:return S[t];case n.DataModelType.KWIDCard:return g[t];case n.DataModelType.KWSocialSecurityStatement:return m[t];case n.DataModelType.KWDriverLicence:return y[t];case n.DataModelType.KWPassport:return v[t];case n.DataModelType.KWFiscalStatement:return A[t]}};t.getUpdatedProperties=(e,t)=>Object.getOwnPropertyNames(e).filter((r=>{const o=void 0!==e[r],n=e[r]!==t[r];return o&&n}))},10675:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.lastUseMapper=void 0;t.lastUseMapper=e=>e.LastUse||-1},68410:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeInputPersonalData=void 0;const o=r(28060),n=e=>"string"==typeof e?e.replace(new RegExp("([^\t\n\r -퟿-�𐀀-􏿿])","gu"),""):e;t.sanitizeInputPersonalData=e=>(0,o.mapObjIndexed)(n,e)},47880:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.personalDataSelector=t.personalDataItemsOfTypeSelector=void 0;const o=r(9473);t.personalDataItemsOfTypeSelector=(e,t)=>e.userSession&&e.userSession.personalData&&t.reduce(((t,r)=>t.concat(e.userSession.personalData[o.default[r]])),[]);t.personalDataSelector=e=>e.userSession&&e.userSession.personalData},41147:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.filterDataModelObjects=t.findDataModelObject=void 0;const o=r(28060),n=r(9473);t.findDataModelObject=(e,t)=>{const r=(e||"").toUpperCase();return(t||[]).find((e=>!!(null==e?void 0:e.Id)&&r===e.Id.toUpperCase()))};t.filterDataModelObjects=(e,t,r)=>{const a=(0,o.unnest)((0,o.values)((0,o.omit)(r,(0,o.pick)(n.PERSONAL_DATA_COLLECTIONS_KEYS,e)))),i=(0,o.map)(o.toUpper,t),s=(0,o.propSatisfies)((e=>(0,o.contains)((e||"").toUpperCase(),i)),"Id");return(0,o.filter)(s,a)}},20681:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(61292),n=r(12564);t.config={commands:{},queries:{getAddress:{selector:o.viewedAddressSelector},getAddresses:{selector:o.viewedQueriedAddressesSelector}},liveQueries:{liveAddress:{operator:n.getAddress$},liveAddresses:{operator:n.addresses$}}}},40583:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(94443),t)},58429:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeAddressSpecificProps=t.makeNewAddress=t.makeUpdatedAddress=void 0;const o=r(28060),n=r(97211),a=r(11117),i=r(74818),s=r(36109),c=r(31891);function d(e,t){const r=(0,o.defaultTo)(""),a=t.content,s=(0,i.getLocaleFormat)(e,t);return{AddressFull:r(a.addressFull),AddressName:a.addressName||r(a.addressFull),Building:r(a.building),City:r(a.city),Country:n.Country[s].toLocaleLowerCase(),DigitCode:r(a.digitCode),Door:r(a.door),Floor:r(a.floor),LinkedPhone:r(a.linkedPhone),PersonalNote:r(a.personalNote),Receiver:r(a.receiver),Stairs:r(a.stairs),State:(0,i.getValidState)(s,a.state),StateLevel2:r(a.stateLevel2),StateNumber:r(a.stateNumber),StreetName:r(a.streetName),StreetNumber:r(a.streetNumber),StreetTitle:r(a.streetTitle),ZipCode:r(a.zipCode)}}t.makeUpdatedAddress=async function(e,t){return c.default.log(`[Data] Updating existing Address with id: ${t.Id}`),{...t,...(0,a.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,s.getUnixTimestamp)()}),...d(t,e)}},t.makeNewAddress=async function(e){return c.default.log("[Data] Adding new Address"),{...(0,a.makeNewPersonalDataItemBase)(e),...d(null,e)}},t.makeAddressSpecificProps=d},12564:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAddress$=t.addresses$=void 0;const o=r(18948),n=r(3343),a=r(85564),i=r(61292);t.addresses$=(0,a.getLivePersonalInfo)(i.getLiveAddressesSelector);t.getAddress$=e=>{const t=(0,i.getViewedAddressSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},81516:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAddressMappers=void 0;const o=r(10675);t.getAddressMappers=()=>({spaceId:e=>e.SpaceId,lastUse:o.lastUseMapper,id:e=>e.Id})},97320:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addressMatch=t.searchGetters=void 0;const o=r(57748),n=r(37047);t.searchGetters=[(0,o.stringProp)("AddressFull"),(0,o.stringProp)("AddressName"),(0,o.stringProp)("City"),(0,o.stringProp)("Receiver"),(0,o.stringProp)("StreetNumber"),(0,o.stringProp)("ZipCode")],t.addressMatch=(0,n.match)(t.searchGetters)},61292:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedAddressSelector=t.viewedAddressSelector=t.getLiveAddressesSelector=t.viewedQueriedAddressesSelector=t.addressMappersSelector=t.addressSelector=t.addressesSelector=void 0;const o=r(28060),n=r(97320),a=r(81516),i=r(54717),s=r(80398),c=r(3259),d=r(66771),l=r(41147),u=r(32034),p=r(86965),S=r(52931);t.addressesSelector=(0,u.createSelector)((e=>e.userSession.personalData.addresses),S.quarantinedSpacesSelector,p.filterOutQuarantinedItems);t.addressSelector=(e,r)=>{const o=(0,t.addressesSelector)(e);return(0,l.findDataModelObject)(r,o)};t.addressMappersSelector=e=>(0,a.getAddressMappers)();const g=()=>n.addressMatch,m=(0,c.getQuerySelector)(t.addressesSelector,g,t.addressMappersSelector);t.viewedQueriedAddressesSelector=(0,o.compose)((0,s.viewListResults)(i.listView),m),t.getLiveAddressesSelector=(0,d.makeLiveSelectorGetter)(t.addressesSelector,(()=>i.listView),g,t.addressMappersSelector);t.viewedAddressSelector=(e,r)=>{const o=(0,t.addressSelector)(e,r);return(0,i.maybeDetailView)(o)};t.getViewedAddressSelector=e=>{const r=(0,u.createSelector)(t.addressesSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,u.createSelector)(r,i.maybeDetailView)}},94443:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},54717:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const o=r(28060),n=r(18758),a=(0,o.defaultTo)("");t.detailView=e=>({...(0,n.dataModelDetailView)(e),addressFull:a(e.AddressFull),addressName:a(e.AddressName),building:a(e.Building),city:a(e.City),country:a(e.Country),digitCode:a(e.DigitCode),door:a(e.Door),floor:a(e.Floor),linkedPhone:a(e.LinkedPhone),personalNote:a(e.PersonalNote),receiver:a(e.Receiver),stairs:a(e.Stairs),state:a(e.State),stateLevel2:a(e.StateLevel2),stateNumber:a(e.StateNumber),streetName:a(e.StreetName),streetNumber:a(e.StreetNumber),streetTitle:a(e.StreetTitle),zipCode:a(e.ZipCode)}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView);t.itemView=e=>({...(0,n.dataModelItemView)(e),addressName:a(e.AddressName),addressFull:a(e.AddressFull),city:a(e.City),streetNumber:a(e.StreetNumber),zipCode:a(e.ZipCode)});t.listView=e=>e.map(t.itemView)},90032:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(40583),t),n(r(47082),t),n(r(94695),t),n(r(87486),t),n(r(88276),t),n(r(82225),t)},82438:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(4899),n=r(92559);t.config={commands:{},queries:{getCompany:{selector:o.viewedCompanySelector},getCompanies:{selector:o.viewedQueriedCompaniesSelector}},liveQueries:{liveCompanies:{operator:n.companies$},liveCompany:{operator:n.getCompany$}}}},47082:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(6150),t)},77429:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeCompanySpecificProps=t.makeNewCompany=t.makeUpdatedCompany=void 0;const o=r(28060),n=r(11117),a=r(36109),i=r(31891);function s(e){const t=(0,o.defaultTo)("");return{JobTitle:t(e.content.jobTitle),Name:t(e.content.name),PersonalNote:t(e.content.personalNote)}}t.makeUpdatedCompany=async function(e,t){return i.default.log(`[Data] Updating existing Company with id: ${t.Id}`),{...t,...(0,n.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,a.getUnixTimestamp)()}),...s(e)}},t.makeNewCompany=async function(e){return{...(0,n.makeNewPersonalDataItemBase)(e),...s(e)}},t.makeCompanySpecificProps=s},92559:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCompany$=t.companies$=void 0;const o=r(18948),n=r(3343),a=r(85564),i=r(4899);t.companies$=(0,a.getLivePersonalInfo)(i.getLiveCompaniesSelector);t.getCompany$=e=>{const t=(0,i.getViewedCompanySelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},70311:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCompanyMappers=void 0;const o=r(10675);t.getCompanyMappers=()=>({spaceId:e=>e.SpaceId,lastUse:o.lastUseMapper,id:e=>e.Id})},41029:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.companyMatch=t.searchGetters=void 0;const o=r(37047),n=r(57748);t.searchGetters=[(0,n.stringProp)("JobTitle"),(0,n.stringProp)("Name")],t.companyMatch=(0,o.match)(t.searchGetters)},4899:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedCompanySelector=t.viewedCompanySelector=t.getLiveCompaniesSelector=t.viewedQueriedCompaniesSelector=t.companyMappersSelector=t.companySelector=t.companiesSelector=void 0;const o=r(28060),n=r(41029),a=r(66396),i=r(70311),s=r(80398),c=r(3259),d=r(66771),l=r(41147),u=r(32034),p=r(86965),S=r(52931);t.companiesSelector=(0,u.createSelector)((e=>e.userSession.personalData.companies),S.quarantinedSpacesSelector,p.filterOutQuarantinedItems);t.companySelector=(e,r)=>{const o=(0,t.companiesSelector)(e);return(0,l.findDataModelObject)(r,o)};t.companyMappersSelector=e=>(0,i.getCompanyMappers)();const g=()=>n.companyMatch,m=(0,c.getQuerySelector)(t.companiesSelector,g,t.companyMappersSelector);t.viewedQueriedCompaniesSelector=(0,o.compose)((0,s.viewListResults)(a.listView),m),t.getLiveCompaniesSelector=(0,d.makeLiveSelectorGetter)(t.companiesSelector,(()=>a.listView),g,t.companyMappersSelector);t.viewedCompanySelector=(e,r)=>{const o=(0,t.companySelector)(e,r);return(0,a.maybeDetailView)(o)};t.getViewedCompanySelector=e=>{const r=(0,u.createSelector)(t.companiesSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,u.createSelector)(r,a.maybeDetailView)}},6150:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},66396:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const o=r(28060),n=r(18758),a=(0,o.defaultTo)("");t.detailView=e=>({...(0,n.dataModelDetailView)(e),name:a(e.Name),jobTitle:a(e.JobTitle),personalNote:a(e.PersonalNote)}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView);t.itemView=e=>({...(0,n.dataModelItemView)(e),name:a(e.Name),jobTitle:a(e.JobTitle)});t.listView=e=>e.map(t.itemView)},69892:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(49575),n=r(88239);t.config={commands:{},queries:{getEmail:{selector:o.viewedEmailSelector},getEmails:{selector:o.viewedQueriedEmailsSelector}},liveQueries:{liveEmail:{operator:n.getEmail$},liveEmails:{operator:n.emails$}}}},94695:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(65919),t)},66347:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeEmailSpecificProps=t.makeNewEmail=t.makeUpdatedEmail=void 0;const o=r(28060),n=r(11117),a=r(36109),i=r(31891);function s(e){const t=(0,o.defaultTo)("");return{Email:t(e.content.email),EmailName:t(e.content.emailName),Type:e.content.type||"PERSO"}}t.makeUpdatedEmail=async function(e,t){return i.default.log(`[Data] Updating existing Email with id: ${t.Id}`),{...t,...(0,n.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,a.getUnixTimestamp)()}),...s(e)}},t.makeNewEmail=async function(e){return i.default.log("[Data] Adding new Email"),{...(0,n.makeNewPersonalDataItemBase)(e),...s(e)}},t.makeEmailSpecificProps=s},88239:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmail$=t.emails$=void 0;const o=r(18948),n=r(3343),a=r(85564),i=r(49575);t.emails$=(0,a.getLivePersonalInfo)(i.getLiveEmailsSelector);t.getEmail$=e=>{const t=(0,i.getViewedEmailSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},36867:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmailMappers=void 0;const o=r(10675);t.getEmailMappers=()=>({spaceId:e=>e.SpaceId,lastUse:o.lastUseMapper,id:e=>e.Id})},29339:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.emailMatch=t.searchGetters=void 0;const o=r(37047),n=r(57748);t.searchGetters=[(0,n.stringProp)("Email"),(0,n.stringProp)("EmailName")],t.emailMatch=(0,o.match)(t.searchGetters)},49575:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedEmailSelector=t.viewedEmailSelector=t.getLiveEmailsSelector=t.viewedQueriedEmailsSelector=t.emailMappersSelector=t.emailSelector=t.emailsSelector=t.countAllEmailsSelector=void 0;const o=r(28060),n=r(29339),a=r(36867),i=r(70671),s=r(80398),c=r(3259),d=r(66771),l=r(41147),u=r(32034),p=r(52931),S=r(86965);t.countAllEmailsSelector=e=>e.userSession.personalData.emails.length,t.emailsSelector=(0,u.createSelector)((e=>e.userSession.personalData.emails),p.quarantinedSpacesSelector,S.filterOutQuarantinedItems);t.emailSelector=(e,r)=>{const o=(0,t.emailsSelector)(e);return(0,l.findDataModelObject)(r,o)};t.emailMappersSelector=e=>(0,a.getEmailMappers)();const g=()=>n.emailMatch,m=(0,c.getQuerySelector)(t.emailsSelector,g,t.emailMappersSelector);t.viewedQueriedEmailsSelector=(0,o.compose)((0,s.viewListResults)(i.listView),m),t.getLiveEmailsSelector=(0,d.makeLiveSelectorGetter)(t.emailsSelector,(()=>i.listView),g,t.emailMappersSelector);t.viewedEmailSelector=(e,r)=>{const o=(0,t.emailSelector)(e,r);return(0,i.maybeDetailView)(o)};t.getViewedEmailSelector=e=>{const r=(0,u.createSelector)(t.emailsSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,u.createSelector)(r,i.maybeDetailView)}},65919:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},70671:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const o=r(28060),n=r(18758),a=(0,o.defaultTo)("");t.detailView=e=>({...(0,n.dataModelDetailView)(e),email:a(e.Email),name:a(e.EmailName),type:e.Type||"NO_TYPE"}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView);t.itemView=e=>({...(0,n.dataModelItemView)(e),email:a(e.Email),name:a(e.EmailName),type:e.Type||"NO_TYPE"});t.listView=e=>e.map(t.itemView)},7919:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(86324),n=r(14417);t.config={commands:{},queries:{getIdentities:{selector:o.viewedQueriedIdentitiesSelector},getIdentitiesCount:{selector:o.identitiesCountSelector},getIdentity:{selector:o.viewedIdentitySelector}},liveQueries:{liveIdentities:{operator:n.identities$},liveIdentitiesCount:{operator:n.identitiesCount$},liveIdentity:{operator:n.getIdentity$}}}},87486:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(42573),t)},96887:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeIdentitySpecificProps=t.makeNewIdentity=t.makeUpdatedIdentity=void 0;const o=r(28060),n=r(11117),a=r(31891),i=r(36109);function s(e){const t=(0,o.defaultTo)("");return{FirstName:t(e.content.firstName),MiddleName:t(e.content.middleName),LastName:t(e.content.lastName),LastName2:t(e.content.lastName2),Pseudo:t(e.content.pseudo),BirthDate:t(e.content.birthDate),BirthPlace:t(e.content.birthPlace),Title:t(e.content.title)}}t.makeUpdatedIdentity=async function(e,t){return a.Debugger.log(`[Data] Updating existing Identity with id: ${t.Id}`),{...t,...(0,n.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,i.getUnixTimestamp)()}),...s(e)}},t.makeNewIdentity=async function(e){return a.Debugger.log("[Data] Adding new Identity"),{...(0,n.makeNewPersonalDataItemBase)(e),...s(e)}},t.makeIdentitySpecificProps=s},14417:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getIdentity$=t.identitiesCount$=t.identities$=void 0;const o=r(18948),n=r(3343),a=r(85564),i=r(86324);t.identities$=(0,a.getLivePersonalInfo)(i.getLiveIdentitiesSelector);t.identitiesCount$=()=>(0,o.pipe)((0,n.map)(i.identitiesCountSelector),(0,n.distinctUntilChanged)());t.getIdentity$=e=>{const t=(0,i.getViewedIdentitySelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},99591:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getIdentityMappers=void 0;const o=r(10675);t.getIdentityMappers=()=>({spaceId:e=>e.SpaceId,lastUse:o.lastUseMapper,id:e=>e.Id})},12546:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.identityMatch=t.searchGetters=void 0;const o=r(37047),n=r(57748);t.searchGetters=[(0,n.stringProp)("BirthDate"),(0,n.stringProp)("BirthPlace"),(0,n.stringProp)("FirstName"),(0,n.stringProp)("LastName"),(0,n.stringProp)("LastName2"),(0,n.stringProp)("MiddleName"),(0,n.stringProp)("Pseudo")],t.identityMatch=(0,o.match)(t.searchGetters)},86324:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedIdentitySelector=t.viewedIdentitySelector=t.getLiveIdentitiesSelector=t.identitiesCountSelector=t.viewedQueriedIdentitiesSelector=t.identityMappersSelector=t.identitySelector=t.identitiesByIdSelector=t.identitiesSelector=void 0;const o=r(28060),n=r(12546),a=r(22594),i=r(80398),s=r(3259),c=r(66771),d=r(41147),l=r(32034),u=r(99591),p=r(86965),S=r(52931);t.identitiesSelector=(0,l.createSelector)((e=>e.userSession.personalData.identities),S.quarantinedSpacesSelector,p.filterOutQuarantinedItems),t.identitiesByIdSelector=(0,l.createSelector)(t.identitiesSelector,(e=>e.reduce(((e,t)=>(e[t.Id]=t,e)),{})));t.identitySelector=(e,r)=>{const o=(0,t.identitiesSelector)(e);return(0,d.findDataModelObject)(r,o)};t.identityMappersSelector=e=>(0,u.getIdentityMappers)();const g=()=>n.identityMatch,m=(0,s.getQuerySelector)(t.identitiesSelector,g,t.identityMappersSelector);t.viewedQueriedIdentitiesSelector=(0,o.compose)((0,i.viewListResults)(a.listView),m);t.identitiesCountSelector=e=>{var t,r;return null!==(r=null===(t=e.userSession.personalData.identities)||void 0===t?void 0:t.length)&&void 0!==r?r:0},t.getLiveIdentitiesSelector=(0,c.makeLiveSelectorGetter)(t.identitiesSelector,(()=>a.listView),g,t.identityMappersSelector);t.viewedIdentitySelector=(e,r)=>{const o=(0,t.identitySelector)(e,r);return(0,a.maybeDetailView)(o)};t.getViewedIdentitySelector=e=>{const r=(0,l.createSelector)(t.identitiesSelector,(t=>(0,d.findDataModelObject)(e,t)));return(0,l.createSelector)(r,a.maybeDetailView)}},42573:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},22594:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const o=r(28060),n=r(18758),a=(0,o.defaultTo)("");t.detailView=e=>({...(0,n.dataModelDetailView)(e),birthDate:a(e.BirthDate),birthPlace:a(e.BirthPlace),firstName:a(e.FirstName),lastName2:a(e.LastName2),lastName:a(e.LastName),middleName:a(e.MiddleName),pseudo:a(e.Pseudo),title:e.Title}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView);t.itemView=e=>({...(0,n.dataModelItemView)(e),birthDate:a(e.BirthDate),birthPlace:a(e.BirthPlace),firstName:a(e.FirstName),lastName2:a(e.LastName2),lastName:a(e.LastName),middleName:a(e.MiddleName),pseudo:a(e.Pseudo),title:e.Title});t.listView=e=>e.map(t.itemView)},35890:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(42884),n=r(34876);t.config={commands:{},queries:{getPersonalWebsite:{selector:o.viewedPersonalWebsiteSelector},getPersonalWebsites:{selector:o.viewedQueriedPersonalWebsitesSelector}},liveQueries:{livePersonalWebsite:{operator:n.getPersonalWebsite$},livePersonalWebsites:{operator:n.personalWebsites$}}}},88276:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(48784),t)},14960:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makePersonalWebsiteSpecificProps=t.makeNewPersonalWebsite=t.makeUpdatedPersonalWebsite=void 0;const o=r(28060),n=r(11117),a=r(36109),i=r(31891);function s(e){const t=(0,o.defaultTo)("");return{Website:t(e.content.website),Name:t(e.content.name)}}t.makeUpdatedPersonalWebsite=async function(e,t){return i.default.log(`[Data] Updating existing PersonalWebsite with id: ${t.Id}`),{...t,...(0,n.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,a.getUnixTimestamp)()}),...s(e)}},t.makeNewPersonalWebsite=async function(e){return i.default.log("[Data] Adding new PersonalWebsite"),{...(0,n.makeNewPersonalDataItemBase)(e),...s(e)}},t.makePersonalWebsiteSpecificProps=s},34876:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPersonalWebsite$=t.personalWebsites$=void 0;const o=r(18948),n=r(3343),a=r(85564),i=r(42884);t.personalWebsites$=(0,a.getLivePersonalInfo)(i.getLivePersonalWebsitesSelector);t.getPersonalWebsite$=e=>{const t=(0,i.getViewedPersonalWebsiteSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},50610:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPersonalWebsiteMappers=void 0;const o=r(10675);t.getPersonalWebsiteMappers=()=>({spaceId:e=>e.SpaceId,lastUse:o.lastUseMapper,id:e=>e.Id})},88490:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.personalWebsiteMatch=t.searchGetters=void 0;const o=r(37047),n=r(57748);t.searchGetters=[(0,n.stringProp)("Name"),(0,n.stringProp)("Website")],t.personalWebsiteMatch=(0,o.match)(t.searchGetters)},42884:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedPersonalWebsiteSelector=t.viewedPersonalWebsiteSelector=t.getLivePersonalWebsitesSelector=t.viewedQueriedPersonalWebsitesSelector=t.personalWebsiteMappersSelector=t.personalWebsiteSelector=t.personalWebsitesSelector=void 0;const o=r(28060),n=r(32034),a=r(88490),i=r(10537),s=r(80398),c=r(3259),d=r(66771),l=r(41147),u=r(50610),p=r(86965),S=r(52931);t.personalWebsitesSelector=(0,n.createSelector)((e=>e.userSession.personalData.personalWebsites),S.quarantinedSpacesSelector,p.filterOutQuarantinedItems);t.personalWebsiteSelector=(e,r)=>{const o=(0,t.personalWebsitesSelector)(e);return(0,l.findDataModelObject)(r,o)};t.personalWebsiteMappersSelector=e=>(0,u.getPersonalWebsiteMappers)();const g=()=>a.personalWebsiteMatch,m=(0,c.getQuerySelector)(t.personalWebsitesSelector,g,t.personalWebsiteMappersSelector);t.viewedQueriedPersonalWebsitesSelector=(0,o.compose)((0,s.viewListResults)(i.listView),m),t.getLivePersonalWebsitesSelector=(0,d.makeLiveSelectorGetter)(t.personalWebsitesSelector,(()=>i.listView),g,t.personalWebsiteMappersSelector);t.viewedPersonalWebsiteSelector=(e,r)=>{const o=(0,t.personalWebsiteSelector)(e,r);return(0,i.maybeDetailView)(o)};t.getViewedPersonalWebsiteSelector=e=>{const r=(0,n.createSelector)(t.personalWebsitesSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,n.createSelector)(r,i.maybeDetailView)}},48784:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},10537:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const o=r(28060),n=r(18758),a=(0,o.defaultTo)("");t.detailView=e=>({...(0,n.dataModelDetailView)(e),name:a(e.Name),personalNote:a(e.PersonalNote),website:a(e.Website)}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView);t.itemView=e=>({...(0,n.dataModelItemView)(e),name:a(e.Name),website:a(e.Website)});t.listView=e=>e.map(t.itemView)},62723:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(63014),n=r(62464);t.config={commands:{},queries:{getPhone:{selector:o.viewedPhoneSelector},getPhones:{selector:o.viewedQueriedPhonesSelector}},liveQueries:{livePhone:{operator:n.getPhone$},livePhones:{operator:n.phones$}}}},82225:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(80949),t)},98247:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parsePhoneNumbers=t.makePhoneSpecificProps=t.makeNewPhone=t.makeUpdatedPhone=void 0;const o=r(28060),n=r(33321),a=r(97211),i=r(11117),s=r(38215),c=r(74818),d=r(36109),l=r(43728),u=r(31891);function p(e){const t=(0,o.defaultTo)(""),{Number:r,NumberInternational:n,NumberNational:i}=S(e);return{Number:r,NumberInternational:n,NumberNational:i,PersonalNote:t(e.content.personalNote),PhoneName:e.content.phoneName||i,Type:a.PhoneType[e.content.type]||a.PhoneType.PHONE_TYPE_ANY}}function S(e){const{localeFormat:t,number:r}=e.content;if(!r)return{Number:"",NumberInternational:"",NumberNational:""};const o=(0,c.isProposedLocaleLocalized)(t)&&a.Country[t]||a.Country[(0,s.getPlatformInfo)().country]||a.Country.US;if(!(o?(0,n.isValidNumber)(r,o):(0,n.isValidNumber)(r)))return{Number:(0,l.removeNonDigitCharacters)(r),NumberInternational:r,NumberNational:r};const i=(0,n.formatNumber)({country:o,phone:r},"National"),d=(0,n.formatNumber)({country:o,phone:r},"International");return{Number:(0,l.removeNonDigitCharacters)(r),NumberInternational:d,NumberNational:i}}t.makeUpdatedPhone=async function(e,t){return u.default.log(`[Data] Updating existing Phone with id: ${t.Id}`),{...t,...(0,i.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,d.getUnixTimestamp)()}),...p(e)}},t.makeNewPhone=async function(e){return u.default.log("[Data] Adding new Phone"),{...(0,i.makeNewPersonalDataItemBase)(e),...p(e)}},t.makePhoneSpecificProps=p,t.parsePhoneNumbers=S},62464:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPhone$=t.phones$=void 0;const o=r(18948),n=r(3343),a=r(85564),i=r(63014);t.phones$=(0,a.getLivePersonalInfo)(i.getLivePhonesSelector);t.getPhone$=e=>{const t=(0,i.getViewedPhoneSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},88782:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPhoneMappers=void 0;const o=r(10675);t.getPhoneMappers=()=>({spaceId:e=>e.SpaceId,lastUse:o.lastUseMapper,id:e=>e.Id})},99852:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.phoneMatch=t.searchGetters=void 0;const o=r(37047),n=r(57748);t.searchGetters=[(0,n.stringProp)("Number"),(0,n.stringProp)("PhoneName")],t.phoneMatch=(0,o.match)(t.searchGetters)},63014:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedPhoneSelector=t.viewedPhoneSelector=t.getLivePhonesSelector=t.viewedQueriedPhonesSelector=t.phoneMappersSelector=t.phoneSelector=t.phonesSelector=void 0;const o=r(28060),n=r(99852),a=r(63390),i=r(88782),s=r(80398),c=r(3259),d=r(66771),l=r(41147),u=r(32034),p=r(86965),S=r(52931);t.phonesSelector=(0,u.createSelector)((e=>e.userSession.personalData.phones),S.quarantinedSpacesSelector,p.filterOutQuarantinedItems);t.phoneSelector=(e,r)=>{const o=(0,t.phonesSelector)(e);return(0,l.findDataModelObject)(r,o)};t.phoneMappersSelector=e=>(0,i.getPhoneMappers)();const g=()=>n.phoneMatch,m=(0,c.getQuerySelector)(t.phonesSelector,g,t.phoneMappersSelector);t.viewedQueriedPhonesSelector=(0,o.compose)((0,s.viewListResults)(a.listView),m),t.getLivePhonesSelector=(0,d.makeLiveSelectorGetter)(t.phonesSelector,(()=>a.listView),g,t.phoneMappersSelector);t.viewedPhoneSelector=(e,r)=>{const o=(0,t.phoneSelector)(e,r);return(0,a.maybeDetailView)(o)};t.getViewedPhoneSelector=e=>{const r=(0,u.createSelector)(t.phonesSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,u.createSelector)(r,a.maybeDetailView)}},80949:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},63390:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const o=r(28060),n=r(18758),a=(0,o.defaultTo)(""),i=e=>a(e.NumberInternational||e.NumberNational||e.Number);t.detailView=e=>({...(0,n.dataModelDetailView)(e),displayNumber:i(e),name:a(e.PhoneName),number:a(e.Number),numberInternational:a(e.NumberNational),numberNational:a(e.NumberNational),personalNote:a(e.PersonalNote),type:e.Type}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView);t.itemView=e=>({...(0,n.dataModelItemView)(e),displayNumber:i(e),name:a(e.PhoneName),numberInternational:a(e.NumberNational),number:a(e.Number),type:e.Type});t.listView=e=>e.map(t.itemView)},85564:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLivePersonalInfo=void 0;const o=r(18948),n=r(3343),a=r(6045),i=r(28807);t.getLivePersonalInfo=e=>t=>{const r=(0,a.parseToken)(t),s=e(r);return(0,o.pipe)((0,n.map)(s),(0,n.distinctUntilChanged)(((e,t)=>(0,i.sameBatch)(e.items,t.items)&&e.matchingCount===t.matchingCount)))}},37047:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.match=void 0;const o=r(78043);t.match=e=>(t,r)=>"string"==typeof t&&0!==t.length&&e.some((e=>{const n=e(r)||"";return(0,o.normalizeString)(n).includes(t)}))},57748:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.stringProp=void 0;const o=r(28060);t.stringProp=e=>(0,o.prop)(e)},80398:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewListResults=void 0;t.viewListResults=e=>({items:t,matchingCount:r})=>({items:e(t),matchingCount:r})},93982:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(38264),n=r(33165),a=r(93041),i=r(48541),s=r(25609),c=r(4097),d=r(87075),l=r(25926),u=r(33406),p=r(66007);t.config={commands:{downloadSecureFile:{handler:i.downloadSecureFileHandler},deleteSecureFile:{handler:c.deleteSecureFileHandler},addSecureFile:{handler:o.addSecureFileHandler},validateSecureFile:{handler:l.validateSecureFileHandler},commitSecureFile:{handler:s.commitSecureFileHandler},initSecureFilesStorageInfo:{handler:a.initSecureFilesStorageInfoHandler},chunkTransferDone:{handler:u.chunkTransferDoneHandler},clearSecureFilesState:{handler:p.clearSecureFileStateHandler}},queries:{getSecureFilesInfoList:{selector:n.secureFileInfoSelector},getSecureFilesQuota:{selector:n.secureFilesQuotaSelector},getFileDownloadProgress:{selector:n.secureFileDownloadSelector},getFileUploadProgress:{selector:n.secureFileUploadSelector}},liveQueries:{liveFileDownloadProgress:{operator:d.getFileDownloadProgress$},liveFileUploadProgress:{operator:d.getFileUploadProgress$},liveSecureFilesQuota:{operator:d.secureFilesQuota$}}}},16862:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(4685),t)},38264:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addSecureFileHandler=t.createSecureFile=void 0;const o=r(28354),n=r(22029),a=r(8153),i=r(4685),s=r(41751),c=r(87459),d=r(53528),l=r(24555),u=r(77176),p=r(73492),S=r(8682),g=r(33165),m=r(70693),y={success:!1,error:{code:i.SecureFileResultErrorCode.SERVER_ERROR}},v=Math.pow(1024,2)/2,A=e=>{switch(e){case i.SecureFileResultErrorCode.MAX_CONTENT_LENGTH_EXCEEDED:return i.SecureFileResultErrorCode.MAX_CONTENT_LENGTH_EXCEEDED;case i.SecureFileResultErrorCode.QUOTA_EXCEEDED:return i.SecureFileResultErrorCode.QUOTA_EXCEEDED;default:return i.SecureFileResultErrorCode.SERVER_ERROR}};async function E(e,t,r,n){try{const{cryptoConfig:a}=(0,d.parsePayload)("$1$noderivation$aes256$cbchmac$16$"),i=(0,u.getRandomValues)(32),S=await(0,c.hashAndSplitKey)(i),g=(0,p.generateIV)(),m=await(0,s.encryptAES256)(S.aes,g,e),y=await(0,s.signHashHmacSHA256)(S.hmac,(0,l.concatBuffers)(g,m)),v=(0,d.makeDashlaneSecureDataFlexible)(null,g,y,m,a),A=(0,d.convertDashlaneSecureDataFlexibleToTransportableData)(v),E=((e,t,r,n,a,i)=>{const s=`{${(0,o.v4)()}}`,c=Math.floor(Date.now()/1e3);return{kwType:"KWSecureFileInfo",Id:s,LastBackupTime:0,CryptoKey:(0,l.bufferToBase64)(t),DownloadKey:"",Filename:n,LocalSize:e.byteLength,RemoteSize:r.byteLength,Type:a,CreationDatetime:c,UserModificationDatetime:c,Owner:i}})(e,i,A,t,r,n);return{success:!0,secureFileDataBuffer:A,secureFileInfo:E}}catch(e){return{success:!1}}}t.createSecureFile=E,t.addSecureFileHandler=async function({wsService:e,storeService:t},r){const o=(0,a.userIdSelector)(t.getState());if(!(0,m.validateSecureFile)(r.fileName,r.fileType))return{success:!1,error:{code:i.SecureFileResultErrorCode.INVALID_FILE_TYPE}};let s;t.dispatch((0,S.secureFileStartUploadAction)(r.serializedContent.length)),t.dispatch((0,S.secureFileStartCipheringAction)());try{const e=JSON.parse(r.serializedContent);s=new Uint8Array(e).buffer}catch(e){return{success:!1,error:{code:i.SecureFileResultErrorCode.INTERNAL_ERROR}}}const{secureFileDataBuffer:c,secureFileInfo:d}=await E(s,r.fileName,r.fileType,o);if((0,g.secureFilesQuotaSelector)(t.getState()).remaining<c.byteLength)return{success:!1,error:{code:i.SecureFileResultErrorCode.QUOTA_EXCEEDED}};const l=setInterval((()=>{t.dispatch((0,S.secureFileUploadChunkAction)(v))}),1e3);let u=null;try{u=await e.secureFile.getUploadLink({contentLength:d.RemoteSize,secureFileInfoId:d.Id,login:o,uki:(0,n.ukiSelector)(t.getState())})}catch(e){return clearInterval(l),t.dispatch((0,S.secureFileUploadErrorAction)()),(e=>"getAdditionalInfo"in e?{success:!1,error:{code:A(e.getAdditionalInfo().webServiceSubMessage)}}:y)(e)}return 200===u.code?(d.DownloadKey=u.content.key,await async function(e,t){try{const r=t.content.url,o=new FormData;for(const e of Object.keys(t.content.fields))o.append(e,t.content.fields[e]);return o.append("key",`${t.content.key}`),o.append("acl",`${t.content.acl}`),o.append("file",new Blob([e])),204===(await fetch(r,{method:"POST",body:o})).status}catch(e){return!1}}(c,u)?(t.dispatch((0,S.secureFileSetStorageInfoAction)(u.content.quota)),clearInterval(l),t.dispatch((0,S.secureFileUploadDoneAction)()),t.dispatch((0,S.secureFileUploadClearAction)()),{success:!0,secureFileInfo:d}):(clearInterval(l),y)):(clearInterval(l),t.dispatch((0,S.secureFileUploadErrorAction)()),y)}},33406:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.chunkTransferDoneHandler=void 0;const o=r(8682);t.chunkTransferDoneHandler=async function({storeService:e},t){return e.dispatch((0,o.secureFileChunkReadyAction)(t)),Promise.resolve()}},66007:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearSecureFileStateHandler=void 0;const o=r(8682);t.clearSecureFileStateHandler=async function({storeService:e},t){return e.dispatch((0,o.secureFileClearAction)(t)),Promise.resolve()}},25609:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.commitSecureFileHandler=void 0;const o=r(22029),n=r(8153),a=r(1005);t.commitSecureFileHandler=async function({wsService:e,sessionService:t,storeService:r},{secureFileInfo:i}){if(200!==(await e.secureFile.commit({key:i.DownloadKey,secureFileInfoId:i.Id,login:(0,n.userIdSelector)(r.getState()),uki:(0,o.ukiSelector)(r.getState())})).code)return{success:!1};try{return r.dispatch((0,a.savePersonalDataItem)(i,i.kwType)),t.getInstance().user.persistPersonalData(),{success:!0}}catch(e){return{success:!1}}}},4097:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSecureFileHandler=void 0;const o=r(97211),n=r(22029),a=r(14438),i=r(8153),s=r(4685),c=r(8682);t.deleteSecureFileHandler=async(e,t)=>{const{storeService:r,wsService:d,eventLoggerService:l}=e,u=r.getState(),p=(0,i.userIdSelector)(u),S=(0,n.ukiSelector)(u),g=await(0,a.deletePersonalDataItem)({storeService:r,wsService:d,eventLoggerService:l},t.id);if(!g.success&&g.reason!==o.RemovePersonalDataItemFailureReason.NOT_FOUND)return{success:!1,error:{code:s.SecureFileResultErrorCode.INTERNAL_ERROR}};let m=null;try{m=await d.secureFile.delete({login:p,uki:S,secureFileInfoId:t.id})}catch(e){return{success:!1,error:{code:s.SecureFileResultErrorCode.SERVER_ERROR}}}return g.reason===o.RemovePersonalDataItemFailureReason.NOT_FOUND?{success:!1,error:{code:s.SecureFileResultErrorCode.FILE_NOT_FOUND}}:200!==m.code?{success:!1,error:{code:s.SecureFileResultErrorCode.SERVER_ERROR}}:(r.dispatch((0,c.secureFileSetStorageInfoAction)(m.content.quota)),{success:!0})}},48541:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.downloadSecureFileHandler=void 0;const o=r(4685),n=r(28060),a=r(8682),i=r(36592),s=r(60536),c=r(41890),d={success:!1,error:{code:o.SecureFileResultErrorCode.INTERNAL_ERROR}},l=15*Math.pow(1024,2);t.downloadSecureFileHandler=async(e,t)=>{const r=await(0,c.getDownloadLink)(e,t);if(!r)return d;const o=await(0,s.downloadFileFromStorage)(e,r,t);if(!o.success)return e.storeService.dispatch((0,a.secureFileDownloadErrorAction)(t.downloadKey)),d;e.storeService.dispatch((0,a.secureFileStartDecipheringAction)(t.downloadKey));const u=await(0,i.decipherSecureFileContent)(o.chunks,t.cryptoKey);if(null===u)return e.storeService.dispatch((0,a.secureFileDownloadErrorAction)(t.downloadKey)),d;const p=new Uint8Array(u),S=JSON.stringify(Array.from(p)),g=S.length>l?(0,n.splitEvery)(l,S):[S];return e.storeService.dispatch((0,a.secureFileChunkReadyAction)(t.downloadKey,g)),{success:!0}}},93041:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initSecureFilesStorageInfoHandler=void 0;const o=r(28354),n=r(22029),a=r(8153),i=r(4685),s=r(8682);t.initSecureFilesStorageInfoHandler=async function({wsService:e,storeService:t}){const r=(0,a.userIdSelector)(t.getState());let c=null;try{c=await e.secureFile.getUploadLink({contentLength:0,secureFileInfoId:(0,o.v4)(),login:r,uki:(0,n.ukiSelector)(t.getState())})}catch(e){return{success:!1,error:{code:i.SecureFileResultErrorCode.SERVER_ERROR}}}return 200===c.code?(t.dispatch((0,s.secureFileSetStorageInfoAction)(c.content.quota)),{success:!0}):(t.dispatch((0,s.secureFileSetStorageInfoAction)(null)),{success:!1})}},25926:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateSecureFileHandler=void 0;const o=r(45082),n=r(70693);t.validateSecureFileHandler=async function(e,t){return(0,n.validateSecureFile)(t.fileName,t.fileType)?{success:!0}:{success:!1,error:{code:o.SecureFileResultErrorCode.INVALID_FILE_TYPE}}}},87075:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.secureFilesQuota$=t.getFileUploadProgress$=t.getFileDownloadProgress$=void 0;const o=r(18948),n=r(3343),a=r(33165);t.getFileDownloadProgress$=e=>{const t=(0,a.getSecureFileDownloadSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())};t.getFileUploadProgress$=()=>(0,o.pipe)((0,n.map)(a.secureFileUploadSelector),(0,n.distinctUntilChanged)());t.secureFilesQuota$=()=>(0,o.pipe)((0,n.map)(a.secureFilesQuotaSelector),(0,n.distinctUntilChanged)())},33165:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.secureFilesQuotaSelector=t.getSecureFileDownloadSelector=t.secureFileUploadSelector=t.secureFileDownloadSelector=t.secureFileInfoSelector=void 0;const o=r(45082),n=r(28060);t.secureFileInfoSelector=e=>e.userSession.personalData.secureFileInfo;t.secureFileDownloadSelector=(e,t)=>{const r=e.userSession.secureFileStorageState.downloads[t];if(!r)return null;const a=(null==r?void 0:r.status)===o.FileDownloadStatus.ChunkReady?{chunk:r.chunks[r.currentChunkIndex]}:{};return{...(0,n.omit)(["chunks","currentChunkIndex"],r),...a}};t.secureFileUploadSelector=e=>e.userSession.secureFileStorageState.upload;t.getSecureFileDownloadSelector=e=>r=>(0,t.secureFileDownloadSelector)(r,e);t.secureFilesQuotaSelector=e=>e.userSession.secureFileStorageState.quota},36592:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decipherSecureFileContent=void 0;const o=r(24555),n=r(87459),a=r(41751),i=r(53528);t.decipherSecureFileContent=async(e,t)=>{const r=(0,i.parseCipheredData)(e),s=r.cryptoConfig;if(!(0,i.isDashlaneSecureDataFlexible)(r)||!(0,i.isNoDerivation)(s.derivation))return null;const c=await(0,n.hashAndSplitKey)((0,o.base64ToBuffer)(t)),d=await(0,a.signHashHmacSHA256)(c.hmac,(0,o.concatBuffers)(r.iv,r.cipheredContent));if((0,o.bufferToBase64)(d)!==(0,o.bufferToBase64)(r.hash))return null;return await(0,a.decryptAES256)(c.aes,r.iv,r.cipheredContent)}},60536:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.downloadFileFromStorage=void 0;const o=r(8682);t.downloadFileFromStorage=async(e,t,r)=>{try{const n=await fetch(t);if(!n.ok)return{success:!1};const a=n.body.getReader(),i=[],s=n.headers.get("Content-Length");e.storeService.dispatch((0,o.secureFileStartDownloadAction)(r.downloadKey,Number.parseInt(s,10)));let c=0,d=!0,l=0;for(;d;){const{done:t,value:n}=await a.read();d=!t,d&&(i.push(new Uint8Array(n)),c+=n.length,l+=n.length,l>1e5&&(e.storeService.dispatch((0,o.secureFileDownloadChunkAction)(r.downloadKey,l)),l=0))}let u=0;const p=new Uint8Array(c);return i.forEach((e=>{p.set(e,u),u+=e.length})),{success:!0,chunks:p}}catch(e){return{success:!1}}}},41890:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDownloadLink=void 0;const o=r(22029),n=r(31891),a=r(8153),i=r(8682);t.getDownloadLink=async(e,t)=>{const{storeService:r,wsService:s}=e,c=r.getState(),d=(0,a.userIdSelector)(c),l=(0,o.ukiSelector)(c);let u=null;try{u=await s.secureFile.getDownloadLink({login:d,uki:l,key:t.downloadKey})}catch(r){return(0,n.logDebug)({tag:["SecureFile"],message:"Error while getting S3 download link",details:{error:r}}),e.storeService.dispatch((0,i.secureFileDownloadErrorAction)(t.downloadKey)),null}return 200!==u.code?(e.storeService.dispatch((0,i.secureFileDownloadErrorAction)(t.downloadKey)),null):u.content.url}},70693:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateSecureFile=void 0;const o=r(14538);t.validateSecureFile=(e,t)=>{const r=e.split(".").pop();return!("rar"!==r||""!==t&&t)||!(!(0,o.getSecureDocumentsAllowedMimeTypes)().includes(t)||!(0,o.getSecureDocumentsAllowedExtensions)().includes(`.${r}`))}},4685:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileUploadStatus=t.FileDownloadStatus=t.SecureFileResultErrorCode=void 0,function(e){e.MAX_CONTENT_LENGTH_EXCEEDED="MAX_CONTENT_LENGTH_EXCEEDED",e.QUOTA_EXCEEDED="QUOTA_EXCEEDED",e.INVALID_FILE_TYPE="INVALID_FILE_TYPE",e.INTERNAL_ERROR="INTERNAL_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.FILE_NOT_FOUND="FILE_NOT_FOUND"}(t.SecureFileResultErrorCode||(t.SecureFileResultErrorCode={})),function(e){e.Initial="Initial",e.Downloading="Downloading",e.Deciphering="Deciphering",e.Error="Error",e.ChunkReady="ChunkReady",e.ChunkDownloaded="ChunkDownloaded",e.TransferComplete="TransferComplete"}(t.FileDownloadStatus||(t.FileDownloadStatus={})),function(e){e.None="None",e.Initial="Initial",e.Uploading="Uploading",e.Ciphering="Ciphering",e.Done="Done",e.Error="Error"}(t.FileUploadStatus||(t.FileUploadStatus={}))},44650:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(43924);t.config={commands:{setupDefaultNoteCategories:{handler:o.setupDefaultNoteCategoriesHandler}},queries:{},liveQueries:{}}},43924:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupDefaultNoteCategoriesHandler=void 0;const o=r(19935),n=r(49060),a=r(35436);t.setupDefaultNoteCategoriesHandler=async function(e,t){try{const{storeService:r,sessionService:i}=e;if(!r.isAuthenticated())return{success:!1};const s=r.getPersonalData().noteCategories;if(!s||0===s.length){t.categories.forEach((e=>{(0,n.saveNoteCategory)(r,{name:e})})),i.getInstance().user.persistPersonalData();(0,a.getDebounceSync)(r,i)({immediateCall:!0},o.Trigger.Save)}return{success:!0}}catch(e){return{success:!1}}}},49060:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.saveNoteCategory=t.getUpdatedNoteCategory=t.getNewNoteCategory=void 0;const o=r(37821),n=r(31891),a=r(57254),i=r(41147);function s(e){return{kwType:"KWSecureNoteCategory",Id:(0,a.generateItemUuid)(),CategoryName:e.trim(),LastBackupTime:0}}function c(e,t){const r=(0,i.findDataModelObject)(t.id,e);if(!r)throw new Error("UI asks to update an unknown Note Category");return{...r,CategoryName:t.name.trim()}}t.getNewNoteCategory=s,t.getUpdatedNoteCategory=c,t.saveNoteCategory=function(e,t){if(!e.isAuthenticated())return void(0,n.logError)({message:"No session available to save note category"});const r=e.getPersonalData().noteCategories;if(!function(e,t){return"string"==typeof t&&""!==t.trim()&&!e.some((e=>e.CategoryName===t))}(r,t.name))return void(0,n.logError)({message:"Category name is invalid"});const a=t.id?c(r,t):s(t.name);return e.dispatch((0,o.saveNoteCategory)(a)),a}},2248:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(12345),n=r(22490),a=r(7641);t.config={commands:{addSecureNote:{handler:n.addSecureNoteHandler},updateSecureNote:{handler:n.updateSecureNoteHandler},deleteSecureNote:{handler:n.deleteSecureNoteHandler}},queries:{getNote:{selector:o.viewedNoteSelector},getNoteCategories:{selector:o.viewedNoteCategoriesSelector},getNotes:{selector:o.viewedQueriedNotesSelector},getNotesCount:{selector:o.notesCountSelector},getNotesPage:{selector:o.notesPageSelector},getNotesPaginationToken:{selector:o.notesPaginationTokenSelector}},liveQueries:{liveNote:{operator:a.getNote$},liveNotes:{operator:a.notes$},liveNotesBatch:{operator:a.notesBatch$},liveNotesCount:{operator:a.notesCount$}}}},90003:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(9880),t)},59409:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handleLimitedSharedNotes=void 0;const o=r(15448);t.handleLimitedSharedNotes=function(e,t,r){const n=(0,o.getLimitedSharedItemIds)(t,r);return e.map((e=>({...e,...n[e.Id]?{limitedPermissions:!0}:{}})))}},84272:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addSecureNoteHandler=t.noteFormatter=void 0;const o=r(19935),n=r(97211),a=r(35436),i=r(90298),s=r(18491),c=r(1005),d=r(36109),l=r(57254),u=r(59125),p=r(68410),S=r(70240),g=r(49504),m=r(94343),y=r(88478);function v(e){const t=(0,p.sanitizeInputPersonalData)(e),r=(0,d.getUnixTimestamp)();return{kwType:"KWSecureNote",AnonId:(0,l.generateItemUuid)(),CreationDatetime:r,Id:(0,l.generateItemUuid)(),LocaleFormat:n.Country.US,SpaceId:t.spaceId||"",UserModificationDatetime:r,LastBackupTime:0,Title:t.title||"Untitled note",Content:t.content||"",Category:t.category||"noCategory",Secured:t.secured||!1,Type:t.type||"GRAY",Attachments:t.attachments||[]}}t.noteFormatter=v,t.addSecureNoteHandler=function(e,t){try{!function({storeService:e,sessionService:t,eventLoggerService:r},o){const n=e.getPersonalData(),a=v(o);(0,S.logAddVaultItem)(r,a),o.usageLogComponentName&&(0,s.sendPersonalDataEditionUsageLogs)(e,{action:"add",from:o.usageLogComponentName,itemEdited:a,currentItemsCount:n.notes.length});const i=(0,g.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:n,change:(0,m.makeUpdateChange)(a),userLogin:e.getUserLogin(),platformInfo:(0,y.platformInfoSelector)(e.getState())});e.dispatch((0,c.savePersonalDataItem)(a,a.kwType,i)),t.getInstance().user.persistPersonalData()}(e,t);return(0,a.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},o.Trigger.Save),Promise.resolve({success:!0})}catch(e){return(0,u.sendExceptionLog)({error:e}),e instanceof i.RequestError&&void 0!==e.code?Promise.resolve({success:!1,error:{code:e.code}}):Promise.resolve({success:!1})}}},96214:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSecureNoteHandler=void 0;const o=r(19935),n=r(35436),a=r(12345),i=r(73046),s=r(9880),c=r(18491),d=r(59125),l=r(37821),u=r(70240),p=r(96045),S=r(22029),g=r(13658),m=r(15933),y=r(70876),v=r(69245),A=r(33299),E=r(8153),f=r(35054);t.deleteSecureNoteHandler=async function(e,{id:t}){const r=await(async({storeService:e,eventLoggerService:t,wsService:r},o)=>{const n=e.getState();try{let d=null;const h=(0,a.noteSelector)(n,o);if(!h)return{success:!1,error:{code:s.DeleteSecureNoteErrorCode.NOT_FOUND}};const _=await(0,p.makeCryptoService)(),T=(0,E.userLoginSelector)(n),I=(0,S.ukiSelector)(e.getState()),{makeRefuseItemGroupEvent:C}=(0,g.makeItemGroupService)(r,_),{Id:P}=h,{userGroups:D,itemGroups:O}=(0,f.sharingDataSelector)(n),b=(0,y.findItemItemGroup)(P,O);if(b){const e=(0,m.isUserLastAdmin)(b,T),t=(0,m.doesUserReceiveItemGroupViaGroup)(b,D,T);if(e||t)return{success:!1,error:{code:e?s.DeleteSecureNoteErrorCode.LEAVE_SHARING_FORBIDDEN_LAST_ADMIN:s.DeleteSecureNoteErrorCode.LEAVE_SHARING_FORBIDDEN_GROUP_ITEM}};try{const{groupId:e,revision:t}=b,{refuseItemGroup:r}=(0,v.makeItemGroupWS)(),o=await C(e,t,null);await r(T,I,o)}catch(e){return{success:!1,error:{code:s.DeleteSecureNoteErrorCode.LEAVE_SHARING_FAILED}}}}d=(0,A.getRemoveChangeHistory)(e,h);const w=(0,i.notesSelector)(n).length,N=(0,l.removePersonalItem)(h.kwType,h.Id,d);return e.dispatch(N),(0,u.logDeleteVaultItem)(t,h),(0,c.sendPersonalDataEditionUsageLogs)(e,{action:"remove",from:"MANUAL",itemEdited:h,currentItemsCount:w}),{success:!0}}catch(e){const t=new Error(`[SecureNotes] - deleteSecureNote: ${e}`);return(0,d.sendExceptionLog)({error:t}),{success:!1,error:{code:s.DeleteSecureNoteErrorCode.INTERNAL_ERROR}}}})(e,t);if(r.success){(0,n.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},o.Trigger.Save)}return Promise.resolve(r)}},22490:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(84272),t),n(r(88796),t),n(r(96214),t)},88796:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateSecureNoteHandler=t.getUpdatedSecureNote=void 0;const o=r(19935),n=r(12345),a=r(35436),i=r(90298),s=r(18491),c=r(1005),d=r(36109),l=r(59125),u=r(68410),p=r(9880),S=r(70240),g=r(21046),m=r(49504),y=r(94343),v=r(88478);function A(e,t){var r,o,n,a,s,c,l;if(!e)throw new i.RequestError("[updateSecureNote]: unable to find secure note to update.",p.SecureNoteSaveResultErrorCode.NOT_FOUND);const S=(0,u.sanitizeInputPersonalData)(t),g=(0,d.getUnixTimestamp)(),m={Title:null!==(r=S.title)&&void 0!==r?r:e.Title,Content:null!==(o=S.content)&&void 0!==o?o:e.Content,Category:null!==(n=S.category)&&void 0!==n?n:e.Category,Secured:null!==(a=S.secured)&&void 0!==a?a:e.Secured,Type:null!==(s=S.type)&&void 0!==s?s:e.Type,SpaceId:null!==(c=S.spaceId)&&void 0!==c?c:e.SpaceId,UserModificationDatetime:g,Attachments:null!==(l=S.attachments)&&void 0!==l?l:e.Attachments};return{...e,...m}}t.getUpdatedSecureNote=A,t.updateSecureNoteHandler=function(e,t){try{!function({storeService:e,sessionService:t,eventLoggerService:r},o){if(!e.isAuthenticated())throw new Error("No session available to updateSecureNote");const a=e.getPersonalData(),i=(0,n.noteSelector)(e.getState(),o.id),d=A(i,o);(0,g.notifySharersNoteUpdated)(e,i,d),(0,S.logEditVaultItem)(r,d,i),o.usageLogComponentName&&(0,s.sendPersonalDataEditionUsageLogs)(e,{action:"edit",from:o.usageLogComponentName,itemEdited:d,currentItemsCount:a.notes.length});const l=(0,m.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:a,change:(0,y.makeUpdateChange)(d),userLogin:e.getUserLogin(),platformInfo:(0,v.platformInfoSelector)(e.getState())});e.dispatch((0,c.savePersonalDataItem)(d,d.kwType,l)),t.getInstance().user.persistPersonalData()}(e,t);return(0,a.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},o.Trigger.Save),Promise.resolve({success:!0})}catch(e){return(0,l.sendExceptionLog)({error:e}),e instanceof i.RequestError&&void 0!==e.code?Promise.resolve({success:!1,error:{code:e.code}}):Promise.resolve({success:!1})}}},90298:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updatedAt=t.createdAt=t.getCategory=t.RequestError=void 0;const o=r(28060);class n extends Error{constructor(e,t){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name="RequestError",this.code=t}}t.RequestError=n,t.getCategory=(0,o.curry)(((e,t)=>e.find((e=>e.Id===t))));t.createdAt=e=>(0,o.isNil)(e.CreationDatetime)?(0,o.isNil)(e.CreationDate)?0:e.CreationDate:e.CreationDatetime;t.updatedAt=e=>(0,o.isNil)(e.UserModificationDatetime)?(0,o.isNil)(e.UpdateDate)?0:e.UpdateDate:e.UserModificationDatetime},21046:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notifySharersNoteUpdated=t.makeNoteSpecificProps=t.makeNewNote=t.makeUpdatedNote=t.sharedFields=void 0;const o=r(28060),n=r(36109),a=r(59125),i=r(11117);function s(e,t){const r=t?t.CreationDate:(0,n.getUnixTimestamp)(),o=t?e.content!==t.Content?(0,n.getUnixTimestamp)():t.UpdateDate:r;return{Title:e.title||"Untitled note",Content:e.content||"",Category:e.category||"noCategory",Secured:e.secured||!1,Type:e.type||"GRAY",CreationDate:r,UpdateDate:o}}t.sharedFields=["Title","Content","Secured"],t.makeUpdatedNote=async function(e,t){return{...t,...(0,i.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,n.getUnixTimestamp)()}),...s(e.content,t)}},t.makeNewNote=async function(e){return{...(0,i.makeNewPersonalDataItemBase)(e),...s(e.content)}},t.makeNoteSpecificProps=s,t.notifySharersNoteUpdated=async function(e,r,n){!(0,o.equals)((0,o.pick)(t.sharedFields,r),(0,o.pick)(t.sharedFields,n))&&await(0,i.notifySharersOnUpdate)(e,n).catch((e=>{const t=new Error(`[Sharing] - notifySharersNoteUpdated: ${e}`);(0,a.sendExceptionLog)({error:t})}))}},7641:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notes$=t.notesCount$=t.getNote$=t.notesBatch$=void 0;const o=r(18948),n=r(3343),a=r(12345),i=r(6045),s=r(85564),c=r(28807);t.notesBatch$=e=>{const t=(0,i.parseToken)(e),r=(0,a.getViewedNotesBatchSelector)(t);return(0,o.pipe)((0,n.map)(r),(0,n.distinctUntilChanged)(c.sameBatch))};t.getNote$=e=>{const t=(0,a.getViewedNoteSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())};t.notesCount$=e=>{const t=(0,i.parseToken)(e);return(0,o.pipe)((0,n.map)((e=>(0,a.notesCountSelector)(e,t))),(0,n.distinctUntilChanged)())},t.notes$=(0,s.getLivePersonalInfo)(a.getLiveNotesSelector)},19024:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNoteMappers=void 0;const o=r(28060),n=r(90298),a=r(10675),i=r(70876),s=(0,o.curry)(((e,t)=>{const r=t.Category,o=(e||[]).find((e=>e.Id===r));return o&&o.CategoryName?o.CategoryName:"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz"})),c=e=>!!e.Attachments&&e.Attachments.length>0,d=(0,o.curry)(((e,t)=>!!e[t.Id]));t.getNoteMappers=(e,t,r)=>({category:s(e),groupIds:e=>(0,i.getItemUserGroupIds)(r,e.Id),sharingUserIds:e=>(0,i.getItemUserIds)(r,e.Id),createdAt:n.createdAt,hasAttachments:c,id:e=>e.Id,isLimited:d(t),lastUse:a.lastUseMapper,spaceId:e=>e.SpaceId,title:e=>e.Title,updatedAt:n.updatedAt})},20488:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNotesBatch=t.viewNotesBatch=t.getNotesFirstToken=t.getNotesSortToken=t.getNotesFilterToken=void 0;const o=r(28060),n=r(51417),a=r(52422),i=r(70910),s=r(90298);t.getNotesFilterToken=({filterCriteria:e})=>({filterCriteria:e||[]});t.getNotesSortToken=({sortCriteria:e})=>({uniqField:"id",sortCriteria:e||[]});t.getNotesFirstToken=(e,t,r,o)=>(0,n.generateFirstToken)(e,t,r.initialBatchSize||30,o);t.viewNotesBatch=(e,t,r,o)=>{const n=(0,i.getSharingStatusItem)(t,r),c=(0,s.getCategory)(o);return(0,a.listView)(n,c,e)},t.getNotesBatch=(0,o.curry)(((e,t,r)=>(0,n.getBatch)(r,e,t)))},2286:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.noteMatch=t.searchGetters=t.limitedSearchGetters=void 0;const o=r(37047),n=r(57748);t.limitedSearchGetters=[(0,n.stringProp)("Title")],t.searchGetters=[...t.limitedSearchGetters,(0,n.stringProp)("Content")];t.noteMatch=(e,r)=>{const n=r.Secured?t.limitedSearchGetters:t.searchGetters;return(0,o.match)(n)(e,r)}},12345:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notesCountSelector=t.viewedQueriedNotesSelector=t.getViewedNoteSelector=t.getLiveNotesSelector=t.getViewedNotesBatchSelector=t.notesQuerySelector=t.fieldMappersSelector=t.viewedNoteCategoriesSelector=t.notesPaginationTokenSelector=t.notesPageSelector=t.viewedNoteSelector=t.noteSelector=t.noteCategoriesSelector=void 0;const o=r(28060),n=r(32034),a=r(20488),i=r(19024),s=r(4950),c=r(51417),d=r(6045),l=r(30590),u=r(46730),p=r(41147),S=r(2286),g=r(3259),m=r(80398),y=r(35054),v=r(8153),A=r(66771),E=r(33131),f=r(73046),h=r(61867);t.noteCategoriesSelector=e=>e.userSession.personalData.noteCategories;t.noteSelector=(e,t)=>{const r=(0,f.notesSelector)(e);return(0,p.findDataModelObject)(t,r)};t.viewedNoteSelector=(e,r)=>{const o=(0,t.noteSelector)(e,r);if(!o)return;const n=(0,t.noteCategoriesSelector)(e),a=(0,y.sharingDataSelector)(e),i=(0,v.userIdSelector)(e),c=(0,l.limitedSharingItemsSelector)(e);return(0,s.viewNote)(o,a,i,c,n)};t.notesPageSelector=(e,r)=>{const o=(0,d.parseToken)(r),{sortToken:n,filterToken:a}=o,i={sortToken:n,filterToken:a},s=(0,t.fieldMappersSelector)(e),l=(0,t.notesQuerySelector)(e,i),u=C(e),p=(0,c.generateNextToken)(s,o,l),S=(0,c.generatePrevToken)(s,o,l),g=(0,c.getBatch)(s,o,l),m=(0,d.stringifyToken)(p),y=(0,d.stringifyToken)(S);return{batch:u(g),nextToken:m,prevToken:y}};t.notesPaginationTokenSelector=(e,r)=>{const o=(0,a.getNotesSortToken)(r),n=(0,a.getNotesFilterToken)(r),i=(0,t.fieldMappersSelector)(e),s={sortToken:o,filterToken:n},c=(0,t.notesQuerySelector)(e,s),l=(0,a.getNotesFirstToken)(i,s,r,c);return(0,d.stringifyToken)(l)},t.viewedNoteCategoriesSelector=(0,n.createSelector)(t.noteCategoriesSelector,(e=>({items:(0,E.listView)(e),matchingCount:e.length}))),t.fieldMappersSelector=(0,n.createSelector)(t.noteCategoriesSelector,l.limitedSharingItemsSelector,h.acceptedItemGroupsSelector,i.getNoteMappers);const _=(0,d.createOptimizedSortTokenSelector)(((e,{sortToken:t})=>t),o.identity),T=(0,d.createOptimizedFilterTokenSelector)(((e,{filterToken:t})=>t),o.identity),I=()=>S.noteMatch;t.notesQuerySelector=(0,n.createSelector)(t.fieldMappersSelector,I,_,T,f.notesSelector,d.queryData);t.getViewedNotesBatchSelector=e=>{const{sortToken:r,filterToken:o}=e,i={sortToken:r,filterToken:o},s=(0,a.getNotesBatch)(e),c=(0,n.createSelector)((e=>(0,t.notesQuerySelector)(e,i)),t.fieldMappersSelector,s),p=(0,d.optimizeBatchSelector)(c);return(0,n.createSelector)(p,u.sortedSharedItemIdsSelector,l.limitedSharingItemsSelector,t.noteCategoriesSelector,a.viewNotesBatch)};const C=e=>{const r=(0,u.sortedSharedItemIdsSelector)(e),o=(0,l.limitedSharingItemsSelector)(e),n=(0,t.noteCategoriesSelector)(e);return e=>(0,a.viewNotesBatch)(e,r,o,n)};t.getLiveNotesSelector=(0,A.makeLiveSelectorGetter)(f.notesSelector,C,I,t.fieldMappersSelector);t.getViewedNoteSelector=e=>{const r=(0,n.createSelector)(f.notesSelector,(t=>(0,p.findDataModelObject)(e,t)));return(0,n.createSelector)(r,y.sharingDataSelector,v.userIdSelector,l.limitedSharingItemsSelector,t.noteCategoriesSelector,s.viewNote)};const P=(0,g.getQuerySelector)(f.notesSelector,I,t.fieldMappersSelector);t.viewedQueriedNotesSelector=(e,t)=>{const r=P(e,t),o=C(e);return(0,m.viewListResults)(o)(r)},t.notesCountSelector=(0,n.createSelector)(t.fieldMappersSelector,I,T,f.notesSelector,((e,t,r,o)=>(0,d.filterData)(e,t,r,o).length))},73046:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notesSelector=void 0;const o=r(32034),n=r(86965),a=r(52931);t.notesSelector=(0,o.createSelector)((e=>e.userSession.personalData.notes),a.quarantinedSpacesSelector,n.filterOutQuarantinedItems)},9880:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteSecureNoteErrorCode=t.SecureNoteSaveResultErrorCode=void 0,function(e){e.NOT_FOUND="NOT_FOUND"}(t.SecureNoteSaveResultErrorCode||(t.SecureNoteSaveResultErrorCode={})),function(e){e.NOT_FOUND="NOT_FOUND",e.INTERNAL_ERROR="INTERNAL_ERROR",e.LEAVE_SHARING_FAILED="LEAVE_SHARING_FAILED",e.LEAVE_SHARING_FORBIDDEN_LAST_ADMIN="LEAVE_SHARING_FORBIDDEN_LAST_ADMIN",e.LEAVE_SHARING_FORBIDDEN_GROUP_ITEM="LEAVE_SHARING_FORBIDDEN_GROUP_ITEM"}(t.DeleteSecureNoteErrorCode||(t.DeleteSecureNoteErrorCode={}))},4950:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewNote=void 0;const o=r(70910),n=r(90298),a=r(4962);t.viewNote=function(e,t,r,i,s){if(!e)return;const c=(0,o.getSharingStatusDetail)(i,t,r),d=(0,n.getCategory)(s);return(0,a.detailView)(c,d,e)}},33131:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const o=(0,r(28060).defaultTo)("");t.detailView=e=>{if(e)return{id:e.Id,categoryName:o(e.CategoryName)}};t.listView=e=>e.map(t.detailView)},4962:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.detailView=void 0;const o=r(28060),n=r(18758),a=r(33131),i=r(90298),s=(0,o.defaultTo)("");t.detailView=(0,o.curry)(((e,t,r)=>{const c=t(r.Category);return{...(0,n.dataModelDetailView)(r),category:(0,a.detailView)(c),color:r.Type,content:s(r.Content),createdAt:(0,i.createdAt)(r),secured:(0,o.defaultTo)(!1,r.Secured),sharingStatus:e(r.Id),title:s(r.Title),updatedAt:(0,i.updatedAt)(r)}}))},52422:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=void 0;const o=r(28060),n=r(18758),a=r(33131),i=r(90298),s=(0,o.defaultTo)("");t.itemView=(0,o.curry)(((e,t,r)=>{const o=t(r.Category),c=r.Secured?"*******":(e=>{if(e.length>30)return e.slice(0,27)+"…"})(s(r.Content));return{...(0,n.dataModelItemView)(r),abbrContent:c,category:(0,a.detailView)(o),color:r.Type,createdAt:(0,i.createdAt)(r),secured:r.Secured||!1,sharingStatus:e(r.Id),title:s(r.Title),updatedAt:(0,i.updatedAt)(r)}}));t.listView=(e,r,o)=>{const n=(0,t.itemView)(e,r);return o.map(n)}},15678:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(92467),n=r(8153),a=r(27346),i=r(39392);t.config={commands:{updateProtectPasswordsSetting:{handler:i.updateProtectPasswordsSettingHandler},toggleDashlane:{handler:i.toggleDashlaneHandler}},queries:{getAnonymousUserId:{selector:o.anonymousUserIdSelector},getAnalysisEnabledStatusOnUrl:{selector:o.getAnalysisEnabledStatusOnUrlSelector},getAnalysisDisabledStatusOnUrl:{selector:o.getAnalysisDisabledStatusOnUrlSelector},getAutofillOptionsOnUrl:{selector:o.getAutofillOptionsOnUrlSelector},getIsUrlBanished:{selector:o.getIsUrlBanishedSelector},arePasswordsProtected:{selector:n.protectPasswordsSettingSelector}},liveQueries:{liveArePasswordsProtected:{operator:a.protectPasswordsSetting$}}}},39392:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toggleDashlaneHandler=t.updateProtectPasswordsSettingHandler=void 0;const o=r(19935),n=r(59125),a=r(15528),i=r(35436),s=r(62737),c=r(34032),d=r(14122),l=r(30720);t.updateProtectPasswordsSettingHandler=(e,t)=>{try{const r={[(0,d.featuresSelector)(e.storeService.getState()).ptu_web_MPprotect_phase3?"ProtectPasswords":"SecuredDataShowPassword"]:t};return(0,s.updatePersonalSettings)(e.storeService,e.sessionService,r),(0,c.sendUserSettingsLog)(e),Promise.resolve()}catch(e){const t=new Error(`updateProtectPasswordsSettingHandler: ${e}`);(0,n.sendExceptionLog)({error:t,code:a.ExceptionCriticality.WARNING})}};t.toggleDashlaneHandler=(e,t)=>{const r=(0,i.getDebounceSync)(e.storeService,e.sessionService),n=e.storeService.getPersonalSettings(),a="site"===t.where?(0,l.toggleDashlaneOnSiteToPersonalSettingsPartial)(n,t):(0,l.toggleDashlaneOnPageToPersonalSettingsPartial)(n,t);(0,s.updatePersonalSettings)(e.storeService,e.sessionService,a),r({immediateCall:!0},o.Trigger.SettingsChange)}},27346:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.protectPasswordsSetting$=void 0;const o=r(18948),n=r(3343),a=r(8153);t.protectPasswordsSetting$=()=>(0,o.pipe)((0,n.map)(a.protectPasswordsSettingSelector),(0,n.distinctUntilChanged)())},86257:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(48097),t)},30720:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toggleDashlaneOnSiteToPersonalSettingsPartial=t.toggleDashlaneOnPageToPersonalSettingsPartial=void 0;const o=r(28060),n=r(11814);t.toggleDashlaneOnPageToPersonalSettingsPartial=function(e,t){let r=e.DisabledUrlsList,n=e.DisabledUrlsAutologinList;return t.autofill&&t.autologin?(n=(0,o.without)([t.url],e.DisabledUrlsAutologinList),r=(0,o.without)([t.url],e.DisabledUrlsList)):t.autologin?(n=(0,o.without)([t.url],e.DisabledUrlsAutologinList),r=(0,o.uniq)(e.DisabledUrlsList.concat(t.url))):n=(0,o.uniq)(e.DisabledUrlsAutologinList.concat(t.url)),{DisabledUrlsList:r,DisabledUrlsAutologinList:n}},t.toggleDashlaneOnSiteToPersonalSettingsPartial=function(e,t){const r=n.url.getDomainForUrl(t.url);let a=e.DisabledDomainsList,i=e.DisabledDomainsAutologinList;return t.autofill&&t.autologin?(i=(0,o.without)([r],e.DisabledDomainsAutologinList),a=(0,o.without)([r],e.DisabledDomainsList)):t.autologin?(i=(0,o.without)([r],e.DisabledDomainsAutologinList),a=(0,o.uniq)(e.DisabledDomainsList.concat(r))):i=(0,o.uniq)(e.DisabledDomainsAutologinList.concat(r)),{DisabledDomainsList:a,DisabledDomainsAutologinList:i}}},62737:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pickUpdatedPersonalSettings=t.isSaveCredentialDisabledOnDomain=t.signalSaveCredentialDisabled=t.updatePersonalSettings=void 0;const o=r(31891),n=r(17509),a=r(28060),i=r(18491),s=r(77333);t.updatePersonalSettings=function(e,r,n){if(!e.isAuthenticated())return void o.default.log("No session available to updatePersonalSettings");const a=(0,t.pickUpdatedPersonalSettings)(e.getPersonalSettings(),n);(0,i.sendPersonalSettingsEditionUsageLogs)(e,a),e.dispatch((0,s.editPersonalSettings)(a)),r.getInstance().user.persistPersonalSettings()},t.signalSaveCredentialDisabled=function(e,t,r){if(!e.isAuthenticated())return void o.default.log("No session available, in theory this should not be called");const n=Array.isArray(e.getPersonalSettings().BanishedUrlsList)?e.getPersonalSettings().BanishedUrlsList:[];n.indexOf(r.fullDomain)>0||(e.dispatch((0,s.editPersonalSettings)({BanishedUrlsList:[...n,r.fullDomain]})),t.getInstance().user.persistPersonalSettings())},t.isSaveCredentialDisabledOnDomain=function(e,t){return e.isAuthenticated()?(Array.isArray(e.getPersonalSettings().BanishedUrlsList)?e.getPersonalSettings().BanishedUrlsList:[]).map(n.getParsedUrl).some((e=>e.fullDomain===t.fullDomain)):(o.default.log("No session available, save credential is enabled by default"),!1)};t.pickUpdatedPersonalSettings=(e,t)=>{const r=(0,a.pick)(Object.keys(t))(e),o=(0,a.unapply)(a.identity);return(0,a.mergeAll)((0,a.difference)(o(t),o(r)))}},92467:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getIsUrlBanishedSelector=t.banishedUrlsListSelector=t.securedDataAutofillCreditcardSelector=t.getAnalysisEnabledStatusOnUrlSelector=t.getAnalysisDisabledStatusOnUrlSelector=t.getAutofillOptionsOnUrlSelector=t.anonymousUserIdSelector=void 0;const o=r(11814),n=r(17509),a=r(41094),i=r(8153),s=r(75976),c=r(48097),d=r(45082);t.anonymousUserIdSelector=e=>e.userSession.personalSettings.AnonymousUserId;t.getAutofillOptionsOnUrlSelector=(e,t)=>{const r=o.url.getDomainForUrl(t),n=(0,i.personalSettingsSelector)(e),a=n.DisabledUrlsList.includes(t);return n.DisabledDomainsList.includes(r)||a?c.AutofillOptions.ANALYSIS_ENABLED_ONLY_ON_LOGINS_AND_PASSWORDS:c.AutofillOptions.ANALYSIS_ENABLED_ON_ALL_FORMS};t.getAnalysisDisabledStatusOnUrlSelector=(e,t)=>{const r=o.url.getDomainForUrl(t),n=(0,i.personalSettingsSelector)(e),l=(0,s.disableAutofillSelector)(e),u=(0,i.spaceDisabledDomainsListSelector)(e).includes(r),p=n.DisabledUrlsAutologinList.includes(t),S=n.DisabledDomainsAutologinList.includes(r),g=(e=>{const t=(0,a.twoFactorAuthenticationInfoSelector)(e);return t.status===d.TwoFactorAuthenticationInfoRequestStatus.READY&&t.shouldEnforceTwoFactorAuthentication})(e);return l?c.AnalysisDisabledStatus.ANALYSIS_DISABLED_BY_KILLSWITCH:u?c.AnalysisDisabledStatus.ANALYSIS_DISABLED_BY_B2B_ADMIN:S||p?c.AnalysisDisabledStatus.ANALYSIS_DISABLED_BY_USER:g?c.AnalysisDisabledStatus.ANALYSIS_DISABLED_BY_2FA_ENFORCEMENT:c.AnalysisDisabledStatus.ANALYSIS_ENABLED};t.getAnalysisEnabledStatusOnUrlSelector=(e,t)=>{const r=o.url.getDomainForUrl(t),n=(0,i.personalSettingsSelector)(e),a=n.DisabledUrlsAutologinList.includes(t),d=(0,i.spaceDisabledDomainsListSelector)(e).includes(r),l=n.DisabledDomainsAutologinList.includes(r),u=(0,s.disableAutofillSelector)(e),p=n.DisabledUrlsList.includes(t),S=n.DisabledDomainsList.includes(r);return u?c.AnalysisEnabledStatus.ANALYSIS_DISABLED_BY_KILLSWITCH:d?c.AnalysisEnabledStatus.ANALYSIS_DISABLED_BY_B2B_ADMIN:l||a?c.AnalysisEnabledStatus.ANALYSIS_DISABLED_BY_USER:S||p?c.AnalysisEnabledStatus.ANALYSIS_ENABLED_ONLY_ON_LOGIN_FORMS:c.AnalysisEnabledStatus.ANALYSIS_ENABLED};t.securedDataAutofillCreditcardSelector=e=>{const t=e.userSession.personalSettings.SecuredDataAutofillCreditcard;return"boolean"!=typeof t||t};t.banishedUrlsListSelector=e=>{var t;return null!==(t=(0,i.personalSettingsSelector)(e).BanishedUrlsList)&&void 0!==t?t:[]};t.getIsUrlBanishedSelector=(e,r)=>{const o=(0,n.getParsedUrl)(r).fullDomain;return(0,t.banishedUrlsListSelector)(e).map(n.getParsedUrl).some((e=>e.fullDomain===o))}},48097:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AutofillOptions=t.AnalysisDisabledStatus=t.AnalysisEnabledStatus=void 0,function(e){e.ANALYSIS_ENABLED="ANALYSIS_ENABLED",e.ANALYSIS_ENABLED_ONLY_ON_LOGIN_FORMS="ANALYSIS_ENABLED_ONLY_ON_LOGIN_FORMS",e.ANALYSIS_DISABLED_BY_USER="ANALYSIS_DISABLED_BY_USER",e.ANALYSIS_DISABLED_BY_B2B_ADMIN="ANALYSIS_DISABLED_BY_B2B_ADMIN",e.ANALYSIS_DISABLED_BY_KILLSWITCH="ANALYSIS_DISABLED_BY_KILLSWITCH"}(t.AnalysisEnabledStatus||(t.AnalysisEnabledStatus={})),function(e){e.ANALYSIS_ENABLED="ANALYSIS_ENABLED",e.ANALYSIS_DISABLED_BY_USER="ANALYSIS_DISABLED_BY_USER",e.ANALYSIS_DISABLED_BY_B2B_ADMIN="ANALYSIS_DISABLED_BY_B2B_ADMIN",e.ANALYSIS_DISABLED_BY_KILLSWITCH="ANALYSIS_DISABLED_BY_KILLSWITCH",e.ANALYSIS_DISABLED_BY_2FA_ENFORCEMENT="ANALYSIS_DISABLED_BY_2FA_ENFORCEMENT"}(t.AnalysisDisabledStatus||(t.AnalysisDisabledStatus={})),function(e){e.ANALYSIS_ENABLED_ON_ALL_FORMS="ANALYSIS_ENABLED_ON_ALL_FORMS",e.ANALYSIS_ENABLED_ONLY_ON_LOGINS_AND_PASSWORDS="ANALYSIS_ENABLED_ONLY_ON_LOGINS_AND_PASSWORDS"}(t.AutofillOptions||(t.AutofillOptions={}))},1404:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TeamDomainsMatchResult=void 0;r(9473);!function(e){e[e.SomeFieldsMatch=0]="SomeFieldsMatch",e[e.NoFieldMatch=1]="NoFieldMatch"}(t.TeamDomainsMatchResult||(t.TeamDomainsMatchResult={}))},4338:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isItemToForceCategorize=t.isItemForceCategorizable=t.pickBestTeamSpaceForForcedCategorization=t.ForceCategorizableKWTypes=t.isTeamSpaceAfterGracePeriod=t.isTeamSpaceQuarantined=void 0;const o=r(28060),n=r(97211),a=r(1404),i=r(41569),s=r(40265),c=(e,t)=>(t||[]).some((t=>{if("string"!=typeof t)return!1;const r=t.toLowerCase();return(e||[]).some((e=>"string"==typeof e&&e.toLowerCase().includes(r)))})),d=e=>[e.Login,e.SecondaryLogin,e.Email,(0,i.getBestUrl)(e)],l=(e,t)=>{const r=[e.Domain],o=(0,s.findAssociatedCredential)(e,t);return[...r,...o?d(o):[]]},u={[n.DataModelType.KWAuthentifiant]:d,[n.DataModelType.KWGeneratedPassword]:l,[n.DataModelType.KWEmail]:e=>[e.Email]};function p(e){const t=u[e.kwType];return t?t(e):[]}t.isTeamSpaceQuarantined=e=>"revoked"===e.status;t.isTeamSpaceAfterGracePeriod=e=>(0,t.isTeamSpaceQuarantined)(e)&&Boolean(e.shouldDelete),t.ForceCategorizableKWTypes=[n.DataModelType.KWAuthentifiant,n.DataModelType.KWEmail,n.DataModelType.KWGeneratedPassword];t.pickBestTeamSpaceForForcedCategorization=(e,r,i)=>{const s=r.SpaceId,d=(0,n.isGeneratedPassword)(r)?l(r,i):p(r),u=e.reduce(((e,t)=>{const r=c(d,t.info.teamDomains);return{...e,[t.teamId]:r}}),{}),S=e.filter((e=>u[e.teamId]||(0,t.isTeamSpaceQuarantined)(e)&&e.teamId===s)),[g,m]=(0,o.partition)(t.isTeamSpaceQuarantined,S),[y,v]=(0,o.partition)(t.isTeamSpaceAfterGracePeriod,g),[A,E]=(0,o.partition)((e=>t=>e.SpaceId===t.teamId)(r),m),f=[...y,...v,...A,...E];if(0===f.length)return null;const h=f[0];return h.teamId!==r.SpaceId||(0,t.isTeamSpaceQuarantined)(h)?{teamSpace:h,domainsMatchResult:u[h.teamId]?a.TeamDomainsMatchResult.SomeFieldsMatch:a.TeamDomainsMatchResult.NoFieldMatch}:null},t.isItemForceCategorizable=function(e){return e.kwType in u};t.isItemToForceCategorize=(e,t)=>{if(!(null==t?void 0:t.info))return!1;const{forcedDomainsEnabled:r,teamDomains:o}=t.info;if(!r)return!1;const n=p(e);return c(n,o)}},52931:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.quarantinedSpacesSelector=t.forceCategorizableItemsSelector=t.spacesWithForcedCategorizationEnabledSelector=void 0;const o=r(32034),n=r(54670),a=r(4338),i=r(29606),s=r(47880);t.spacesWithForcedCategorizationEnabledSelector=e=>{var t,r;return((null===(r=null===(t=e.userSession)||void 0===t?void 0:t.spaceData)||void 0===r?void 0:r.spaces)||[]).filter((e=>{var t;return(null===(t=null==e?void 0:e.details)||void 0===t?void 0:t.info)&&Array.isArray(e.details.info.teamDomains)&&e.details.info.teamDomains.length>0&&Boolean(e.details.info.forcedDomainsEnabled)}))};t.forceCategorizableItemsSelector=e=>(0,s.personalDataItemsOfTypeSelector)(e,a.ForceCategorizableKWTypes),t.quarantinedSpacesSelector=(0,o.createSelector)(n.spacesSelector,(e=>e.filter(i.isQuarantined)))},77222:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSmartCategorizedSpace=t.getCategory=void 0;const o=r(28060),n=r(17514);t.getCategory=(0,o.curry)(((e,t)=>e.find((e=>e.Id===t))));t.getSmartCategorizedSpace=e=>t=>{var r,o,a,i;const s=(e=>e.filter((e=>{var t,r,o;return"accepted"===(null===(t=e.details)||void 0===t?void 0:t.status)&&(null===(o=null===(r=e.details)||void 0===r?void 0:r.info)||void 0===o?void 0:o.forcedDomainsEnabled)})))(e),c=null!==(i=null===(a=null===(o=null===(r=null==s?void 0:s[0])||void 0===r?void 0:r.details)||void 0===o?void 0:o.info)||void 0===a?void 0:a.teamDomains)&&void 0!==i?i:[];return(0,n.isCredentialSmartCategorized)(t,c)?s[0]:null}},10356:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyTeamSpaceContentControlRules=void 0;const o=r(97211),n=r(59125),a=r(73442),i=r(37821),s=r(78330),c=r(8962),d=r(49932),l=r(80886),u=r(22029);async function p(e,t,r){const{updates:o,deletions:n,changeHistories:a}=r,s=o.length>0,c=function({deletions:e}){return Object.keys(e).reduce(((t,r)=>t+e[r].length),0)}(r)>0;(s||c)&&(t.dispatch((0,i.teamSpaceContentControlApplied)(o,n,a)),await e.getInstance().user.persistPersonalData())}t.applyTeamSpaceContentControlRules=async function(e,t,r,i){let S=null;const g=(0,s.getInstance)(),m=(0,c.getInstance)();try{const n=(0,d.teamSpaceContentControlStateSelector)(r.getState()),s=(0,l.controlTeamSpacesContent)(n),c=s.deletions.KWAuthentifiant||[],y=s.updates.filter(o.isCredential).map((e=>e.Id)),v=s.hiddenItemIds,A=[...c,...y,...v];if(A.length>0){S=m.lockTopic("healthUpdates");const e={credentialIds:A,type:"credentialUpdates"};await g.add("healthUpdates",e)}await p(t,r,s);!function(e,t,r){const o=e.getUserLogin(),n=(0,u.ukiSelector)(e.getState());r.forEach((e=>{t.teamPlans.spaceDeleted({login:o,uki:n,teamId:Number(e.teamId)})}))}(r,i,n.spaces.filter((e=>e.details.shouldDelete))),function(e,t){const{usageLogs:r}=t;r.length&&(0,a.sendUsageLog)(e,r)}(r,s),function(e,t){const{deletions:r,hiddenItemIds:o,updates:n}=t,a={deletedItemIds:Object.keys(r).reduce(((e,t)=>[...e,...r[t]]),[]),hiddenItemIds:o,updatedItemIds:n.map((e=>e.Id))};e.teamSpaceContentControlDone(a)}(e,s),S&&m.releaseTopic("healthUpdates",S)}catch(e){S&&m.releaseTopic("healthUpdates",S);const t=new Error(`[Spaces] - runTeamSpaceContentControlJob: ${e}`);(0,n.sendExceptionLog)({error:t})}}},80886:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.controlTeamSpacesContent=void 0;const o=r(97211),n=r(40914),a=r(33732),i=r(55981),s=r(1404),c=r(4338),d=r(49504),l=r(94343);function u(e,t){return{...e,SpaceId:t}}function p(e,t,r,c){const{domainsMatchResult:p}=t;switch(p){case s.TeamDomainsMatchResult.SomeFieldsMatch:return function(e,t,r){const{deletions:n,usageLogs:i,changeHistories:s}=t,{anonymousSpaceIds:c,deviceName:u,itemCountByType:p,login:S,personalData:g,platformInfo:m,spaces:y}=e,{kwType:v}=r,A=p[v]-n[v].length,E=(0,a.makePersonalDataUsageLog)(y,{action:"remove",currentItemsCount:A,itemEdited:r,from:"remote_delete"},c),f=(0,o.isCredential)(r)?(0,d.getUpdatedItemChangeHistory)({change:(0,l.makeRemovalChange)(r),deviceName:u,personalData:g,userLogin:S,platformInfo:m}):null;return{...t,deletions:{...n,[v]:n[v].concat(r.Id)},usageLogs:E?i.concat(E):i,changeHistories:f?s.concat(f):s}}(e,c,r);case s.TeamDomainsMatchResult.NoFieldMatch:return function(e,t,r){const{updates:n,usageLogs:s,changeHistories:c}=t,{anonymousSpaceIds:p,deviceName:S,login:g,personalData:m,platformInfo:y,spaces:v}=e,A=u(r,i.PERSONAL_SPACE_ID),E=(0,o.isCredential)(A)?(0,d.getUpdatedItemChangeHistory)({change:(0,l.makeUpdateChange)(A),deviceName:S,personalData:m,userLogin:g,platformInfo:y}):null,f=(0,a.makePersonalDataUsageLog)(v,{action:"edit",currentItemsCount:null,itemEdited:A,from:"remote_edit"},p);return{...t,updates:n.concat(A),usageLogs:s.concat(f),changeHistories:E?c.concat(E):c}}(e,c,r);default:return(0,n.assertUnreachable)(p)}}function S(e,t,r){const n=e.spaces.map((e=>e.details)),i=(0,c.pickBestTeamSpaceForForcedCategorization)(n,r,e.credentials);if(!i)return t;const{teamSpace:S}=i,{status:g}=S;switch(g){case"accepted":return function(e,t,r,n){const{updates:i,usageLogs:s,changeHistories:c}=t,{teamId:p}=r,{anonymousSpaceIds:S,deviceName:g,login:m,personalData:y,platformInfo:v,spaces:A}=e,E=u(n,p),f=(0,o.isCredential)(E)?(0,d.getUpdatedItemChangeHistory)({change:(0,l.makeUpdateChange)(E),deviceName:g,personalData:y,userLogin:m,platformInfo:v}):null,h=(0,a.makePersonalDataUsageLog)(A,{action:"edit",currentItemsCount:null,itemEdited:E,from:"forced_categorization"},S);return{...t,updates:i.concat(E),usageLogs:h?s.concat(h):s,changeHistories:f?c.concat(f):c}}(e,t,S,r);case"revoked":return function(e,t,r,o){const{teamSpace:n,domainsMatchResult:a}=t,{hiddenItemIds:i}=o,c=(e=>e.info.removeForcedContentEnabled&&e.shouldDelete)(n);return{...c?p(e,t,r,o):o,hiddenItemIds:a===s.TeamDomainsMatchResult.SomeFieldsMatch?[...i,r.Id]:i}}(e,i,r,t);default:return t}}t.controlTeamSpacesContent=function(e){const t={deletions:{KWAuthentifiant:[],KWEmail:[],KWGeneratedPassword:[]},updates:[],usageLogs:[],changeHistories:[],hiddenItemIds:[]};return 0===e.spaces.length?t:e.items.reduce(((t,r)=>S(e,t,r)),t)}},49932:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.teamSpaceContentControlStateSelector=void 0;const o=r(88478),n=r(8153),a=r(3874),i=r(47880),s=r(54670),c=r(16021),d=r(49575),l=r(56994),u=r(75822),p=r(52931),S=e=>({KWAuthentifiant:(0,l.countAllCredentialsSelector)(e),KWEmail:(0,d.countAllEmailsSelector)(e),KWGeneratedPassword:(0,c.countAllGeneratedPasswordsSelector)(e)});t.teamSpaceContentControlStateSelector=e=>({anonymousSpaceIds:(0,s.anonymousSpaceIdsSelector)(e),credentials:(0,u.unsafeAllCredentialsSelector)(e),itemCountByType:S(e),items:(0,p.forceCategorizableItemsSelector)(e),spaces:(0,p.spacesWithForcedCategorizationEnabledSelector)(e),personalData:(0,i.personalDataSelector)(e),platformInfo:(0,o.platformInfoSelector)(e),login:(0,n.userLoginSelector)(e),deviceName:(0,a.deviceNameSelector)(e)})},86171:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(10356);t.setupSubscriptions=async function(e,t){const{sessionService:r,storeService:n,wsService:a}=t;e.sessionOpened.on((()=>{(0,o.applyTeamSpaceContentControlRules)(e,r,n,a)}))}},22004:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(54670);t.config={commands:{},queries:{getSpace:{selector:o.viewedSpaceSelector},getSpaces:{selector:o.viewedSpacesSelector}},liveQueries:{}}},20188:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},54322:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.associateTeamSpaceId=void 0;const o=r(4338);t.associateTeamSpaceId=function(e,t,r){if(!(0,o.isItemForceCategorizable)(e)||!t||0===t.length)return e;const n=(e=>e.filter((e=>e.info.forcedDomainsEnabled&&e.info.teamDomains.length&&!(0,o.isTeamSpaceQuarantined)(e))))(t);if(!n.length)return e;const a=(0,o.pickBestTeamSpaceForForcedCategorization)(n,e,r);return a?{...e,SpaceId:a.teamSpace.teamId}:e}},55981:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PERSONAL_SPACE_ID=void 0,t.PERSONAL_SPACE_ID=""},74034:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultPersonalSpace=t.isSpaceItem=void 0;const o=r(97211),n=r(55981);t.isSpaceItem=e=>"SpaceId"in e&&"string"==typeof e.SpaceId;t.getDefaultPersonalSpace=()=>({associatedEmail:null,billingAdmins:[],color:"",companyName:null,info:{name:"",forcedDomainsEnabled:!1,teamDomains:[]},invitationDate:null,isBillingAdmin:!1,isSSOUser:!1,isTeamAdmin:!1,joinDate:null,letter:"",membersNumber:null,planType:null,revokeDate:null,status:o.SpaceStatus.Accepted,teamAdmins:[],teamId:n.PERSONAL_SPACE_ID,teamName:null,tier:o.SpaceTier.Free,shouldDelete:!1})},29606:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isQuarantined=t.isPremiumStatusSpaceQuarantined=void 0;t.isPremiumStatusSpaceQuarantined=e=>(null==e?void 0:e.status)&&"accepted"!==e.status.toLowerCase()&&e.info&&Array.isArray(e.info.teamDomains)&&e.info.teamDomains.length>0&&Boolean(e.info.removeForcedContentEnabled);t.isQuarantined=e=>e&&(0,t.isPremiumStatusSpaceQuarantined)(e.details)},54670:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.anonymousSpaceIdsSelector=t.viewedSpaceSelector=t.viewedSpacesSelector=t.activeSpacesDetailsSelector=t.activeSpacesSelector=t.spacesSelector=void 0;const o=r(74034),n=r(79515);t.spacesSelector=e=>{var t,r,o;return null!==(o=null===(r=null===(t=e.userSession)||void 0===t?void 0:t.spaceData)||void 0===r?void 0:r.spaces)&&void 0!==o?o:[]};t.activeSpacesSelector=e=>((0,t.spacesSelector)(e)||[]).filter((e=>e.details&&"accepted"===e.details.status));t.activeSpacesDetailsSelector=e=>(0,t.activeSpacesSelector)(e).map((e=>e.details));t.viewedSpacesSelector=e=>(0,n.listView)([...(0,t.activeSpacesDetailsSelector)(e),(0,o.getDefaultPersonalSpace)()]);t.viewedSpaceSelector=(e,r)=>(0,t.viewedSpacesSelector)(e).find((e=>e.spaceId===r));t.anonymousSpaceIdsSelector=e=>e.userSession.personalSettings.SpaceAnonIds},79515:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=void 0;t.itemView=({color:e,letter:t,info:r,teamId:o,isSSOUser:n})=>{var a;return{spaceId:o,displayName:null!==(a=r.name)&&void 0!==a?a:"",color:e,letter:t,settings:{enableForcedCategorization:r.forcedDomainsEnabled,spaceForcedDomains:r.teamDomains},isSSOUser:n}};t.listView=e=>e.map(t.itemView)},33732:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendPersonalDataUsageLogs=t.sendUsageLogPersonalData=t.makePersonalDataUsageLog=t.mapKwTypeToUsageLogType=void 0;const o=r(28060),n=r(11814),a=r(97211),i=r(73442),s=r(71661),c=r(54670),d=r(74034),l=(0,o.defaultTo)(!1),u=(0,o.defaultTo)(""),p=(0,o.compose)(o.not,o.isNil);function S(e,r,i){const{itemEdited:c,currentItemsCount:S,from:g,action:m}=r,y=t.mapKwTypeToUsageLogType[c.kwType];if((0,o.isNil)(y))return;let v=y===a.PersonalDataUsageLogItemType.AUTHENTICATION?null:S;p(v)&&("add"===m?v+=1:"remove"===m&&(v-=1));const A={action:m,from:g,type:y,itemId:c.AnonId};p(v)&&(A.counter=v);let E={};if((0,a.isCredential)(c)&&(E={...E,website:n.url.getSafeDomainForUrl(c.Url)}),(0,a.isNote)(c)){const e=c;E={...E,color:e.Type,secure:l(e.Secured),size:u(e.Content).length}}return(0,a.isPaymentCard)(c)&&(E={...E,country:c.LocaleFormat}),c&&(0,d.isSpaceItem)(c)&&(E={...E,spaceId:(0,s.getSpaceAnonymousId)(e,c.SpaceId,i)}),{code:a.UsageLogCode.USAGE_PERSONAL_DATA,content:{...A,...E}}}t.mapKwTypeToUsageLogType={KWAuthentifiant:a.PersonalDataUsageLogItemType.AUTHENTICATION,KWIdentity:a.PersonalDataUsageLogItemType.IDENTITY,KWEmail:a.PersonalDataUsageLogItemType.EMAIL,KWAddress:a.PersonalDataUsageLogItemType.ADDRESS,KWCompany:a.PersonalDataUsageLogItemType.COMPANY,KWPersonalWebsite:a.PersonalDataUsageLogItemType.WEBSITE,KWPhone:a.PersonalDataUsageLogItemType.PHONE,KWPaymentMean_creditCard:a.PersonalDataUsageLogItemType.PAYMENT_MEAN_CREDITCARD,KWPaymentMean_paypal:a.PersonalDataUsageLogItemType.PAYMENT_MEAN_PAYPAL,KWIDCard:a.PersonalDataUsageLogItemType.ID_CARD,KWSocialSecurityStatement:a.PersonalDataUsageLogItemType.SOCIAL_SECURITY,KWDriverLicence:a.PersonalDataUsageLogItemType.DRIVER_LICENCE,KWFiscalStatement:a.PersonalDataUsageLogItemType.FISCAL,KWPassport:a.PersonalDataUsageLogItemType.PASSPORT,KWBankStatement:a.PersonalDataUsageLogItemType.BANK_STATEMENT,KWSecureNote:a.PersonalDataUsageLogItemType.NOTE},t.makePersonalDataUsageLog=S,t.sendUsageLogPersonalData=function(e,t){const r=e.getState(),o=S((0,c.spacesSelector)(r),t,(0,c.anonymousSpaceIdsSelector)(r));o&&(0,i.sendUsageLog)(e,o)},t.sendPersonalDataUsageLogs=function(e,t){const r=e.getState(),o=(0,c.spacesSelector)(r),n=(0,c.anonymousSpaceIdsSelector)(r),a=t.map((e=>S(o,e,n))).filter(Boolean);a.length&&(0,i.sendUsageLog)(e,a)}},21458:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendUsageLogPasswordDetails=t.sendPasswordDetailsUsageLogs=t.makePasswordDetailsUsageLog=void 0;const o=r(28060),n=r(11814),a=r(97211),i=r(85465),s=r(33732),c=r(73442),d=r(71661),l=r(54670),u=new RegExp("["+i.NUMERALS+"]"),p=new RegExp("["+i.LOWER_ALPHA+"]"),S=new RegExp("["+i.UPPER_ALPHA+"]"),g=new RegExp("["+i.SYMBOLS+"]");function m(e,t){const{action:r,currentItemsCount:i,from:c,itemEdited:m}=t;if(s.mapKwTypeToUsageLogType[m.kwType]!==a.PersonalDataUsageLogItemType.AUTHENTICATION)return;let y=i;"add"===r?y=i+1:"remove"===r&&(y=i-1);const v=p.test(m.Password),A=S.test(m.Password),E=e.getPersonalData().credentials.filter((e=>e.Password===m.Password&&e.Id!==m.Id)).length,f=!m.Email,h=!m.Login,_=!m.SecondaryLogin,T=!0===m.AutoLogin,I=!0===m.SubdomainOnly,C=!0===m.AutoProtected,P=!!m.Note,D=n.url.getSafeDomainForUrl(m.Url)||"",O=""!==m.Title&&m.Title===D,b=e.getState(),w=(0,l.spacesSelector)(b),N=(0,l.anonymousSpaceIdsSelector)(b),R={action:r,credentials:y,digits:u.test(m.Password),identifier:m.AnonId,length:(0,o.defaultTo)("",m.Password).length,letters:v||A,lower:v,otp:m.OtpSecret?"1":null,reused:E,sender:c,spaceId:(0,d.getSpaceAnonymousId)(w,m.SpaceId,N),strength:m.Strength,symbols:g.test(m.Password),upper:A,website:D,empty_email:f,empty_login:h,empty_secondary_login:_,always_login:T,strict_domain:I,require_mp:C,has_note_associated:P,is_default_name:O};return{code:a.UsageLogCode.USAGE_PASSWORD_DETAILS,content:R}}t.makePasswordDetailsUsageLog=m,t.sendPasswordDetailsUsageLogs=function(e,t){const r=t.map((t=>m(e,t))).filter(Boolean);r.length&&(0,c.sendUsageLog)(e,r)},t.sendUsageLogPasswordDetails=function(e,t){const r=m(e,t);r&&(0,c.sendUsageLog)(e,r)}},18491:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendPersonalSettingsEditionUsageLogs=t.sendPersonalDataEditionUsageLogsMultiple=t.sendPersonalDataEditionUsageLogs=void 0;const o=r(97211),n=r(97211),a=r(33732),i=r(21458),s=r(73442);t.sendPersonalDataEditionUsageLogs=function(e,t){const{itemEdited:r}=t;(0,a.sendUsageLogPersonalData)(e,t),(0,o.isCredential)(r)&&(0,i.sendUsageLogPasswordDetails)(e,{...t,itemEdited:t.itemEdited}),(0,o.isPaymentCard)(r)},t.sendPersonalDataEditionUsageLogsMultiple=function(e,t){(0,a.sendPersonalDataUsageLogs)(e,t);const r=t.map((e=>{const{itemEdited:t}=e;if((0,o.isCredential)(t))return{...e,itemEdited:t}}));(0,i.sendPasswordDetailsUsageLogs)(e,r)},t.sendPersonalSettingsEditionUsageLogs=function(e,t){Object.keys(t).forEach((r=>{const o=t[r];(0,s.sendUsageLog)(e,{code:n.UsageLogCode.USAGE_CHANGE_SETTINGS,content:{key:r,value:"boolean"==typeof o?o?"true":"false":o}})}))}},71661:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpaceAnonymousId=void 0,t.getSpaceAnonymousId=function(e,t,r){if(!e.some((e=>"accepted"===e.details.status)))return"SPACE_ALL";if(!t||"0"===t)return"SPACE_DEFAULT";if(!r)return"unknown_team_space";const o=r[t];return o||"unknown_team_space"}},10163:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vaultConfig=void 0;const o=r(43301),n=r(69698);t.vaultConfig={commands:{disableVaultItemProtection:{handler:o.disableVaultProtectionHandler}},queries:{getAutofillProtectionContext:{selector:n.autofillProtectionContextSelector}},liveQueries:{}}},74817:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VaultItemDisableProtectionMode=void 0,function(e){e[e.CannotDisable=0]="CannotDisable",e[e.DisableSpecificVaultItem=1]="DisableSpecificVaultItem",e[e.DisableGeneralSetting=2]="DisableGeneralSetting"}(t.VaultItemDisableProtectionMode||(t.VaultItemDisableProtectionMode={}))},43301:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableVaultProtectionHandler=void 0;const o=r(1237),n=r(39392),a=r(98107),i=r(8153);t.disableVaultProtectionHandler=async(e,t)=>{const r=e.storeService.getState();if((0,o.credentialSelector)(r,t)){if((0,i.protectPasswordsSettingSelector)(r))return void(0,n.updateProtectPasswordsSettingHandler)(e,!1);(0,a.disableCredentialProtection)(e,t)}}},69698:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.autofillProtectionContextSelector=void 0;const o=r(45082),n=r(1237),a=r(67634),i=r(81659),s=r(92467),c=r(14122),d=r(15684),l=r(8153);t.autofillProtectionContextSelector=(e,t)=>{if(!t)return{disableMode:o.VaultItemDisableProtectionMode.CannotDisable,isProtected:!1};const r=(0,d.areProtectedItemsUnlockedSelector)(e);if((0,i.paymentCardSelector)(e,t))return{disableMode:o.VaultItemDisableProtectionMode.CannotDisable,isProtected:(0,s.securedDataAutofillCreditcardSelector)(e)&&!r};if((0,a.socialSecurityIdSelector)(e,t))return{disableMode:o.VaultItemDisableProtectionMode.CannotDisable,isProtected:(0,s.securedDataAutofillCreditcardSelector)(e)&&!r};const u=(0,n.credentialSelector)(e,t);if(u){if(!(0,c.hasFeatureSelector)(e,"ptu_web_MPprotect_phase3"))return{disableMode:o.VaultItemDisableProtectionMode.CannotDisable,isProtected:u.AutoProtected&&!r};return(0,l.protectPasswordsSettingSelector)(e)?{disableMode:o.VaultItemDisableProtectionMode.DisableGeneralSetting,isProtected:!r}:{disableMode:o.VaultItemDisableProtectionMode.DisableSpecificVaultItem,isProtected:u.AutoProtected&&!r}}return{disableMode:o.VaultItemDisableProtectionMode.CannotDisable,isProtected:!1}}},91509:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(78022);t.bootstrap=e=>{e.register(o.config)}},11117:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notifySharersOnUpdate=t.makeNewPersonalDataItemBase=t.makeUpdatedPersonalDataItemBase=void 0;const o=r(20428),n=r(78756),a=r(15933),i=r(96045),s=r(88478),c=r(28060),d=r(36109),l=r(57254),u=r(74818);function p(e){const t=(0,c.defaultTo)(""),r="MANUAL"===e.updatedItem.origin?{UserModificationDatetime:e.itemUpdateDate}:{};return{LocaleFormat:(0,u.getLocaleFormat)(e.existingItem,e.updatedItem),SpaceId:t(e.updatedItem.content.spaceId),Attachments:e.updatedItem.attachments,...r}}t.makeUpdatedPersonalDataItemBase=p,t.makeNewPersonalDataItemBase=function(e,t=(0,d.getUnixTimestamp)()){return{kwType:e.kwType,Id:(0,l.generateItemUuid)(),AnonId:(0,l.generateItemUuid)(),CreationDatetime:t,LastBackupTime:0,LastUse:t,...p({updatedItem:e,itemUpdateDate:t})}},t.notifySharersOnUpdate=async function(e,t){const r=(0,o.makeItemService)(),c=(0,n.makeItemWS)(),d=e.getSharingData(),l=e.getUserLogin(),u=(0,s.ukiSelector)(e.getState()),{privateKey:p}=e.getUserSession().keyPair,S=(d.items||[]).find((e=>e.itemId===t.Id));if(!S)throw new Error("Item not found in sharingData");const g=(d.itemGroups||[]).find((e=>(e.items||[]).map((e=>e.itemId)).includes(t.Id)));if(!g)throw new Error("ItemGroup containing item not found in sharingData");const{timestamp:m}=S,y=await(0,a.getItemGroupKey)(g,d.userGroups,p,l);if(!y)throw new Error("Could not decipher itemGroupKey for itemGroup");const v=g.items.find((e=>e.itemId===t.Id));if(!v)throw new Error("Could not find itemKey for item in itemGroup");const A=await(0,i.makeSymmetricEncryption)().decryptAES256(y,v.itemKey),E=await r.makeUpdateItemEvent(m,A,{item:t});return c.updateItem(l,u,E)}},84442:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0;const o=r(55975);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return o.setupSubscriptions}});var n=r(91509);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},66771:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeLiveSelectorGetter=void 0;const o=r(32034),n=r(80398),a=r(3259);t.makeLiveSelectorGetter=(e,t,r,i)=>s=>(0,o.createSelector)(e,i,r,t,((e,t,r,o)=>(0,n.viewListResults)(o)((0,a.applyQuery)(r,t,s,e))))},86965:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.filterOutQuarantinedItems=t.itemIsNotQuarantined=void 0;t.itemIsNotQuarantined=(e,t)=>{const r=((e,t)=>{const r=t.find((t=>t.details&&t.teamId===e.SpaceId));return r?r.details:null})(t,e);return!r||!((e,t)=>e.SpaceId===t.teamId)(t,r)};t.filterOutQuarantinedItems=(e,r)=>{if(0===r.length)return e;return e.filter((e=>(0,t.itemIsNotQuarantined)(r,e)))}},3259:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyQuery=t.getQuerySelector=void 0;const o=r(6045),n=r(92001);t.getQuerySelector=(e,r,o)=>(n,a)=>{const i=e(n),s=o(n),c=r(n);return(0,t.applyQuery)(c,s,a,i)};t.applyQuery=(e,t,r,a)=>{const{sortToken:i,filterToken:s,limit:c}=r,d=(r=>(0,o.filterData)(t,e,s,r))(a),l=(e=>(0,n.sortData)(t,i,e))(d);return{items:c?l.slice(0,c):l,matchingCount:l.length}}},74818:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getValidState=t.isProposedLocaleLocalized=t.getLocaleFormat=void 0;const o=r(97211),n=r(23864),a=r(38215),i=r(31891);function s(e){return!!o.Country[e]&&[o.Country.NO_TYPE,o.Country.UNIVERSAL].every((t=>t!==e))}t.getLocaleFormat=function(e,t){if(!o.isObjectLocalized(t))return o.Country.UNIVERSAL;const r=o.Country[t.content.localeFormat],n=s(r),i=e&&e.LocaleFormat?e.LocaleFormat:o.Country[(0,a.getPlatformInfo)().country]||o.Country.US;return r&&n?r:i},t.isProposedLocaleLocalized=s,t.getValidState=function(e,t){return(0,n.isStateValid)(e,t)?t:(i.default.log(`[Data] Given value (${t}) is not a valid state value for country code ${e}`),"")}},55975:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(86171),n=r(66172),a=r(95467);t.setupSubscriptions=async function(e,t){(0,o.setupSubscriptions)(e,t),(0,n.setupSubscriptions)(e,t),(0,a.setupSubscriptions)(e,t)}},35436:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentItems=t.getDebounceSync=t.WAIT_MS_BEFORE_SYNC=t.nextTick=void 0;const o=r(32234),n=r(60830),a=r(31891),i=r(9473);t.nextTick=r(28255),t.WAIT_MS_BEFORE_SYNC=6e4;t.getDebounceSync=(e,r)=>(0,n.debounce)((n=>{a.Debugger.log("DebounceSync called => informClientsAndSyncPersonalDataChange()"),function(e,r,n){(0,o.reportDataUpdate)(e),(0,t.nextTick)((()=>{r.getInstance().user.attemptSync(n)}))}(e,r,n)}),t.WAIT_MS_BEFORE_SYNC),t.getCurrentItems=function(e,t){const r=i.default[e];return t&&t[r]||[]}},18758:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.maybeDataModelDetailView=t.dataModelDetailView=t.dataModelItemView=void 0;const r=e=>({id:e.Id});t.dataModelItemView=e=>({...r(e),anonId:e.AnonId,hasAttachments:Array.isArray(e.Attachments)&&e.Attachments.length>0,kwType:e.kwType,lastUse:e.LastUse,localeFormat:e.LocaleFormat,spaceId:e.SpaceId});const o=e=>({id:e.Id});t.dataModelDetailView=e=>({...o(e),anonId:e.AnonId,attachments:e.Attachments||[],kwType:e.kwType,lastUse:e.LastUse,localeFormat:e.LocaleFormat,spaceId:e.SpaceId});t.maybeDataModelDetailView=e=>t=>t?e(t):void 0},71992:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(37024);t.config={commands:{},queries:{getAnonymousComputerId:{selector:o.anonymousComputerIdSelector}},liveQueries:{}}},10112:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerABTestingChanged=void 0;const o=r(38029);t.triggerABTestingChanged=function(e){(0,o.default)().abTestingChanged({version:e.version})}},17676:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(71992);t.bootstrap=e=>{e.register(o.config)}},75247:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(17676);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},56431:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.secureDeviceName=void 0,t.secureDeviceName=function(e){return e?e.replace(/https?:\/\//g," "):e}},37024:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.anonymousComputerIdSelector=void 0;const o=r(54516);t.anonymousComputerIdSelector=()=>(0,o.getCommonAppSetting)("anonymousComputerId")},45651:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventBusConnectors=void 0;const o=r(72931);t.EventBusConnectors={sessionOpened:(0,o.slot)(),syncFailure:(0,o.slot)(),syncSuccess:(0,o.slot)(),teamSpaceContentControlDone:(0,o.slot)(),sessionClosed:(0,o.slot)(),familyMemberLeft:(0,o.slot)()}},46947:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.makeEventBusService=void 0;const a=r(72931),i=r(45651);t.makeEventBusService=()=>(0,a.createEventBus)({events:i.EventBusConnectors}),n(r(49997),t)},49997:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},773:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hooks=void 0;const o=r(25654),n=r(44085);t.hooks={healthUpdates:o.healthUpdatesHook,iconsUpdates:n.iconsUpdatesHook}},5533:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCarbonEventStore=void 0,t.defaultCarbonEventStore={healthUpdates:[],iconsUpdates:[]}},8962:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearInstance=t.getInstance=t.setInstance=void 0;const o=r(9576),n=r(773);let a=null;t.setInstance=e=>{a=new o.EventStoreConsumer(e,n.hooks)};t.getInstance=()=>{if(!a)throw new Error("Cannot get EventStoreConsumer instance");return a};t.clearInstance=()=>{a&&a.teardown(),a=null}},78330:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearInstance=t.getInstance=t.setInstance=void 0;let r=null;t.setInstance=e=>{r=e};t.getInstance=()=>{if(!r)throw new Error("Cannot get EventStore instance");return r};t.clearInstance=()=>{r&&r.teardown(),r=null}},37329:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(10165),n=r(54612),a=r(39427);t.config={commands:{joinFamily:{handler:o.joinFamilyRequest},leaveFamily:{handler:a.leaveFamilyRequest},removeFamilyMember:{handler:o.removeFamilyMemberRequest},resetFamilyJoinToken:{handler:o.resetFamilyJoinTokenRequest},getFamilyDetails:{handler:n.getFamilyDetailsRequest}},queries:{},liveQueries:{}}},29059:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FamilyRenewalPlatform=t.FamilyMemberRole=t.FamilyStatusCode=t.JoinFamilyUserStatus=void 0;var o=r(50206);Object.defineProperty(t,"JoinFamilyUserStatus",{enumerable:!0,get:function(){return o.JoinFamilyUserStatus}}),Object.defineProperty(t,"FamilyStatusCode",{enumerable:!0,get:function(){return o.FamilyStatusCode}}),Object.defineProperty(t,"FamilyMemberRole",{enumerable:!0,get:function(){return o.FamilyMemberRole}}),Object.defineProperty(t,"FamilyRenewalPlatform",{enumerable:!0,get:function(){return o.FamilyRenewalPlatform}})},22531:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(37329);t.bootstrap=e=>{e.register(o.config)}},47171:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0,n(r(29059),t);var a=r(22531);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}})},54612:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFamilyDetailsRequest=void 0;const o=r(50206),n=r(16554),a=r(31891),i=r(15876),s=r(8153),c=r(2282);t.getFamilyDetailsRequest=async function(e){const{storeService:t}=e,r=(0,s.userLoginSelector)(t.getState());try{const e=await(0,i.getFamilyDetails)(t,r);if((0,i.isApiError)(e))return{success:!1,error:{code:(0,i.getCode)(e.code,[c.UserMustBeFamilyAdmin])}};const{name:a,id:s,joinToken:d,statusCode:l,members:u,maxMembers:p}=e;return{success:!0,response:{name:a,id:s,joinToken:d,statusCode:l,members:{admin:(0,n.getAdmin)(u),regular:(0,n.getMembersByRole)(u,o.FamilyMemberRole.REGULAR),removed:(0,n.getMembersByRole)(u,o.FamilyMemberRole.REMOVED)},spots:(0,n.getSpots)(u,p)}}}catch(e){return a.Debugger.error(`[Family] getFamilyDetailsRequest - Failed: ${e}`),{success:!1,error:{code:i.UnknownError}}}}},16554:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpots=t.getMembersCount=t.getMembersByRole=t.getAdmin=void 0;const o=r(50206);function n(e,t){return e.filter((e=>e.role===t))}function a(e){return n(e,o.FamilyMemberRole.ADMIN).length+n(e,o.FamilyMemberRole.REGULAR).length}t.getAdmin=function(e){return e.find((e=>e.role===o.FamilyMemberRole.ADMIN))},t.getMembersByRole=n,t.getMembersCount=a,t.getSpots=function(e,t){return t-a(e)}},38251:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRenewalInformation=void 0;const o=r(50206),n=r(15876);t.getRenewalInformation=e=>{if(!e||e.state===n.FamilyStopRenewalState.STOPPED)return{showRenewalMessage:!1};const t=(r=e.platform)===n.FamilyStopRenewalPlatform.IOS_APP_STORE?o.FamilyRenewalPlatform.IOS_APP_STORE:r===n.FamilyStopRenewalPlatform.MAC_STORE?o.FamilyRenewalPlatform.MAC_STORE:r===n.FamilyStopRenewalPlatform.PLAY_STORE?o.FamilyRenewalPlatform.PLAY_STORE:null;var r;return t?{showRenewalMessage:!0,platform:t}:{showRenewalMessage:!1}}},9863:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserStatus=void 0;const o=r(97211),n=r(50206);t.getUserStatus=(e,t)=>{switch(e){case o.PremiumStatusCode.NEW_USER:return n.JoinFamilyUserStatus.NEW_USER;case o.PremiumStatusCode.NO_PREMIUM:return t?n.JoinFamilyUserStatus.EXISTING_FREE_USER:n.JoinFamilyUserStatus.NEW_USER;case o.PremiumStatusCode.OLD_ACCOUNT:return n.JoinFamilyUserStatus.EXISTING_FREE_USER;case o.PremiumStatusCode.PREMIUM:case o.PremiumStatusCode.PREMIUM_CANCELLED:return n.JoinFamilyUserStatus.EXISTING_PREMIUM_USER;default:throw new Error("Family getUserStatus: impossible to identify user status")}}},10165:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(69369),t),n(r(86995),t),n(r(67474),t)},69369:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.joinFamilyRequest=void 0;const o=r(31891),n=r(15876),a=r(9863),i=r(38251),s=r(2282);t.joinFamilyRequest=async function(e,t){const{storeService:r}=e,{login:c,joinToken:d}=t;try{const e=await(0,n.joinFamily)(r,{login:c,joinToken:d});if((0,n.isApiError)(e))return{success:!1,error:{code:(0,n.getCode)(e.code,s.joinFamilyErrors)}};const{name:t,userExists:o,statusCode:l,stopRenewalResult:u}=e,p=(0,i.getRenewalInformation)(u);return{success:!0,response:{name:t,userExists:o,userStatus:(0,a.getUserStatus)(l,o),renewalInformation:p}}}catch(e){return o.Debugger.error(`[Family] joinFamilyRequest - Failed: ${e}`),{success:!1,error:{code:n.UnknownError}}}}},39427:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.leaveFamilyRequest=void 0;const o=r(31891),n=r(15876),a=r(8153),i=r(2282);t.leaveFamilyRequest=async function(e){const{storeService:t,eventBusService:r}=e,s=(0,a.userLoginSelector)(t.getState());try{const e=await(0,n.leaveFamily)(t,s);return(0,n.isApiError)(e)?{success:!1,error:{code:(0,n.getCode)(e.code,i.leaveFamilyErrors)}}:(r.familyMemberLeft(),{success:!0,response:{}})}catch(e){return o.Debugger.error(`[Family] leaveFamilyRequest - Failed: ${e}`),{success:!1,error:{code:n.UnknownError}}}}},86995:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeFamilyMemberRequest=void 0;const o=r(31891),n=r(15876),a=r(8153),i=r(2282);t.removeFamilyMemberRequest=async function(e,t){const{storeService:r}=e,s=(0,a.userLoginSelector)(r.getState());try{const e=await(0,n.removeFamilyMember)(r,s,{userId:t.userId});return(0,n.isApiError)(e)?{success:!1,error:{code:(0,n.getCode)(e.code,i.removeFamilyMemberErrors)}}:{success:!0,response:{}}}catch(e){return o.Debugger.error(`[Family] removeFamilyMemberRequest - Failed: ${e}`),{success:!1,error:{code:n.UnknownError}}}}},67474:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetFamilyJoinTokenRequest=void 0;const o=r(31891),n=r(15876),a=r(8153),i=r(2282);t.resetFamilyJoinTokenRequest=async function(e){const{storeService:t}=e,r=(0,a.userLoginSelector)(t.getState());try{const e=await(0,n.resetFamilyJoinToken)(t,r);if((0,n.isApiError)(e))return{success:!1,error:{code:(0,n.getCode)(e.code,[i.UserMustBeFamilyAdmin])}};const{joinToken:o}=e;return{success:!0,response:{joinToken:o}}}catch(e){return o.Debugger.error(`[Family] resetFamilyJoinTokenRequest - Failed: ${e}`),{success:!1,error:{code:n.UnknownError}}}}},50206:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FamilyRenewalPlatform=t.FamilyMemberRole=t.FamilyStatusCode=t.JoinFamilyUserStatus=void 0,function(e){e.NEW_USER="NEW_USER",e.EXISTING_FREE_USER="EXISTING_FREE_USER",e.EXISTING_PREMIUM_USER="EXISTING_PREMIUM_USER"}(t.JoinFamilyUserStatus||(t.JoinFamilyUserStatus={})),function(e){e[e.DISCONTINUED=0]="DISCONTINUED",e[e.PREMIUM=1]="PREMIUM",e[e.PREMIUM_PLUS=2]="PREMIUM_PLUS"}(t.FamilyStatusCode||(t.FamilyStatusCode={})),function(e){e.ADMIN="admin",e.REGULAR="regular",e.REMOVED="removed"}(t.FamilyMemberRole||(t.FamilyMemberRole={})),function(e){e.IOS_APP_STORE="ios",e.MAC_STORE="mac",e.PLAY_STORE="playstore"}(t.FamilyRenewalPlatform||(t.FamilyRenewalPlatform={}))},7120:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(14122),n=r(78334);t.config={commands:{},queries:{getHasFeature:{selector:o.hasFeatureSelector},getFeatures:{selector:o.featuresSelector}},liveQueries:{liveHasFeature:{operator:n.hasFeature$}}}},74263:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},91058:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(7120);t.bootstrap=e=>{e.register(o.config)}},77795:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0,n(r(55730),t);var a=r(91058);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}})},78334:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hasFeature$=void 0;const o=r(18948),n=r(3343),a=r(14122);t.hasFeature$=e=>(0,o.pipe)((0,n.map)((t=>(0,a.hasFeatureSelector)(t,e))),(0,n.distinctUntilChanged)())},14122:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hasFeatureSelector=t.featuresSelector=void 0;const o=r(34376);t.featuresSelector=e=>e.userSession.personalFeatures.features||{};t.hasFeatureSelector=(e,r)=>{const n=(0,t.featuresSelector)(e);return(0,o.hasFeature)(n,r)}},34376:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hasFeature=void 0;t.hasFeature=(e,t)=>e[t]},55730:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},63929:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(67830);t.config={commands:{setGlobalExtensionSettings:{handler:o.setGlobalExtensionSettings},getGlobalExtensionSettings:{handler:o.getGlobalExtensionSettings}},queries:{},liveQueries:{}}},56098:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobalExtensionSettingsState=t.SET_GLOBAL_EXTENSION_SETTINGS=void 0,t.SET_GLOBAL_EXTENSION_SETTINGS="SET_GLOBAL_EXTENSION_SETTINGS";t.setGlobalExtensionSettingsState=e=>({type:t.SET_GLOBAL_EXTENSION_SETTINGS,extensionSettings:e})},92905:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.globalExtensionSettingsReducer=void 0;var o=r(54394);Object.defineProperty(t,"globalExtensionSettingsReducer",{enumerable:!0,get:function(){return o.globalExtensionSettingsReducer}})},54394:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.globalExtensionSettingsReducer=void 0;const o=r(56098);t.globalExtensionSettingsReducer=(e={},t)=>t.type===o.SET_GLOBAL_EXTENSION_SETTINGS?Object.assign({},e,{extensionSettings:t.extensionSettings}):e},80519:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(63929);t.bootstrap=e=>{e.register(o.config)}},67830:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobalExtensionSettings=t.getGlobalExtensionSettings=void 0;const o=r(84717),n=r(56098),a=r(59125),i="consents",s={interactionDataConsent:"interactionData",personalDataConsent:"personalData"},c={interactionDataConsent:null,personalDataConsent:null};t.getGlobalExtensionSettings=async e=>{const t=e.storageService.getLocalStorage();try{const e=await t.readItem(i);return r=e,Object.values(s).every((e=>Object.prototype.hasOwnProperty.call(r,e)))?{interactionDataConsent:r[s.interactionDataConsent],personalDataConsent:r[s.personalDataConsent]}:c}catch{return console.error("failed parsing user consent values; proceeding as if they haven't been set."),{interactionDataConsent:null,personalDataConsent:null}}var r};t.setGlobalExtensionSettings=async(e,t)=>{const r=e.storageService.getLocalStorage();try{await r.writeItem(i,{[s.interactionDataConsent]:t.interactionDataConsent,[s.personalDataConsent]:t.personalDataConsent}),await e.storeService.dispatch((0,n.setGlobalExtensionSettingsState)(t)),(0,a.setAllowedToSendExceptionLog)(!1!==t.interactionDataConsent),(0,o.logToggleAnalyticsEvent)(e)}catch{return{success:!1}}return{success:!0}}},42891:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(80519);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},35098:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(81604);t.config={commands:{evaluatePassword:{handler:o.evaluatePassword}},queries:{},liveQueries:{}}},16381:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},80336:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCheckedCredentials=void 0;t.getCheckedCredentials=e=>e.filter((e=>e.Checked))},21073:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBreachedPasswords=void 0;t.getBreachedPasswords=e=>{const t={};return(e||[]).forEach((e=>{(e.LeakedPasswords||[]).forEach((r=>{t.hasOwnProperty(r)?t[r].push(e.BreachId):t[r]=[e.BreachId]}))})),t}},59403:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getActiveBreachesCount=t.getCountOfCredentialsCompromisedByBreaches=t.getCompromisedCredentialsCount=t.getCompromisedCredentials=t.getCredentialCompromisedInfo=t.isCredentialCompromisedById=t.getCredentialBreachIdsInfo=t.getCredentialBreachIdsById=void 0;const o=r(59122),n=r(84318);t.getCredentialBreachIdsById=(e,t)=>{const r=t[e];return r?(0,n.computed)(r.credentialBreachIds):(0,n.notComputed)()};t.getCredentialBreachIdsInfo=(e,r,a)=>{if(!(0,o.isEligibleForHealth)(a,e))return(0,n.notEligible)();const i=(0,t.getCredentialBreachIdsById)(e.Id,r);return(0,n.eligible)(i)};t.isCredentialCompromisedById=(e,t)=>{const r=t[e];if(!r)return(0,n.notComputed)();const o=r.credentialBreachIds.length>0;return(0,n.computed)(o)};t.getCredentialCompromisedInfo=(e,r,a)=>{if(!(0,o.isEligibleForHealth)(a,e))return(0,n.notEligible)();const i=(0,t.isCredentialCompromisedById)(e.Id,r);return(0,n.eligible)(i)};t.getCompromisedCredentials=(e,r,o)=>e.filter((e=>{const a=(0,t.getCredentialCompromisedInfo)(e,r,o);return(0,n.healthInfoHasValue)(a,!0)}));t.getCompromisedCredentialsCount=(e,r,o)=>(0,t.getCompromisedCredentials)(e,r,o).length;t.getCountOfCredentialsCompromisedByBreaches=(e,t)=>{const r=e.map((e=>e.BreachId));return Object.values(t).filter((e=>e.some((e=>r.includes(e))))).length};t.getActiveBreachesCount=(e,t)=>e.filter((e=>Object.values(t).some((t=>t.some((t=>t===e.BreachId)))))).length},78457:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialLatestBreach=void 0;t.getCredentialLatestBreach=(e,t)=>0===e.length?null:e.map((e=>{const r=t.find((t=>t.BreachId===e));return r?r.Content:void 0})).filter((e=>void 0!==e)).reduce(((e,t)=>!e||Date.parse(t.eventDate)>Date.parse(e.eventDate)?t:e),null)},99999:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialBreachIds=void 0;const o=r(53562);t.getCredentialBreachIds=(e,t)=>[...Object.keys(t).reduce(((r,n)=>(0,o.arePasswordsSimilar)(n,e.Password)?new Set([...r,...t[n]]):r),new Set)]},83617:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialCompromisedView=void 0;const o=r(59403),n=r(84318),a=r(78457);t.getCredentialCompromisedView=function(e,t,r,i){const s=(0,o.getCredentialBreachIdsInfo)(i,e,r);if("not-eligible"===s.type)return(0,n.notEligible)();if("not-computed"===s.value.type)return(0,n.eligible)((0,n.notComputed)());const c=(0,a.getCredentialLatestBreach)(s.value.value,t);return c?(0,n.eligible)((0,n.computed)({isCompromised:!0,details:{date:c.eventDate,title:c.name?c.name:c.domains.join(", ")}})):(0,n.eligible)((0,n.computed)({isCompromised:!1}))}},4323:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getImportantCorruptedCredentialsCount=t.getCorruptedCredentialsCount=t.getImportantCorruptedCredentials=t.getCorruptedCredentials=void 0;const o=r(34245),n=r(84318),a=r(62501);function i(e,t,r,a){return e.filter((e=>{const i=(0,o.getCredentialCorruptedInfo)(e,t,r,a);return(0,n.healthInfoHasValue)(i,!0)}))}function s(e,t,r,i){return e.filter((e=>{const s=(0,a.getCredentialIsImportantInfo)(e,t,i),c=(0,o.getCredentialCorruptedInfo)(e,t,r,i);return(0,n.healthInfoHasValue)(s,!0)&&(0,n.healthInfoHasValue)(c,!0)}))}t.getCorruptedCredentials=i,t.getImportantCorruptedCredentials=s,t.getCorruptedCredentialsCount=function(e,t,r,o){return i(e,t,r,o).length},t.getImportantCorruptedCredentialsCount=function(e,t,r,o){return s(e,t,r,o).length}},34245:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialCorruptedInfo=void 0;const o=r(59403),n=r(88763),a=r(43650),i=r(84318);t.getCredentialCorruptedInfo=function(e,t,r,s){const c=(0,n.getCredentialPasswordReusedInfo)(e,r,s,{reusedCount:1}),d=(0,a.getCredentialPasswordIsWeakInfo)(e,t,s),l=(0,o.getCredentialCompromisedInfo)(e,t,s);return"not-eligible"===c.type||"not-eligible"===d.type||"not-eligible"===l.type?(0,i.notEligible)():(0,i.healthInfoHasValue)(c,!0)||(0,i.healthInfoHasValue)(d,!0)||(0,i.healthInfoHasValue)(l,!0)?(0,i.eligible)((0,i.computed)(!0)):(0,i.healthInfoIsComputed)(c)||(0,i.healthInfoIsComputed)(d)||(0,i.healthInfoIsComputed)(l)?(0,i.eligible)((0,i.computed)(!1)):(0,i.eligible)((0,i.notComputed)())}},25654:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.healthUpdatesHook=void 0;const o=r(59146),n=r(40914);t.healthUpdatesHook=async e=>{const t=(0,o.getInstance)();if(!t)return!1;switch(e.type){case"breachUpdates":return t.handleBreachesUpdates();case"credentialUpdates":return t.handleCredentialUpdates(e.credentialIds);case"spaceUpdates":return t.handleSpaceUpdates(e.spaceIds);default:return(0,n.assertUnreachable)(e)}}},62501:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialIsImportantInfo=void 0;const o=r(59122),n=r(84318);t.getCredentialIsImportantInfo=function(e,t,r){return(0,o.isEligibleForHealth)(r,e)?(0,n.eligible)(((e,t)=>{const r=t[e];return r?(0,n.computed)(r.isImportant):(0,n.notComputed)()})(e.Id,t)):(0,n.notEligible)()}},32195:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCredentialImportant=void 0;const o=r(94417),n=r(66378),a=r(583);let i=!1,s=e=>{},c=e=>{};const d=new Promise(((e,t)=>{s=e,c=t}));t.isCredentialImportant=async e=>{const t=(0,a.getDomainForCredential)(e);if(!t)return!1;i||(i=!0,(async()=>{const e=`${(0,n.getPublicPath)()}assets/domains/importantDomains.json`,t=await fetch(e),r=await t.json();if(!Array.isArray(r)){const e=new Error("[isCredentialImportant] - getImportantDomains: received unexpected file.");c(e)}s(r)})());const r=await d;return(0,o.binaryContains)(r,t)}},31953:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addSimilarPasswords=void 0;const o=r(53562),n=(e,t)=>{const r=new Set(e);return r.add(t),r};t.addSimilarPasswords=(e,t,r)=>r.reduce(((e,r)=>((e,t,r)=>{const a={...e},i=new Set;for(const e of t)e.Id!==r.Id&&(0,o.arePasswordsSimilar)(e.Password,r.Password)&&(i.add(e.Id),a[e.Id]=n(a[e.Id]||new Set,r.Id));return a[r.Id]=i,a})(e,t,r)),e)},53562:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.arePasswordsSimilar=void 0;t.arePasswordsSimilar=function(e,t,r=3,o=5){const n=e.length,a=t.length;if(n<o||a<o)return e===t;if(e===t)return!0;if(Math.abs(n-a)>r)return!1;let i=new Array(a+1),s=new Array(a+1),c=!1;for(let e=0;e<a+1;e++)i[e]=e;for(let o=0;o<n;o++){s[0]=o+1,c=s[0]>r;for(let n=0;n<a;n++){const a=i[n+1]+1,d=s[n]+1;let l=i[n];e[o]!==t[n]&&l++,s[n+1]=Math.min(a,Math.min(d,l)),c=c&&s[n+1]>r}const n=i;if(i=s,s=n,c)break}return i[a]<=r}},84245:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSimilarPasswords=void 0;const o=r(53562);t.getSimilarPasswords=e=>{const t={};for(let r=0;r<e.length;r++){const n=e[r],a=n.Password,i=n.Id;t[i]||(t[i]=new Set);const s=t[i];for(let n=r+1;n<e.length;n++){const r=e[n].Id,c=e[n].Password,d=(0,o.arePasswordsSimilar)(a,c);t[r]||(t[r]=new Set);const l=t[r];d?(s.add(r),l.add(i)):(s.delete(r),l.delete(i))}}return t}},18389:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeSimilarPasswords=void 0;const r=(e,t)=>{const r=new Set(e);for(const e of t)r.delete(e);return r};t.removeSimilarPasswords=(e,t)=>Object.keys(e).reduce(((o,n)=>t.includes(n)?o:{...o,[n]:r(e[n],t)}),{})},88763:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getReusedCredentialsCount=t.getReusedCredentials=t.getCredentialSimilarCountInfo=t.getCredentialPasswordReusedInfo=t.getSimilarCredentialsCountById=t.isCredentialPasswordReusedById=void 0;const o=r(59122),n=r(84318);t.isCredentialPasswordReusedById=(e,t,r={reusedCount:1})=>t[e]?{type:"computed",value:t[e].size>=r.reusedCount}:{type:"not-computed"};t.getSimilarCredentialsCountById=(e,t)=>{const r=t[e];return r?{type:"computed",value:r.size}:{type:"not-computed"}};t.getCredentialPasswordReusedInfo=(e,r,a,i={reusedCount:1})=>{if(!(0,o.isEligibleForHealth)(a,e))return(0,n.notEligible)();const s=(0,t.isCredentialPasswordReusedById)(e.Id,r,i);return(0,n.eligible)(s)};t.getCredentialSimilarCountInfo=(e,r,n)=>{if(!(0,o.isEligibleForHealth)(n,e))return{type:"not-eligible"};return{type:"eligible",value:(0,t.getSimilarCredentialsCountById)(e.Id,r)}};t.getReusedCredentials=(e,r,o)=>e.filter((e=>{const a=(0,t.getCredentialPasswordReusedInfo)(e,r,o);return(0,n.healthInfoHasValue)(a,!0)}));t.getReusedCredentialsCount=(e,r,o)=>(0,t.getReusedCredentials)(e,r,o).length},40969:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSafeCredentials=t.getCredentialSafetyInfo=t.isCredentialSafeById=void 0;const o=r(59403),n=r(88763),a=r(43650),i=r(59122),s=r(84318);t.isCredentialSafeById=(e,t,r)=>{const i=(0,o.isCredentialCompromisedById)(e,t),c=(0,n.isCredentialPasswordReusedById)(e,r),d=(0,a.isCredentialPasswordWeakById)(e,t);return"computed"!==i.type||"computed"!==c.type||"computed"!==d.type?(0,s.notComputed)():(0,s.computed)(!c.value&&!i.value&&!d.value)};t.getCredentialSafetyInfo=(e,r,o,n)=>{if(!(0,i.isEligibleForHealth)(n,e))return(0,s.notEligible)();const a=(0,t.isCredentialSafeById)(e.Id,r,o);return(0,s.eligible)(a)};t.getSafeCredentials=(e,r,o,n)=>e.filter((e=>{const a=(0,t.getCredentialSafetyInfo)(e,r,o,n);return(0,s.healthInfoHasValue)(a,!0)}))},89603:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.computeSecurityScore=t.MIN_SCORE=t.MIN_CREDENTIALS_COUNT=void 0,t.MIN_CREDENTIALS_COUNT=5;t.MIN_SCORE=.2,t.computeSecurityScore=function(e,r,o){if(o<t.MIN_CREDENTIALS_COUNT)return null;const n=.6*Math.pow(1-r/o,1),a=.4*Math.pow(1-e/o,1);return t.MIN_SCORE+(1-t.MIN_SCORE)*(n+a)}},96857:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSecurityScore=void 0;const o=r(4323),n=r(89603),a=r(59122);t.getSecurityScore=function(e,t,r,i){const s=e.filter((e=>(0,a.isEligibleForHealth)(i,e))),c=(0,o.getCorruptedCredentialsCount)(s,t,r,i),d=(0,o.getImportantCorruptedCredentialsCount)(s,t,r,i);return(e=>null===e?null:Math.round(100*e))((0,n.computeSecurityScore)(c,d,s.length))}},2173:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.load=void 0;const o=r(12120);t.load=async e=>{const{data:t}=await(0,o.httpGetUsingFetch)(`${e}assets/frequency_lists.json`);return t}},10676:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialStrengthInfo=t.getCredentialStrengthById=void 0;const o=r(59122);t.getCredentialStrengthById=(e,t)=>{const r=t[e];return r&&void 0!==r.strength?{type:"computed",value:r.strength}:{type:"not-computed"}};t.getCredentialStrengthInfo=(e,r,n)=>{if(!(0,o.isEligibleForHealth)(n,e))return{type:"not-eligible"};return{type:"eligible",value:(0,t.getCredentialStrengthById)(e.Id,r)}}},81604:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.evaluatePassword=t.evaluatePasswordStrength=t.loadFrequencyLists=void 0;const o=r(85465),n=r(66378),a=r(2173);let i=()=>{};const s=new Promise((e=>{i=e}));t.loadFrequencyLists=async()=>{const e=(0,n.getPublicPath)(),t=await(0,a.load)(e);(0,o.setFrequencyLists)(t),i()};const c=async e=>(await s,(0,o.evaluate)(e));t.evaluatePasswordStrength=async e=>(await c(e)).score;t.evaluatePassword=async(e,t)=>{const{score:r,feedback:o}=await c(t.password);return{score:r,feedback:o}}},45854:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.evaluatePasswordStrengthOutOfFive=void 0;const o=r(81604);t.evaluatePasswordStrengthOutOfFive=async e=>{if(e)return await(0,o.evaluatePasswordStrength)(e)/25}},59146:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearInstance=t.getInstance=t.setInstance=void 0;const o=r(13472);let n=null;t.setInstance=(e,t)=>(n=n||new o.HealthUpdater(e,t),n);t.getInstance=()=>n;t.clearInstance=()=>{n&&n.teardown(),n=null}},13472:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HealthUpdater=void 0;const o=r(18948),n=r(3343),a=r(28354),i=r(40929),s=r(7224),c=r(30882),d=r(36519),l=r(5087),u=r(31891),p=r(1619),S=r(54670),g=r(40914),m=r(63453),y="passwordHealthWebBackend";var v;!function(e){e.BreachesOperation="breachesOperation",e.CredentialsOperation="credentialsOperation",e.SpacesOperation="spacesOperation"}(v||(v={}));const A=async(e,t)=>{const{credentialIds:r}=t,o=(0,l.healthSelector)(e),n=(0,l.breachedPasswordsSelector)(e),a=(0,d.credentialsSelector)(e),i=(0,S.spacesSelector)(e);return await(0,s.updateHealthStateForCredentials)(o,a,i,n,r)},E=async(e,t)=>{const r=(0,l.healthSelector)(e),o=(0,d.credentialsSelector)(e),n=(0,S.spacesSelector)(e),a=(0,m.breachesSelector)(e);return(0,i.updateHealthStateForBreaches)(r,a,o,n)},f=async(e,t)=>{const{spaceIds:r}=t,o=(0,l.healthSelector)(e),n=(0,l.breachedPasswordsSelector)(e),a=(0,d.credentialsSelector)(e),i=(0,S.spacesSelector)(e);return await(0,c.updateHealthStateForSpaces)(o,a,i,n,r)};t.HealthUpdater=class{constructor(e,t){this.localStorageService=e,this.storeService=t,this._operation$=new o.Subject,this.subs=new Set,this.handleCredentialUpdates=async e=>{if(!this.storeService.getPersonalFeatures().features[y])return!0;const t=(0,a.v4)(),r=new Promise((e=>{const r=this._operationResults$.subscribe((o=>{o.id===t&&(e(o.success),r.unsubscribe(),this.subs.delete(r))}));this.subs.add(r)}));return this.triggerCredentialsOperation(t,e),await r},this.handleSpaceUpdates=async e=>{if(!this.storeService.getPersonalFeatures().features[y])return!0;const t=(0,a.v4)(),r=new Promise((e=>{const r=this._operationResults$.subscribe((o=>{o.id===t&&(e(o.success),r.unsubscribe(),this.subs.delete(r))}));this.subs.add(r)}));return this.triggerSpacesOperation(t,e),await r},this.handleBreachesUpdates=async()=>{if(!this.storeService.getPersonalFeatures().features[y])return!0;const e=(0,a.v4)(),t=new Promise((t=>{const r=this._operationResults$.subscribe((o=>{o.id===e&&(t(o.success),r.unsubscribe(),this.subs.delete(r))}));this.subs.add(r)}));return this.triggerBreachesOperation(e),await t},this.triggerCredentialsOperation=(e,t)=>{this._operation$.next({credentialIds:t,id:e,type:v.CredentialsOperation})},this.triggerSpacesOperation=(e,t)=>{this._operation$.next({id:e,spaceIds:t,type:v.SpacesOperation})},this.triggerBreachesOperation=e=>{this._operation$.next({id:e,type:v.BreachesOperation})},this.handleOperation=async(e,t)=>{const{type:r,id:o}=t,n={id:o,type:r},a=this.localStorageService.getInstance();try{const r=this.storeService.getState(),o=await e(r,t);await a.storeHealth(o);const i=(0,p.healthStateUpdated)(o);return this.storeService.dispatch(i),{...n,success:!0}}catch(e){return u.Debugger.error(e),{...n,success:!1}}},this.onOperation=async e=>{switch(e.type){case v.CredentialsOperation:return this.handleOperation(A,e);case v.SpacesOperation:return this.handleOperation(f,e);case v.BreachesOperation:return this.handleOperation(E,e);default:return(0,g.assertUnreachable)(e)}},this.setupOperationsHandling=()=>{const e=this._operation$.pipe((0,n.concatMap)(this.onOperation),(0,n.share)()),t=e.subscribe();this.subs.add(t),this._operationResults$=e},this.setupOperationsHandling()}teardown(){this.subs.forEach((e=>e.unsubscribe()))}}},40929:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateHealthStateForBreaches=void 0;const o=r(99999),n=r(41147),a=r(59122),i=r(21073);t.updateHealthStateForBreaches=(e,t,r,s)=>{const{credentialsHealth:c}=e,d=(0,i.getBreachedPasswords)(t),l=Object.keys(c).reduce(((e,t)=>{const i=(0,n.findDataModelObject)(t,r);if(!i||!(0,a.isEligibleForHealth)(s,i))return e;const l={...c[t],credentialBreachIds:(0,o.getCredentialBreachIds)(i,d)};return{...e,[t]:l}}),{});return{...e,breachedPasswords:d,credentialsHealth:l}}},7224:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateCredentialHealthForCredentials=t.updateSimilarPasswordsForCredentials=t.updateHealthStateForCredentials=void 0;const o=r(31953),n=r(18389),a=r(92193),i=r(59122),s=r(41147);t.updateHealthStateForCredentials=async(e,r,o,n,a)=>{const{credentialsHealth:i,similarPasswords:s}=e,c=await(0,t.updateCredentialHealthForCredentials)(i,r,o,n,a),d=await(0,t.updateSimilarPasswordsForCredentials)(s,r,o,a);return{...e,credentialsHealth:c,similarPasswords:d}};t.updateSimilarPasswordsForCredentials=async(e,t,r,a)=>{const c=t.filter((e=>(0,i.isEligibleForHealth)(r,e)));return a.reduce(((e,t)=>{const r=(0,s.findDataModelObject)(t,c),a=(0,n.removeSimilarPasswords)(e,[t]);return r?(0,o.addSimilarPasswords)(a,c,[r]):a}),e)};const c=(e,t)=>{const{[t]:r,...o}=e;return o};t.updateCredentialHealthForCredentials=async(e,t,r,o,n)=>{let d={...e};for(const e of n){d=c(d,e);const n=(0,s.findDataModelObject)(e,t);if(!n||!(0,i.isEligibleForHealth)(r,n))continue;const l=await(0,a.getCredentialHealth)(o,n);d={...d,[n.Id]:l}}return d}},30882:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateHealthStateForSpaces=void 0;const o=r(7224);t.updateHealthStateForSpaces=(e,t,r,n,a)=>{const i=t.filter((e=>e.SpaceId&&a.includes(e.SpaceId))).map((e=>e.Id));return(0,o.updateHealthStateForCredentials)(e,t,r,n,i)}},43650:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getWeakCredentialsCount=t.getWeakCredentials=t.getCredentialPasswordIsWeakInfo=t.isCredentialPasswordWeakById=void 0;const o=r(59122),n=r(84318),a=r(2420);t.isCredentialPasswordWeakById=(e,t)=>{const r=t[e];return r&&void 0!==r.strength?{type:"computed",value:r.strength<a.minAcceptablePasswordStrength}:{type:"not-computed"}};t.getCredentialPasswordIsWeakInfo=(e,r,a)=>{if(!(0,o.isEligibleForHealth)(a,e))return(0,n.notEligible)();const i=(0,t.isCredentialPasswordWeakById)(e.Id,r);return(0,n.eligible)(i)};t.getWeakCredentials=(e,r,o)=>e.filter((e=>{const a=(0,t.getCredentialPasswordIsWeakInfo)(e,r,o);return(0,n.healthInfoHasValue)(a,!0)}));t.getWeakCredentialsCount=(e,r,o)=>(0,t.getWeakCredentials)(e,r,o).length},8552:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(35098);t.bootstrap=e=>{e.register(o.config)}},26530:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.computeAllHealthState=t.computeCredentialsHealth=t.computeSimilarPasswords=void 0;const o=r(92193),n=r(84245),a=r(59122),i=r(54670),s=r(36519),c=r(63453),d=r(21073);t.computeSimilarPasswords=(e,t)=>{const r=e.filter((e=>(0,a.isEligibleForHealth)(t,e)));return(0,n.getSimilarPasswords)(r)};t.computeCredentialsHealth=async(e,t,r)=>{const n=e.filter((e=>(0,a.isEligibleForHealth)(t,e)));return await(0,o.getCredentialsHealth)(r,n)};t.computeAllHealthState=async e=>{const r=(0,s.credentialsSelector)(e),o=(0,i.activeSpacesSelector)(e),n=(0,c.breachesSelector)(e),a=(0,d.getBreachedPasswords)(n);return{breachedPasswords:a,credentialsHealth:await(0,t.computeCredentialsHealth)(r,o,a),similarPasswords:(0,t.computeSimilarPasswords)(r,o)}}},59122:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isEligibleForHealth=void 0;const o=r(29606),n=r(86965);t.isEligibleForHealth=(e,t)=>!t.Checked&&!!t.Password&&((e,t)=>{if(!t.SpaceId)return!0;const r=e.filter(o.isQuarantined);return(0,n.itemIsNotQuarantined)(r,t)})(e,t)},92193:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialsHealth=t.getCredentialHealth=void 0;const o=r(32195),n=r(45854),a=r(99999);t.getCredentialHealth=async(e,t)=>{const r=await(0,n.evaluatePasswordStrengthOutOfFive)(t.Password),i=await(0,o.isCredentialImportant)(t);return{credentialBreachIds:(0,a.getCredentialBreachIds)(t,e),isImportant:i,strength:r}};t.getCredentialsHealth=async(e,r)=>{const o={};for(const n of r)o[n.Id]=await(0,t.getCredentialHealth)(e,n);return o}},84318:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notComputed=t.computed=t.notEligible=t.eligible=t.healthInfoIsComputed=t.healthInfoHasValue=t.unwrapHealthInfoValueOr=void 0;t.unwrapHealthInfoValueOr=(e,t)=>"not-eligible"===e.type||"not-computed"===e.value.type?t:e.value.value;t.healthInfoHasValue=(e,t)=>"eligible"===e.type&&"computed"===e.value.type&&e.value.value===t;t.healthInfoIsComputed=e=>"eligible"===e.type&&"computed"===e.value.type;t.eligible=e=>({type:"eligible",value:e});t.notEligible=()=>({type:"not-eligible"});t.computed=e=>({type:"computed",value:e});t.notComputed=()=>({type:"not-computed"})},33204:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(8552);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},5087:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.breachedPasswordsSelector=t.similarPasswordsSelector=t.credentialsHealthSelector=t.healthSelector=void 0;t.healthSelector=e=>e.userSession.health;t.credentialsHealthSelector=e=>(0,t.healthSelector)(e).credentialsHealth;t.similarPasswordsSelector=e=>(0,t.healthSelector)(e).similarPasswords;t.breachedPasswordsSelector=e=>e.userSession.health.breachedPasswords},40649:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialHealthView=void 0;const o=r(40969),n=r(43650),a=r(88763),i=r(84318),s=r(83617),c=r(10676);t.getCredentialHealthView=({credentialsHealth:e,similarPasswords:t},r,d)=>l=>{const u=(0,n.getCredentialPasswordIsWeakInfo)(l,e,d),p=(0,c.getCredentialStrengthInfo)(l,e,d),S=(0,s.getCredentialCompromisedView)(e,r,d,l),g=(0,o.getCredentialSafetyInfo)(l,e,t,d),m=(0,a.getCredentialSimilarCountInfo)(l,t,d);if("not-eligible"===u.type||"not-eligible"===p.type||"not-eligible"===S.type||"not-eligible"===g.type||"not-eligible"===m.type)return(0,i.notEligible)();const y={compromised:S.value,isSafe:g.value,isWeak:u.value,similarCredentialsCount:m.value,strength:p.value};return(0,i.eligible)(y)}},40914:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.assertUnreachable=void 0,t.assertUnreachable=function(e,t="Didn't expect to reach this code."){throw new Error(t)}},17631:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.asyncFilter=void 0,t.asyncFilter=async function(e,t){const r=await Promise.all(e.map(t));return e.filter(((e,t)=>r[t]))}},30848:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.asyncMapLimit=void 0;t.asyncMapLimit=(e,t,r,o=e.length)=>{const n=e.length;let a=0;const i=[];let s=0;const c=o=>d=>{if(i[o]=d,a++,n===a)return r(i);s<n-1&&(s++,t(e[s],c(s)))},d=Math.max(Math.min(n,o),1);s=d-1;for(let r=0;r<d;r++)t(e[r],c(r))}},60830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=function(e,t){let r;return function(o,...n){var a=this;clearTimeout(r),o.immediateCall?(r=null,e.apply(a,n)):r=setTimeout((function(){r=null,e.apply(a,n)}),t)}}},71756:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decipherDatabaseRules=void 0;const o=r(53494),n=r(40232);t.decipherDatabaseRules=(e,t)=>(async(e,t)=>{const r=await(0,o.decipherDashlaneSecureData)(t,e,"",(0,n.makeGetDerivateKeyWithCacheAndQueue)());return(0,o.deflatedUtf8ToUtf16)(r)})(e,t)},43609:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hasProperty=t.assertType=void 0,t.assertType=function(e,t){if(!t(e))throw new Error("guard failed !");return e},t.hasProperty=function(e,t){return t in e}},59707:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeTransactions=void 0;t.sanitizeTransactions=e=>e.filter(Boolean)},7605:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getWindowLocalStorage=void 0,t.getWindowLocalStorage=function(){return self.localStorage||null}},49258:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.inMemoryInterSessionUnsyncedSliceReducer=void 0;var o=r(34806);Object.defineProperty(t,"inMemoryInterSessionUnsyncedSliceReducer",{enumerable:!0,get:function(){return o.inMemoryInterSessionUnsyncedSliceReducer}})},90441:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetAllLoginNotification=t.addNewLoginNotification=t.RESET_ALL_LOGIN_NOTIFICATIONS=t.ADD_NEW_LOGIN_NOTIFICATION=void 0,t.ADD_NEW_LOGIN_NOTIFICATION="ADD_NEW_LOGIN_NOTIFICATION",t.RESET_ALL_LOGIN_NOTIFICATIONS="RESET_ALL_LOGIN_NOTIFICATIONS";t.addNewLoginNotification=e=>({type:t.ADD_NEW_LOGIN_NOTIFICATION,notification:e});t.resetAllLoginNotification=()=>({type:t.RESET_ALL_LOGIN_NOTIFICATIONS})},27879:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(90441);t.default=(e=[],t)=>{switch(t.type){case o.ADD_NEW_LOGIN_NOTIFICATION:return[...e,t.notification];case o.RESET_ALL_LOGIN_NOTIFICATIONS:return[];default:return e}}},96285:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoginNotificationType=void 0,function(e){e.RELOGIN_NEEDED="RELOGIN_NEEDED",e.SSO_FEATURE_BLOCKED="SSO_FEATURE_BLOCKED",e.SSO_SETUP_ERROR="SSO_SETUP_ERROR",e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(t.LoginNotificationType||(t.LoginNotificationType={}))},34806:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.inMemoryInterSessionUnsyncedSliceReducer=void 0;const o=r(89531),n=r(27879);t.inMemoryInterSessionUnsyncedSliceReducer=(0,o.combineReducers)({loginNotification:n.default})},30301:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TsEventBusCommandQueryBus=void 0;var o=r(38548);Object.defineProperty(t,"TsEventBusCommandQueryBus",{enumerable:!0,get:function(){return o.TsEventBusCommandQueryBus}})},32164:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.liveSlot=void 0;const o=r(72931),n={noBuffer:!0};t.liveSlot=()=>(0,o.slot)(n)},38548:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TsEventBusCommandQueryBus=void 0;const o=r(72931),n=r(62742),a=r(89656);class i extends n.CommandQueryBus{constructor(e,t,r){super(e),this.bus=r,r||(this.bus=(0,o.createEventBus)({events:t}))}registerCommand(e,t){this.bus[e].on(t)}registerQuery(e,t){this.bus[e].on(t)}registerLiveQuery(e,t){(0,a.connectLazySlot)(this.bus[e],t)}}t.TsEventBusCommandQueryBus=i},61837:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageEventStore=void 0;const o=r(68099),n=r(5533);class a extends o.EventStore{constructor(e){super(),this.localStorageService=e}async store(e){await this.localStorageService.getInstance().storeEventStore(e)}async retrieve(){const e=await this.localStorageService.getInstance().getEventStore();return null===e?n.defaultCarbonEventStore:{healthUpdates:e.healthUpdates||n.defaultCarbonEventStore.healthUpdates,iconsUpdates:e.iconsUpdates||n.defaultCarbonEventStore.iconsUpdates}}}t.LocalStorageEventStore=a},9576:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventStoreConsumer=void 0;const o=r(28354);t.EventStoreConsumer=class{constructor(e,t){this.eventStore=e,this.hooks=t,this.liveConsumptionSubs={},this.lockIds={},this.startTopic=e=>{this.startLiveConsumption(e),this.consumeTopic(e)},this.lockTopic=e=>{this.stopLiveConsumption(e);const t=(0,o.v4)();return this.lockIds[e]=(this.lockIds[e]||new Set).add(t),t},this.releaseTopic=(e,t)=>{const r=this.lockIds[e];r&&r.delete(t),r&&0!==r.size||this.startTopic(e)},this.teardown=()=>{Object.keys(this.liveConsumptionSubs).forEach(this.stopLiveConsumption)},this.consumeTopic=async e=>{const t=await this.eventStore.getItems(e);for(const r of t)this.handleItem(e,r)},this.startLiveConsumption=e=>{this.liveConsumptionSubs[e]||(this.liveConsumptionSubs[e]=this.eventStore.newItems$(e).subscribe((t=>this.handleItem(e,t))))},this.stopLiveConsumption=e=>{this.liveConsumptionSubs[e]&&(this.liveConsumptionSubs[e].unsubscribe(),delete this.liveConsumptionSubs[e])},this.handleItem=async(e,t)=>{const r=this.hooks[e];r||await this.eventStore.remove(e,t.id);await r(t.event)&&await this.eventStore.remove(e,t.id)}}}},61805:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebugConnector=void 0;const o=r(72931);t.DebugConnector={log:(0,o.slot)(),info:(0,o.slot)(),warning:(0,o.slot)(),error:(0,o.slot)()}},45052:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},57880:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(45052),t),n(r(61805),t)},22813:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(75976),n=r(87350);t.config={commands:{},queries:{getIsBrazeContentDisabled:{selector:o.disableBrazeContentCardsSelector}},liveQueries:{liveIsBrazeContentDisabled:{operator:n.disableBrazeContentCardsOperator$}}}},98478:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(22813);t.bootstrap=e=>{e.register(o.config)}},60311:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerKillswitchCronOnLoginStatusChanged=void 0;const o=r(53441);let n=null;t.triggerKillswitchCronOnLoginStatusChanged=function(e,t){n&&function(e){clearInterval(e)}(n),t&&(n=function(e){return setInterval((()=>{try{(0,o.updateKillswitchState)(e)}catch{}}),3e5)}(e))}},4666:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(98478);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},53441:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateKillswitchState=void 0;const o=r(89151),n=r(15876),a=r(65175);t.updateKillswitchState=async e=>{const t=["disableAutofill","brazeContentCardsDisabled"],r=await(0,o.getKillSwitches)(e,t);if((0,n.isApiError)(r))throw new Error(`[Killswitch] - isAutofillDisabled : ${r.message} (${r.code})`);e.dispatch((0,a.killswitchStateUpdated)({disableAutofill:r.disableAutofill||!1,brazeContentCardsDisabled:r.brazeContentCardsDisabled||!1}))}},87350:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableBrazeContentCardsOperator$=void 0;const o=r(18948),n=r(3343),a=r(75976);t.disableBrazeContentCardsOperator$=()=>(0,o.pipe)((0,n.map)(a.disableBrazeContentCardsSelector),(0,n.distinctUntilChanged)())},75976:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableBrazeContentCardsSelector=t.disableAutofillSelector=t.killswitchSelector=void 0;const o=r(9084);t.killswitchSelector=e=>e.userSession.killswitch||(0,o.getEmptyKillswitchState)();t.disableAutofillSelector=e=>(0,t.killswitchSelector)(e).disableAutofill||!1;t.disableBrazeContentCardsSelector=e=>(0,t.killswitchSelector)(e).brazeContentCardsDisabled||!1},6107:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(60311);t.setupSubscriptions=function(e,t){const{storeService:r}=t;e.sessionClosed.on((()=>{(0,o.triggerKillswitchCronOnLoginStatusChanged)(r,!1)})),e.sessionOpened.on((()=>{(0,o.triggerKillswitchCronOnLoginStatusChanged)(r,!0)}))}},55902:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isBackupCryptError=t.BackupCryptError=t.BackupCryptErrorMessages=t.BackupCryptErrorCode=void 0;const o=r(73144);var n;!function(e){e[e.TRANSACTION_CLEAR_CONTENT_EMPTY=0]="TRANSACTION_CLEAR_CONTENT_EMPTY",e[e.EMPTY_CLEAR_FULL_BACKUP_FILE_XML=1]="EMPTY_CLEAR_FULL_BACKUP_FILE_XML",e[e.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY=2]="CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY",e[e.EMPTY_FULL_BACKUP_FILE=3]="EMPTY_FULL_BACKUP_FILE",e[e.NULL_FULL_BACKUP_FILE_MAP=4]="NULL_FULL_BACKUP_FILE_MAP",e[e.EMPTY_FULL_BACKUP_FILE_MAP=5]="EMPTY_FULL_BACKUP_FILE_MAP",e[e.EMPTY_CLEAR_FULL_BACKUP_FILE=6]="EMPTY_CLEAR_FULL_BACKUP_FILE",e[e.CLEAR_FULL_BACKUP_FILE_NOT_XML=7]="CLEAR_FULL_BACKUP_FILE_NOT_XML",e[e.FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE=8]="FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE",e[e.FULL_BACKUP_FILE_ITEM_WITHOUT_ID=9]="FULL_BACKUP_FILE_ITEM_WITHOUT_ID",e[e.TRANSACTION_CONTENT_NOT_XML=10]="TRANSACTION_CONTENT_NOT_XML"}(n=t.BackupCryptErrorCode||(t.BackupCryptErrorCode={})),t.BackupCryptErrorMessages={[n.TRANSACTION_CLEAR_CONTENT_EMPTY]:"Empty transaction content",[n.EMPTY_CLEAR_FULL_BACKUP_FILE_XML]:"Empty full backup file XML",[n.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY]:"Full backup file XML not resolved as an array",[n.EMPTY_FULL_BACKUP_FILE]:"Empty full backup file",[n.NULL_FULL_BACKUP_FILE_MAP]:"Null full backup file map",[n.EMPTY_FULL_BACKUP_FILE_MAP]:"Empty full backup file map",[n.EMPTY_CLEAR_FULL_BACKUP_FILE]:"Deciphered full backup file content is empty",[n.CLEAR_FULL_BACKUP_FILE_NOT_XML]:"WRONG_PASSWORD",[n.FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE]:"Full backup file item without kwType",[n.FULL_BACKUP_FILE_ITEM_WITHOUT_ID]:"Full backup file item without Id",[n.TRANSACTION_CONTENT_NOT_XML]:"WRONG_PASSWORD"},t.BackupCryptError={codes:n,name:"BackupCryptError",messages:t.BackupCryptErrorMessages};t.isBackupCryptError=e=>(0,o.isCarbonError)(e,t.BackupCryptError)},9e4:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decryptFullBackupFile=void 0;const o=r(98982),n=r(55902),a=r(59778),i=r(53494),s=r(73144),c=r(89422),d=r(59125),l=r(56758),u=(e,t,r)=>{const{Id:o,kwType:i}=t,c=r.get(o);if(void 0===c)return e(l.announcements.decipherFullBackupItemSkipped(new Error("Transaction not in full backup list skipped"),{itemType:i,itemId:o})),null;const d=t instanceof Object?Object.keys(t):[];if(!i){const t=new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE);throw e(l.announcements.decipherFullBackupItemReadFailed(t.addAdditionalInfo({itemId:o,itemKeys:d}),o)),t}return o?(e(l.announcements.decipherFullBackupItemRead(i,o,c)),{type:(0,a.getTransactionTypeFromDataModelType)(i),backupDate:c,action:"BACKUP_EDIT",identifier:o,content:t}):(e(l.announcements.decipherFullBackupItemSkipped(new Error("Transaction without id skipped"),{itemType:i})),null)},p=(e,t,r)=>{const o=t.length,n=[],a=new Set;for(let i=0;i<o;++i){const o=t[i];o.Id&&a.add(o.Id);const s=u(e,o,r);s&&n.push(s)}return((e,t,r)=>{for(const o in t.keys())r.has(o)||e(l.announcements.decipherFullBackupItemSkipped(new Error("Missing full backup item content"),{itemId:o}))})(e,r,a),n};t.decryptFullBackupFile=async function(e,t,r,a){try{if(!((e,t,r)=>{if(null==t)return e(l.announcements.decipherFullBackupSkipped()),!1;if(""===t)throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.EMPTY_FULL_BACKUP_FILE);if(null===r)throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.NULL_FULL_BACKUP_FILE_MAP);if(t&&0===r.size)throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.EMPTY_FULL_BACKUP_FILE_MAP);return!0})(t,r,a))return[];t(l.announcements.decipherFullBackupStarted());const u=await(async(e,t,r)=>{try{const t=await e.decrypt(r),o=(0,i.deflatedUtf8ToUtf16)(t);if(!o){const e=new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE);throw d.sendExceptionLog({error:e}),e}if("string"==typeof o&&!o.trim().startsWith("<"))throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_NOT_XML);return o}catch(n){const a=(0,o.attemptReadCryptoPayload)(e,r);throw t(l.announcements.decipherFullBackupDecipherFailed(n,a)),n}})(e,t,r),S=await(async(e,t)=>{try{const e=await(0,c.parseDashlaneXml)(t);if(!e)throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE_XML);if(!Array.isArray(e))throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY);return e}catch(t){throw e(l.announcements.decipherFullBackupParseFailed(t)),t}})(t,u),g=(0,o.fixKwType)(S),m=p(t,g,a);return t(l.announcements.decipherFullBackupFinished(m.length)),m}catch(e){if(t(l.announcements.decipherFullBackupFailed(e)),(0,s.isCarbonError)(e,n.BackupCryptError,n.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE))return[];throw e}}},31354:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encryptSingleTransaction=t.decrypt=void 0;const o=r(28060),n=r(9e4),a=r(63836);Object.defineProperty(t,"encryptSingleTransaction",{enumerable:!0,get:function(){return a.encryptSingleTransaction}});const i=r(29576),s=r(56758);t.decrypt=async function(e,t,r,c,d){if(null===d)throw new Error("null transactions");const l=Number(r&&c.size);t(s.announcements.decipherStarted(l));const u=await(0,n.decryptFullBackupFile)(e,t,r,c);t(s.announcements.decipherTransactionsStarted());const[p,S]=(g=d,(0,o.partition)((e=>"SETTINGS"===e.type),g));var g;const m=await(0,a.decryptSingleTransactions)(e,t,p),[y,v]=(e=>(0,o.partition)((e=>!!e.content),e))(S),A=(0,i.makeOpenSessionProgressService)();A.init(y.length);const E=await(0,a.decryptSingleTransactions)(e,t,y,A),f=(e=>e.map((e=>({...e,content:null}))))(v);t(s.announcements.decipherTransactionsFinished());const h=[...u,...m,...f,...E];return t(s.announcements.decipherFinished(h)),h}},29576:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeOpenSessionProgressService=void 0;const o=r(38029);t.makeOpenSessionProgressService=()=>{let e,t,r,n;const a=(a=!1)=>{const i=(0,o.default)();if(!i)return;const s=t/e*100;(a||Date.now()-n>=500&&s!==r)&&(r=s,n=Date.now(),i.openSessionProgressChanged({statusDescription:"percentage of work done before session opening",statusProgress:r}))};return{init(o){e=o,t=0,r=0,n=Date.now(),a(!0)},incrementJobsDone(){if(void 0===e)throw new Error("openSessionProgressService must be initialized before begin used");t++,a()},decrementJobsTodo(){e--}}}},63836:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encryptSingleTransaction=t.decryptSingleTransactions=t.decryptSingleTransaction=t.parseTransactionContentXml=t.decryptTransactionContent=void 0;const o=r(97211),n=r(98982),a=r(55902),i=r(73144),s=r(89422),c=r(59125),d=r(53494),l=r(56758);t.decryptTransactionContent=async(e,t,{content:r})=>{try{const t=await e.decrypt(r);return(0,d.deflatedUtf8ToUtf16)(t)}catch(o){const a=(0,n.attemptReadCryptoPayload)(e,r);throw t(l.announcements.decipherTransactionDecipherFailed(o,a)),o}};t.parseTransactionContentXml=async(e,t)=>{try{return(e=>{if(!e){const e=new i.CarbonError(a.BackupCryptError,a.BackupCryptErrorCode.TRANSACTION_CLEAR_CONTENT_EMPTY);throw c.sendExceptionLog({error:e}),e}})(t),(e=>{if("string"==typeof e&&!e.trim().startsWith("<"))throw new i.CarbonError(a.BackupCryptError,a.BackupCryptErrorCode.TRANSACTION_CONTENT_NOT_XML)})(t),await(0,s.parseDashlaneXml)(t)}catch(t){throw e(l.announcements.decipherTransactionParseFailed(t)),t}};async function u(e,r,i){try{r(l.announcements.decipherTransactionStarted(i));const o=await(0,t.decryptTransactionContent)(e,r,i),a=await(0,t.parseTransactionContentXml)(r,o),s=((e,t)=>Object.assign({},e,{content:t}))(i,(0,n.fixKwType)(a));return r(l.announcements.decipherTransactionFinished(i)),s}catch(e){const{type:t}=i;if((0,a.isBackupCryptError)(e)){const{action:r,backupDate:n,identifier:a}=i,s=(0,o.getDataModelTypeFromTransactionType)(t);e.addAdditionalInfo({itemId:a,itemType:s,action:r,backupDate:n})}if(r(l.announcements.decipherTransactionFailed(e,i)),"SETTINGS"===t)throw e;return null}}t.decryptSingleTransaction=u,t.decryptSingleTransactions=async function(e,t,r,o){const n=r.map((async r=>{const n=await u(e,t,r);return o&&o.incrementJobsDone(),n}));return(await Promise.all(n)).filter(Boolean)},t.encryptSingleTransaction=async function(e,t,r={}){const o=(0,d.utf16ToDeflatedUtf8)(t.content),n=await e.getInstance().encrypt(o,r);return{...t,content:n}}},98982:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fixKwType=t.attemptReadCryptoPayload=void 0;const o=r(69748);t.attemptReadCryptoPayload=(e,t)=>{try{return e.readCryptoPayload(t)}catch(e){}return""},t.fixKwType=function e(t){return Array.isArray(t)?t.map((t=>e(t))):(0,o.default)(t)?Object.keys(t).reduce(((r,o)=>{const n=t[o];return"__type__"===o?r.kwType=n:r[o]=e(n),r}),{}):t}},79747:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(53554),t)},53554:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeDiagnosticReportMonitor=void 0;const o=r(97211),n=r(83197),a=r(73144),i=r(55902);t.makeDiagnosticReportMonitor=()=>{let e="",t="";const r="fullBackupFile";return(s,{timestamp:c})=>{switch(s.type){case"DecipherFullBackupStarted":(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:"[decryptFullBackupFile] - Start Decryption"});break;case"DecipherFullBackupItemRead":{const{itemId:e}=s;(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:`[fullBackupFileItemsContent] - ${e} succeed`,status:"succeed"})}break;case"DecipherFullBackupItemSkipped":{const{itemId:e}=s;(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:e?`[fullBackupFileItemsContent] - ${e} does not have backupDate => return null`:"[fullBackupFileItemsContent] - does not have id => return null",status:"failed"})}break;case"DecipherFullBackupParseFailed":{const{error:t}=s;e=(0,a.isCarbonError)(t,i.BackupCryptError,i.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE_XML)?"parseXml does not failed but result nothing => reject err: WRONG_PASSWORD":(0,a.isCarbonError)(t,i.BackupCryptError,i.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY)?"parseXml result not an Array => reject err: fullBackupFileItemsContent is not an Array":`parseXml failed => reject err: ${t}`}break;case"DecipherFullBackupDecipherFailed":{const{error:t}=s;e=(0,a.isCarbonError)(t,i.BackupCryptError,i.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_NOT_XML)?'decrypt result with xml string which does not start with "<" => throw new Error WRONG_PASSWORD':(0,a.isCarbonError)(t,i.BackupCryptError,i.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE)?"decrypt result with empty xml => throw new Error (Decrypt FullBackupFile empty result)":"failed to decipher fullBackupFile"}break;case"DecipherFullBackupFailed":(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:`[decryptFullBackupFile] - ${e}: null`,status:"failed"});break;case"DecipherFullBackupFinished":(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:`[decryptFullBackupFile] - ${e}: null`,status:"succeed"});break;case"DecipherTransactionStarted":{const{identifier:e,action:r,backupDate:a,time:i,transactionType:d}=s;t=e,(0,n.triggerSendTransactionDecipheringDiagnosticLog)({identifier:e,action:r,backupDate:a,time:i,type:o.TransactionType[d],date:c,message:"[decryptSingleTransaction] - Start Decryption"})}break;case"DecipherTransactionDecipherFailed":{const{error:t}=s;e=(0,a.isCarbonError)(t,i.BackupCryptError,i.BackupCryptErrorCode.TRANSACTION_CONTENT_NOT_XML)?'decrypt resolve with xml string that does not start with "<"':(0,a.isCarbonError)(t,i.BackupCryptError,i.BackupCryptErrorCode.TRANSACTION_CLEAR_CONTENT_EMPTY)?"decrypt resolve empty xml content":"Decryption failed with error"}break;case"DecipherTransactionParseFailed":e="failed to parse XML content";break;case"DecipherTransactionFailed":(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:t,message:`[decryptSingleTransaction] - ${e}: null`,status:"failed"});break;case"DecipherTransactionFinished":(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:t,message:"[decryptSingleTransaction] - Success",status:"succeed"})}}}},32398:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatStep=void 0;const o=r(1317),n=r(40914);t.formatStep=e=>{switch(e){case o.SyncLoggerStep.Main:return"[Sync]";case o.SyncLoggerStep.Chronological:return"[Sync|Chrono]";case o.SyncLoggerStep.Latest:return"[Sync|Latest]";case o.SyncLoggerStep.Decipher:return"[Sync|Decipher]";case o.SyncLoggerStep.DecipherFullBackup:return"[Sync|Decipher|FullBackup]";case o.SyncLoggerStep.DecipherTransactions:return"[Sync|Decipher|Transactions]";case o.SyncLoggerStep.Duplicate:return"[Sync|Duplicate]";case o.SyncLoggerStep.Cipher:return"[Sync|Cipher]";case o.SyncLoggerStep.Upload:return"[Sync|Upload]";case o.SyncLoggerStep.Save:return"[Sync|Save]";case o.SyncLoggerStep.TreatProblem:return"[Sync|TreatProblem]";case o.SyncLoggerStep.TreatProblemSummary:return"[Sync|TreatProblem|Summary]";case o.SyncLoggerStep.Sharing:return"[Sync|Sharing]";case o.SyncLoggerStep.TeamAdminData:return"[Sync|TeamAdminData]";default:(0,n.assertUnreachable)(e)}}},73418:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(58755),t)},6729:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logSyncVerbose=t.logSyncDebug=t.logSyncInfo=t.logSyncWarn=t.logSyncError=void 0;const o=r(31891),n=(0,o.withTag)("Sync");t.logSyncError=n(o.logError),t.logSyncWarn=n(o.logWarn),t.logSyncInfo=n(o.logInfo),t.logSyncDebug=n(o.logDebug),t.logSyncVerbose=n(o.logVerbose)},58755:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeSyncLoggerMonitor=void 0;const o=r(56758),n=r(1317),a=r(32357),i=r(32398),s=r(6729);t.makeSyncLoggerMonitor=()=>{let e=null;const t=e=>"object"==typeof e&&e.message||`${e}`,r=(e,t)=>`${(0,i.formatStep)(e)} ${t}`;return(i,{timestamp:c})=>{switch(i.type){case"SyncStarted":{const{syncType:t}=i;e=c,(0,s.logSyncInfo)({message:r(n.SyncLoggerStep.Main,"Start"),details:{step:n.SyncLoggerStep.Main,Type:(0,a.syncTypeForSyncLogger)(t)}})}break;case"ChronologicalSyncStarted":{const{updatesCount:t,deletesCount:o}=i;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Chronological,"Start"),details:{step:n.SyncLoggerStep.Chronological,Timestamp:e,Update:t,Delete:o}})}break;case"LatestRequested":{const{lock:t,needsKeys:o}=i;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Latest,"Request"),details:{step:n.SyncLoggerStep.Latest,Timestamp:e,Lock:t,SharingKeys:o}})}break;case"LatestSucceeded":{const{updatesCount:t,deletesCount:o,fullBackupSize:a}=i;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Latest,"Success"),details:{step:n.SyncLoggerStep.Latest,Timestamp:e,Update:t,Delete:o,FullBackup:a}})}break;case"LatestFailed":{const{error:e}=i;(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.Latest,"Error"),details:{step:n.SyncLoggerStep.Latest,Cause:t(e)}})}break;case"DecipherStarted":{const{fullBackupFileSize:e}=i;(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Decipher,"Start"),details:{step:n.SyncLoggerStep.Decipher,Count:e}})}break;case"DecipherFullBackupSkipped":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.DecipherFullBackup,"Skip"),details:{step:n.SyncLoggerStep.DecipherFullBackup}});break;case"DecipherFullBackupStarted":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.DecipherFullBackup,"Start"),details:{step:n.SyncLoggerStep.DecipherFullBackup}});break;case"DecipherFullBackupItemRead":{const{itemType:e,itemId:t,backupDate:o}=i;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.DecipherFullBackup,"Transaction"),details:{step:n.SyncLoggerStep.DecipherFullBackup,Type:e,Id:t,Date:o}})}break;case"DecipherFullBackupItemSkipped":{const{error:e,itemType:o,itemId:a}=i;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.DecipherFullBackup,"TransactionSkipped"),details:{step:n.SyncLoggerStep.DecipherFullBackup,Type:o,Id:a,Cause:t(e)}})}break;case"DecipherFullBackupFinished":{const{itemsCount:e}=i;(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.DecipherFullBackup,"Done"),details:{step:n.SyncLoggerStep.DecipherFullBackup,Count:e}})}break;case"DecipherFullBackupFailed":{const{error:e}=i;(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.DecipherFullBackup,"Error"),details:{step:n.SyncLoggerStep.DecipherFullBackup,Cause:t(e)}})}break;case"DecipherTransactionsStarted":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.DecipherTransactions,"Start"),details:{step:n.SyncLoggerStep.DecipherTransactions}});break;case"DecipherTransactionFinished":{const{action:e,transactionType:t,identifier:o,backupDate:a}=i;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.DecipherTransactions,"Transaction"),details:{step:n.SyncLoggerStep.DecipherTransactions,Action:e,Type:t,Id:o,Date:a}})}break;case"DecipherTransactionFailed":{const{error:e,transactionType:o,identifier:a,backupDate:c}=i;(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.DecipherTransactions,"Error"),details:{step:n.SyncLoggerStep.DecipherTransactions,Cause:t(e),Type:o,Id:a,Date:c}})}break;case"DecipherTransactionsFinished":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.DecipherTransactions,"Done"),details:{step:n.SyncLoggerStep.DecipherTransactions}});break;case"DecipherFinished":{const{updatesCount:e,deletesCount:t}=i;(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Decipher,"Done"),details:{step:n.SyncLoggerStep.Decipher,Transactions:e+t}})}break;case"TransactionDuplicated":{const{transactionType:e,identifier:t,backupDate:o}=i;(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.Duplicate,"Transaction"),details:{step:n.SyncLoggerStep.Duplicate,Type:e,Id:t,Date:o}})}break;case"CipherStarted":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Cipher,"Start"),details:{step:n.SyncLoggerStep.Cipher}});break;case"TransactionCiphered":{const{transactionType:e,itemId:t,backupDate:o}=i;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Cipher,"Transaction"),details:{step:n.SyncLoggerStep.Cipher,Type:e,Id:t,Date:o}})}break;case"CipherFinished":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Cipher,"Done"),details:{step:n.SyncLoggerStep.Cipher}});break;case"UploadRequested":{const{updatedCount:e,deletedCount:t}=i;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Upload,"Request"),details:{step:n.SyncLoggerStep.Upload,Update:e,Delete:t}})}break;case"UploadSucceeded":{const{timestamp:e}=i;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Upload,"Success"),details:{step:n.SyncLoggerStep.Upload,Timestamp:e}})}break;case"UploadFailed":{const{error:e}=i;(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.Upload,"Error"),details:{step:n.SyncLoggerStep.Upload,Cause:t(e)}})}break;case"SaveStarted":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Save,"Start"),details:{step:n.SyncLoggerStep.Save}});break;case"SaveFinished":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Save,"Done"),details:{step:n.SyncLoggerStep.Save}});break;case"ChronologicalSyncFinished":{const{summarySize:e}=i;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Chronological,"Done"),details:{step:n.SyncLoggerStep.Chronological,Summary:e}})}break;case"TreatProblemStarted":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TreatProblem,"Start"),details:{step:n.SyncLoggerStep.TreatProblem}});break;case"TreatProblemSummaryStarted":{const{localItemsCount:e,remoteItemsCount:t}=i;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TreatProblemSummary,"Start"),details:{step:n.SyncLoggerStep.TreatProblemSummary,Local:e,Remote:t}})}break;case"TreatProblemSummaryCompared":{const{result:e,cause:t,transactionType:a,identifier:c,localDate:d,remoteDate:l}=i,u=void 0!==l?{RemoteDate:l}:{},p=t?{Cause:o.TreatProblemSummaryComparedCause[t]}:{},S=d?{LocalDate:d}:{};(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TreatProblemSummary,"Comparison"),details:{step:n.SyncLoggerStep.TreatProblemSummary,Result:o.TreatProblemSummaryComparedResult[e],...p,Type:a,Id:c,...S,...u}})}break;case"TreatProblemSummaryFinished":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TreatProblemSummary,"Done"),details:{step:n.SyncLoggerStep.TreatProblemSummary}});break;case"TreatProblemDiffComputed":{const{transactionsToDownloadCount:e,transactionsToUploadCount:t}=i;0===e&&0===t?(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.TreatProblem,"Diff UpToDate"),details:{step:n.SyncLoggerStep.TreatProblem}}):(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.TreatProblem,"Diff"),details:{step:n.SyncLoggerStep.TreatProblem,Download:e,Upload:t}})}break;case"TreatProblemFinished":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TreatProblem,"Done"),details:{step:n.SyncLoggerStep.TreatProblem}});break;case"TeamAdminDataSyncStarted":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TeamAdminData,"Start"),details:{step:n.SyncLoggerStep.TeamAdminData}});break;case"TeamAdminDataSyncFinished":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TeamAdminData,"Done"),details:{step:n.SyncLoggerStep.TeamAdminData}});break;case"SharingSyncStarted":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Sharing,"Start"),details:{step:n.SyncLoggerStep.Sharing}});break;case"SharingSyncFinished":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Sharing,"Done"),details:{step:n.SyncLoggerStep.Sharing}});break;case"SyncFinished":(0,s.logSyncInfo)({message:r(n.SyncLoggerStep.Main,"Done"),details:{step:n.SyncLoggerStep.Main}});break;case"SyncFailed":{const{error:e}=i;(0,s.logSyncError)({message:r(n.SyncLoggerStep.Main,"Failed"),details:{step:n.SyncLoggerStep.Main,Cause:t(e)}})}}}}},1317:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncLoggerStep=void 0,function(e){e[e.Main=0]="Main",e[e.Chronological=1]="Chronological",e[e.Latest=2]="Latest",e[e.Decipher=3]="Decipher",e[e.DecipherFullBackup=4]="DecipherFullBackup",e[e.DecipherTransactions=5]="DecipherTransactions",e[e.Duplicate=6]="Duplicate",e[e.Cipher=7]="Cipher",e[e.Upload=8]="Upload",e[e.Save=9]="Save",e[e.TreatProblem=10]="TreatProblem",e[e.TreatProblemSummary=11]="TreatProblemSummary",e[e.Sharing=12]="Sharing",e[e.TeamAdminData=13]="TeamAdminData"}(t.SyncLoggerStep||(t.SyncLoggerStep={}))},32357:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.syncTypeForSyncLogger=void 0;const o=r(74078),n=r(40914);t.syncTypeForSyncLogger=e=>{switch(e){case o.SyncType.LIGHT_SYNC:return"Light";case o.SyncType.FULL_SYNC:return"Full";case o.SyncType.FIRST_SYNC:return"Initial";default:(0,n.assertUnreachable)(e)}}},8525:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.saveStarted=t.treatProblemSummaryFinished=t.treatProblemSummaryCompared=t.treatProblemSummaryStarted=t.transactionDuplicated=t.decipherTransactionFinished=t.decipherTransactionFailed=t.decipherTransactionParseFailed=t.decipherTransactionDecipherFailed=t.decipherTransactionStarted=t.decipherFullBackupFinished=t.decipherFullBackupFailed=t.decipherFullBackupItemReadFailed=t.decipherFullBackupItemSkipped=t.decipherFullBackupItemRead=t.decipherFullBackupDecipherFailed=t.decipherFullBackupParseFailed=t.decipherFullBackupStarted=t.decipherFullBackupSkipped=t.cipherFinished=t.transactionCiphered=t.cipherStarted=t.uploadFailed=t.uploadSucceeded=t.uploadRequested=t.syncTypeChanged=t.syncFailed=t.syncFinished=t.decipherTransactionsFinished=t.decipherTransactionsStarted=t.decipherFinished=t.decipherStarted=t.latestFailed=t.latestSucceeded=t.latestRequested=t.teamAdminDataSyncFinished=t.teamAdminDataSyncFailed=t.teamAdminDataSyncStarted=t.sharingSyncFinished=t.sharingSyncFailed=t.sharingSyncStarted=t.treatSharingKeysFailed=t.treatProblemFinished=t.treatProblemDiffComputed=t.treatProblemFailed=t.treatProblemStarted=t.chronologicalSyncFinished=t.chronologicalSyncFailed=t.chronologicalSyncStarted=t.syncStarted=void 0,t.saveFinished=void 0;const o=r(83901),n=r(6219),a=r(42692),i=r(32725);t.syncStarted=(e,t)=>({type:"SyncStarted",trigger:e,syncType:t});t.chronologicalSyncStarted=e=>({type:"ChronologicalSyncStarted",updatesCount:(0,i.countEditionUploadChanges)((null==e?void 0:e.changesToUpload)||[]),deletesCount:(0,i.countDeletionUploadChanges)((null==e?void 0:e.changesToUpload)||[])});t.chronologicalSyncFailed=e=>({type:"ChronologicalSyncFailed",error:e});t.chronologicalSyncFinished=(e,t)=>({type:"ChronologicalSyncFinished",summarySize:(0,o.countSyncSummaryTransactions)(e),fullBackupFileSize:t});t.treatProblemStarted=()=>({type:"TreatProblemStarted"});t.treatProblemFailed=e=>({type:"TreatProblemFailed",error:e});t.treatProblemDiffComputed=(e,t)=>({type:"TreatProblemDiffComputed",transactionsToDownloadCount:e,transactionsToUploadCount:t});t.treatProblemFinished=()=>({type:"TreatProblemFinished"});t.treatSharingKeysFailed=e=>({type:"TreatSharingKeysFailed",error:e});t.sharingSyncStarted=()=>({type:"SharingSyncStarted"});t.sharingSyncFailed=e=>({type:"SharingSyncFailed",error:e});t.sharingSyncFinished=()=>({type:"SharingSyncFinished"});t.teamAdminDataSyncStarted=()=>({type:"TeamAdminDataSyncStarted"});t.teamAdminDataSyncFailed=e=>({type:"TeamAdminDataSyncFailed",error:e});t.teamAdminDataSyncFinished=()=>({type:"TeamAdminDataSyncFinished"});t.latestRequested=(e,t)=>({type:"LatestRequested",lock:"nolock"!==e,needsKeys:t});t.latestSucceeded=e=>({type:"LatestSucceeded",updatesCount:(0,n.countEditionTransactions)(e.transactionList),deletesCount:(0,n.countRemoveTransactions)(e.transactionList),fullBackupSize:(e.fullBackupFileList||[]).length});t.latestFailed=e=>({type:"LatestFailed",error:e});t.decipherStarted=e=>({type:"DecipherStarted",fullBackupFileSize:e});t.decipherFinished=e=>({type:"DecipherFinished",updatesCount:(0,n.countEditionTransactions)(e),deletesCount:(0,n.countRemoveTransactions)(e)});t.decipherTransactionsStarted=()=>({type:"DecipherTransactionsStarted"});t.decipherTransactionsFinished=()=>({type:"DecipherTransactionsFinished"});t.syncFinished=()=>({type:"SyncFinished"});t.syncFailed=e=>({type:"SyncFailed",error:e});t.syncTypeChanged=e=>({type:"SyncTypeChanged",syncType:e});t.uploadRequested=(e,t)=>({type:"UploadRequested",updatedCount:e,deletedCount:t});t.uploadSucceeded=(e,t,r)=>({type:"UploadSucceeded",updatedCount:e,deletedCount:t,timestamp:r});t.uploadFailed=e=>({type:"UploadFailed",error:e});t.cipherStarted=()=>({type:"CipherStarted"});t.transactionCiphered=(e,t,r)=>({type:"TransactionCiphered",transactionType:e,itemId:t,backupDate:r});t.cipherFinished=()=>({type:"CipherFinished"});t.decipherFullBackupSkipped=()=>({type:"DecipherFullBackupSkipped"});t.decipherFullBackupStarted=()=>({type:"DecipherFullBackupStarted"});t.decipherFullBackupParseFailed=e=>({type:"DecipherFullBackupParseFailed",error:e});t.decipherFullBackupDecipherFailed=(e,t)=>({type:"DecipherFullBackupDecipherFailed",error:e,cryptoPayload:t});t.decipherFullBackupItemRead=(e,t,r)=>({type:"DecipherFullBackupItemRead",itemType:e,itemId:t,backupDate:r});t.decipherFullBackupItemSkipped=(e,t)=>({type:"DecipherFullBackupItemSkipped",itemType:null==t?void 0:t.itemType,itemId:null==t?void 0:t.itemId,error:e});t.decipherFullBackupItemReadFailed=(e,t)=>({type:"DecipherFullBackupItemReadFailed",error:e,itemId:t});t.decipherFullBackupFailed=e=>({type:"DecipherFullBackupFailed",error:e});t.decipherFullBackupFinished=e=>({type:"DecipherFullBackupFinished",itemsCount:e});t.decipherTransactionStarted=({action:e,backupDate:t,identifier:r,time:o,type:n})=>({type:"DecipherTransactionStarted",time:o,action:e,backupDate:t,identifier:r,transactionType:n});t.decipherTransactionDecipherFailed=(e,t)=>({type:"DecipherTransactionDecipherFailed",error:e,cryptoPayload:t});t.decipherTransactionParseFailed=e=>({type:"DecipherTransactionParseFailed",error:e});t.decipherTransactionFailed=(e,{backupDate:t,identifier:r,type:o})=>({type:"DecipherTransactionFailed",error:e,transactionType:o,identifier:r,backupDate:t});t.decipherTransactionFinished=({action:e,backupDate:t,identifier:r,type:o})=>({type:"DecipherTransactionFinished",action:e,transactionType:o,identifier:r,backupDate:t});t.transactionDuplicated=(e,t,r)=>({type:"TransactionDuplicated",transactionType:e,identifier:t,backupDate:r});t.treatProblemSummaryStarted=(e,t)=>({type:"TreatProblemSummaryStarted",localItemsCount:(0,a.countPersonalDataItems)(e),remoteItemsCount:(0,o.countSyncSummaryTransactions)(t)});t.treatProblemSummaryCompared=(e,t,r,o)=>({type:"TreatProblemSummaryCompared",result:e,transactionType:t,identifier:r,...(null==o?void 0:o.cause)?{cause:o.cause}:{},...(null==o?void 0:o.localDate)?{localDate:o.localDate}:{},...(null==o?void 0:o.remoteDate)?{remoteDate:o.remoteDate}:{}});t.treatProblemSummaryFinished=()=>({type:"TreatProblemSummaryFinished"});t.saveStarted=()=>({type:"SaveStarted"});t.saveFinished=()=>({type:"SaveFinished"})},56758:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.announcements=void 0;const a=r(8525);t.announcements=a,n(r(61733),t)},61733:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TreatProblemSummaryComparedCause=t.TreatProblemSummaryComparedResult=void 0,function(e){e[e.UpToDate=0]="UpToDate",e[e.Upload=1]="Upload",e[e.Download=2]="Download"}(t.TreatProblemSummaryComparedResult||(t.TreatProblemSummaryComparedResult={})),function(e){e[e.OutOfDate=0]="OutOfDate",e[e.Missing=1]="Missing"}(t.TreatProblemSummaryComparedCause||(t.TreatProblemSummaryComparedCause={}))},3102:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateLocalDuplicates=void 0;const o=r(28060),n=r(17509),a=r(42337),i=r(41147),s=r(57254),c=r(89054),d=r(35488),l=r(46566);t.generateLocalDuplicates=function(e,t,r){const u=(0,i.filterDataModelObjects)(t,e,["changeHistories"]),p=e=>{const t=(0,d.findTransaction)(e.Id,r);if(!t||(0,d.isRemovalTransaction)(t))return null;if(!((e,t)=>{const r=a.mergingRules[t.type];if(!r||0===r.length)return!1;if(!t.content)return!1;const o=(0,l.fixPersonalDataItemFromExternalSource)(t.content,t.identifier);for(const{property:a,canonize:i}of r){let r=e[a],s=o[a];if("Domain"===a&&"AUTHENTIFIANT"===t.type&&r&&s&&(r=(0,n.getParsedUrl)(e.Url).rootDomain,s=(0,n.getParsedUrl)(o.Url).rootDomain),(i?(0,c.canonizeText)(r):r)!==(i?(0,c.canonizeText)(s):s))return!0}return!1})(e,t))return null;return{duplicate:{...(0,o.clone)(e),AnonId:(0,s.generateItemUuid)(),Id:(0,s.generateItemUuid)()},duplicatedFromId:e.Id}};return u.reduce(((e,t)=>{const r=p(t);return r?(e.push(r),e):e}),[])}},42337:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergingRules=void 0,t.mergingRules={ADDRESS:[{property:"AddressFull",canonize:!1},{property:"City",canonize:!1},{property:"ZipCode",canonize:!0}],AUTH_CATEGORY:[{property:"CategoryName",canonize:!1}],AUTHENTIFIANT:[{property:"Domain",canonize:!1},{property:"Email",canonize:!1},{property:"Login",canonize:!1},{property:"Note",canonize:!1},{property:"OtpSecret",canonize:!1},{property:"Password",canonize:!1},{property:"SubdomainOnly",canonize:!1},{property:"Title",canonize:!1},{property:"TrustedUrl",canonize:!1},{property:"UseFixedUrl",canonize:!1}],BANKSTATEMENT:[{property:"BankAccountIBAN",canonize:!0}],COMPANY:[{property:"Name",canonize:!1},{property:"JobTitle",canonize:!1}],DATA_CHANGE_HISTORY:[{property:"ObjectId",canonize:!0}],DRIVERLICENCE:[{property:"Number",canonize:!0}],EMAIL:[{property:"Email",canonize:!0}],FISCALSTATEMENT:[{property:"FiscalNumber",canonize:!0},{property:"TeledeclarantNumber",canonize:!0}],GENERATED_PASSWORD:[{property:"Domain",canonize:!1},{property:"GeneratedDate",canonize:!1},{property:"Password",canonize:!1}],IDCARD:[{property:"Number",canonize:!0}],IDENTITY:[{property:"FirstName",canonize:!1},{property:"LastName",canonize:!1}],PASSPORT:[{property:"Number",canonize:!0}],PAYMENTMEAN_PAYPAL:[{property:"Login",canonize:!1},{property:"Password",canonize:!1}],PAYMENTMEANS_CREDITCARD:[{property:"Bank",canonize:!0},{property:"CardNumber",canonize:!0},{property:"CardNumberLastDigits",canonize:!0},{property:"ExpireMonth",canonize:!0},{property:"ExpireYear",canonize:!0},{property:"OwnerName",canonize:!0}],PERSONALWEBSITE:[{property:"Website",canonize:!1}],PHONE:[{property:"Number",canonize:!0}],PURCHASE_CATEGORY:[{property:"CategoryName",canonize:!1}],PURCHASEBASKET:[{property:"Id",canonize:!1}],PURCHASEPAIDBASKET:[{property:"AutoTitle",canonize:!1},{property:"Comment",canonize:!1},{property:"DeliveryAddressDescription",canonize:!1},{property:"DeliveryAddressName",canonize:!1},{property:"MerchantDomain",canonize:!0},{property:"PaymentMeanDescription",canonize:!1},{property:"PaymentMeanName",canonize:!1},{property:"PurchaseDate",canonize:!0},{property:"TotalAmount",canonize:!0},{property:"UserTitle",canonize:!1}],SECURENOTE:[{property:"Title",canonize:!1},{property:"Content",canonize:!1}],SECURENOTE_CATEGORY:[{property:"CategoryName",canonize:!1}],SOCIALSECURITYSTATEMENT:[{property:"SocialSecurityNumber",canonize:!0}]}},32174:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergeChangeHistories=void 0;const o=r(28060);t.mergeChangeHistories=function(e,t){const r=(0,o.eqBy)((0,o.prop)("Id")),n=(0,o.ascend)((0,o.prop)("ModificationDate")),a=(0,o.unionWith)(r,e.ChangeSets,t.ChangeSets);return{...e,ChangeSets:(0,o.sort)(n,a)}}},48627:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergeLocalAndRemote=t.getMergeableTransactions=t.supportedTransactionTypesForMerge=t.unMergeableTransaction=void 0;const o=r(28060),n=r(32174),a=r(35488);t.unMergeableTransaction=["DEFAULT_AUTHENTIFIANT","DEFAULT_CONFIDENTIAL","DEFAULT_IDENTITY","DEFAULT_PAYMENTMEANS","DEFAULT_MISC","DEFAULT_REWARDCARD","POINTS","SETTINGS","SECURITYALERTS"],t.supportedTransactionTypesForMerge=["DATA_CHANGE_HISTORY"],t.getMergeableTransactions=function(e,r){const n=(0,o.map)((0,o.prop)("itemId"),r);return e.filter((e=>!t.unMergeableTransaction.includes(e.type))).filter((e=>"BACKUP_REMOVE"!==e.action)).filter((e=>n.includes(e.identifier))).filter((e=>t.supportedTransactionTypesForMerge.includes(e.type)))},t.mergeLocalAndRemote=function(e,t){const r=[],o=e.changeHistories.map((e=>{const o=(0,a.findTransaction)(e.Id,t),i=n.mergeChangeHistories(e,o.content);return r.push({...o,content:i}),i}));return{personalData:{...e,changeHistories:o},remoteTransactions:r}}},88319:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(28060),n=r(31891),a=r(42692),i=r(59125),s=r(15528),c=r(48627),d=r(32725),l=r(35488),u=r(59778),p=r(3102),S=r(56758),g=r(7119);t.default=function(e,t,r,m){const{changesToUpload:y,editConflicts:v,transactionsToDownload:A}=function(e,t,r){if(0===t.length)return{changesToUpload:e,transactionsToDownload:t,editConflicts:[]};const n=(0,o.intersection)((0,o.pluck)("identifier",t),(0,o.pluck)("itemId",e));if(0===e.filter((e=>n.includes(e.itemId))).length)return{changesToUpload:e,transactionsToDownload:t,editConflicts:[]};const a=(0,o.reject)((e=>(0,d.isRemovalUploadChange)(e)&&n.includes(e.itemId)),e),i=(0,o.reject)((e=>((0,l.isRemovalTransaction)(e)||r.has(e.identifier))&&n.includes(e.identifier)),t);return{changesToUpload:a,transactionsToDownload:i,editConflicts:(0,o.intersection)((0,o.pluck)("identifier",i),(0,o.pluck)("itemId",a))}}(t.changesToUpload,m,r);if(0===v.length)return{personalData:{...t,changesToUpload:y},remoteTransactions:[...A]};const E=`[Sync] conflict on local/remote changes, ${v.length} conflicts`;n.default.log(E),(0,i.sendExceptionLog)({error:new Error(E),code:s.ExceptionCriticality.WARNING});const{duplicateObjects:f,uploadChangesWithDuplicates:h,usableRemoteTransactions:_}=function(e,t,r,o,n){if(0===n.length)return{uploadChangesWithDuplicates:r,usableRemoteTransactions:o,duplicateObjects:[]};const a=(0,p.generateLocalDuplicates)(n,t,o),i=a.map((e=>e.duplicate)),s=i.map((e=>({action:"BACKUP_EDIT",backupDate:0,identifier:e.Id,objectType:"transaction",time:Date.now(),type:(0,u.getTransactionTypeFromDataModelType)(e.kwType),content:e})));s.forEach((({backupDate:t,identifier:r,type:o})=>{e(S.announcements.transactionDuplicated(o,r,t))}));const c=a.map((e=>e.duplicatedFromId));return{uploadChangesWithDuplicates:r.filter((e=>!c.includes(e.itemId))).concat(i.map(g.createUploadChangeForItem)),duplicateObjects:i,usableRemoteTransactions:o.filter((e=>!n.includes(e.identifier)||c.includes(e.identifier))).concat(s)}}(e,t,y,A,v),T=(0,a.saveObjects)(t,f),I=c.getMergeableTransactions(_,h);if(0===I.length)return{personalData:{...T,changesToUpload:h},remoteTransactions:[..._]};const C=c.mergeLocalAndRemote(T,I);return{personalData:{...C.personalData,changesToUpload:h},remoteTransactions:[..._,...C.remoteTransactions]}}},52134:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSyncEventErrorName=t.getSyncEventExtent=t.createInitialSyncEvent=void 0;const o=r(74078),n=r(1064),a=r(40914),i=r(73144),s=r(62550),c=r(15424),d=r(19935);t.createInitialSyncEvent=(e,r,o)=>({extent:(0,t.getSyncEventExtent)(e),trigger:r,timestamp:o,duration:{sync:0,chronological:0,treat_problem:0,sharing:0}});t.getSyncEventExtent=e=>{switch(e){case o.SyncType.LIGHT_SYNC:return d.Extent.Light;case o.SyncType.FULL_SYNC:return d.Extent.Full;case o.SyncType.FIRST_SYNC:return d.Extent.Initial;default:(0,a.assertUnreachable)(e)}},t.getSyncEventErrorName=function(e){let t=d.ErrorName.Other;return(0,i.isCarbonError)(e)&&(e.errorType===s.HttpError?t=(({errorCode:e})=>e===s.HttpErrorCode.CLIENT_ERROR||e===s.HttpErrorCode.SERVER_ERROR||e===s.HttpErrorCode.STATUS_CODE)(e)?d.ErrorName.HttpStatus:d.ErrorName.HttpIo:e.errorType===c.WSError&&(t=d.ErrorName.ResponseContent)),e instanceof Error&&(null==e?void 0:e.message)&&void 0!==n.AuthenticationCode[e.message]&&(t=d.ErrorName.Authentication),t}},28080:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(69975),t)},69975:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeEventLoggerSyncMonitor=void 0;const o=r(36684),n=r(91470),a=r(19935);t.makeEventLoggerSyncMonitor=(e,t,r={sendLogOnSyncComplete:!0})=>{let i=(0,o.getEmptyState)();return{monitor:async(s,c)=>{i=(0,o.reduceState)(i,s,c);const d=t.getPersonalSettings().AnonymousUserId,{usageLog134:l,syncEvent:u}=i,p=r.sendLogOnSyncComplete&&d&&l,S=r.sendLogOnSyncComplete;switch(s.type){case"SyncFinished":case"SyncFailed":p&&(0,n.sendUsageLogDataSync)(t,l),S&&(await e.logSync(new a.UserSyncEvent({duration:u.duration,error:u.error,extent:u.extent,fullBackupSize:u.fullBackupSize,incomingDeleteCount:u.incomingDeleteCount,incomingUpdateCount:u.incomingUpdateCount,outgoingDeleteCount:u.outgoingDeleteCount,outgoingUpdateCount:u.outgoingUpdateCount,timestamp:u.timestamp,trigger:u.trigger,treatProblem:u.treatProblem})),e.flushEventQueue())}},getUsageLog134:()=>i.usageLog134,getSyncEvent:()=>i.syncEvent}}},36684:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reduceState=t.getEmptyState=void 0;const o=r(97211),n=r(91470),a=r(52134),i=r(19935),s=(e,t,r)=>({...e,usageLog134:{...e.usageLog134,...t},syncEvent:{...e.syncEvent,...r}}),c=(e,t)=>e>0&&t>0?o.UsageLogDataSyncTreatProblemReason.UPLOAD_AND_DOWNLOAD:t>0?o.UsageLogDataSyncTreatProblemReason.UPLOAD:e>0?o.UsageLogDataSyncTreatProblemReason.DOWNLOAD:o.UsageLogDataSyncTreatProblemReason.NOT_NEEDED,d=(e,t)=>e>0&&t>0?i.TreatProblem.UploadAndDownload:t>0?i.TreatProblem.Upload:e>0?i.TreatProblem.Download:i.TreatProblem.NotNeeded,l=e=>Date.now()-e;t.getEmptyState=()=>({syncStartTimestamp:null,chronologicalStartTimestamp:null,treatProblemStartTimestamp:null,sharingSyncStartTimestamp:null,usageLog134:null,syncEvent:null});t.reduceState=(e,t,r)=>{switch(t.type){case"SyncStarted":return((e,{trigger:t,syncType:r},{timestamp:o})=>({...e,usageLog134:(0,n.makeUsageLogDataSync)(r,(0,n.getUsageLogDataSyncOrigin)(t),Math.floor(o/1e3)),syncStartTimestamp:o,syncEvent:(0,a.createInitialSyncEvent)(r,t,Math.floor(o/1e3))}))(e,t,r);case"ChronologicalSyncStarted":return((e,{timestamp:t})=>({...e,chronologicalStartTimestamp:t}))(e,r);case"ChronologicalSyncFinished":return((e,{fullBackupFileSize:t})=>s(e,{duration_chronological:l(e.chronologicalStartTimestamp),full_backup_size:t||0},{duration:{...e.syncEvent.duration,chronological:l(e.chronologicalStartTimestamp)},fullBackupSize:t||0}))(e,t);case"ChronologicalSyncFailed":return(e=>s(e,{duration_chronological:l(e.chronologicalStartTimestamp),error_step:o.UsageLogDataSyncErrorStep.CHRONOLOGICAL},{duration:{...e.syncEvent.duration,chronological:l(e.chronologicalStartTimestamp)},error:{step:i.ErrorStep.Chronological,name:i.ErrorName.Other}}))(e);case"TreatProblemStarted":return((e,{timestamp:t})=>({...e,treatProblemStartTimestamp:t}))(e,r);case"TreatProblemDiffComputed":return((e,{transactionsToDownloadCount:t,transactionsToUploadCount:r})=>s(e,{treat_problem:c(t,r)},{treatProblem:d(t,r)}))(e,t);case"TreatProblemFinished":return(e=>s(e,{duration_treat:l(e.treatProblemStartTimestamp)},{duration:{...e.syncEvent.duration,treat_problem:l(e.treatProblemStartTimestamp)}}))(e);case"TreatProblemFailed":return(e=>s(e,{duration_treat:l(e.treatProblemStartTimestamp),error_step:o.UsageLogDataSyncErrorStep.TREAT_PROBLEM},{duration:{...e.syncEvent.duration,treat_problem:l(e.treatProblemStartTimestamp)},error:{step:i.ErrorStep.TreatProblem,name:i.ErrorName.Other}}))(e);case"TreatSharingKeysFailed":return(e=>s(e,{error_step:o.UsageLogDataSyncErrorStep.OTHER},{error:{step:i.ErrorStep.TreatProblem,name:i.ErrorName.Other}}))(e);case"SharingSyncStarted":return((e,{timestamp:t})=>({...e,sharingSyncStartTimestamp:t}))(e,r);case"SharingSyncFinished":return(e=>s(e,{duration_sharing:l(e.sharingSyncStartTimestamp)},{duration:{...e.syncEvent.duration,sharing:l(e.sharingSyncStartTimestamp)}}))(e);case"SharingSyncFailed":return(e=>s(e,{duration_sharing:l(e.sharingSyncStartTimestamp),error_step:o.UsageLogDataSyncErrorStep.SHARING},{duration:{...e.syncEvent.duration,sharing:l(e.sharingSyncStartTimestamp)},error:{step:i.ErrorStep.Sharing,name:i.ErrorName.Other}}))(e);case"DecipherFinished":return((e,{updatesCount:t,deletesCount:r})=>{const o=e.usageLog134.incoming_update_count||0,n=e.usageLog134.incoming_delete_count||0;return s(e,{incoming_update_count:o+t,incoming_delete_count:n+r},{incomingUpdateCount:o+t,incomingDeleteCount:n+r})})(e,t);case"UploadSucceeded":return((e,{updatedCount:t,deletedCount:r})=>{const o=e.usageLog134.outgoing_update_count||0,n=e.usageLog134.outgoing_delete_count||0;return s(e,{outgoing_update_count:o+t,outgoing_delete_count:n+r},{outgoingUpdateCount:o+t,outgoingDeleteCount:n+r})})(e,t);case"SyncFinished":return(e=>s(e,{duration:l(e.syncStartTimestamp)},{duration:{...e.syncEvent.duration,sync:l(e.syncStartTimestamp)}}))(e);case"SyncFailed":return((e,{error:t})=>s(e,{duration:l(e.syncStartTimestamp),...(0,n.addUsageLogDataSyncErrorInfo)(t)},{duration:{...e.syncEvent.duration,sync:l(e.syncStartTimestamp)},error:{...e.syncEvent.error,name:(0,a.getSyncEventErrorName)(t)}}))(e,t);case"SyncTypeChanged":return((e,{syncType:t})=>s(e,{sync_type:(0,n.getUsageLogDataSyncType)(t)},{extent:(0,a.getSyncEventExtent)(t)}))(e,t)}return e}},91470:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addUsageLogDataSyncErrorInfo=t.getUsageLogDataSyncOrigin=t.getUsageLogDataSyncType=t.makeUsageLogDataSync=t.sendUsageLogDataSync=void 0;const o=r(97211),n=r(19935),a=r(74078),i=r(84146),s=r(1064),c=r(40914),d=r(73144),l=r(62550),u=r(15424);t.sendUsageLogDataSync=async function(e,t){const r={code:o.UsageLogCode.USAGE_DATA_SYNC,content:t};return(0,i.sendUsageLog)(e,r)},t.makeUsageLogDataSync=function(e,r,o,n){return{sync_type:(0,t.getUsageLogDataSyncType)(e),origin:r,sync_timestamp:o,duration:0,duration_chronological:0,duration_treat:0,duration_sharing:0,...n}};t.getUsageLogDataSyncType=e=>{switch(e){case a.SyncType.LIGHT_SYNC:return o.UsageLogDataSyncType.LIGHT;case a.SyncType.FULL_SYNC:return o.UsageLogDataSyncType.FULL;case a.SyncType.FIRST_SYNC:return o.UsageLogDataSyncType.INITIAL;default:(0,c.assertUnreachable)(e)}};t.getUsageLogDataSyncOrigin=e=>{switch(e){case n.Trigger.AccountCreation:return o.UsageLogDataSyncOrigin.ACCOUNT_CREATION;case n.Trigger.ChangeMasterPassword:return o.UsageLogDataSyncOrigin.CHANGE_MASTER_PASSWORD;case n.Trigger.ChangeTeam:return o.UsageLogDataSyncOrigin.UNKNOWN;case n.Trigger.InitialLogin:return o.UsageLogDataSyncOrigin.INITIAL_LOGIN;case n.Trigger.Login:return o.UsageLogDataSyncOrigin.LOGIN;case n.Trigger.Manual:return o.UsageLogDataSyncOrigin.MANUAL;case n.Trigger.Periodic:return o.UsageLogDataSyncOrigin.PERIODIC;case n.Trigger.Push:return o.UsageLogDataSyncOrigin.PUSH;case n.Trigger.Save:return o.UsageLogDataSyncOrigin.SAVE;case n.Trigger.SaveMeta:return o.UsageLogDataSyncOrigin.SAVE_META;case n.Trigger.SettingsChange:return o.UsageLogDataSyncOrigin.SETTINGS_CHANGE;case n.Trigger.Sharing:return o.UsageLogDataSyncOrigin.SHARING;case n.Trigger.Wake:return o.UsageLogDataSyncOrigin.WAKE;default:(0,c.assertUnreachable)(e)}},t.addUsageLogDataSyncErrorInfo=function(e){let t=o.UsageLogDataSyncErrorType.OTHER,r="";return(0,d.isCarbonError)(e)&&(e.errorType===l.HttpError?t=(({errorCode:e})=>e===l.HttpErrorCode.CLIENT_ERROR||e===l.HttpErrorCode.SERVER_ERROR||e===l.HttpErrorCode.STATUS_CODE)(e)?o.UsageLogDataSyncErrorType.HTTP_STATUS:o.UsageLogDataSyncErrorType.HTTP_IO:e.errorType===u.WSError&&(t=o.UsageLogDataSyncErrorType.RESPONSE_CONTENT),r=e.stringErrorCode()),e&&e.message&&void 0!==s.AuthenticationCode[e.message]&&(t=o.UsageLogDataSyncErrorType.AUTHENTICATION,r=e.message),{error_type:t,error_subtype:r}}},35488:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findTransaction=t.isRemovalTransaction=t.isEditionTransaction=t.createNewTransaction=t.getTransactionXml=t.supportedForUploadKwTypeToTransactionTypeMap=t.getFlippedDataTypesForUpload=t.supportedDataTypesForUpload=void 0;const o=r(28060),n=r(59778),a=r(31891),i=r(59125),s=r(15528),c=r(36109),d=r(53494),l=r(89422),u=r(56758);function p(e){return t.supportedForUploadKwTypeToTransactionTypeMap[e.kwType]?(0,l.getDashlaneXml)(e):(a.default.error(`Unsupported kwType "${e.kwType}" for transformation to XML`),"")}t.supportedDataTypesForUpload=["KWAddress","KWAuthCategory","KWAuthentifiant","KWBankStatement","KWCompany","KWDataChangeHistory","KWDriverLicence","KWEmail","KWFiscalStatement","KWGeneratedPassword","KWIdentity","KWIDCard","KWPassport","KWPaymentMean_creditCard","KWPersonalWebsite","KWPhone","KWSecureFileInfo","KWSecureNote","KWSecureNoteCategory","KWSecurityBreach","KWSettingsManagerApp","KWSocialSecurityStatement"],t.getFlippedDataTypesForUpload=function(e){const r={};let o=t.supportedDataTypesForUpload.slice();return Object.keys(r).forEach((n=>{e.isFeatureActivated(r[n])||(o=t.supportedDataTypesForUpload.filter((e=>e!==n)))})),o},t.supportedForUploadKwTypeToTransactionTypeMap=(0,o.pick)(t.supportedDataTypesForUpload,n.DATAMODEL_TYPE_TO_TRANSACTION_TYPE),t.getTransactionXml=p,t.createNewTransaction=async function(e,r,o){try{const{itemId:n,kwType:a,content:i}=o,s=t.supportedForUploadKwTypeToTransactionTypeMap[a];if("REMOVE"===o.action){const e={type:s,action:"BACKUP_REMOVE",identifier:n,objectType:"transaction",time:(0,c.getUnixTimestamp)(),backupDate:0,content:""};return Promise.resolve(e)}const l=(0,d.utf16ToDeflatedUtf8)(p(i)),S=await e.encrypt(l),g=0,m={type:s,action:"BACKUP_EDIT",identifier:n,objectType:"transaction",time:(0,c.getUnixTimestamp)(),backupDate:g,content:S};return r(u.announcements.transactionCiphered(s,n,g)),m}catch(e){const t=new Error(`[Sync] - upload: failed to create transaction. ${e}`);return(0,i.sendExceptionLog)({error:t,code:s.ExceptionCriticality.ERROR}),null}};const S=(0,o.propEq)("identifier");t.isEditionTransaction=(0,o.propEq)("action","BACKUP_EDIT"),t.isRemovalTransaction=(0,o.propEq)("action","BACKUP_REMOVE"),t.findTransaction=(0,o.curry)(((e,t)=>(0,o.find)(S(e),t)))},59778:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionType=t.getTransactionTypeFromDataModelType=t.getDataModelTypeFromTransactionType=t.DATAMODEL_TYPE_TO_TRANSACTION_TYPE=void 0;const o=r(97211);Object.defineProperty(t,"DATAMODEL_TYPE_TO_TRANSACTION_TYPE",{enumerable:!0,get:function(){return o.DATAMODEL_TYPE_TO_TRANSACTION_TYPE}}),Object.defineProperty(t,"getDataModelTypeFromTransactionType",{enumerable:!0,get:function(){return o.getDataModelTypeFromTransactionType}}),Object.defineProperty(t,"getTransactionTypeFromDataModelType",{enumerable:!0,get:function(){return o.getTransactionTypeFromDataModelType}}),Object.defineProperty(t,"TransactionType",{enumerable:!0,get:function(){return o.TransactionType}})},6219:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.countRemoveTransactions=t.countEditionTransactions=void 0;const r=(e,t)=>e.reduce(((e,r)=>r.identifier&&r.action===t?e+1:e),0);t.countEditionTransactions=e=>r(e,"BACKUP_EDIT");t.countRemoveTransactions=e=>r(e,"BACKUP_REMOVE")},97373:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMissingIdentifiers=void 0;const o=r(97211),n=r(28060),a=r(9473),i=r(56758),s=r(7119);t.getMissingIdentifiers=function(e,t,r){e(i.announcements.treatProblemSummaryStarted(t,r));const c=o.transactionTypes.reduce(((c,d)=>{return l=c,u=function(e,t,r,c){const d=o.TRANSACTION_TYPE_TO_DATAMODEL_TYPE[t];if(!d||!a.default[d])return{missingLocally:[],missingRemotely:[]};const l=a.default[d];if(!r[l])return{missingLocally:[],missingRemotely:[]};const u=c.transactions[t]||{},p=new Set(r.changesToUpload.filter((({kwType:e})=>e===d)).map((({itemId:e})=>e))),S=r[l].filter((({Id:e})=>!p.has(e))),g=Object.keys(u).filter((e=>!p.has(e))),m=(0,n.difference)(g,(0,n.pluck)("Id",S));m.forEach((r=>{e(i.announcements.treatProblemSummaryCompared(i.TreatProblemSummaryComparedResult.Download,t,r,{cause:i.TreatProblemSummaryComparedCause.Missing,remoteDate:u[r]}))}));const y=i.announcements.treatProblemSummaryCompared;return S.reduce(((r,{Id:o,LastBackupTime:n})=>{const a=u[o],c=1e3*n;if(!a||a/1e3<n){const n=a?{remoteDate:a}:{};e(y(i.TreatProblemSummaryComparedResult.Upload,t,o,{cause:a?i.TreatProblemSummaryComparedCause.OutOfDate:i.TreatProblemSummaryComparedCause.Missing,localDate:c,...n}));const l=(0,s.createUploadChange)({action:"EDIT",kwType:d,itemId:o});return{missingLocally:r.missingLocally,missingRemotely:[...r.missingRemotely,l]}}return a/1e3>n?(e(y(i.TreatProblemSummaryComparedResult.Download,t,o,{cause:i.TreatProblemSummaryComparedCause.OutOfDate,localDate:c,remoteDate:a})),{missingLocally:[...r.missingLocally,o],missingRemotely:r.missingRemotely}):(e(y(i.TreatProblemSummaryComparedResult.UpToDate,t,o,{localDate:c})),r)}),{missingLocally:m,missingRemotely:[]})}(e,d,t,r),{missingLocally:[...l.missingLocally,...u.missingLocally],missingRemotely:[...l.missingRemotely,...u.missingRemotely]};var l,u}),{missingLocally:[],missingRemotely:[]});return e(i.announcements.treatProblemSummaryFinished()),c}},32725:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUploadChangesWithoutSettings=t.isSettingUploadChange=t.countDeletionUploadChanges=t.countEditionUploadChanges=t.findUploadChange=t.isRemovalUploadChange=t.isEditionUploadChange=void 0;const o=r(28060),n=(0,o.propEq)("itemId");t.isEditionUploadChange=(0,o.propEq)("action","EDIT"),t.isRemovalUploadChange=(0,o.propEq)("action","REMOVE"),t.findUploadChange=(0,o.curry)(((e,t)=>(0,o.find)(n(e),t)));t.countEditionUploadChanges=e=>e.filter((e=>(0,t.isEditionUploadChange)(e))).length;t.countDeletionUploadChanges=e=>e.filter((e=>(0,t.isRemovalUploadChange)(e))).length,t.isSettingUploadChange=(0,o.propEq)("kwType","KWSettingsManagerApp");t.getUploadChangesWithoutSettings=e=>(0,o.reject)(t.isSettingUploadChange,e)},93640:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UploadChangeStatus=void 0,function(e){e.ReadyForNextSync="ReadyForNextSync",e.ScheduledForSync="ScheduledForSync"}(t.UploadChangeStatus||(t.UploadChangeStatus={}))},42136:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.markChangeAsReadyForNextSync=t.markChangeAsScheduled=t.filterOutUploadedChanges=void 0;const o=r(93640);t.filterOutUploadedChanges=(e,t)=>e.filter((({itemId:e,status:r})=>!t.includes(e)||r!==o.UploadChangeStatus.ScheduledForSync));const n=e=>t=>({...t,status:e});t.markChangeAsScheduled=n(o.UploadChangeStatus.ScheduledForSync),t.markChangeAsReadyForNextSync=n(o.UploadChangeStatus.ReadyForNextSync)},7119:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createUploadChangeForDeletion=t.createUploadChangeForItem=t.createUploadChange=void 0;const o=r(93640);t.createUploadChange=({itemId:e,kwType:t,action:r="EDIT",status:n=o.UploadChangeStatus.ReadyForNextSync})=>({itemId:e,kwType:t,action:r,status:n});t.createUploadChangeForItem=e=>(0,t.createUploadChange)((e=>({itemId:e.Id,kwType:e.kwType}))(e));t.createUploadChangeForDeletion=e=>r=>(0,t.createUploadChange)({itemId:r,kwType:e,action:"REMOVE"})},30269:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isUploadNeeded=t.upload=t.gatherContentsToUpload=void 0;const o=r(28060),n=r(32725),a=r(35488),i=r(6219),s=r(9473),c=r(16075),d=r(56758),l=Object.keys(a.supportedForUploadKwTypeToTransactionTypeMap),u=(0,o.flip)(o.contains)(l),p=(0,o.compose)(o.uniq,(0,o.filter)((0,o.propSatisfies)(u,"kwType")),(0,o.filter)((0,o.propSatisfies)(Boolean,"itemId")),(0,o.defaultTo)([]));function S(e,t){return p(e.changesToUpload).map((r=>{const{action:a,kwType:i,itemId:c}=r,d=s.default[i];if((0,n.isRemovalUploadChange)(r))return{action:a,kwType:i,itemId:c,content:null};if("KWSettingsManagerApp"===r.kwType&&"SETTINGS_userId"===c)return{action:a,kwType:i,itemId:c,content:t};const l=(0,o.find)((0,o.propEq)("Id",c),e[d]);return l?{action:a,kwType:i,itemId:c,content:l}:null})).filter(o.identity)}t.gatherContentsToUpload=S;t.upload=async function(e){const{announce:t,cryptoCenterService:r,personalData:o,personalSettings:n}=e,s=S(o,n),c=await(async(e,t,r)=>{t(d.announcements.cipherStarted());const o=r.map((r=>(0,a.createNewTransaction)(e,t,r))),n=await Promise.all(o);return t(d.announcements.cipherFinished()),n.filter(Boolean)})(r,t,s);if(0===c.length)return{uploadedTransactionsId:[]};try{const r=(0,i.countEditionTransactions)(c),o=(0,i.countRemoveTransactions)(c);t(d.announcements.uploadRequested(r,o));const n=await e.ws.backup.upload({login:e.login,uki:e.uki,lock:e.lock,transactions:c,privateKey:e.privateKey,publicKey:e.publicKey}),a=c.reduce(((e,t)=>(t.identifier&&e.push(t.identifier),e)),[]);return t(d.announcements.uploadSucceeded(r,o,n.timestamp)),{uploadedTransactionsId:a,lastSyncTimestamp:Number(n.timestamp),summary:n.summary}}catch(e){throw t(d.announcements.uploadFailed(e)),e}},t.isUploadNeeded=function(e,t,r){const n=(0,o.propOr)([],"changesToUpload",e);return 0!==n.length&&(p(n).length>0&&(0,c.isBackupSyncOn)(t,r))}},18233:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(96364),t)},96364:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeUsageLog135Monitor=void 0;const o=r(37158),n=r(43808);t.makeUsageLog135Monitor=e=>{let t=(0,n.getEmptyState)();return(r,a)=>{switch(t=(0,n.reduceState)(t,r,a),r.type){case"DecipherFullBackupFailed":case"DecipherTransactionFailed":(0,o.sendUsageLogTransactionError)(e,t.usageLog135)}}}},43808:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reduceState=t.getEmptyState=void 0;const o=r(97211),n=r(73144),a=e=>(0,n.isCarbonError)(e)?e.stringErrorCode():e instanceof Error&&e.message||`${e}`;t.getEmptyState=()=>({syncStartTimestamp:null,errorType:null,cryptoPayload:{},usageLog135:null});t.reduceState=(e,t,r)=>{switch(t.type){case"SyncStarted":return((e,{timestamp:t})=>({...e,syncStartTimestamp:{sync_timestamp:t}}))(e,r);case"DecipherFullBackupParseFailed":case"DecipherTransactionParseFailed":return(e=>({...e,errorType:{error_type:o.UsageLogTransactionErrorType.XML_PARSE}}))(e);case"DecipherTransactionDecipherFailed":case"DecipherFullBackupDecipherFailed":return((e,{error:t,cryptoPayload:r})=>({...e,errorType:{error_type:o.UsageLogTransactionErrorType.DECIPHER,error_subtype:a(t)},cryptoPayload:{crypto_payload:r}}))(e,t);case"DecipherFullBackupItemReadFailed":return((e,{error:t})=>({...e,errorType:{error_type:o.UsageLogTransactionErrorType.DECIPHER,error_subtype:a(t)}}))(e,t);case"DecipherFullBackupItemSkipped":return((e,{error:t})=>({...e,errorType:{error_type:o.UsageLogTransactionErrorType.OTHER,error_subtype:a(t)}}))(e,t);case"DecipherFullBackupFailed":return((e,{error:t})=>({...e,usageLog135:{...e.syncStartTimestamp,transaction_type:o.TransactionType.FULLBACKUP,transaction_date:0,error_type:o.UsageLogTransactionErrorType.OTHER,error_subtype:a(t),...e.errorType,...e.cryptoPayload}}))(e,t);case"DecipherTransactionFailed":return((e,{error:t,transactionType:r,backupDate:n})=>({...e,usageLog135:{...e.syncStartTimestamp,transaction_type:o.TransactionType[r],transaction_date:n,error_type:o.UsageLogTransactionErrorType.OTHER,error_subtype:a(t),...e.errorType,...e.cryptoPayload}}))(e,t)}return e}},37158:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendUsageLogTransactionError=void 0;const o=r(97211),n=r(84146);t.sendUsageLogTransactionError=async function(e,t){const r={code:o.UsageLogCode.USAGE_TRANSACTION_ERROR,content:t};return(0,n.sendUsageLog)(e,r)}},83901:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.countSyncSummaryTransactions=void 0,t.countSyncSummaryTransactions=function(e){return e?Object.keys(e.transactions).reduce(((t,r)=>t+(Object.keys(e.transactions[r])||[]).length),0):0}},60087:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLastSuccessfulSyncTimestamp=t.sync=t.MAX_SYNC_TIMESTAMP=t.MIN_SYNC_TIMESTAMP=void 0;const o=r(28060),n=r(74078),a=r(28053),i=r(30269),s=r(14122),c=r(88319),d=r(31891),l=r(78261),u=r(56758),p=r(79850),S=r(32725),g=r(37821),m=r(59125),y=r(73144);function v(e,t){const r=Number(t);return""===t||(0,o.isNil)(t)||isNaN(r)?e:r}t.MIN_SYNC_TIMESTAMP=999999999999,t.MAX_SYNC_TIMESTAMP=2070753783e3,t.sync=async function(e){const{announce:r,storeService:A}=e;let E;try{const f=A.getState(),h=(0,s.featuresSelector)(f);!function(e){var r,o;switch(e.syncType){case n.SyncType.FIRST_SYNC:{if(0!==e.lastSyncTimestamp)throw new Error("Sync Error: lastSyncTimestamp should be 0 on First Sync");const t=(0,S.getUploadChangesWithoutSettings)(null!==(o=null===(r=e.personalData)||void 0===r?void 0:r.changesToUpload)&&void 0!==o?o:[]);if(null==t?void 0:t.length)throw new Error("Sync Error: should not have changes to upload on First Sync");break}case n.SyncType.LIGHT_SYNC:case n.SyncType.FULL_SYNC:if(null===e.lastSyncTimestamp||e.lastSyncTimestamp<t.MIN_SYNC_TIMESTAMP||e.lastSyncTimestamp>t.MAX_SYNC_TIMESTAMP){const t=new Error("Sync Error: non valid lastSyncTimestamp"),r=y.CarbonError.fromAnyError(t).addContextInfo("SYNC","verifySyncArgs").addAdditionalInfo({libError:`lastSyncTimestamp: ${e.lastSyncTimestamp}`});throw(0,m.sendExceptionLog)({error:r}),t}break;default:{const t=new Error("Sync Error: unexpected syncType"),r=y.CarbonError.fromAnyError(t).addContextInfo("SYNC","verifySyncArgs").addAdditionalInfo({libError:`syncType: ${e.syncType}`});throw(0,m.sendExceptionLog)({error:r}),t}}}(e);const _=e.personalData||A.getPersonalData(),{isUploadEnabled:T}=A.getSyncStatus();d.Debugger.log(`[Sync] User allowed to Upload: ${T}`),T&&(0,i.isUploadNeeded)(_,A.getPersonalSettings(),h)&&(d.Debugger.log("[Sync] Found local data to upload"),e.syncType=n.SyncType.FULL_SYNC,r(u.announcements.syncTypeChanged(e.syncType))),A.dispatch((0,g.scheduleChangesForSync)()),E=await(0,a.latest)(e);const I=()=>({...(0,o.dissoc)("lock",E),syncType:e.syncType,isUploadEnabled:E.isUploadEnabled,lastSyncTimestamp:v(e.lastSyncTimestamp,E.lastSyncTimestamp),uploadedTransactions:[],summary:E.summary});if((0,l.changeMPinProgressSelector)(f))return I();if(e.syncType!==n.SyncType.FULL_SYNC||!E.isUploadEnabled)return E.isUploadEnabled&&(0,p.unlock)(e,E.lock),I();const C=((e,t)=>{const r=new Set,o=e&&e.items||[];for(const e of o)e&&"object"==typeof e&&e.id&&r.add(e.id);for(const e of t.items)e&&"object"==typeof e&&e.itemId&&r.add(e.itemId);return r})(E.sharing2,A.getSharingData()),{personalData:P,remoteTransactions:D}=(0,c.default)(r,_,C,E.clearTransactions),O=(0,o.isNil)(e.pushKeysToServer)?null:{publicKey:e.pushKeysToServer.public,privateKey:e.pushKeysToServer.private},b={login:e.login,uki:e.uki,lock:E.lock,ws:e.ws,cryptoCenterService:e.dataEncryptorService.getInstance(),personalData:P,personalSettings:A.getPersonalSettings(),...O,announce:r},w=await(0,i.upload)(b);return 0===w.uploadedTransactionsId.length&&(0,p.unlock)(e,E.lock),A.dispatch((0,g.clearUploadedChanges)(w.uploadedTransactionsId)),{...(0,o.dissoc)("lock",E),clearTransactions:D,syncType:e.syncType,isUploadEnabled:E.isUploadEnabled,uploadedTransactions:w.uploadedTransactionsId,lastSyncTimestamp:v(e.lastSyncTimestamp,w.lastSyncTimestamp),summary:w.summary||E.summary}}catch(t){throw E&&(0,p.unlock)(e,E.lock),t&&t.message,t}finally{A.dispatch((0,g.unscheduleRemainingChanges)())}},t.getLastSuccessfulSyncTimestamp=v},28053:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildFullBackupFileMap=t.buildLatestArgs=t.latest=void 0;const o=r(28354),n=r(28060),a=r(31354),i=r(31891),s=r(1064),c=r(74078),d=r(56758),l=r(79850),u=r(73144),p=r(59125);function S(e){const{lastSyncTimestamp:t,login:r,needsKeys:n,storeService:a,syncType:i,transactionIds:s,uki:d}=e,l=s&&s.length,S={lock:i===c.SyncType.FULL_SYNC||l?(0,o.v4)():"nolock",login:r,needsKeys:n,sharing2:!0,teamAdminGroups:!0,timestamp:t,version:a.getPlatform().info.appVersion,uki:d};switch(s&&(S.transactions=s),i){case c.SyncType.FIRST_SYNC:if(0!==S.timestamp)throw new Error("timestamp should be null for FIRST_SYNC");break;case c.SyncType.LIGHT_SYNC:case c.SyncType.FULL_SYNC:if(isNaN(S.timestamp))S.timestamp=0;else if(null===S.timestamp||S.timestamp<999999999999||S.timestamp>2070753783e3){const e=new Error("non valid lastSyncTimestamp"),t=u.CarbonError.fromAnyError(e).addContextInfo("SYNC","buildLatestArgs").addAdditionalInfo({libError:`lastSyncTimestamp: ${S.timestamp}`});throw(0,p.sendExceptionLog)({error:t}),e}break;default:{const e=new Error("unexpected syncType"),t=u.CarbonError.fromAnyError(e).addContextInfo("SYNC","buildLatestArgs").addAdditionalInfo({libError:`syncType: ${i}`});throw(0,p.sendExceptionLog)({error:t}),e}}return S}function g(e){const t=new Map;return e&&e.forEach((e=>{t.set(e.identifier,e.backupDate)})),t}t.latest=async function(e){const t=S(e),{announce:r}=e;let o;try{const{lock:n,needsKeys:a}=t;if(r(d.announcements.latestRequested(n,a)),o=await e.ws.backup.latest(t),"message"===o.objectType)throw"Incorrect authentification"===o.content?new Error(s.AuthenticationCode[s.AuthenticationCode.INVALID_UKI]):"Temporarily disabled"===o.content?new Error("Sync service unavailable"):new Error(s.AuthenticationCode[s.AuthenticationCode.UNKNOWN_SYNC_ERROR]);if(void 0!==o.objectType)throw new Error("unexpected objectType");if(!o.transactionList)throw i.default.log("Backup sync failed"),new Error("Backup sync failed");if(!function(e){if(e.find((e=>!e.backupDate||e.backupDate<999999999999||e.backupDate>2070753783e3)))return!1;return!0}(o.transactionList))throw new Error("wrongly formatted backupDate")}catch(e){throw r(d.announcements.latestFailed(e)),e}r(d.announcements.latestSucceeded(o));const c=g(o.fullBackupFileList);try{const i=await a.decrypt(e.dataEncryptorService.getInstance(),r,o.fullBackupFile,c,o.transactionList);return{clearTransactions:i,sharing2:o.sharing2,lastSyncTimestamp:o.timestamp,lock:t.lock,keys:o.keys,isUploadEnabled:(0,n.defaultTo)(!1,o.uploadEnabled),summary:o.summary,fullBackupFileSize:c.size}}catch(r){throw(0,l.unlock)(e,t.lock),r}},t.buildLatestArgs=S,t.buildFullBackupFileMap=g},74078:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncType=void 0,function(e){e[e.FIRST_SYNC=0]="FIRST_SYNC",e[e.LIGHT_SYNC=1]="LIGHT_SYNC",e[e.FULL_SYNC=2]="FULL_SYNC"}(t.SyncType||(t.SyncType={}))},79850:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlock=void 0;const o=r(31891);t.unlock=async function(e,t){if(!function(e){return e&&"nolock"!==e}(t))return;const{login:r,ws:n,uki:a}=e;try{await n.backup.unlock({login:r,uki:a,lock:t})}catch(e){(0,o.logWarn)({tag:"Sync",message:`Unlock failed: ${e}`})}}},94417:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.binaryFindLastIndex=t.binaryFindIndex=t.binaryContains=void 0;const o=r(28060);t.binaryContains=(0,o.curry)((function e(t,r){const o=t.length;if(0===o)return!1;const n=Math.floor(o/2),a=t[n];if(a===r)return!0;if(a<r){return e(t.slice(n+1,o),r)}return e(t.slice(0,n),r)})),t.binaryFindIndex=function e(t,r,o){const n=t.length;if(0===n)return-1;const a=o?Math.min(o,n-1):Math.floor(n/2);if(r(t[a])){const o=e(t.slice(0,a),r);return-1===o?a:o}{const o=e(t.slice(a+1,n),r);return-1===o?-1:a+o+1}},t.binaryFindLastIndex=function e(t,r,o){const n=t.length;if(0===n)return-1;const a=o?Math.min(o,n-1):Math.floor(n/2);if(r(t[a])){const o=e(t.slice(a+1,n),r);return-1===o?a:a+o+1}return e(t.slice(0,a),r)}},34929:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeDataEncryptorService=t.setObfuscatingKey=void 0;const o=r(53494);t.setObfuscatingKey=function(e){return e.setInstance({raw:[214,238,100,106,146,140,114].concat([110,232,72,104,108,100,204]).map((e=>e/2)).map((e=>String.fromCharCode(e))).join("")},""),e},t.makeDataEncryptorService=function(e){let t=null;return{setInstance:(r,n,a)=>{t=(0,o.makeCryptoCenterService)(r,n,e,a)},getInstance:()=>{if(!t)throw new Error("makeDataEncryptorService: you must call setInstance(password,serverKey) before getting the instance");return t},close:()=>{t=null},hasBeenSet:()=>Boolean(t)}}},943:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertDashlaneSecureDataKWC3ToTransportableData=void 0;const o=r(24555);t.convertDashlaneSecureDataKWC3ToTransportableData=e=>{const t=e.salt,r=(0,o.utf8ToBase64Buffer)(e.version),n=e.encryptedData;return(0,o.concatBuffers)(t,r,n)}},24555:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBufferToHex=t.convertFromHex=t.deflateBuffer=t.inflateBuffer=t.removeQtCompressionHeader=t.addQtCompressHeader=t.isBase64Encoded=t.getSubDataByteArray=t.concatBuffers=t.ab2str=t.str2ab=t.base64ToBigInteger=t.pemToSpki=t.spkitoPem=t.pkcs8toPem=t.CrlfToLF=t.pemTopkcs8=t.base64BufferToText=t.utf8ToBase64=t.base64ToUtf8=t.utf8ToBase64Buffer=t.base64BufferToUtf8=t.base64BufferToRaw=t.uint8ArrayToText=t.arrayBufferToBuffer=t.arrayBufferToText=t.utf8ChunkDecode=t.utf8ChunkEncode=t.base64ToBuffer=t.bufferToBase64=t.applyXorOnBuffers=void 0;const o=r(15313).Buffer,n=r(93513),a=r(48270),i=r(48151),s=r(8722),c=r(14467),d=r(93347),l=r(30543),u=r(2420),p=Math.pow(10,6),S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=new Uint8Array(256);for(let e=0;e<S.length;e++)g[S.charCodeAt(e)]=e;t.applyXorOnBuffers=function(e,t){if(e.byteLength!==t.byteLength)throw new Error("xorBuffer: buffers are not same length");const r=new Uint8Array(e),o=new Uint8Array(t),n=e.byteLength,a=new Uint8Array(n);for(let e=0;e<n;e++)a[e]=r[e]^o[e];return a.buffer};function m(e){const t=e.length,r=[];for(let o=0;o<t;o+=3)r.push(S[e[o]>>2]),r.push(S[(3&e[o])<<4|e[o+1]>>4]),r.push(S[(15&e[o+1])<<2|e[o+2]>>6]),r.push(S[63&e[o+2]]);return r.join("")}t.bufferToBase64=(e,t=p)=>{const r=new Uint8Array(e),o=r.length,n=t%3,a=0===n?t:t+(3-n),i=Math.ceil(o/a);let s="",c=-1;for(;c++<i;){const e=c*a,t=c===i-1?o:(c+1)*a,n=m(r.slice(e,t));s=s.concat(n)}return o%3==2?s.substring(0,s.length-1)+"=":o%3==1?s.substring(0,s.length-2)+"==":s};function y(e,t=p){const r=e.length;if(0===r)return"";let o="",n=0,a=Math.min(n+t,r);for(;a<=r;){const i=e.charCodeAt(a-1);if(i>=55296&&i<=56319){if(a++,a>r)throw new Error("Invalid string provided to utf8ChunkEncode");continue}const s=e.slice(n,a),c=l.encode(s);if(o=o.concat(c),a===r)break;n=a,a=Math.min(n+t,r)}return o}function v(e,t=p){const r=e.length;if(0===r)return"";let o="",n=0,a=Math.min(n+t,r);for(;a<=r;){const s=e.charCodeAt(a-1);if((A(i=s)||function(e){if(e>>5==6)return!0;if(e>>4==14)return!0;if(e>>3==30)return!0;return!1}(i))&&a<r){if(A(e.charCodeAt(a))){a++;continue}}const c=e.slice(n,a),d=l.decode(c);if(o=o.concat(d),a===r)break;n=a,a=Math.min(n+t,r)}var i;return o}function A(e){return e>>6==2}t.base64ToBuffer=e=>{let t=.75*e.length;const r=e.length;let o,n,a,i,s,c=0;e.endsWith("=")&&(t--,"="===e[e.length-2]&&t--);const d=new ArrayBuffer(t),l=new Uint8Array(d);for(o=0;o<r;o+=4)n=g[e.charCodeAt(o)],a=g[e.charCodeAt(o+1)],i=g[e.charCodeAt(o+2)],s=g[e.charCodeAt(o+3)],l[c++]=n<<2|a>>4,l[c++]=(15&a)<<4|i>>2,l[c++]=(3&i)<<6|63&s;return d},t.utf8ChunkEncode=y,t.utf8ChunkDecode=v;function E(e){const t=new Uint16Array(e),r=t.length;let o="",n=u.maxChunkSize;for(let e=0;e<r;e+=n)e+n>r&&(n=r-e),o+=String.fromCharCode.apply(null,t.subarray(e,e+n));return o}t.arrayBufferToText=e=>E(new Uint8Array(e)),t.arrayBufferToBuffer=function(e){const t=new o(e.byteLength),r=new Uint8Array(e);for(let e=0;e<t.length;++e)t[e]=r[e];return t},t.uint8ArrayToText=E;t.base64BufferToRaw=e=>{const r=(0,t.bufferToBase64)(e);return n.decode(r)};t.base64BufferToUtf8=e=>{const r=(0,t.bufferToBase64)(e);return v(n.decode(r))};t.utf8ToBase64Buffer=e=>{const r=y(e),o=n.encode(r);return(0,t.base64ToBuffer)(o)};t.base64ToUtf8=e=>v(n.decode(e));t.utf8ToBase64=e=>{const t=y(e);return n.encode(t)};t.base64BufferToText=e=>{const r=(0,t.bufferToBase64)(e);return n.decode(r)};t.pemTopkcs8=e=>{const r=a.privateKeyFromPem(e),o=a.privateKeyToAsn1(r),n=a.wrapRsaPrivateKey(o),i=c.toDer(n).getBytes();return(0,t.str2ab)(i)};t.CrlfToLF=e=>e.replace(/(?:\\[r]|[\r\n]+)+/g,"\n");t.pkcs8toPem=e=>{const r=new i.ByteBuffer(e),o=c.fromDer(r),n=a.privateKeyFromAsn1(o),s=a.privateKeyToPem(n);return(0,t.CrlfToLF)(s)};t.spkitoPem=e=>{const r=new i.ByteBuffer(e),o=c.fromDer(r),n=a.publicKeyFromAsn1(o),s=a.publicKeyToRSAPublicKeyPem(n);return(0,t.CrlfToLF)(s)};t.pemToSpki=e=>{const r=a.publicKeyFromPem(e),o=a.publicKeyToAsn1(r),n=c.toDer(o).getBytes();return(0,t.str2ab)(n)};t.base64ToBigInteger=e=>{const t=(e+"===".slice((e.length+3)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=i.decode64(t);return new s.BigInteger(i.bytesToHex(r),16)};t.str2ab=e=>{const t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0;t<e.length;++t)r[t]=e.charCodeAt(t);return t},t.ab2str=t.arrayBufferToText;t.concatBuffers=(...e)=>{const t=e.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(t);return e.reduce(((e,t)=>(r.set(new Uint8Array(t),e),e+t.byteLength)),0),r.buffer};t.getSubDataByteArray=(e,t,r)=>e.slice(t,r);t.isBase64Encoded=e=>e&&/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/.test(e),t.addQtCompressHeader=function(e){const r=(o=e.byteLength,new Uint8Array([(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o]).buffer);var o;return(0,t.concatBuffers)(r,e)},t.removeQtCompressionHeader=function(e){return e.slice(4)},t.inflateBuffer=function(e){return d.inflate(new Uint8Array(e))},t.deflateBuffer=function(e){return d.deflate(new Uint8Array(e),{level:7}).buffer};t.convertFromHex=e=>{e||(e="");let t="";for(let r=0;r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substring(r,r+2),16));return t};t.convertBufferToHex=e=>Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")},77176:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomValues=void 0;const o=r(85943),n=r(4633);t.getRandomValues=function(e){const t=(0,n.getWebCrypto)();return t?t.getRandomValues(new Uint8Array(e)):(0,o.generateRandomValues)(e)}},3424:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.jwkToSpki=t.evpBytesToKey=void 0;const o=r(48270),n=r(14467),a=r(87459),i=r(24555);t.evpBytesToKey=async function(e){const{derivedKey:t,salt:r,keyLength:o,ivLength:n}=e,s=(0,i.concatBuffers)(t,r.slice(0,8)),c=await(0,a.computeHashSha1)(s),d=await(0,a.computeHashSha1)((0,i.concatBuffers)(c,s)),l=await(0,a.computeHashSha1)((0,i.concatBuffers)(d,s)),u=(0,i.concatBuffers)(c,d,l);return Promise.resolve(u.slice(o,o+n))};t.jwkToSpki=e=>{const{modulus:t,exponent:r}=e,a=o.setRsaPublicKey((0,i.base64ToBigInteger)(t),(0,i.base64ToBigInteger)(r)),s=o.publicKeyToAsn1(a),c=n.toDer(s).getBytes();return(0,i.str2ab)(c)}},33792:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNoDerivationCryptoConfig=void 0;const o=r(53528),n=r(10423);t.getNoDerivationCryptoConfig=function(){return(0,o.parsePayload)(n.CRYPTO_NODERIVATION_HMAC64).cryptoConfig}},4633:(e,t)=>{function r(){return self.crypto||null}Object.defineProperty(t,"__esModule",{value:!0}),t.getWebCryptoSubtle=t.getWebCrypto=void 0,t.getWebCrypto=r,t.getWebCryptoSubtle=function(){const e=r();return e?e.subtle?e.subtle:e.webkitSubtle?e.webkitSubtle:null:null}},76409:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateLocalkeyAndSetupEncryptorService=t.getEncryptionKeyBuffer=void 0;const o=r(33792),n=r(24555),a=r(41751),i=r(75897),s=r(1064);t.getEncryptionKeyBuffer=function(e,t,r){if(r.skipDerivation){if(e.byteLength<64)throw new Error(`createEncryptionKey: password should be at least 64 bytes long but is: ${e.byteLength}`);return(0,n.applyXorOnBuffers)(e,t)}return(0,n.concatBuffers)(t,e)},t.generateLocalkeyAndSetupEncryptorService=async function(e,t,r,c){const d=await(0,a.generate64BytesKey)(),l=(0,n.base64BufferToRaw)(d),u=(0,o.getNoDerivationCryptoConfig)();e.setInstance({raw:l},"",u),t.dispatch((0,i.updateIsLocalKeyActivated)(!0)),c===s.PersistData.PERSIST_DATA_YES&&await r.getInstance().user.persistLocalKey(l)}},40232:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeGetDerivateKeyWithCacheAndQueue=void 0;const o=r(53528),n=r(24555),a=r(16953),i=r(87459);t.makeGetDerivateKeyWithCacheAndQueue=function(){const e=new Map,t=new Map;function r(t){return e.get(t)}function s(r,o){const n=t.get(r);n&&n.forEach((({resolve:e})=>e(o))),t.set(r,[]),e.set(r,o)}function c(r,o,n,i){return new Promise(((c,d)=>{const l=t.get(r)||[];l.push({resolve:c,reject:d}),t.set(r,l);const u=e.get(r);if(u)s(r,u);else if(1===l.length){({pbkdf2:a.deriveKeyWithPBKDF2,argon2d:a.deriveKeyWithArgon2d})[i.method](o,n,i).then((e=>{s(r,e)})).catch((o=>{!function(r,o){const n=t.get(r);n&&n.forEach((({reject:e})=>e(o))),t.set(r,[]),e.delete(r)}(r,o)}))}}))}return(e,t,a)=>function(e,t,r,a,s){return function(e,t,r){if((0,o.isNoDerivation)(r))return Promise.resolve((0,n.arrayBufferToText)(e));const a=(0,o.isPbkdf2Derivation)(r)?r.iterations:r.t_cost;return new Promise(((o,s)=>{(0,i.computeHashSha256)((0,n.str2ab)(`${(0,n.arrayBufferToText)(e)}_${(0,n.arrayBufferToText)(t)}_${r.method}_${a}`)).then((e=>(0,n.arrayBufferToText)(e))).then(o,s)}))}(r,a,s).then((o=>{const n=e(o);return n||t(o,r,a,s)}))}(r,c,e,t,a)}},30507:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.verify=t.sign=t.decrypt=t.encrypt=t.generateRsaOaepKeyPair=t.exportRsaKeyPair=t.exportRsaKeyToPem=t.DefaultAsymmetricOptions=t.HashAlgorithm=void 0;const o=r(4633),n=r(24555),a=r(14340),i=r(85943),s=r(59125),c=r(31891);var d;!function(e){e.SHA_1="SHA-1",e.SHA_256="SHA-256"}(d=t.HashAlgorithm||(t.HashAlgorithm={})),t.DefaultAsymmetricOptions={hashAlgorithm:d.SHA_256};const l=e=>({name:a.RSASA_PKCS1,hash:{name:e}}),u=e=>({name:a.RSA_OAEP,hash:{name:e}}),p=new Uint8Array([1,0,1]),S=(e,t,r)=>e.exportKey(r,t).then((e=>e));t.exportRsaKeyToPem=e=>Promise.resolve().then((()=>({public:(0,n.spkitoPem)(e.public),private:(0,n.pkcs8toPem)(e.private)})));t.exportRsaKeyPair=e=>{const t=(0,o.getWebCryptoSubtle)(),r=[S(t,e.privateKey,"pkcs8"),S(t,e.publicKey,"spki")];return Promise.all(r).then((e=>({private:e[0],public:e[1]})))};t.generateRsaOaepKeyPair=async(e=t.DefaultAsymmetricOptions)=>{const r=(0,o.getWebCryptoSubtle)();if(!r)return(0,i.generateRsaKeyPair)();try{const o=await r.generateKey({name:a.RSA_OAEP,modulusLength:2048,publicExponent:p,hash:{name:e.hashAlgorithm}},!0,["encrypt","decrypt"]);return await(0,t.exportRsaKeyPair)(o).then(t.exportRsaKeyToPem)}catch(e){return(e=>{const t=new Error(`[AsymmetricEncryption] - generateRsaOaepKeyPair: ${e}`);return c.Debugger.error(t),(0,s.sendExceptionLog)({error:t}),(0,i.generateRsaKeyPair)()})(e)}};t.encrypt=async(e,r,n=t.DefaultAsymmetricOptions)=>{const a=(0,o.getWebCryptoSubtle)();if(!a)return(0,i.encryptRSA)(e,r);try{const t=await a.importKey("spki",e,u(n.hashAlgorithm),!1,["encrypt"]);return await a.encrypt(u(n.hashAlgorithm),t,r)}catch(t){return(t=>{const o=new Error(`[AsymmetricEncryption] - encrypt: ${t}`);return c.Debugger.error(o),(0,s.sendExceptionLog)({error:o}),(0,i.encryptRSA)(e,r)})(t)}};t.decrypt=async(e,r,n=t.DefaultAsymmetricOptions)=>{const a=(0,o.getWebCryptoSubtle)();if(!a)return(0,i.decryptRSA)(e,r);try{const t=await a.importKey("pkcs8",e,u(n.hashAlgorithm),!1,["decrypt"]);return await a.decrypt(u(n.hashAlgorithm),t,r)}catch(t){return(t=>{const o=new Error(`[AsymmetricEncryption] - decrypt: ${t}`);return c.Debugger.error(o),(0,s.sendExceptionLog)({error:o}),(0,i.decryptRSA)(e,r)})(t)}};t.sign=async(e,r,n=t.DefaultAsymmetricOptions)=>{const a=(0,o.getWebCryptoSubtle)();if(!a)return(0,i.signRSA)(e,r);try{const t=await a.importKey("pkcs8",e,l(n.hashAlgorithm),!1,["sign"]);return await a.sign(l(n.hashAlgorithm),t,r)}catch(t){return(t=>{const o=new Error(`[AsymmetricEncryption] - sign: ${t}`);return c.Debugger.error(o),(0,s.sendExceptionLog)({error:o}),(0,i.signRSA)(e,r)})(t)}};t.verify=async(e,r,n,a=t.DefaultAsymmetricOptions)=>{const d=(0,o.getWebCryptoSubtle)();if(!d)return(0,i.verifyRsa)(e,r,n);try{const t=await d.importKey("spki",e,l(a.hashAlgorithm),!1,["verify"]);return await d.verify(l(a.hashAlgorithm),t,r,n)}catch(t){return(t=>{const o=new Error(`[AsymmetricEncryption] - verify: ${t}`);return c.Debugger.error(o),(0,s.sendExceptionLog)({error:o}),(0,i.verifyRsa)(e,r,n)})(t)}}},14340:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RSASA_PKCS1=t.RSA_OAEP=void 0,t.RSA_OAEP="RSA-OAEP",t.RSASA_PKCS1="RSASSA-PKCS1-v1_5"},26046:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKeyWithArgon2d=void 0;const o=r(28354),n=r(11814),a=r(31891),i=r(59125),s=r(62550),c=r(72093),d=r(47729),l=r(8248),u=new Map,p=e=>[...u.values()].forEach((t=>t(e))),S=async(e,t,r,n)=>{const a=(0,d.getWorkerPath)("Argon2Asm"),i=(0,d.getWorkerPath)("Argon2Wasm"),s=(0,d.getWorkerPath)("Argon2JsWrapperForWasm"),c=(0,o.v4)();return e.onmessage!==p&&(e.onmessage=p),new Promise(((o,d)=>{((e,t)=>{u.set(e,t)})(c,(e=>{e.data.jobId===c&&(e.data.error&&d(e.data.error),o(e.data.data),(e=>{u.delete(e)})(c))})),e.postMessage({argon2JsWrapperForWasmPath:s,asmPath:a,configuration:n,key:t,salt:r,wasmPath:i,jobId:c})}))};function g(e,t){return new Promise((function(r,o){if(n.env.isWorkerEnvironment())try{importScripts(e),r(void 0)}catch(e){o(`Error loading ${t} script: ${e}`)}else{const n=document.createElement("script");n.src=e,n.onload=function(){r(void 0)},n.onerror=function(e){o(`Error loading ${t}: ${e}`)},document.body.appendChild(n)}}))}t.deriveKeyWithArgon2d=async(e,t,r)=>{try{if(null===e||null===t||null===r)throw new Error("deriveKeyWithArgon2d parameters are null");const o=(0,c.getPlugins)().argon2Plugin,a=(0,d.getWasmPort)();if(o)return(async(e,t,r,o)=>e.deriveKey(o.t_cost,o.m_cost,o.parallelism,new Uint8Array(t),new Uint8Array(r),32).buffer)(o,e,t,r);if(!n.env.isBrowserEnvironment()&&!n.env.isWorkerEnvironment())throw new Error("Environment is not supported");return a?S(a,e,t,r):(async(e,t,r)=>{self.loadArgon2WasmModule=async()=>{await g((0,d.getWorkerPath)("Argon2JsWrapperForWasm"),"argon2 WASM module")},self.loadArgon2WasmBinary=async()=>{const e=await(0,s.get)((0,d.getWorkerPath)("Argon2Wasm"),{responseType:"arraybuffer"});return new Uint8Array(e.data)},self.loadArgon2FallbackJsModule=async()=>{await g((0,d.getWorkerPath)("Argon2Asm"),"argon2 fallback JS module")};const o={argon2d:l.ArgonType.Argon2d,argon2i:l.ArgonType.Argon2i},{hash:n}=await l.hash({pass:new Uint8Array(e),salt:new Uint8Array(t),time:r.t_cost,mem:r.m_cost,hashLen:32,parallelism:r.parallelism,type:o[r.method]});return n})(e,t,r)}catch(e){const t=new Error(`[Derivation] - deriveKeyWithArgon2d: ${e}`);throw a.Debugger.error(t),(0,i.sendExceptionLog)({error:t}),e}}},16953:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKeyWithArgon2d=t.deriveKeyWithPBKDF2=void 0;var o=r(59615);Object.defineProperty(t,"deriveKeyWithPBKDF2",{enumerable:!0,get:function(){return o.deriveKeyWithPBKDF2}});var n=r(26046);Object.defineProperty(t,"deriveKeyWithArgon2d",{enumerable:!0,get:function(){return n.deriveKeyWithArgon2d}})},59615:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKeyWithPBKDF2=void 0;const o=r(4633),n=r(85943),a=r(20120),i=r(31891),s=r(72093),c={sha1:"SHA-1",sha256:"SHA-256"};t.deriveKeyWithPBKDF2=async(e,t,r)=>{if(null===e||null===t||null===r)throw new Error("deriveKeyWithPBKDF2 parameters are null");const d=(0,s.getPlugins)().pbkdf2Plugin;if(d)return new Promise((o=>{o(d.deriveKey(new Uint8Array(e),new Uint8Array(t),r.iterations,r.hashMethod?c[r.hashMethod]:"SHA-256",32).buffer)}));const l=(0,o.getWebCryptoSubtle)();if(!l)return(0,n.deriveKeyPolyfill)(e,t,r);try{const o=await l.importKey("raw",e,"PBKDF2",!1,["deriveKey"]);return await l.deriveKey({name:"PBKDF2",salt:t,iterations:r.iterations,hash:{name:r.hashMethod?c[r.hashMethod]:"SHA-256"}},o,{name:a.AES_CBC,length:256},!0,["encrypt","decrypt"]).then((e=>l.exportKey("raw",e)))}catch(o){return(o=>{const a=new Error(`[Derivation] - deriveKeyWithPBKDF2: ${o}`);return i.Debugger.error(a),(0,n.deriveKeyPolyfill)(e,t,r)})(o)}}},87459:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hashAndSplitKey=t.computeHashMD5=t.computeHashSha512=t.computeHashSha256=t.computeHashSha1=t.computeWebCryptoHash=t.webCryptoHashAlgorithms=void 0;const o=r(38989),n=r(4633),a=r(24555),i=r(11814),s=r(85943),c=r(59125);t.webCryptoHashAlgorithms={"sha-1":{digestName:"SHA-1",polyfill:e=>(0,s.computeHashSha1)(e)},"sha-256":{digestName:"SHA-256",polyfill:e=>(0,s.computeHashSha256)(e)},"sha-512":{digestName:"SHA-512",polyfill:e=>(0,s.computeHashSha512)(e)}};t.computeWebCryptoHash=(e,r)=>{const o=(0,n.getWebCryptoSubtle)();if(!o||i.browser.isEdge())return t.webCryptoHashAlgorithms[e].polyfill(r);const a=o=>{const n=new Error(`Error in computeWebCryptoHash: ${o}`);return(0,c.sendExceptionLog)({error:n}),t.webCryptoHashAlgorithms[e].polyfill(r)};try{return o.digest({name:t.webCryptoHashAlgorithms[e].digestName},r).catch((e=>a(e)))}catch(e){return a(e)}};t.computeHashSha1=e=>(0,t.computeWebCryptoHash)("sha-1",e);t.computeHashSha256=e=>(0,t.computeWebCryptoHash)("sha-256",e);t.computeHashSha512=e=>(0,t.computeWebCryptoHash)("sha-512",e);t.computeHashMD5=e=>{const t=o.create();return t.update(e),t.digest().toHex()};t.hashAndSplitKey=e=>Promise.resolve().then((()=>(0,s.computeHashSha512)(e))).then((e=>{const t=e.byteLength,r=(0,a.getSubDataByteArray)(new Uint8Array(e),0,t/2),o=(0,a.getSubDataByteArray)(new Uint8Array(e),t/2,t);return{aes:r.buffer,hmac:o.buffer}}))},41751:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.verifyHashHmacSHA256=t.signHashHmacSHA256=t.decryptAES256=t.encryptAES256=t.generateAESKey=t.generate64BytesKey=void 0;const o=r(24555),n=r(4633),a=r(85943),i=r(31891),s=r(59125),c=r(20120);t.generate64BytesKey=async()=>{const e=await(0,t.generateAESKey)(),r=await(0,t.generateAESKey)();return(0,o.concatBuffers)(e,r)};t.generateAESKey=async()=>{const e=(0,n.getWebCryptoSubtle)();if(!e)return(0,a.generateAESKey)();try{const t=await e.generateKey({name:c.AES_CBC,length:256},!0,["encrypt","decrypt"]);return await e.exportKey("raw",t)}catch(e){return(e=>{const t=new Error(`[SymmetricEncryption] - generateAESKey: ${e}`);return i.Debugger.error(t),(0,s.sendExceptionLog)({error:t}),(0,a.generateAESKey)()})(e)}};t.encryptAES256=async(e,t,r)=>{const o=(0,n.getWebCryptoSubtle)();if(!o)return(0,a.encryptAES256)(e,t,r);try{const n=await d(e);return await o.encrypt({name:c.AES_CBC,iv:t},n,r)}catch(o){return(o=>{const n=new Error(`[SymmetricEncryption] - encryptAES256: ${o}`);return i.Debugger.error(n),(0,s.sendExceptionLog)({error:n}),(0,a.encryptAES256)(e,t,r)})(o)}};t.decryptAES256=async(e,t,r)=>{const o=(0,n.getWebCryptoSubtle)();if(!o)return(0,a.decryptAES256)(e,t,r);try{const n=await d(e);return await o.decrypt({name:c.AES_CBC,iv:t},n,r)}catch(o){return(o=>{const n=new Error(`[SymmetricEncryption] - decryptAES256: ${o}`);return i.Debugger.error(n),(0,s.sendExceptionLog)({error:n}),(0,a.decryptAES256)(e,t,r)})(o)}};const d=e=>(0,n.getWebCryptoSubtle)().importKey("raw",e,c.AES_CBC,!1,["encrypt","decrypt"]),l=(e,t)=>e.importKey("raw",t,c.KEY_HMAC_SHA256,!0,["sign","verify"]);t.signHashHmacSHA256=async(e,t)=>{const r=(0,n.getWebCryptoSubtle)();if(!r)return(0,a.signHashHmacSHA256)(e,t);try{const o=await l(r,e);return await r.sign(c.KEY_HMAC_SHA256,o,t)}catch(r){return(r=>{const o=new Error(`[SymmetricEncryption] - signHashHmacSHA256: ${r}`);return i.Debugger.error(o),(0,s.sendExceptionLog)({error:o}),(0,a.signHashHmacSHA256)(e,t)})(r)}};t.verifyHashHmacSHA256=async(e,t,r)=>{const o=(0,n.getWebCryptoSubtle)();if(!o)return(0,a.verifyHashHmacSHA256)(e,r);try{const n=await l(o,e);return await o.verify(c.KEY_HMAC_SHA256,n,t,r)}catch(t){return(t=>{const o=new Error(`[SymmetricEncryption] - verifyHashHmacSHA256: ${t}`);return i.Debugger.error(o),(0,s.sendExceptionLog)({error:o}),(0,a.verifyHashHmacSHA256)(e,r)})(t)}}},20120:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_HMAC_SHA256=t.SHA_256=t.HMAC=t.AES_KEY_SIZE=t.AES_CBC=void 0,t.AES_CBC="AES-CBC",t.AES_KEY_SIZE=32,t.HMAC="HMAC",t.SHA_256="SHA-256",t.KEY_HMAC_SHA256={name:t.HMAC,hash:{name:t.SHA_256}}},85943:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.verifyRsa=t.signRSA=t.decryptRSA=t.encryptRSA=t.generateRsaKeyPair=t.deriveKeyPolyfill=t.verifyHashHmacSHA256=t.signHashHmacSHA256=t.decryptAES256=t.encryptAES256=t.generateAESKey=t.computeHashSha512=t.computeHashSha256=t.computeHashSha1=t.generateRandomValues=void 0;const o=r(47729),n=r(24555),a=r(31891),i=r(14340),s=r(20120),c=r(48270),d=r(95889),l=r(29179),u=r(48151),p=r(24193),S=r(15740),g=r(33803);t.generateRandomValues=function(e){const t=d.getBytesSync(e);return(0,n.str2ab)(t)};t.computeHashSha1=e=>new Promise(((t,r)=>{try{const r=(0,n.base64BufferToRaw)(e),o=p.sha1.create();return o.update(r),t((0,n.str2ab)(o.digest().data))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [computeHashSha1]",e),r(e)}}));t.computeHashSha256=e=>new Promise(((t,r)=>{try{const r=(0,n.base64BufferToRaw)(e),o=p.sha256.create();return o.update(r),t((0,n.str2ab)(o.digest().data))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [computeHashSha256]",e),r(e)}}));t.computeHashSha512=e=>new Promise(((t,r)=>{try{const r=(0,n.base64BufferToRaw)(e),o=p.sha512.create();return o.update(r),t((0,n.str2ab)(o.digest().data))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [computeHashSha512]",e),r(e)}}));t.generateAESKey=()=>new Promise(((e,t)=>{try{d.getBytes(s.AES_KEY_SIZE,(function(r,o){return r?t(r):e((0,n.str2ab)(o))}))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [generateAESKey]",e),t(e)}}));t.encryptAES256=(e,t,r)=>new Promise(((o,i)=>{try{const a=new u.ByteBuffer(e),i=new u.ByteBuffer(t),c=new u.ByteBuffer(r),d=l.createCipher(s.AES_CBC,a);d.start({iv:i}),d.update(c),d.finish();const p=d.output.data;return o((0,n.str2ab)(p))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [encryptAES256]",e),i(e)}}));t.decryptAES256=(e,t,r)=>new Promise(((o,i)=>{try{const a=new u.ByteBuffer(e),i=new u.ByteBuffer(t),c=new u.ByteBuffer(r),d=l.createDecipher(s.AES_CBC,a);d.start({iv:i}),d.update(c),d.finish();const p=d.output.data;return o((0,n.str2ab)(p))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [decryptAES256]",e),i(e)}}));t.signHashHmacSHA256=(e,t)=>new Promise(((r,o)=>{try{const o=(0,n.base64BufferToRaw)(t),a=(0,n.base64BufferToRaw)(e),i=S.create();return i.start("sha256",a),i.update(o),r((0,n.str2ab)(i.digest().data))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [signHashHmacSHA256]",e),o(e)}}));t.verifyHashHmacSHA256=(e,r)=>{try{return(0,t.signHashHmacSHA256)(e,r).then((e=>e==e))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [verifyHashHmacSHA256]",e),Promise.reject(e)}};t.deriveKeyPolyfill=(e,t,r)=>new Promise(((i,s)=>{try{const a=(0,o.getWorkerPath)("pbkdf2PolyfillWorker");if(void 0===a){const o=(0,n.arrayBufferToBuffer)(e),a=(0,n.arrayBufferToBuffer)(t);return void g.pbkdf2(o,a,r.iterations,32,r.hashMethod,((e,t)=>{e?s(e):i(t.buffer)}))}(0,o.getWorker)(a).then((n=>{n.onmessage=function(e){i(e.data),(0,o.freeWorker)(n)},n.onerror=function(e){s(new Error(`[WebCryptoPolyfill] - deriveKeyPolyfill: ${e.message}`)),(0,o.freeWorker)(n)},n.postMessage([e,t,r.iterations,32,r.hashMethod])}))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [deriveKeyFrom]",e),void s(e)}}));t.generateRsaKeyPair=()=>new Promise(((e,t)=>{try{const r=(0,o.getWorkerPath)("WebCryptoPolyfill");c.rsa.generateKeyPair({bits:2048,workers:-1,workerScript:r},(function(r,o){if(r)return t(r);const a={public:(0,n.CrlfToLF)(c.publicKeyToRSAPublicKeyPem(o.publicKey)),private:(0,n.CrlfToLF)(c.privateKeyToPem(o.privateKey))};return e(a)}))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [generateRsaKeyPair]",e),t(e)}}));t.encryptRSA=(e,t)=>new Promise(((r,o)=>{try{const o=(0,n.spkitoPem)(e),a=c.publicKeyFromPem(o),s=(0,n.base64BufferToRaw)(t),d=a.encrypt(s,i.RSA_OAEP,{md:p.sha256.create()});return r((0,n.str2ab)(d))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [encryptRSA]",e),o(e)}}));t.decryptRSA=(e,t)=>new Promise(((r,o)=>{try{const o=(0,n.pkcs8toPem)(e),a=c.privateKeyFromPem(o),s=(0,n.base64BufferToRaw)(t),d=a.decrypt(s,i.RSA_OAEP,{md:p.sha256.create()});return r((0,n.str2ab)(d))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [decryptRSA]",e),o(e)}}));t.signRSA=(e,t)=>new Promise(((r,o)=>{try{const o=(0,n.pkcs8toPem)(e),a=c.privateKeyFromPem(o),i=(0,n.base64BufferToRaw)(t),s=p.sha256.create();s.update(i);const d=a.sign(s);return r((0,n.str2ab)(d))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [signRSA]",e),o(e)}}));t.verifyRsa=(e,t,r)=>new Promise(((o,i)=>{try{const a=(0,n.spkitoPem)(e),i=c.publicKeyFromPem(a),s=(0,n.base64BufferToRaw)(r),d=(0,n.base64BufferToRaw)(t),l=p.sha256.create();l.update(s);return o(i.verify(l.digest().bytes(),d))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [verifyRsa]",e),i(e)}}))},96045:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeAsymmetricEncryption=t.makeSymmetricEncryption=t.makeCryptoService=void 0;const o=r(93347),n=r(53494),a=r(97211),i=r(89422),s=r(41751),c=r(73492),d=r(30507),l=r(24555),u=r(3424),p=r(87459),S=r(52858);t.makeCryptoService=()=>({symmetricEncryption:(0,t.makeSymmetricEncryption)(),asymmetricEncryption:(0,t.makeAsymmetricEncryption)()});async function g(e,t){const r=(0,l.base64ToBuffer)(t),o=(0,l.base64ToBuffer)(e),n=await(0,p.hashAndSplitKey)(o),a=(0,c.parseDashlaneKw5SecureData)(new Uint8Array(r)),i=(0,l.concatBuffers)(a.iv,a.secured),d=await(0,s.signHashHmacSHA256)(n.hmac,i);if((0,l.bufferToBase64)(d)!==(0,l.bufferToBase64)(a.hash))throw new Error("Sharing - Data has been tampered with");return(0,s.decryptAES256)(n.aes,a.iv,a.secured)}t.makeSymmetricEncryption=()=>({generateNewAESKey:()=>(0,s.generateAESKey)().then(l.bufferToBase64),encryptAES256:async(e,t)=>{const r=(0,l.base64ToBuffer)(t),o=(0,l.base64ToBuffer)(e),n=await(0,p.hashAndSplitKey)(o),a=(0,c.generateIV)();return(0,s.encryptAES256)(n.aes,a,r).then((async e=>{const t=(0,l.concatBuffers)(a,e),o=await(0,s.signHashHmacSHA256)(n.hmac,t),i=(0,c.makeKWC5DashlaneSecureData)(r,e,a,o),d=(0,c.convertKw5ToTransportableData)(i);return(0,l.bufferToBase64)(d)}))},encryptSharingItem:async(e,r)=>{const n=(0,t.makeSymmetricEncryption)(),a=(0,i.getDashlaneXml)(r),s=(0,l.utf8ToBase64)(a),c=(0,l.base64ToBuffer)(s),d=o.deflate(new Uint8Array(c)).buffer,u=(0,l.addQtCompressHeader)(d),p=(0,l.bufferToBase64)(u);return n.encryptAES256(e,p)},decryptAES256:async(e,t)=>{const r=await g(e,t);let o="";try{o=(0,l.base64BufferToUtf8)(r)}catch{o=(0,l.bufferToBase64)(r)}return o},decryptSharingItem:async(e,t)=>{const r=await g(e,t);try{const e=new Uint8Array(r),t=(0,l.uint8ArrayToText)(e);return JSON.parse(t)}catch{const e=(0,n.deflatedUtf8ToUtf16)(r),{__type__:t,...o}=await(0,i.parseDashlaneXml)(e),s={...o,kwType:o.kwType||t};return(0,a.isCredential)(s)?(0,S.fixCredentialTypesFromTransaction)(s):(0,a.isNote)(s)?(0,S.fixNoteTypesFromTransaction)(s):s}},signHmacSHA256:(e,t)=>{const r=(0,l.base64ToBuffer)(t),o=(0,l.base64ToBuffer)(e);return(0,s.signHashHmacSHA256)(o,r).then((e=>(0,l.bufferToBase64)(e)))},verifyHmacSHA256:(e,t,r)=>{const o=(0,l.base64ToBuffer)(r),n=(0,l.base64ToBuffer)(e),a=(0,l.base64ToBuffer)(t);return(0,s.verifyHashHmacSHA256)(n,a,o)}});t.makeAsymmetricEncryption=(e=d.DefaultAsymmetricOptions)=>({generateRsaKeyPair:()=>(0,d.generateRsaOaepKeyPair)(e),encrypt:(t,r)=>{const o=(0,l.base64ToBuffer)(r),n=(0,l.pemToSpki)(t);return(0,d.encrypt)(n,o,e).then(l.bufferToBase64)},decrypt:(t,r)=>{const o=(0,l.base64ToBuffer)(r),n=(0,l.pemTopkcs8)(t);return(0,d.decrypt)(n,o,e).then(l.bufferToBase64)},sign:(t,r)=>{const o=(0,l.pemTopkcs8)(t),n=(0,l.base64ToBuffer)(r);return(0,d.sign)(o,n,e).then(l.bufferToBase64)},verify:(t,r,o)=>{const n=(0,l.pemToSpki)(t),a=(0,l.base64ToBuffer)(o),i=(0,l.base64ToBuffer)(r);return(0,d.verify)(n,i,a,e)},verifyJwk:(t,r,o)=>{const n=(0,u.jwkToSpki)(t),a=(0,l.base64ToBuffer)(r),i=(0,l.base64ToBuffer)(o);return(0,d.verify)(n,a,i,e)}})},65866:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeKeyBasedCrypto=t.makeKeyDataEncryptorService=t.DATA_TAMPERED_ERROR=void 0;const o=r(31891),n=r(59125),a=r(24555),i=r(87459),s=r(73492),c=r(41751);t.DATA_TAMPERED_ERROR="KeyBasedCrypto - Data has been tampered with",t.makeKeyDataEncryptorService=function(){let e=null;return{setInstance:r=>{e=(0,t.makeKeyBasedCrypto)(r)},getInstance:()=>{if(!e)throw new Error("makeKeyDataEncryptorService: you must call setInstance(password,serverKey) before getting the instance");return e},close:()=>{e=null},hasBeenSet:()=>Boolean(e)}};t.makeKeyBasedCrypto=e=>{const r=function(e){return e.raw&&(0,a.isBase64Encoded)(e.raw)?(0,a.base64ToBuffer)(e.raw):e.raw?(0,a.str2ab)(e.raw):e.buffer}(e);return{isKey:()=>{throw new Error("makeKeyBasedCrypto:isKey not implemented")},encrypt:e=>Promise.resolve().then((()=>(0,i.hashAndSplitKey)(r).then((t=>{const r=(0,s.generateIV)();return(0,c.encryptAES256)(t.aes,r,e).then((o=>{const n=(0,a.concatBuffers)(r,o);return(0,c.signHashHmacSHA256)(t.hmac,n).then((t=>{const n=(0,s.makeKWC5DashlaneSecureData)(e,o,r,t),i=(0,s.convertKw5ToTransportableData)(n);return(0,a.bufferToBase64)(i)}))}))})))).catch((e=>(function(e,t){const r=new Error(`${e}: ${t}`);throw(0,n.sendExceptionLog)({error:r}),o.Debugger.log(r),r}("[makeKeyBasedCrypto] - Error while encrypting data.",e),null))),decrypt:e=>Promise.resolve().then((()=>{const o=(0,a.base64ToBuffer)(e);return(0,i.hashAndSplitKey)(r).then((e=>{const r=(0,s.parseDashlaneKw5SecureData)(new Uint8Array(o)),n=(0,a.concatBuffers)(r.iv,r.secured);return(0,c.signHashHmacSHA256)(e.hmac,n).then((o=>{if((0,a.bufferToBase64)(o)!==(0,a.bufferToBase64)(r.hash))throw new Error(t.DATA_TAMPERED_ERROR);return(0,c.decryptAES256)(e.aes,r.iv,r.secured)}))}))})),prepareCrypto:()=>Promise.resolve(),readCryptoPayload:e=>{const t=(0,a.base64ToBuffer)(e);return(0,s.parseDashlaneKw5SecureData)(new Uint8Array(t)).version}}}},10423:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CRYPTO_NODERIVATION_HMAC64=void 0,t.CRYPTO_NODERIVATION_HMAC64="$1$noderivation$aes256$cbchmac64$16$"},53494:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.prepareCrypto=t.deflatedUtf8ToUtf16=t.utf16ToDeflatedUtf8=t.inflateUtf16=t.deflateUtf16=t.cipherDashlaneSecureData=t.decipherDashlaneSecureData=t.makeCryptoCenterService=t.PBKDF2_DEFAULT_PAYLOAD=t.ARGON2_DEFAULT_PAYLOAD=void 0;const o=r(93347),n=r(62802),a=r(24555),i=r(3424),s=r(53528);Object.defineProperty(t,"ARGON2_DEFAULT_PAYLOAD",{enumerable:!0,get:function(){return s.ARGON2_DEFAULT_PAYLOAD}}),Object.defineProperty(t,"PBKDF2_DEFAULT_PAYLOAD",{enumerable:!0,get:function(){return s.PBKDF2_DEFAULT_PAYLOAD}});const c=r(41751),d=r(87459),l=r(77176),u=r(943),p=r(40232),S=r(31891),g=r(75897),m=r(77333),y=r(24555);function v(e,t,r){const o=t+r;return(0,s.isCryptoConfigKWC3)(e.derivation)?(0,a.str2ab)(o):(0,a.utf8ToBase64Buffer)(o)}t.makeCryptoCenterService=function(e,r,o,n){const i=(0,p.makeGetDerivateKeyWithCacheAndQueue)(),c=e.raw,d=(0,a.str2ab)(r+c);return{isKey:(e,t)=>e+t===r+c,decrypt:(e,o={})=>(0,t.decipherDashlaneSecureData)(e,c,r,i,o),encrypt:(e,a={})=>{const{cryptoConfig:s}=a,d=s||n,l={...a,cryptoConfig:d};return(0,t.cipherDashlaneSecureData)(c,r,e,o,i,l)},prepareCrypto:()=>T(o,d,i,n),readCryptoPayload:e=>(0,s.readCryptoPayload)(e)}};t.decipherDashlaneSecureData=async(e,t,r,o,n={})=>{const{forceKeyKWC5:i,forceSalt:d}=n,l=(0,a.base64ToBuffer)(e),u=(0,s.parseCipheredData)(new Uint8Array(l)),p=u.cryptoConfig;let S,g;if(((0,s.isDashlaneSecureDataFlexible)(u)||(0,s.isDashlaneSecureDataKWC3)(u))&&(S=d||u.salt),(0,s.isDashlaneSecureDataKWC5)(u)&&i)g=i;else if((0,s.isNoDerivation)(p.derivation))g=(0,a.str2ab)(t);else{const e=v(p,r,t);g=await o(e,S,p.derivation)}const m=await async function(e,t,r){return"evpByteToKey"===e.cryptoConfig.ciphering.options.ivGeneration.method?A(e.cryptoConfig,t,r):(0,s.isDashlaneSecureDataFlexible)(e)||(0,s.isDashlaneSecureDataKWC5)(e)?e.iv:void 0}(u,S,g),{signatureKey:y,cipheringKey:h}=await E(u.cryptoConfig,g);return await f(u,y,m),await(0,c.decryptAES256)(h,m,u.cipheredContent)};const A=async(e,t,r)=>{const o={derivedKey:r,salt:t,keyLength:32,ivLength:e.ciphering.options.ivLength};return(0,i.evpBytesToKey)(o)},E=async(e,t)=>{if("skip"===e.signature.method)return{signatureKey:new ArrayBuffer(0),cipheringKey:t};const r="hmac64"===e.signature.method?t:await(0,d.computeHashSha512)(t);if(64!==r.byteLength)throw new Error(`[cryptoCenter][prepareKeys] - cryptoKey's length must be 64B but is ${r.byteLength}B`);return{cipheringKey:(0,a.getSubDataByteArray)(new Uint8Array(r),0,r.byteLength/2).buffer,signatureKey:(0,a.getSubDataByteArray)(new Uint8Array(r),r.byteLength/2,r.byteLength).buffer}},f=(e,t,r)=>{if("skip"===e.cryptoConfig.signature.method)return Promise.resolve();const o=(0,a.concatBuffers)(r,e.cipheredContent),n=e;return(0,c.signHashHmacSHA256)(t,o).then((e=>{if((0,a.bufferToBase64)(e)!==(0,a.bufferToBase64)(n.hash))throw new Error("[decipherFlexibleMarker] Data are corrupted: HMAC signature cannot be verified")}))};t.cipherDashlaneSecureData=async(e,t,r,o,n,i={})=>{const{cryptoConfig:d,forceSalt:u,forceIv:p}=i,S=d||(0,s.getCryptoConfig)(o);let g,m;if((0,s.isNoDerivation)(S.derivation))g=(0,a.str2ab)(e);else{m=u||I(o,S.derivation);const r=v(S,t,e);g=await n(r,m,S.derivation)}const y=p||await async function(e,t,r){if("evpByteToKey"===e.ciphering.options.ivGeneration.method)return A(e,t,r);return(0,l.getRandomValues)(e.ciphering.options.ivLength)}(S,m,g),{signatureKey:f,cipheringKey:T}=await E(S,g),C=await(0,c.encryptAES256)(T,y,r),P=await h(C,S,f,y);return _(m,y,P,C,S)};t.deflateUtf16=e=>o.deflate(e,{level:7});t.inflateUtf16=e=>{const t=new Uint8Array(e);return o.inflate(t,{to:"string"})};t.utf16ToDeflatedUtf8=(e,t={})=>{const{skipDeflate:r,skipUtf8Encoding:o}=t,n=o?e:(0,y.utf8ChunkEncode)(e),i=(0,a.str2ab)(n);return r?i:(0,a.addQtCompressHeader)((0,a.deflateBuffer)(i))};t.deflatedUtf8ToUtf16=(e,t={})=>{const{skipUtf8Decoding:r,skipInflate:i,unescapeXml:s}=t,c=new Uint8Array(e),d=i?c:(e=>{const t=(0,a.removeQtCompressionHeader)(e),r=Math.pow(2,14)-1,i=new o.Inflate({chunkSize:r});if(i.push(t,n.Z_FINISH),i.err)throw new Error(`[Crypto] - postTreatData: unable to uncompress data - ${i.msg} (code ${i.err})`);return i.result})(c);let l=(0,a.uint8ArrayToText)(d);if(s&&(l=decodeURI(l)),!r)try{l=(0,y.utf8ChunkDecode)(l)}catch(e){S.Debugger.log("Cannot utf8.decode "+e)}return l};const h=(e,t,r,o)=>{if("skip"===t.signature.method)return Promise.resolve().then((()=>new ArrayBuffer(0)));const n=(0,a.concatBuffers)(o,e);return(0,c.signHashHmacSHA256)(r,n)},_=(e,t,r,o,n)=>{if((0,s.isCryptoConfigKWC3)(n.derivation)){const t=(0,u.convertDashlaneSecureDataKWC3ToTransportableData)({encryptedData:o,salt:e,version:"KWC3"});return(0,a.bufferToBase64)(t)}const i=(0,s.makeDashlaneSecureDataFlexible)(e,t,r,o,n),c=(0,s.convertDashlaneSecureDataFlexibleToTransportableData)(i);return(0,a.bufferToBase64)(c)};async function T(e,t,r,o){const n=null!=o?o:(0,s.getCryptoConfig)(e),a=n.derivation;if("noderivation"===a.method)return;const i=I(e,n.derivation);await r(t,i,a)}function I(e,t){return(0,s.isCryptoConfigKWC3)(t)?function(e){if(e.getUserSession().cryptoKwc3FixedSalt)return(0,a.base64ToBuffer)(e.getUserSession().cryptoKwc3FixedSalt);const t=(0,l.getRandomValues)(32),r=(0,a.bufferToBase64)(t);return e.dispatch((0,g.updateCryptoKwc3FixedSalt)(r)),t}(e):function(e){if(e.getPersonalSettings().CryptoFixedSalt)return(0,a.base64ToBuffer)(e.getPersonalSettings().CryptoFixedSalt);const t=(0,l.getRandomValues)(16),r={CryptoFixedSalt:(0,a.bufferToBase64)(t)};return e.dispatch((0,m.editPersonalSettings)(r)),t}(e)}t.prepareCrypto=T},73492:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeKWC5DashlaneSecureData=t.generateIV=t.parseDashlaneKw5SecureData=t.convertKw5ToTransportableData=void 0;const o=r(77176),n=r(24555);t.convertKw5ToTransportableData=e=>{let t=new ArrayBuffer(32);if("KWC5"!==e.version)throw new Error("Version must be KWC5");if(null===e.hash)throw new Error("hmacSha2 from DashlaneSecureData is null");if(null===e.iv)throw new Error("iv from DashlaneSecureData is null");e.iv&&(t=(0,n.concatBuffers)(e.iv,(0,o.getRandomValues)(16)));const r=(0,n.utf8ToBase64Buffer)(e.version);return(0,n.concatBuffers)(t,r,e.hash,e.secured)};t.parseDashlaneKw5SecureData=e=>{if(e.byteLength<36)throw new Error(`Data length should be at least 36 long but was ${e.byteLength}`);let t=0;const r=(0,n.getSubDataByteArray)(e,t,16).buffer;t+=32;const o=(0,n.getSubDataByteArray)(e,t,t+4),a=(0,n.uint8ArrayToText)(o);if("KWC5"!==a)throw new Error("Version must be KWC5");t+=4;const i=(0,n.getSubDataByteArray)(e,t,t+32).buffer;t+=32;return{iv:r,version:a,hash:i,secured:(0,n.getSubDataByteArray)(e,t,e.byteLength).buffer}};t.generateIV=()=>(0,o.getRandomValues)(16);t.makeKWC5DashlaneSecureData=(e,t,r,o)=>({version:"KWC5",clearData:e,secured:t,iv:r,hash:o})},53528:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PBKDF2_DEFAULT_PAYLOAD=t.ARGON2_DEFAULT_PAYLOAD=t.KWC3_DEFAULT_PAYLOAD=t.getUserCryptoPayload=t.getCryptoUserPayload=t.getCryptoConfig=t.makeFlexibleMarkerCryptoConfig=t.makeFlexibleMarkerPbkdf2Config=t.makeFlexibleMarkerArgon2dConfig=t.makeKWC3CryptoConfig=t.convertDashlaneSecureDataFlexibleToTransportableData=t.makeFlexibleMarkerPayloadBuffer=t.makeFlexibleMarkerPayloadString=t.makeDashlaneSecureDataFlexible=t.makeFlexibleCryptoConfig=t.readCryptoPayload=t.parseCipheredData=t.getFlexibleSecureData=t.getLegacySecureData=t.getLegacyMarker=t.getLegacyCryptoConfig=t.parsePayload=t.getSignatureConfig=t.getCipheringConfiguration=t.getDerivationConfiguration=t.getPbkdf2DerivationConfig=t.getArgon2DerivationConfig=t.extractNextPayloadComponent=t.isDashlaneSecureDataFlexible=t.isDashlaneSecureDataKWC5=t.isDashlaneSecureDataKWC3=t.DashlaneCipherVersion=t.isSupportedAESMode=t.isSupportedDerivationMethod=t.isCryptoConfigKWC3=t.isNoDerivation=t.isArgon2Derivation=t.isPbkdf2Derivation=void 0;const o=r(28060),n=r(23464),a=r(24555),i=r(24555),s=r(28060);function c(e){return"pbkdf2"===e.method}function d(e){return"noderivation"===e.method||"skip"===e.method}function l(e){return Boolean(["argon2d","pbkdf2","noderivation","skip"].find((t=>t===e)))}function u(e){return Boolean(["cbchmac","cbchmac64","cbc","gcm"].find((t=>t===e)))}t.isPbkdf2Derivation=c,t.isArgon2Derivation=function(e){return"argon2d"===e.method},t.isNoDerivation=d,t.isCryptoConfigKWC3=function(e){return c(e)&&10204===e.iterations&&"sha1"===e.hashMethod},t.isSupportedDerivationMethod=l,t.isSupportedAESMode=u,t.DashlaneCipherVersion=(0,n.Enum)("KWC3","KWC5");t.isDashlaneSecureDataKWC3=e=>e.marker===t.DashlaneCipherVersion.KWC3;t.isDashlaneSecureDataKWC5=e=>e.marker===t.DashlaneCipherVersion.KWC5;t.isDashlaneSecureDataFlexible=e=>void 0!==e.iv;t.extractNextPayloadComponent=e=>{if(null===e)return"";let t=e;t.startsWith("$")&&(t=t.substring(1,e.length));return t.substring(0,t.indexOf("$"))};t.getArgon2DerivationConfig=e=>{let r=0;const o={};if(o.saltLength=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.saltLength.toString().length+1,o.t_cost=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.t_cost.toString().length+1,o.m_cost=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.m_cost.toString().length+1,o.parallelism=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.parallelism.toString().length+1,isNaN(o.saltLength)||0===o.saltLength||isNaN(o.t_cost)||0===o.t_cost||isNaN(o.m_cost)||0===o.m_cost||isNaN(o.parallelism)||0===o.parallelism)throw new Error("Wrong parameters in payload");return o};t.getPbkdf2DerivationConfig=e=>{let r=0;const o={};if(o.saltLength=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.saltLength.toString().length+1,o.iterations=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.iterations.toString().length+1,o.hashMethod=String((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.hashMethod.length+1,isNaN(o.saltLength)||isNaN(o.iterations))throw new Error("Wrong parameters in payload");return o};t.getDerivationConfiguration=e=>{let r=0,o={};const n=String((0,t.extractNextPayloadComponent)(e.substring(r,e.length)));if(!l(n))throw new Error("Derivation method not supported");if(o.method=n,"noderivation"===n||"skip"===n)return o;if(r+=o.method.length+1,"argon2d"===o.method){const n=(0,t.getArgon2DerivationConfig)(e.substring(r,e.length));o={...o,...n}}if("pbkdf2"===o.method){const n=(0,t.getPbkdf2DerivationConfig)(e.substring(r,e.length));o={...o,...n}}return o};t.getCipheringConfiguration=e=>{const r={options:{}};let o=0;if(r.method=String((0,t.extractNextPayloadComponent)(e.substring(o,e.length))),o+=r.method.length+1,"aes256"!==r.method)throw new Error(`[getCipheringConfiguration]: Wrong ciphering method expected "aes256" but get ${r.method}`);{const n=String((0,t.extractNextPayloadComponent)(e.substring(o,e.length)));if(!u(n))throw new Error("[getCipheringConfiguration]: unsupported AES mode");if(r.options.mode=n,o+=r.options.mode.length+1,r.options.ivLength=Number((0,t.extractNextPayloadComponent)(e.substring(o,e.length))),isNaN(r.options.ivLength)||0===r.options.ivLength)throw new Error("[getCipheringConfiguration]: Wrong parameters in payload")}return r};t.getSignatureConfig=e=>{const t={method:"skip"};return"cbchmac"===e&&(t.method="hmac"),"cbchmac64"===e&&(t.method="hmac64"),t};t.parsePayload=e=>{if(null===e)throw new Error("parsePayload: No payload to parse");if(e.startsWith("$")){let r=0;const o=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length)));if(1!==o)throw new Error(`parsePayload: version should be 1 but is ${o}`);r+=o.toString().length+1;const n=(0,t.getDerivationConfiguration)(e.substring(r,e.length)),a=(0,s.reduce)(((e,t)=>e+(`${t}`.length+1)));r=a(r,(0,s.values)(n));const i=(0,t.getCipheringConfiguration)(e.substring(r,e.length));r+=String(i.method).length+1,r=a(r,(0,s.values)(i.options));const c={method:"data"};return{cryptoConfig:{derivation:n,signature:(0,t.getSignatureConfig)(i.options.mode),ciphering:{method:i.method,options:{...i.options,ivGeneration:c}}},payloadLength:r+1}}throw new Error("parsePayload: Unable to parse payload")};t.getLegacyCryptoConfig=e=>{if("KWC3"===e)return{derivation:{method:"pbkdf2",saltLength:32,iterations:10204,hashMethod:"sha1"},signature:{method:"skip"},ciphering:{method:"aes256",options:{mode:"cbc",ivLength:16,ivGeneration:{method:"evpByteToKey"}}}};if("KWC5"===e)return{derivation:{method:"skip"},signature:{method:"hmac"},ciphering:{method:"aes256",options:{mode:"cbchmac",ivLength:16,ivGeneration:{method:"data"}}}};throw new Error("Wrong marker")};t.getLegacyMarker=e=>{const r=(0,i.getSubDataByteArray)(e,32,36),o=(0,i.uint8ArrayToText)(r);return o===t.DashlaneCipherVersion.KWC3||o===t.DashlaneCipherVersion.KWC5?o:null};t.getLegacySecureData=(e,r)=>{if(e===t.DashlaneCipherVersion.KWC3){return{marker:e,salt:(0,i.getSubDataByteArray)(r,0,32).buffer,cipheredContent:(0,i.getSubDataByteArray)(r,36,r.byteLength).buffer,cryptoConfig:(0,t.getLegacyCryptoConfig)(e)}}if(e===t.DashlaneCipherVersion.KWC5){const o=16,n=32;return{marker:e,iv:(0,i.getSubDataByteArray)(r,0,o).buffer,hash:(0,i.getSubDataByteArray)(r,36,36+n).buffer,cipheredContent:(0,i.getSubDataByteArray)(r,36+n,r.byteLength).buffer,cryptoConfig:(0,t.getLegacyCryptoConfig)(e)}}throw new Error("Wrong marker")};t.getFlexibleSecureData=e=>{const r=(0,i.uint8ArrayToText)(e),{cryptoConfig:o,payloadLength:n}=(0,t.parsePayload)(r);let a=n;const s=d(o.derivation)?0:o.derivation.saltLength,c=o.ciphering.options.ivLength,l=(0,i.getSubDataByteArray)(e,a,a+s).buffer;a+=s;const u=(0,i.getSubDataByteArray)(e,a,a+c).buffer;a+=c;const p=(0,i.getSubDataByteArray)(e,a,a+32).buffer;a+=32;return{salt:l,iv:u,hash:p,cipheredContent:(0,i.getSubDataByteArray)(e,a,e.length).buffer,cryptoConfig:o}};t.parseCipheredData=e=>{const r=(0,t.getLegacyMarker)(e);if(r)return(0,t.getLegacySecureData)(r,e);if("$"===(0,i.uint8ArrayToText)((0,i.getSubDataByteArray)(e,0,1)))return(0,t.getFlexibleSecureData)(e);throw new Error("Unable to parse ciphered data")};t.readCryptoPayload=e=>{const r=(0,a.base64ToBuffer)(e),o=new Uint8Array(r),n=(0,t.getLegacyMarker)(o);if(n)return n;const s=(0,i.uint8ArrayToText)(o),{payloadLength:c}=(0,t.parsePayload)(s);return s.substr(0,c)};t.makeFlexibleCryptoConfig=e=>e.cryptoConfig;t.makeDashlaneSecureDataFlexible=(e,t,r,o,n)=>({salt:e,iv:t,hash:r,cipheredContent:o,cryptoConfig:n});t.makeFlexibleMarkerPayloadString=e=>{let t="$1";const r=(0,s.reduce)(((e,t)=>"string"==typeof t||"number"==typeof t?e+`$${String(t)}`:e));t=r(t,(0,s.values)(e.derivation)),t=r(t,[e.ciphering.method]);return t=r(t,(0,s.values)((0,o.omit)(["ivGeneration"],e.ciphering.options))),t+="$",t};t.makeFlexibleMarkerPayloadBuffer=e=>{const r=(0,t.makeFlexibleMarkerPayloadString)(e);return(0,a.str2ab)(r)};function p(){return{derivation:{method:"pbkdf2",saltLength:32,iterations:10204,hashMethod:"sha1"},signature:{method:"skip"},ciphering:{method:"aes256",options:{mode:"cbc",ivLength:16,ivGeneration:{method:"evpByteToKey"}}}}}function S(){return{method:"argon2d",saltLength:16,t_cost:3,m_cost:32768,parallelism:2}}function g(){return{method:"pbkdf2",saltLength:16,iterations:2e5,hashMethod:"sha256"}}function m(e){return{derivation:"argon2d"===e?{method:"argon2d",saltLength:16,t_cost:3,m_cost:32768,parallelism:2}:{method:"pbkdf2",saltLength:16,iterations:2e5,hashMethod:"sha256"},signature:{method:"hmac"},ciphering:{method:"aes256",options:{mode:"cbchmac",ivLength:16,ivGeneration:{method:"data"}}}}}function y(e){return e.getPersonalSettings().CryptoUserPayload||t.ARGON2_DEFAULT_PAYLOAD}t.convertDashlaneSecureDataFlexibleToTransportableData=e=>{const r=(0,t.makeFlexibleMarkerPayloadBuffer)(e.cryptoConfig),o=e.iv,n=e.hash,a=e.cipheredContent;if(d(e.cryptoConfig.derivation))return(0,i.concatBuffers)(r,o,n,a);const s=e.salt;return(0,i.concatBuffers)(r,s,o,n,a)},t.makeKWC3CryptoConfig=p,t.makeFlexibleMarkerArgon2dConfig=S,t.makeFlexibleMarkerPbkdf2Config=g,t.makeFlexibleMarkerCryptoConfig=m,t.getCryptoConfig=function(e){const r=y(e);return(0,o.isNil)(r)?m("argon2d"):"KWC3"===r?{derivation:{method:"pbkdf2",saltLength:32,iterations:10204,hashMethod:"sha1"},signature:{method:"skip"},ciphering:{method:"aes256",options:{mode:"cbc",ivLength:16,ivGeneration:{method:"evpByteToKey"}}}}:(0,t.parsePayload)(r).cryptoConfig},t.getCryptoUserPayload=y;t.getUserCryptoPayload=e=>{if("pbkdf2_kwc3"===e)return{CryptoUserPayload:t.KWC3_DEFAULT_PAYLOAD};const r="argon2"===e?"argon2d":"pbkdf2";return{CryptoUserPayload:(0,s.compose)(i.base64BufferToUtf8,t.makeFlexibleMarkerPayloadBuffer,m)(r)}},t.KWC3_DEFAULT_PAYLOAD="KWC3",t.ARGON2_DEFAULT_PAYLOAD="$1$argon2d$16$3$32768$2$aes256$cbchmac$16$",t.PBKDF2_DEFAULT_PAYLOAD="$1$pbkdf2$16$200000$sha256$aes256$cbchmac$16$"},55479:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeCanonicalRequest=void 0;const o=r(28060);t.makeCanonicalRequest=e=>{const t=e=>e.toLowerCase(),r=n(e.headers),a=e.headersToSign?o.pick(o.map(t,o.values(e.headersToSign)),o.mapObjIndexed(t,r)):r,l=i(e.uri),u=s(e.query),p=c(a),S=d(a);return{canonicalRequest:[e.method,l,u,p,S,e.hashedPayload].join("\n"),signedHeaders:S}};const n=e=>o.pipe(o.toPairs,o.map((([e,t])=>[e.toLowerCase(),t])),l)(e),a=e=>e.replace(/[^A-Za-z0-9_.~\-]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())),i=e=>(e=>e.split("/").map((e=>a(e))).join("/"))(e),s=e=>o.pipe((e=>o.toPairs(e)),o.sortBy((e=>e[0])),o.map((([e,t])=>((e,t)=>{const r=a(e),n=Array.isArray(t)?t:[t];return o.pipe(o.map((e=>a(e))),o.map((e=>[r,e])),o.sortBy(o.reduce(o.concat,"")))(n)})(e,t))),o.unnest,o.map((([e,t])=>`${e}=${t}`)),o.join("&"))(e),c=e=>o.pipe((e=>o.toPairs(e)),o.sortBy((e=>e[0].toLowerCase())),o.map((([e,t])=>((e,t)=>e.toLowerCase()+":"+t.trim().replace(/\s+/g," ")+"\n")(e,t))),o.join(""))(e),d=e=>o.pipe(o.keys,o.map((e=>e.toLowerCase())),o.sortBy(o.identity),o.join(";"))(e),l=e=>{const t={};for(let r=0;r<e.length;++r)t[e[r][0]]=e[r][1];return t}},21294:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getApiCredentials=void 0;const o=r(88478),n=r(40914),a=r(99093);t.getApiCredentials=function(e,t){if(t.authenticationType===a.ApiAuthType.None)return{type:t.authenticationType};const r={appKeys:(0,o.appKeysSelector)(e)};switch(t.authenticationType){case a.ApiAuthType.App:return{type:a.ApiAuthType.App,...r};case a.ApiAuthType.UserDevice:return{type:a.ApiAuthType.UserDevice,...r,login:t.login,deviceKeys:(0,o.deviceKeysSelector)(e)};case a.ApiAuthType.Session:return{type:a.ApiAuthType.Session,...r,login:t.login,sessionKeys:(0,o.sessionKeysSelector)(e),deviceId:(0,o.getDeviceIdSelector)(e,t.login)};case a.ApiAuthType.TeamDevice:return{type:a.ApiAuthType.TeamDevice,...r,teamUuid:t.teamUuid,deviceKeys:(0,o.deviceKeysSelector)(e)};default:(0,n.assertUnreachable)(t.authenticationType)}}},88987:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.prepareApiEndpoint=void 0;const o=r(99093),n=r(34251);t.prepareApiEndpoint=function(e){const{authenticationType:t,endpoint:r,group:a,method:i,version:s,accept:c,responseType:d}=e,l=`/${o.ApiVersion[s]}/${a}/${r}`;return(0,n.getMakeApiRequest)(l,t,i,null!=d?d:"json",c)}},60236:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cacheEndpoint=void 0;const o=r(15876);const n={cacheExpiration:3600,getTime:()=>(new Date).getTime()};t.cacheEndpoint=(e,t)=>{const r={...n,...t},a=function(){const e={};return{clear:()=>{const t=Object.keys(e);for(const r of t)delete e[r]},get:(t,r)=>{const o=e[t];if(o&&!(o.date<r))return o.response},put:(t,r,o)=>{e[t]={date:o,response:r}}}}();return async(t,n)=>{const i=JSON.stringify(n),s=r.getTime(),c=a.get(i,s-r.cacheExpiration);if(c)return c;const d=await e(t,n);return(0,o.isApiError)(d)||a.put(i,d,s),d}}},23510:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.throttleEndpoint=void 0;const r={delayBetweenCalls:500,getTime:()=>(new Date).getTime(),wait:e=>new Promise((t=>setTimeout(t,e)))};t.throttleEndpoint=(e,t)=>{const o={...r,...t};let n=o.getTime();return async(t,r)=>{const a=n+o.delayBetweenCalls-o.getTime();a>0&&await o.wait(a);const i=await e(t,r);return n=o.getTime(),i}}},28620:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeSafeDeviceName=t.makeSafeLanguage=t.makeSafeCountry=void 0;t.makeSafeCountry=function(e){return!e||e.length<2||e.length>5?"ZZ":e};t.makeSafeLanguage=function(e){return!e||e.length<2||e.length>5?"und":e};t.makeSafeDeviceName=function(e){return e||"Device"}},98121:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCode=void 0;const o=r(99093);t.getCode=(e,t)=>{const r=t.indexOf(e);return r<0?o.UnknownError:t[r]}},91001:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(28620),t),n(r(27788),t),n(r(98121),t)},27788:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isExtraDeviceTokenValid=t.isEmailTokenValid=void 0,t.isEmailTokenValid=function(e){return/^\d{6}$/.test(e)},t.isExtraDeviceTokenValid=function(e){return/^[A-Za-z0-9+/]{64}$/.test(e)}},15876:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownError=t.isApiErrorOfType=t.isApiError=void 0;var a=r(99093);Object.defineProperty(t,"isApiError",{enumerable:!0,get:function(){return a.isApiError}}),Object.defineProperty(t,"isApiErrorOfType",{enumerable:!0,get:function(){return a.isApiErrorOfType}}),Object.defineProperty(t,"UnknownError",{enumerable:!0,get:function(){return a.UnknownError}}),n(r(15773),t),n(r(91001),t)},34251:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getApiClientAgentHeader=t.validateStatus=t.makeApiResponse=t.getMethodParams=t.getAuthParams=t.getMakeApiRequest=void 0;const o=r(36109),n=r(40914),a=r(38215),i=r(62550),s=r(88478),c=r(99093),d=r(72844),l=r(21294),u=r(10036);function p(e,{login:t,teamUuid:r}){switch(e){case c.ApiAuthType.App:case c.ApiAuthType.None:return{authenticationType:e};case c.ApiAuthType.UserDevice:case c.ApiAuthType.Session:return{authenticationType:e,login:t};case c.ApiAuthType.TeamDevice:return{authenticationType:e,teamUuid:r};default:(0,n.assertUnreachable)(e)}}function S(e,t){switch(e){case c.ApiRequestMethod.GET:return{method:e};case c.ApiRequestMethod.POST:return{method:e,payload:t};default:(0,n.assertUnreachable)(e)}}function g(e){const t=function({errors:e}){if(Array.isArray(e)&&e.length>0)return e[0];return null}(e);return t||function(e){return{code:"success",data:e.data?null:e,...e.data}}(e)}t.getMakeApiRequest=function(e,r,y,v,A){return async(E,f)=>{const h={login:"",teamUuid:"",payload:{},...f||{}},_=S(y,h.payload),T=p(r,{login:h.login,teamUuid:h.teamUuid}),I=(0,l.getApiCredentials)(E.getState(),T),C={Accept:null!=A?A:"application/json","Content-Type":"application/json; charset=UTF-8","dashlane-client-agent":m((0,a.getPlatformInfo)()),Host:new URL(u.config.DASHLANE_API_HOST_WITH_SCHEME).hostname},P=await async function(e,t,r,a,i){if(r.type===c.ApiAuthType.None)return{};const l=(0,s.dashlaneServerDeltaTimestampSelector)(e.getState())||0,u=Math.round((0,o.getUnixTimestamp)()-l),p=function(e){switch(e.method){case c.ApiRequestMethod.GET:return"";case c.ApiRequestMethod.POST:return JSON.stringify(e.payload);default:(0,n.assertUnreachable)(e)}}(i),{method:S}=i,g={pathname:t,method:S,rawBody:p,headers:a};return{Authorization:await(0,d.signRequest)({request:g,timestamp:u,credentials:r})}}(E,e,I,C,_),D={...C,...P},O=`${u.config.DASHLANE_API_HOST_WITH_SCHEME}${e}`,{data:b}=await function(e,r,o,a){const s={headers:o,validateStatus:t.validateStatus,responseType:a};switch(e.method){case c.ApiRequestMethod.GET:return(0,i.get)(r,s);case c.ApiRequestMethod.POST:return(0,i.post)(r,e.payload,s);default:(0,n.assertUnreachable)(e)}}(_,O,D,v);return g(b)}},t.getAuthParams=p,t.getMethodParams=S,t.makeApiResponse=g;function m(e){return JSON.stringify({platform:e.platformName,version:e.appVersion})}t.validateStatus=e=>e>=100&&e<=500,t.getApiClientAgentHeader=m},47757:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAndEvaluateForUser=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.abtesting,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetAndEvaluateForUser"},i=(0,n.prepareApiEndpoint)(a);t.getAndEvaluateForUser=async function(e,t,r){return i(e,{login:t,payload:r})}},62282:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountInfo=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.account,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"AccountInfo"},i=(0,o.prepareApiEndpoint)(a);t.accountInfo=async function(e,t){return i(e,{login:t,payload:{}})}},75472:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createUserWithSSO=void 0;const o=r(88987),n=r(99093),a={authenticationType:n.ApiAuthType.App,endpoint:"CreateUserWithSSO",group:n.ApiEndpointGroups.account,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},i=(0,o.prepareApiEndpoint)(a);t.createUserWithSSO=async function(e,t){return i(e,{payload:t})}},24552:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createUser=t.MissingContactPhone=void 0;const o=r(88987),n=r(99093);t.MissingContactPhone="missing_contact_phone";const a={group:n.ApiEndpointGroups.account,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"CreateUser"},i=(0,o.prepareApiEndpoint)(a);t.createUser=async function(e,t){return i(e,{payload:t})}},70784:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestAccountCreation=t.AccountExistsStatus=void 0;const o=r(88987),n=r(99093);!function(e){e.AccountExists="yes",e.AccountDoesntExist="no",e.AccountDoesntExistInvalid="no_invalid",e.AccountDoesntExistUnlikely="no_unlikely"}(t.AccountExistsStatus||(t.AccountExistsStatus={}));const a={group:n.ApiEndpointGroups.account,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"RequestAccountCreation"},i=(0,o.prepareApiEndpoint)(a);t.requestAccountCreation=async function(e,t){return i(e,{payload:t})}},13667:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateContactInfo=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.account,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"UpdateContactInfo"},i=(0,o.prepareApiEndpoint)(a);t.updateContactInfo=async function(e,t,r){return i(e,{login:t,payload:r})}},81086:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExistingSecureRemembermeSession=t.MismatchedSessionSecurity=t.SessionNotFound=t.AuthenticatorNotAvailableOnDevice=t.AuthenticationTypeNotSupported=t.AuthenticatorNotRegistered=t.AssertionRejected=t.AttestationRejected=t.ChallengeVerificationFailed=t.ChallengeExpired=t.ChallengeNotFound=t.UserHasNoActiveAuthenticator=t.FailedToContactAuthenticatorDevice=t.VerificationMethodDisabled=t.VerificationFailed=t.ClientVersionDoesNotSupportSSOMigration=t.SSOBlocked=t.UserNotFound=t.U2fBadRequest=t.InvalidOTPBlocked=t.InvalidOTPAlreadyUsed=t.DeviceNotFound=t.DeviceDeactivated=void 0,t.DeviceDeactivated="device_deactivated",t.DeviceNotFound="device_not_found",t.InvalidOTPAlreadyUsed="invalid_otp_already_used",t.InvalidOTPBlocked="invalid_otp_blocked",t.U2fBadRequest="u2f_bad_request",t.UserNotFound="user_not_found",t.SSOBlocked="SSO_BLOCKED",t.ClientVersionDoesNotSupportSSOMigration="CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION",t.VerificationFailed="verification_failed",t.VerificationMethodDisabled="verification_method_disabled",t.FailedToContactAuthenticatorDevice="FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE",t.UserHasNoActiveAuthenticator="USER_HAS_NO_ACTIVE_AUTHENTICATOR",t.ChallengeNotFound="CHALLENGE_NOT_FOUND",t.ChallengeExpired="CHALLENGE_EXPIRED",t.ChallengeVerificationFailed="CHALLENGE_VERIFICATION_FAILED",t.AttestationRejected="ATTESTATION_REJECTED",t.AssertionRejected="ASSERTION_REJECTED",t.AuthenticatorNotRegistered="AUTHENTICATOR_NOT_REGISTERED",t.AuthenticationTypeNotSupported="AUTHENTICATION_TYPE_NOT_SUPPORTED",t.AuthenticatorNotAvailableOnDevice="AUTHENTICATOR_NOT_AVAILABLE_ON_DEVICE",t.SessionNotFound="SESSION_NOT_FOUND",t.MismatchedSessionSecurity="MISMATCHED_SESSION_SECURITY",t.ExistingSecureRemembermeSession="EXISTING_SECURE_REMEMBERME_SESSION"},50654:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeDeviceRegistrationWithAuthTicket=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"CompleteDeviceRegistrationWithAuthTicket"},i=(0,n.prepareApiEndpoint)(a);t.completeDeviceRegistrationWithAuthTicket=async function(e,t){return i(e,{payload:t})}},31968:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeExtraDeviceRegistrationWithToken=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"CompleteExtraDeviceRegistrationWithToken"},i=(0,n.prepareApiEndpoint)(a);t.completeExtraDeviceRegistrationWithToken=async function(e,t){return i(e,{payload:t})}},653:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeLoginWithAuthTicket=void 0;const o=r(99093),n=r(88987),a={authenticationType:o.ApiAuthType.App,endpoint:"CompleteLoginWithAuthTicket",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},i=(0,n.prepareApiEndpoint)(a);t.completeLoginWithAuthTicket=async function(e,t){return i(e,{payload:t})}},44770:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeRememberMeOpenSession=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.Session,endpoint:"CompleteRememberMeOpenSession"},i=(0,n.prepareApiEndpoint)(a);t.completeRememberMeOpenSession=async function(e,t,r){return i(e,{login:t,payload:r})}},80029:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeRememberMeRegistration=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"CompleteRememberMeRegistration"},i=(0,n.prepareApiEndpoint)(a);t.completeRememberMeRegistration=async function(e,t,r){return i(e,{login:t,payload:r})}},70945:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeTotpActivation=void 0;const o=r(99093),n=r(88987),a={authenticationType:o.ApiAuthType.UserDevice,endpoint:"CompleteTOTPActivation",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},i=(0,n.prepareApiEndpoint)(a);t.completeTotpActivation=async function(e,t,r){return i(e,{login:t,payload:r})}},14589:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeWebAuthnAuthenticatorRegistration=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"CompleteWebAuthnAuthenticatorRegistration"},i=(0,n.prepareApiEndpoint)(a);t.completeWebAuthnAuthenticatorRegistration=async function(e,t,r){return i(e,{login:t,payload:r})}},19803:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateRememberMe=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateRememberMe"},i=(0,n.prepareApiEndpoint)(a);t.deactivateRememberMe=async function(e,t,r){return i(e,{login:t,payload:r})}},82279:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTotpVerification=void 0;const o=r(99093),n=r(88987),a={authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateTOTP",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},i=(0,n.prepareApiEndpoint)(a);t.deactivateTotpVerification=async function(e,t,r){return i(e,{login:t,payload:r})}},66130:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateWebAuthnAuthenticator=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateWebAuthnAuthenticator"},i=(0,n.prepareApiEndpoint)(a);t.deactivateWebAuthnAuthenticator=async function(e,t,r){return i(e,{login:t,payload:r})}},13131:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAvailableWebAuthnAuthenticators=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.Session,endpoint:"GetAvailableWebAuthnAuthenticators"},i=(0,n.prepareApiEndpoint)(a);t.getAvailableWebAuthnAuthenticators=async function(e,t){return i(e,{login:t,payload:{}})}},20529:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMasterPasswordCipheringKey=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.Session,endpoint:"GetMasterPasswordCipheringKey"},i=(0,o.prepareApiEndpoint)(a);t.getMasterPasswordCipheringKey=async function(e,t){return i(e,{login:t,payload:{}})}},37534:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTokens=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.GET,authenticationType:n.ApiAuthType.App,endpoint:"GetTokens"},i=(0,o.prepareApiEndpoint)(a);t.getTokens=async function(e){return i(e)}},77057:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoFactorAuthenticationStatus=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"Get2FAStatus"},i=(0,o.prepareApiEndpoint)(a);t.getTwoFactorAuthenticationStatus=function(e,t){return i(e,{login:t,payload:{}})}},85955:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getU2FDevices=void 0;const o=r(99093),n=r(88987),a={authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetU2FDevices",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},i=(0,n.prepareApiEndpoint)(a);t.getU2FDevices=async function(e,t){return i(e,{login:t,payload:{}})}},9224:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUnauthorizedProfiles=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"GetUnauthorizedProfiles"},i=(0,n.prepareApiEndpoint)(a);t.getUnauthorizedProfiles=async function(e,t){return i(e,{payload:t})}},43392:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserSSOInfo=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.TeamDevice,endpoint:"GetUserSSOInfo"},i=(0,n.prepareApiEndpoint)(a);t.getUserSSOInfo=async function(e,t){const{login:r,teamUuid:o,userServiceProviderKey:n}=t;return i(e,{login:r,teamUuid:o,payload:{login:r,userServiceProviderKey:n}})}},97953:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getWebAuthnAuthenticators=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetWebAuthnAuthenticators"},i=(0,n.prepareApiEndpoint)(a);t.getWebAuthnAuthenticators=async function(e,t){return i(e,{login:t,payload:{}})}},80933:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initRememberMasterPassword=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"InitRememberMasterPassword"},i=(0,o.prepareApiEndpoint)(a);t.initRememberMasterPassword=async function(e,t,r){return i(e,{login:t,payload:r})}},55145:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performDashlaneAuthenticatorVerification=t.verificationTimeoutError=void 0;const o=r(25884),n=r(99093),a=r(88987);t.verificationTimeoutError={code:o.VerificationTimeout,message:"The authentication request has timed out",type:o.BusinessError};const i={authenticationType:n.ApiAuthType.App,endpoint:"PerformDashlaneAuthenticatorVerification",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},s=(0,a.prepareApiEndpoint)(i);t.performDashlaneAuthenticatorVerification=async function(e,t){return s(e,{payload:t})}},1720:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performDuoPushVerification=void 0;const o=r(99093),n=r(88987),a={authenticationType:o.ApiAuthType.App,endpoint:"PerformDuoPushVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},i=(0,n.prepareApiEndpoint)(a);t.performDuoPushVerification=async function(e,t){return i(e,{payload:t})}},7348:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performEmailTokenVerification=void 0;const o=r(99093),n=r(88987),a={authenticationType:o.ApiAuthType.App,endpoint:"PerformEmailTokenVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},i=(0,n.prepareApiEndpoint)(a);t.performEmailTokenVerification=async function(e,t){return i(e,{payload:t})}},50607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performSsoVerification=void 0;const o=r(99093),n=r(88987),a={authenticationType:o.ApiAuthType.App,endpoint:"PerformSsoVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},i=(0,n.prepareApiEndpoint)(a);t.performSsoVerification=async function(e,t){return i(e,{payload:t})}},90992:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performTotpVerification=void 0;const o=r(99093),n=r(88987),a={authenticationType:o.ApiAuthType.App,endpoint:"PerformTotpVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},i=(0,n.prepareApiEndpoint)(a);t.performTotpVerification=async function(e,t){return i(e,{payload:t})}},49309:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performU2FVerification=void 0;const o=r(99093),n=r(88987),a={authenticationType:o.ApiAuthType.App,endpoint:"PerformU2FVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},i=(0,n.prepareApiEndpoint)(a);t.performU2FVerification=async function(e,t){return i(e,{payload:t})}},99514:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestDeviceRegistration=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"RequestDeviceRegistration"},i=(0,n.prepareApiEndpoint)(a);t.requestDeviceRegistration=async function(e,t){return i(e,{payload:t})}},68269:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestExternalDeviceRegistration=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"RequestExternalDeviceRegistration"},i=(0,o.prepareApiEndpoint)(a);t.requestExternalDeviceRegistration=async function(e,t){return i(e,{payload:t})}},76474:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestExtraDeviceRegistration=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"RequestExtraDeviceRegistration"},i=(0,n.prepareApiEndpoint)(a);t.requestExtraDeviceRegistration=async function(e,t){return i(e,{login:t,payload:{tokenType:"shortLived"}})}},35458:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestLogin=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"RequestLogin"},i=(0,n.prepareApiEndpoint)(a);t.requestLogin=async function(e,t){return i(e,{payload:t})}},7463:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestTOTPActivation=t.RequestTOTPActivationError=void 0;const o=r(99093),n=r(88987);!function(e){e.INTERNAL_ERROR="internal_error",e.CANNOT_SEED_FOR_USER_WITH_TOTP_ENABLED="cannot_seed_for_user_with_TOTP_enabled",e.OTP_FAILED="otp_failed",e.TOTP_TYPE_IS_NOT_SET_TO_EMAIL_TOKEN="totp_type_is_not_set_to_email_token",e.PHONE_VALIDATION_FAILED="phone_validation_failed"}(t.RequestTOTPActivationError||(t.RequestTOTPActivationError={}));const a={authenticationType:o.ApiAuthType.UserDevice,endpoint:"RequestTOTPActivation",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},i=(0,n.prepareApiEndpoint)(a);t.requestTOTPActivation=async function(e,t,r){return i(e,{login:t,payload:r})}},45647:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeU2FAuthenticator=t.U2FAuthenticatorRemovalBusinessErrors=void 0;const o=r(88987),n=r(99093);!function(e){e.VERIFICATION_METHOD_INVALID="verification_method_invalid",e.INVALID_AUTH_TICKET="invalid_auth_ticket",e.NO_KEYHANDLE_FOUND="NO_KEYHANDLE_FOUND"}(t.U2FAuthenticatorRemovalBusinessErrors||(t.U2FAuthenticatorRemovalBusinessErrors={}));const a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateU2FDevice"},i=(0,o.prepareApiEndpoint)(a);t.removeU2FAuthenticator=async function(e,t,r){return i(e,{login:t,payload:r})}},38206:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestWebauthnOpenSession=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.Session,endpoint:"RequestWebauthnOpenSession"},i=(0,n.prepareApiEndpoint)(a);t.requestWebauthnOpenSession=async function(e,t){return i(e,{login:t,payload:{}})}},10966:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestWebauthnRegistration=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"RequestWebauthnRegistration"},i=(0,n.prepareApiEndpoint)(a);t.requestWebauthnRegistration=async function(e,t){return i(e,{login:t,payload:{}})}},57275:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addPrivateBreach=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.dataleakQA,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"AddTestLeak"},i=(0,n.prepareApiEndpoint)(a);t.addPrivateBreach=async function(e,t){return i(e,{payload:{...t}})}},97985:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createOrUpdateDarkWebBreach=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.dataleakQA,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"SetTestDataBreach"},i=(0,n.prepareApiEndpoint)(a);t.createOrUpdateDarkWebBreach=async function(e,t){return i(e,{payload:{...t}})}},30239:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createPublicBreach=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.breachesQA,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"CreateTestBreach"},i=(0,n.prepareApiEndpoint)(a);t.createPublicBreach=async function(e,t){return i(e,{payload:t})}},13336:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSubscriptionTokens=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.dataleak,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"GetSubscriptionTokens"},i=(0,n.prepareApiEndpoint)(a);t.getSubscriptionTokens=async function(e){return i(e,{payload:{}})}},55979:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateDevices=t.CLIENT_STILL_OVERFLOWING=t.PAIRING_GROUPS_NOT_FOUND=t.CLIENT_DEVICES_NOT_FOUND=void 0;const o=r(99093),n=r(88987);t.CLIENT_DEVICES_NOT_FOUND="CLIENT_DEVICES_NOT_FOUND",t.PAIRING_GROUPS_NOT_FOUND="PAIRING_GROUPS_NOT_FOUND",t.CLIENT_STILL_OVERFLOWING="CLIENT_STILL_OVERFLOWING";const a={group:o.ApiEndpointGroups.devices,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateDevices"},i=(0,n.prepareApiEndpoint)(a);t.deactivateDevices=async function(e,t,r){return i(e,{login:t,payload:r})}},71673:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listDevices=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.devices,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ListDevices"},i=(0,n.prepareApiEndpoint)(a);t.listDevices=async function(e,t){return i(e,{login:t,payload:{}})}},25884:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidTeamDeviceLogin=t.BasicConfigNotFound=t.DeactivatedTeamDevice=t.DeviceKeyNotFound=t.DeviceAccountMappingAlreadyExists=t.B2bSsoUserNotFound=t.NoFreeSlot=t.NotProposedNeitherAccepted=t.InvalidSsoToken=t.InvalidUser=t.DomainNotValidForTeam=t.TotpActiveOrNotSeeded=t.ConfigurationNotFound=t.TeamDeviceEncryptedConfigNotFound=t.InvalidTOTPStatus=t.VerificationMethodInvalid=t.InvalidAuthTicket=t.WrongPublicKey=t.VerificationTimeout=t.VerificationRequiresRequest=t.VerificationFailedTooManyTimes=t.UpdateOfVerificationMethodNotSupported=t.UnexpectedError=t.UnchangedPrivateKey=t.TwofaSettingSameAsCurrent=t.TwofaServerKeyProvidedIncorrectly=t.TwofaServerKeyNotProvided=t.TeamDoesNotExist=t.TemporaryDisabled=t.NoMpEncryptionKey=t.NotAdmin=t.NoSharingKeys=t.NothingToUpdate=t.NoExternalToken=t.MissingSettingsTransaction=t.InvalidSessionAccessKey=t.InvalidKey=t.ExternalTokenSignatureNotAvailableForPartner=t.Current2faSettingCannotBeChangedAtUpload=t.ConflictingUpload=t.AccountBlockedContactSupport=t.ServerError=t.RateLimitError=t.InvalidRequestError=t.InjectedError=t.BusinessError=void 0,t.BusinessError="business_error",t.InjectedError="injected_error",t.InvalidRequestError="invalid_request_error",t.RateLimitError="rate_limit_error",t.ServerError="server_error",t.AccountBlockedContactSupport="account_blocked_contact_support",t.ConflictingUpload="conflicting_upload",t.Current2faSettingCannotBeChangedAtUpload="current_2fa_setting_cannot_be_changed_at_upload",t.ExternalTokenSignatureNotAvailableForPartner="external_token_signature_not_available_for_partner",t.InvalidKey="invalid_key",t.InvalidSessionAccessKey="invalid_session_access_key",t.MissingSettingsTransaction="MISSING_SETTINGS_TRANSACTION",t.NoExternalToken="no_external_token",t.NothingToUpdate="NOTHING_TO_UPDATE",t.NoSharingKeys="NO_SHARING_KEYS",t.NotAdmin="NOT_ADMIN",t.NoMpEncryptionKey="no_mp_encryption_key",t.TemporaryDisabled="temporary_disabled",t.TeamDoesNotExist="TEAM_DOES_NOT_EXIST",t.TwofaServerKeyNotProvided="2fa_server_key_not_provided",t.TwofaServerKeyProvidedIncorrectly="2fa_server_key_provided_incorrectly",t.TwofaSettingSameAsCurrent="2fa_setting_same_as_current",t.UnchangedPrivateKey="UNCHANGED_PRIVATE_KEY",t.UnexpectedError="unexpected_error",t.UpdateOfVerificationMethodNotSupported="UPDATE_OF_VERIFICATION_METHOD_NOT_SUPPORTED",t.VerificationFailedTooManyTimes="verification_failed_too_many_times",t.VerificationRequiresRequest="verification_requires_request",t.VerificationTimeout="verification_timeout",t.WrongPublicKey="WRONG_PUBLIC_KEY",t.InvalidAuthTicket="invalid_auth_ticket",t.VerificationMethodInvalid="verification_method_invalid",t.InvalidTOTPStatus="invalid_totp_status",t.TeamDeviceEncryptedConfigNotFound="TEAM_DEVICE_CONFIGURATION_NOT_FOUND",t.ConfigurationNotFound="TEAM_DEVICE_CONFIGURATION_NOT_FOUND",t.TotpActiveOrNotSeeded="totp_active_or_not_seeded",t.DomainNotValidForTeam="DOMAIN_NOT_VALID_FOR_TEAM",t.InvalidUser="invalid_user",t.InvalidSsoToken="invalid_sso_token",t.NotProposedNeitherAccepted="not_proposed_neither_accepted",t.NoFreeSlot="no_free_slot",t.B2bSsoUserNotFound="B2B_SSO_USER_NOT_FOUND",t.DeviceAccountMappingAlreadyExists="DEVICE_ACCOUNT_MAPPING_ALREADY_EXISTS",t.DeviceKeyNotFound="DEVICE_KEY_NOT_FOUND",t.DeactivatedTeamDevice="DEACTIVATED_TEAM_DEVICE",t.BasicConfigNotFound="BASIC_CONFIGURATION_NOT_FOUND",t.InvalidTeamDeviceLogin="INVALID_TEAM_DEVICE_LOGIN"},2282:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeFamilyMemberErrors=t.leaveFamilyErrors=t.joinFamilyErrors=t.UserMustCancelPremiumPlusRenewalToDowngradeToFamily=t.UserNotMemberOfFamily=t.CannotRemoveFamilyAdmin=t.UserMustBeFamilyAdmin=t.FamilyHasBeenDiscontinued=t.UserSubscriptionIsUpForRenewal=t.JoinFamilyTokenNotFound=t.AlreadyJoinedThisFamily=t.CannotJoinMultipleFamilies=t.FamilyFull=t.BadLogin=void 0,t.BadLogin="BAD_LOGIN",t.FamilyFull="FAMILY_FULL",t.CannotJoinMultipleFamilies="CANNOT_JOIN_MULTIPLE_FAMILIES",t.AlreadyJoinedThisFamily="ALREADY_JOINED_THIS_FAMILY",t.JoinFamilyTokenNotFound="JOIN_FAMILY_TOKEN_NOT_FOUND",t.UserSubscriptionIsUpForRenewal="USER_SUBSCRIPTION_IS_UP_FOR_RENEWAL",t.FamilyHasBeenDiscontinued="FAMILY_HAS_BEEN_DISCONTINUED",t.UserMustBeFamilyAdmin="USER_MUST_BE_FAMILY_ADMIN",t.CannotRemoveFamilyAdmin="CANNOT_REMOVE_FAMILY_ADMIN",t.UserNotMemberOfFamily="USER_NOT_MEMBER_OF_FAMILY",t.UserMustCancelPremiumPlusRenewalToDowngradeToFamily="USER_MUST_CANCEL_PREMIUM_PLUS_RENEWAL_TO_DOWNGRADE_TO_FAMILY",t.joinFamilyErrors=[t.BadLogin,t.FamilyFull,t.CannotJoinMultipleFamilies,t.AlreadyJoinedThisFamily,t.JoinFamilyTokenNotFound,t.UserSubscriptionIsUpForRenewal,t.FamilyHasBeenDiscontinued,t.UserMustCancelPremiumPlusRenewalToDowngradeToFamily],t.leaveFamilyErrors=[t.CannotRemoveFamilyAdmin,t.UserNotMemberOfFamily],t.removeFamilyMemberErrors=[t.UserMustBeFamilyAdmin,t.CannotRemoveFamilyAdmin,t.UserNotMemberOfFamily]},68617:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFamilyDetails=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.familyplan,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetFamilyDetails"},i=(0,o.prepareApiEndpoint)(a);t.getFamilyDetails=async function(e,t){return i(e,{login:t,payload:{}})}},87160:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.joinFamily=t.FamilyStopRenewalPlatform=t.FamilyStopRenewalState=void 0;const o=r(88987),n=r(99093);!function(e){e.STOPPED="stopped",e.NOT_STOPPED="not_stopped"}(t.FamilyStopRenewalState||(t.FamilyStopRenewalState={})),function(e){e.IOS_APP_STORE="ios",e.MAC_STORE="mac",e.PLAY_STORE="playstore",e.PAYPAL="paypal",e.STRIPE="stripe",e.PROCESSOUT="processout"}(t.FamilyStopRenewalPlatform||(t.FamilyStopRenewalPlatform={}));const a={group:n.ApiEndpointGroups.familyplan,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"JoinFamily"},i=(0,o.prepareApiEndpoint)(a);t.joinFamily=async function(e,t){return i(e,{payload:t})}},23554:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.leaveFamily=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.familyplan,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"LeaveFamily"},i=(0,o.prepareApiEndpoint)(a);t.leaveFamily=async function(e,t){return i(e,{login:t,payload:{}})}},72459:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeFamilyMember=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.familyplan,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"RemoveFamilyMember"},i=(0,o.prepareApiEndpoint)(a);t.removeFamilyMember=async function(e,t,r){return i(e,{login:t,payload:r})}},62404:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetFamilyJoinToken=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.familyplan,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ResetJoinToken"},i=(0,o.prepareApiEndpoint)(a);t.resetFamilyJoinToken=async function(e,t){return i(e,{login:t,payload:{}})}},58007:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isGetFilesMetaSuccess=t.getFilesMeta=t.endpoint=void 0;const o=r(88987),n=r(99093);t.endpoint="GetFileMeta";const a={group:n.ApiEndpointGroups.file,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:t.endpoint},i=(0,o.prepareApiEndpoint)(a);t.getFilesMeta=(e,t,r)=>i(e,{login:t,payload:r});t.isGetFilesMetaSuccess=e=>"success"===e.code},15773:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(25884),t),n(r(70784),t),n(r(24552),t),n(r(13667),t),n(r(75472),t),n(r(55979),t),n(r(71673),t),n(r(87160),t),n(r(68617),t),n(r(72459),t),n(r(62404),t),n(r(23554),t),n(r(81086),t),n(r(50654),t),n(r(31968),t),n(r(653),t),n(r(44770),t),n(r(80029),t),n(r(14589),t),n(r(82279),t),n(r(19803),t),n(r(66130),t),n(r(13131),t),n(r(20529),t),n(r(37534),t),n(r(77057),t),n(r(85955),t),n(r(97953),t),n(r(9224),t),n(r(80933),t),n(r(1720),t),n(r(7348),t),n(r(50607),t),n(r(90992),t),n(r(49309),t),n(r(55145),t),n(r(99514),t),n(r(76474),t),n(r(68269),t),n(r(35458),t),n(r(45647),t),n(r(7463),t),n(r(10966),t),n(r(38206),t),n(r(30793),t),n(r(86481),t),n(r(7545),t),n(r(81942),t),n(r(88094),t),n(r(15256),t),n(r(48226),t),n(r(6781),t),n(r(11827),t),n(r(56578),t),n(r(391),t),n(r(98815),t),n(r(54296),t),n(r(62636),t),n(r(83147),t),n(r(65245),t),n(r(24010),t),n(r(7416),t),n(r(10449),t),n(r(86145),t),n(r(69438),t),n(r(75290),t),n(r(98860),t),n(r(83397),t)},89151:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getKillSwitches=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.killswitch,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"GetKillSwitches"},i=(0,o.prepareApiEndpoint)(a);t.getKillSwitches=async function(e,t){return i(e,{payload:{requestedKillswitches:t}})}},75290:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestPairing=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.pairing,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"RequestPairing"},i=(0,o.prepareApiEndpoint)(a);t.requestPairing=async function(e,t){return i(e,{login:t,payload:{}})}},49500:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBundles=t.DashlaneApiErrorWithUserKey=void 0;const o=r(88987),n=r(99093),a=r(60236),i=r(23510);t.DashlaneApiErrorWithUserKey="RSA_ENCRYPT_FAILED";const s={group:n.ApiEndpointGroups.passwordchanger,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetBundles"},c=(0,a.cacheEndpoint)((0,i.throttleEndpoint)((0,o.prepareApiEndpoint)(s)));t.getBundles=async function(e,t,r){return c(e,{login:t,payload:r})}},85170:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDumpUploadLink=t.DumpUploadLinkUnauthorizedError=void 0;const o=r(88987),n=r(99093),a=r(23510);t.DumpUploadLinkUnauthorizedError="USER_NOT_ALLOWED_TO_CREATE_DUMP";const i={group:n.ApiEndpointGroups.passwordchanger,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetDumpUploadLink"},s=(0,a.throttleEndpoint)((0,o.prepareApiEndpoint)(i));t.getDumpUploadLink=async function(e,t,r){return s(e,{login:t,payload:r})}},64255:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listActiveDomains=t.DashlaneApiActiveDomainsListNotFound=void 0;const o=r(88987),n=r(99093),a=r(60236),i=r(23510);t.DashlaneApiActiveDomainsListNotFound="ACTIVE_DOMAINS_LIST_NOT_FOUND";const s={group:n.ApiEndpointGroups.passwordchanger,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ListActiveDomains"},c=(0,a.cacheEndpoint)((0,i.throttleEndpoint)((0,o.prepareApiEndpoint)(s)));t.listActiveDomains=async function(e,t,r){return c(e,{login:t,payload:r})}},97406:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registerChangeAttempt=t.RegisterChangeAttemptErrors=void 0;const o=r(88987),n=r(99093);t.RegisterChangeAttemptErrors={DOMAIN_NOT_FOUND:"DOMAIN_NOT_FOUND",DOMAIN_NOT_ACTIVE:"DOMAIN_NOT_ACTIVE",PROVIDED_VERSION_IS_NOT_CURRENT_DOMAIN_VERSION:"PROVIDED_VERSION_IS_NOT_CURRENT_DOMAIN_VERSION"};const a={group:n.ApiEndpointGroups.passwordchanger,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"RegisterChangeAttempt"},i=(0,o.prepareApiEndpoint)(a);t.registerChangeAttempt=(e,t)=>i(e,{payload:t})},66164:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCustomerInvoice=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.payments,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetCustomerInvoice",accept:"application/pdf",responseType:"arraybuffer"},i=(0,o.prepareApiEndpoint)(a);t.getCustomerInvoice=async function(e,t,r){return i(e,{login:t,payload:r})}},38387:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listInvoices=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.payments,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ListInvoices"},i=(0,o.prepareApiEndpoint)(a);t.listInvoices=async function(e,t){return i(e,{login:t,payload:{}})}},63774:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.grantFullRefundAndCancelSubscription=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.payments,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GrantFullRefundAndCancelSubscription"},i=(0,o.prepareApiEndpoint)(a);t.grantFullRefundAndCancelSubscription=async function(e,t,r){return i(e,{login:t,payload:r})}},98860:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getHashes=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.pwleak,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"GetHashes"},i=(0,o.prepareApiEndpoint)(a);t.getHashes=async function(e,t){return i(e,{payload:t})}},30793:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.confirmMasterPasswordChangeDone=void 0;const o=r(99093),n=r(88987),a={authenticationType:o.ApiAuthType.UserDevice,endpoint:"ConfirmMasterPasswordChangeDone",group:o.ApiEndpointGroups.sync,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},i=(0,n.prepareApiEndpoint)(a);t.confirmMasterPasswordChangeDone=async function(e,t,r){return i(e,{login:t,payload:r})}},86481:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDataForMasterPasswordChange=void 0;const o=r(99093),n=r(88987),a={authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetDataForMasterPasswordChange",group:o.ApiEndpointGroups.sync,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},i=(0,n.prepareApiEndpoint)(a);t.getDataForMasterPasswordChange=async function(e,t,r){return i(e,{login:t,payload:r})}},7545:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLatestContent=void 0;const o=r(99093),n=r(88987),a={group:o.ApiEndpointGroups.sync,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetLatestContent"},i=(0,n.prepareApiEndpoint)(a);t.getLatestContent=async function(e,t,r){return i(e,{login:t,payload:r})}},50427:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uploadDataForCryptoChange=void 0;const o=r(88987),n=r(99093),a={authenticationType:n.ApiAuthType.UserDevice,endpoint:"UploadDataForCryptoUpdate",group:n.ApiEndpointGroups.sync,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},i=(0,o.prepareApiEndpoint)(a);t.uploadDataForCryptoChange=async function(e,t,r){return await i(e,{login:t,payload:r})}},81942:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uploadDataForMasterPasswordChange=void 0;const o=r(99093),n=r(88987),a={authenticationType:o.ApiAuthType.UserDevice,endpoint:"UploadDataForMasterPasswordChange",group:o.ApiEndpointGroups.sync,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},i=(0,n.prepareApiEndpoint)(a);t.uploadDataForMasterPasswordChange=async function(e,t,r){return i(e,{login:t,payload:r})}},88094:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAuditLogs=t.GetAuditLogsInternalErrorCode=t.GetAuditLogsNotAdminErrorCode=void 0;const o=r(88987),n=r(99093);t.GetAuditLogsNotAdminErrorCode="NOT_ADMIN",t.GetAuditLogsInternalErrorCode="internal_error";const a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetAuditLogs"},i=(0,o.prepareApiEndpoint)(a);t.getAuditLogs=function(e,t,r){return i(e,{login:t,payload:r})}},54296:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDeviceErrors=t.createTeamDeviceAccountErrors=t.deactivateTeamDeviceErrors=t.registerTeamDeviceErrors=t.TeamDevicePlatform=void 0;const o=r(25884),n=r(99093);!function(e){e.SSO_CONNECTOR="sso_connector",e.ENCRYPTION_SERVICE="encryption_service"}(t.TeamDevicePlatform||(t.TeamDevicePlatform={})),t.registerTeamDeviceErrors=[o.NotAdmin,n.UnknownError],t.deactivateTeamDeviceErrors=[o.NotAdmin,n.UnknownError,o.DeviceKeyNotFound,o.DeactivatedTeamDevice],t.createTeamDeviceAccountErrors=[o.NotAdmin,n.UnknownError,o.DeviceAccountMappingAlreadyExists,o.InvalidTeamDeviceLogin],t.getTeamDeviceErrors=[o.NotAdmin,n.UnknownError]},62636:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTeamDeviceAccount=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"CreateTeamDeviceAccount"},i=(0,o.prepareApiEndpoint)(a);t.createTeamDeviceAccount=(e,t,r)=>i(e,{login:t,payload:r})},65245:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTeamDevice=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateTeamDevice"},i=(0,o.prepareApiEndpoint)(a);t.deactivateTeamDevice=function(e,t,r){return i(e,{login:t,payload:r})}},24010:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDevice=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetTeamDevice"},i=(0,o.prepareApiEndpoint)(a);t.getTeamDevice=async function(e,t,r){return await i(e,{login:t,payload:r})}},83147:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registerTeamDevice=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"RegisterTeamDevice"},i=(0,o.prepareApiEndpoint)(a);t.registerTeamDevice=function(e,t,r){return i(e,{login:t,payload:r})}},15256:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DomainStatusResponse=void 0,function(e){e.pending="pending",e.valid="valid",e.expired="expired",e.invalid="invalid"}(t.DomainStatusResponse||(t.DomainStatusResponse={}))},48226:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeDomainRegistrationErrors=t.completeDomainRegistration=void 0;const o=r(88987),n=r(99093),a=r(25884),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"CompleteDomainsRegistration"},s=(0,o.prepareApiEndpoint)(i);t.completeDomainRegistration=async function(e,t){return s(e,{login:t,payload:{}})},t.completeDomainRegistrationErrors=[a.NotAdmin]},6781:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateDomain=t.deactivateDomainErrors=void 0;const o=r(88987),n=r(99093),a=r(25884);t.deactivateDomainErrors=[a.NotAdmin,a.DomainNotValidForTeam];const i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateDomain"},s=(0,o.prepareApiEndpoint)(i);t.deactivateDomain=async function(e,t,r){return s(e,{login:t,payload:r})}},11827:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listDomains=t.listDomainErrors=void 0;const o=r(88987),n=r(99093),a=r(25884);t.listDomainErrors=[a.ServerError,a.InvalidRequestError];const i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ListDomains"},s=(0,o.prepareApiEndpoint)(i);t.listDomains=async function(e,t){return s(e,{login:t,payload:{}})}},56578:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestDomainRegistration=t.requestDomainRegistrationErrors=t.DomainContainsNonTeamUsers=t.InvalidPublicDomain=t.DomainAlreadyExists=void 0;const o=r(88987),n=r(99093),a=r(25884);t.DomainAlreadyExists="DOMAIN_ALREADY_EXISTS",t.InvalidPublicDomain="INVALID_PUBLIC_DOMAIN",t.DomainContainsNonTeamUsers="DOMAIN_CONTAINS_EXISTING_NONTEAM_USERS",t.requestDomainRegistrationErrors=[a.TeamDoesNotExist,t.DomainAlreadyExists,a.NotAdmin,t.InvalidPublicDomain,t.DomainContainsNonTeamUsers];const i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"RequestDomainRegistration"},s=(0,o.prepareApiEndpoint)(i);t.requestDomainRegistration=async function(e,t,r){return s(e,{login:t,payload:r})}},391:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.report=t.reportErrors=void 0;const o=r(88987),n=r(99093),a=r(25884);t.reportErrors=[a.InvalidRequestError,a.NotAdmin,a.ServerError,n.UnknownError];const i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"Report"},s=(0,o.prepareApiEndpoint)(i);t.report=async function(e,t,r){return s(e,{login:t,payload:void 0!==r?r:{}})}},7416:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamDeviceEncryptedConfigErrors=t.getTeamDeviceEncryptedConfigErrors=void 0;const o=r(25884),n=r(99093);t.getTeamDeviceEncryptedConfigErrors=[o.TeamDeviceEncryptedConfigNotFound,o.NotAdmin,n.UnknownError],t.updateTeamDeviceEncryptedConfigErrors=[o.NotAdmin,n.UnknownError,o.DeviceAccountMappingAlreadyExists,o.DeviceKeyNotFound]},10449:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDeviceEncryptedConfig=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetTeamDeviceEncryptedConfiguration"},i=(0,o.prepareApiEndpoint)(a);t.getTeamDeviceEncryptedConfig=(e,t,r)=>i(e,{login:t,payload:r})},86145:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamDeviceEncryptedConfig=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"UpdateTeamDeviceEncryptedConfiguration"},i=(0,o.prepareApiEndpoint)(a);t.updateTeamDeviceEncryptedConfig=(e,t,r)=>i(e,{login:t,payload:r})},98815:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.teamStatus=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"TeamStatus"},i=(0,o.prepareApiEndpoint)(a);t.teamStatus=async function(e,t){return i(e,{login:t,payload:{}})}},69438:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRemoteTime=void 0;const o=r(88987),n=r(99093),a={group:n.ApiEndpointGroups.time,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.None,endpoint:"GetRemoteTime"},i=(0,o.prepareApiEndpoint)(a);t.getRemoteTime=async function(e,t){return i(e,{payload:null!=t?t:{}})}},83397:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateCredential=t.GetVpnCredentialBusinessErrors=void 0;const o=r(88987),n=r(99093);!function(e){e.USER_DOESNT_HAVE_VPN_CAPABILITY="USER_DOESNT_HAVE_VPN_CAPABILITY",e.USER_ALREADY_HAS_AN_ACCOUNT="USER_ALREADY_HAS_AN_ACCOUNT",e.USER_ALREADY_HAS_AN_ACCOUNT_FOR_PROVIDER="USER_ALREADY_HAS_AN_ACCOUNT_FOR_PROVIDER",e.USER_ALREADY_HAVE_ACTIVE_VPN_SUBSCRIPTION="USER_ALREADY_HAVE_ACTIVE_VPN_SUBSCRIPTION"}(t.GetVpnCredentialBusinessErrors||(t.GetVpnCredentialBusinessErrors={}));const a={group:n.ApiEndpointGroups.vpn,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetCredentials"},i=(0,o.prepareApiEndpoint)(a);t.generateCredential=async(e,t,r)=>await i(e,{login:t,payload:r})},72844:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.signRequest=t.allowedUnsignedHeaders=t.allowedUnsignedProxyHeaders=t.allowedUnsignedClientHeaders=t.signatureAlgorithm=void 0;const o=r(28060),n=r(87459),a=r(24555),i=r(41751),s=r(36109),c=r(99093),d=r(55479),l=r(40914);t.signatureAlgorithm="DL1-HMAC-SHA256",t.allowedUnsignedClientHeaders=["origin","content-length","content-encoding","authorization","user-agent","accept-encoding"],t.allowedUnsignedProxyHeaders=["x-forwarded-for","x-forwarded-proto","x-forwarded-port","x-amzn-trace-id"],t.allowedUnsignedHeaders=[...t.allowedUnsignedClientHeaders,...t.allowedUnsignedProxyHeaders];function u(e){const{appKeys:t}=e,r=["AppAccessKey="+t.accessKey];switch(e.type){case c.ApiAuthType.App:return r;case c.ApiAuthType.UserDevice:{const{login:t,deviceKeys:o}=e;return[`Login=${t}`,...r,`DeviceAccessKey=${o.accessKey}`]}case c.ApiAuthType.Session:{const{deviceId:t,login:o,sessionKeys:n}=e;return[`Login=${o}`,...r,`SessionAccessKey=${n.accessKey}`,`DeviceAccessKey=${t}`]}case c.ApiAuthType.TeamDevice:{const{teamUuid:t,deviceKeys:o}=e;return[`TeamUuid=${t}`,...r,`DeviceAccessKey=${o.accessKey}`]}default:(0,l.assertUnreachable)(e)}}t.signRequest=async e=>{const{request:r,credentials:p,headersToSign:S,timestamp:g=(0,s.getUnixTimestamp)()}=e,{method:m,pathname:y,headers:v,query:A={},rawBody:E}=r,f=e=>Promise.resolve(e),h=(0,o.compose)(a.str2ab,a.utf8ChunkEncode),_=(0,o.composeP)((0,o.compose)(f,a.convertBufferToHex),n.computeHashSha256,(0,o.compose)(f,h)),T=await _(E),{canonicalRequest:I,signedHeaders:C}=(0,d.makeCanonicalRequest)({method:m,uri:y,headers:v,query:A,hashedPayload:T,headersToSign:S}),P=await _(I),D=[t.signatureAlgorithm,g,P].join("\n"),O=function(e){const{appKeys:t}=e;switch(e.type){case c.ApiAuthType.App:return t.secretKey;case c.ApiAuthType.UserDevice:{const{deviceKeys:r}=e;return`${t.secretKey}\n${r.secretKey}`}case c.ApiAuthType.Session:{const{sessionKeys:r}=e;return`${t.secretKey}\n${r.secretKey}`}case c.ApiAuthType.TeamDevice:{const{deviceKeys:r}=e;return`${t.secretKey}\n${r.secretKey}`}default:(0,l.assertUnreachable)(e)}}(p),b=h(D),w=await(0,i.signHashHmacSHA256)((0,a.str2ab)(O),b),N=(0,a.convertBufferToHex)(w);return t.signatureAlgorithm+" "+[...u(p),`Timestamp=${g}`,`SignedHeaders=${C}`,`Signature=${N}`].join(",")}},99093:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isApiErrorOfType=t.isApiError=t.UnknownError=t.ApiEndpointGroups=t.ApiVersion=t.ApiRequestMethod=t.ApiAuthType=void 0,t.ApiAuthType={App:"App",UserDevice:"UserDevice",None:"None",Session:"Session",TeamDevice:"TeamDevice"},t.ApiRequestMethod={GET:"GET",POST:"POST"},function(e){e[e.v1=0]="v1"}(t.ApiVersion||(t.ApiVersion={})),function(e){e.abtesting="abtesting",e.account="account",e.authentication="authentication",e.breachesQA="breaches-qa",e.dataleak="dataleak",e.dataleakQA="dataleak-qa",e.devices="devices",e.familyplan="familyplan",e.file="file",e.killswitch="killswitch",e.pairing="pairing",e.pwleak="pwleak",e.sync="sync",e.teams="teams",e.time="time",e.passwordchanger="passwordchanger",e.payments="payments",e.vpn="vpn"}(t.ApiEndpointGroups||(t.ApiEndpointGroups={})),t.UnknownError="UNKNOWN_ERROR",t.isApiError=function(e){return"object"==typeof e&&"success"!==e.code},t.isApiErrorOfType=function(e,t){return"object"==typeof t&&t.type===e}},20880:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownError=t.UnknownErrorMessages=t.UnknownErrorCode=void 0,function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR"}(r=t.UnknownErrorCode||(t.UnknownErrorCode={})),t.UnknownErrorMessages={[r.UNKNOWN_ERROR]:"Unknown error"},t.UnknownError={codes:r,name:"UnknownError",messages:t.UnknownErrorMessages}},73144:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.isCarbonError=t.CarbonError=void 0;const a=r(20880);class i extends Error{constructor(e,t){super(e.messages[t]),this.errorType=e,this.errorCode=t,this.additionalInfo={},Object.setPrototypeOf(this,i.prototype),this.name="CarbonError",Error.captureStackTrace&&Error.captureStackTrace(this,i)}errorTypeName(){return this.errorType.name}stringErrorCode(){const{errorType:{codes:e,name:t},errorCode:r}=this;return`${t}#${e[r]}`}addAdditionalInfo(e){return this.additionalInfo={...this.additionalInfo,...e},this}getAdditionalInfo(){return this.additionalInfo}getAdditionalInfoString(){const{additionalInfo:e}=this;return Object.keys(e).length>0?JSON.stringify(e):""}addContextInfo(e,t){const{errorCode:r,errorType:o}=this;return this.message=`[${e}] - ${t}: ${o.messages[r]}`,this}toString(){return`CarbonError: ${this.message} (code ${this.stringErrorCode()})`}static fromAnyError(e,t,r){if(s(e))return e;const o=new i(t||a.UnknownError,void 0===r?a.UnknownErrorCode.UNKNOWN_ERROR:r);return s(o,a.UnknownError,a.UnknownErrorCode.UNKNOWN_ERROR)&&(o.message=e.message||`${e}`),e.stack&&(o.stack=e.stack),o}}function s(e,t,r){return e instanceof Error&&"CarbonError"===e.name&&(void 0===t||t===e.errorType)&&(void 0===r||r===e.errorCode)}t.CarbonError=i,t.isCarbonError=s,n(r(91864),t)},91864:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},12150:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isHttpError=t.HttpError=t.HttpErrorMessages=t.HttpErrorCode=void 0;const o=r(73144);var n;!function(e){e[e.CLIENT_ERROR=0]="CLIENT_ERROR",e[e.SERVER_ERROR=1]="SERVER_ERROR",e[e.STATUS_CODE=2]="STATUS_CODE",e[e.CONNECTION_ABORTED=3]="CONNECTION_ABORTED",e[e.CONNECTION_TIMED_OUT=4]="CONNECTION_TIMED_OUT",e[e.NETWORK_ERROR=5]="NETWORK_ERROR",e[e.NO_RESPONSE=6]="NO_RESPONSE",e[e.SETUP_FAILED=7]="SETUP_FAILED"}(n=t.HttpErrorCode||(t.HttpErrorCode={})),t.HttpErrorMessages={[n.CLIENT_ERROR]:"Http response with client error status",[n.SERVER_ERROR]:"Http response with server error status",[n.STATUS_CODE]:"Http response with non-succesful status",[n.CONNECTION_ABORTED]:"Connection aborted",[n.CONNECTION_TIMED_OUT]:"Connection timed out",[n.NETWORK_ERROR]:"Network error",[n.NO_RESPONSE]:"No response to Http request",[n.SETUP_FAILED]:"Failed to setup Http request"},t.HttpError={codes:n,name:"HttpError",messages:t.HttpErrorMessages};t.isHttpError=(e,r)=>(0,o.isCarbonError)(e,t.HttpError,r)},44461:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get=void 0;const o=r(12120),n=r(53675),a=r(75159);t.get=async function(e,t={}){switch((0,a.getHttpClientImplementationLibrary)()){case a.HttpClientImplementationLibrary.FetchApi:return(0,o.httpGetUsingFetch)(e,t);case a.HttpClientImplementationLibrary.Axios:default:return(0,n.httpGetUsingAxios)(e,t)}}},53675:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.httpGetUsingAxios=void 0;const o=r(95326),n=r(21155);t.httpGetUsingAxios=async function(e,t={}){try{if("data"in t==!1){const e=t.headers||{},r=Object.keys(e).map((e=>e.toLowerCase())).some((e=>"content-type"===e))?{data:{}}:{};t={...t,...r}}return await o.default.get(e,t)}catch(e){return(0,n.throwCarbonError)(e)}}},12120:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.httpGetUsingFetch=void 0;const o=r(21155);t.httpGetUsingFetch=async function(e,t={}){var r;const n=(0,o.setTimeoutAbort)();try{const a={credentials:"omit",signal:n},i=t.headers?{...a,headers:t.headers}:a,s=await fetch(e,i);if(null!==(r=t.validateStatus&&!t.validateStatus(s.status))&&void 0!==r?r:!s.ok){const t=new o.FetchError(`HTTP ${s.status} - ${e}`);throw t.response=s,t}const c=await(0,o.getResponseBody)(s,t.responseType);return{headers:s.headers,data:c,status:s.status,statusText:s.statusText}}catch(e){throw(0,o.getCarbonHttpError)(e,n)}}},21155:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.throwCarbonError=t.getCarbonHttpError=t.FetchError=t.setTimeoutAbort=t.getResponseBody=t.HttpStatusCode=void 0;const o=r(40914),n=r(73144),a=r(12150);!function(e){e[e.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT"}(t.HttpStatusCode||(t.HttpStatusCode={})),t.getResponseBody=async function(e,t="json"){switch(t){case"json":return e.json();case"text":return e.text();case"arraybuffer":return e.arrayBuffer();default:(0,o.assertUnreachable)(t)}},t.setTimeoutAbort=function(e=3e4){const t=new AbortController;return setTimeout((()=>t.abort()),e),t.signal};class i extends Error{constructor(e){super(e),this.response=void 0}}t.FetchError=i;t.getCarbonHttpError=(e,t)=>{var r;let o=null;if(function(e){return e instanceof i}(e)&&e.response){const{response:t}=e,{status:r}=t;o=r>=400&&r<500?new n.CarbonError(a.HttpError,a.HttpErrorCode.CLIENT_ERROR):r>=500?new n.CarbonError(a.HttpError,a.HttpErrorCode.SERVER_ERROR):new n.CarbonError(a.HttpError,a.HttpErrorCode.STATUS_CODE),o.addAdditionalInfo({response:t})}else o="AbortError"===e.name&&t.aborted?new n.CarbonError(a.HttpError,a.HttpErrorCode.CONNECTION_TIMED_OUT):"AbortError"===e.name?new n.CarbonError(a.HttpError,a.HttpErrorCode.CONNECTION_ABORTED):(null===(r=null===self||void 0===self?void 0:self.navigator)||void 0===r?void 0:r.onLine)?new n.CarbonError(a.HttpError,a.HttpErrorCode.SETUP_FAILED):new n.CarbonError(a.HttpError,a.HttpErrorCode.NETWORK_ERROR);return o.addAdditionalInfo({libError:e.message}),o};t.throwCarbonError=e=>{let t=null;if(e.response){const{response:r}=e,{status:o}=r;t=o>=400&&o<500?new n.CarbonError(a.HttpError,a.HttpErrorCode.CLIENT_ERROR):o>=500?new n.CarbonError(a.HttpError,a.HttpErrorCode.SERVER_ERROR):new n.CarbonError(a.HttpError,a.HttpErrorCode.STATUS_CODE),t.addAdditionalInfo({response:r})}else e.request?(t="ECONNABORTED"===e.code&&"Request aborted"===e.message?new n.CarbonError(a.HttpError,a.HttpErrorCode.CONNECTION_ABORTED):"ECONNABORTED"===e.code||"ETIMEDOUT"===e.code?new n.CarbonError(a.HttpError,a.HttpErrorCode.CONNECTION_TIMED_OUT):"Network Error"===e.message?new n.CarbonError(a.HttpError,a.HttpErrorCode.NETWORK_ERROR):new n.CarbonError(a.HttpError,a.HttpErrorCode.NO_RESPONSE),t.addAdditionalInfo({request:e.request})):t=new n.CarbonError(a.HttpError,a.HttpErrorCode.SETUP_FAILED);throw t.addAdditionalInfo({libError:e.message}),t}},75159:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.resetDefaultHttpClientImplementationLibrary=t.setHttpClientImplementationLibrary=t.getHttpClientImplementationLibrary=t.HttpClientImplementationLibrary=void 0,function(e){e[e.Axios=0]="Axios",e[e.FetchApi=1]="FetchApi"}(r=t.HttpClientImplementationLibrary||(t.HttpClientImplementationLibrary={}));let o=r.Axios,n=o;t.getHttpClientImplementationLibrary=()=>n;t.setHttpClientImplementationLibrary=(e,t)=>{n=e,(null==t?void 0:t.setAsDefault)&&(o=e)};t.resetDefaultHttpClientImplementationLibrary=()=>{n=o}},62550:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.post=t.get=void 0;var a=r(44461);Object.defineProperty(t,"get",{enumerable:!0,get:function(){return a.get}});var i=r(83808);Object.defineProperty(t,"post",{enumerable:!0,get:function(){return i.post}}),n(r(12150),t)},83808:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.post=void 0;const o=r(62941),n=r(46109),a=r(75159);t.post=async function(e,t,r={}){switch((0,a.getHttpClientImplementationLibrary)()){case a.HttpClientImplementationLibrary.FetchApi:return(0,o.httpPostUsingFetch)(e,t,r);case a.HttpClientImplementationLibrary.Axios:default:return(0,n.httpPostUsingAxios)(e,t,r)}}},46109:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.httpPostUsingAxios=void 0;const o=r(95326),n=r(21155);t.httpPostUsingAxios=async function(e,t,r){try{return await o.default.post(e,t,r)}catch(e){return(0,n.throwCarbonError)(e)}}},62941:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.httpPostUsingFetch=void 0;const o=r(21155);t.httpPostUsingFetch=async function(e,t,r={}){var n;const a=(0,o.setTimeoutAbort)();try{const i=r.headers||{},s=function(e,t="application/json"){const r=t.trim().toLowerCase();if(r.startsWith("application/json"))return JSON.stringify(e);if(r.startsWith("application/x-www-form-urlencoded"))return new URLSearchParams(function(e){if("string"==typeof e)return e;return Object.keys(e).reduce(((t,r)=>{const o=e[r];return void 0===o||(t[r]="string"==typeof o?o:JSON.stringify(o)),t}),{})}(e));if(r.startsWith("multipart/form-data")){const t=new FormData;for(const[r,o]of Object.entries(e))t.append(r,o);return t}if((r.startsWith("text/plain")||r.startsWith("application/x-jsonlines"))&&"string"==typeof e)return e;throw new Error("Unsupported Content-Type for HTTP POST")}(t,i["Content-Type"]),c={method:"POST",headers:i,body:s,credentials:"omit",signal:a},d=await fetch(e,c);if(null!==(n=r.validateStatus&&!r.validateStatus(d.status))&&void 0!==n?n:!d.ok){const t=new o.FetchError(`HTTP ${d.status} - ${e}`);throw t.response=d,t}const l=await(0,o.getResponseBody)(d,r.responseType);return{headers:d.headers,data:l,status:d.status,statusText:d.statusText}}catch(e){throw(0,o.getCarbonHttpError)(e,a)}}},9496:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateOtpFromSecret=void 0;const o=r(68243),n=r(31891),a=r(59125);t.generateOtpFromSecret=function(e){try{const t=e.toUpperCase().replace(/[^A-Z2-7=]/g,"");return o.authenticator.generate(t)}catch(e){const t=new Error(`[Otp] - generateOtpFromSecret: ${e}`);return n.Debugger.log(t),(0,a.sendExceptionLog)({error:t}),""}}},60737:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},43051:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBatch=void 0;const o=r(79504),n=r(94417);t.getBatch=function(e,t,r){const a="zero"===t.startCursor.type?0:(0,n.binaryFindIndex)(r,(r=>(0,o.isAfterTokenStart)(e,t,!1,r)));if(-1===a)return[];const i=r.slice(a),s="infinite"===t.endCursor.type?i.length:(0,n.binaryFindIndex)(i,(r=>(0,o.isAfterTokenEnd)(e,t,!1,r)),t.initialBatchSize),c=-1===s?i.length:s;return i.slice(0,c)}},51417:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBatch=t.generatePrevToken=t.generateNextToken=t.generateFirstToken=void 0;var o=r(95502);Object.defineProperty(t,"generateFirstToken",{enumerable:!0,get:function(){return o.generateFirstToken}}),Object.defineProperty(t,"generateNextToken",{enumerable:!0,get:function(){return o.generateNextToken}}),Object.defineProperty(t,"generatePrevToken",{enumerable:!0,get:function(){return o.generatePrevToken}});var n=r(43051);Object.defineProperty(t,"getBatch",{enumerable:!0,get:function(){return n.getBatch}})},79504:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isBeforeTokenStart=t.isAfterTokenEnd=t.isBeforeTokenEnd=t.isAfterTokenStart=void 0;const o=r(28060),n=r(6045);function a(e,t){return e>t}function i(e,t){return e<t}function s(e,t){return(0,o.compose)(n.normalizeStringMapper,e[t])}const c=(0,o.curry)((function(e,t,{0:r,1:o}){const{direction:c,field:d}=r,l=s(e,d);return(e=>"ascend"===e?a:i)(c)(l(t),(0,n.normalizeStringMapper)(o))})),d=(0,o.curry)((function(e,t,{0:r,1:o}){const{direction:n,field:c}=r,d=s(e,c);return(e=>"ascend"===e?i:a)(n)(d(t),o)})),l=(0,o.curry)((function(e,t,{0:r,1:o}){const{field:n}=r;return s(e,n)(t)===o}));function u(e){return void 0!==e&&[!0,!1].includes(e)}function p(e){return{direction:"ascend",field:e}}const S=(e,t)=>(r,n,a,i)=>{const{sortCriteria:s,uniqField:S}=n.sortToken,g="start"===t?n.startCursor:n.endCursor;if("zero"===g.type)return"after"===e;if("infinite"===g.type)return"before"===e;const m=l(r,i),y=((e,t)=>r=>r.reduce(((r,o)=>u(r)?r:function(e,t,r){return!!e(r)||!!t(r)&&void 0}(e,t,o)),void 0))("before"===e?d(r,i):c(r,i),m),v=y((0,o.zip)(s,g.sortValues));if(u(v))return v;const A=y([{0:p(S),1:g.uniqValue}]);return u(A)?A:!a};t.isAfterTokenStart=S("after","start"),t.isBeforeTokenEnd=S("before","end"),t.isAfterTokenEnd=S("after","end"),t.isBeforeTokenStart=S("before","start")},28807:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sameBatch=void 0;const o=r(28060);t.sameBatch=function(e,t){return e.length===t.length&&e.every(((e,r)=>(0,o.equals)(t[r],e)))}},95502:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateFirstToken=t.generatePrevToken=t.generateNextToken=t.zeroCursor=t.infiniteCursor=void 0;const o=r(28060),n=r(6045),a=r(94417),i=r(79504);function s(e,t,r){return r.sortCriteria.map((r=>{const{field:a}=r;return(0,o.compose)(n.normalizeStringMapper,e[a])(t)}))}function c(e,r,o,n,a){const i=n+o-1;if(i>=a.length-1)return t.infiniteCursor;const c=a[i];return{type:"positional",sortValues:s(e,c,r),uniqValue:String(e[r.uniqField](c))}}function d(e,r,o){const{initialBatchSize:n,startCursor:c,sortToken:d}=r;if("zero"===c.type)throw new Error("Cannot generate cursor before zero start cursor.");const l=(0,a.binaryFindLastIndex)(o,(t=>(0,i.isBeforeTokenStart)(e,r,!0,t)));if(-1===l)return t.zeroCursor;const u=function(e,r,o,n,a){const i=n-o+1;if(i<0)return t.zeroCursor;const c=a[i];return{type:"positional",sortValues:s(e,c,r),uniqValue:String(e[r.uniqField](c))}}(e,d,n,l,o);return u}t.infiniteCursor={type:"infinite"},t.zeroCursor={type:"zero"},t.generateNextToken=function(e,r,o){if("infinite"===r.endCursor.type)return;const n=function(e,r,o){const{initialBatchSize:n,endCursor:s,sortToken:d}=r;if("infinite"===s.type)throw new Error("Cannot generate cursor after infinite end cursor.");const l=(0,a.binaryFindIndex)(o,(t=>(0,i.isAfterTokenEnd)(e,r,!1,t)));return-1===l?t.infiniteCursor:c(e,d,n,l,o)}(e,r,o);return{...r,startCursor:r.endCursor,endCursor:n}},t.generatePrevToken=function(e,t,r){if("zero"===t.startCursor.type)return;const o=d(e,t,r);return{...t,startCursor:o,endCursor:t.startCursor}},t.generateFirstToken=function(e,r,o,n){const{sortToken:a,filterToken:i}=r,s=c(e,a,o,0,n);return{sortToken:a,filterToken:i,initialBatchSize:o,startCursor:t.zeroCursor,endCursor:s}}},72093:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPlugins=t.setPlugins=void 0;let r={};t.setPlugins=function(e){r=e},t.getPlugins=function(){return r}},61630:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(2426),t),n(r(24346),t)},24346:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupProbe=void 0;const o=r(28060),n=r(31891),a=(e,t)=>r=>(0,o.forEach)(((e,t)=>r=>{try{e(r,t)}catch(e){(0,n.logWarn)({message:`Monitor raised an error on announcement ${r.type}`,tag:"Probe",details:{error:e}})}})(r,t),e);t.setupProbe=(...e)=>(...t)=>{const r={timestamp:Date.now()};(0,o.forEach)(a(t,r),e)}},2426:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},13943:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(14876),t)},55550:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.filterData=void 0;const o=r(28060),n=r(78321),a=r(40914);t.filterData=function(e,t,r,i){return r.filterCriteria.reduce(((r,i)=>{const s=function(e,t,r){const{value:i}=r,s=(0,n.normalizeStringMapper)(i),c=t=>(0,o.compose)(n.normalizeStringMapper,e[t]);switch(r.type){case"equals":return e=>c(r.field)(e)===s;case"differs":return e=>c(r.field)(e)!==s;case"matches":return e=>t(s,e);case"in":return e=>{const t=c(r.field)(e);return s.indexOf(t)>-1};case"contains":return e=>{const t=c(r.field)(e);if(!Array.isArray(t))throw new Error("[Query] - filter: expected an array");return t.includes(s)};default:(0,a.assertUnreachable)(r)}}(e,t,i);return r.filter(s)}),i)}},6045:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeStringMapper=t.queryData=t.sortData=t.filterData=t.stringifyToken=t.parseToken=t.optimizeBatchSelector=t.createOptimizedSortTokenSelector=t.createOptimizedFilterTokenSelector=void 0;var a=r(43027);Object.defineProperty(t,"createOptimizedFilterTokenSelector",{enumerable:!0,get:function(){return a.createOptimizedFilterTokenSelector}}),Object.defineProperty(t,"createOptimizedSortTokenSelector",{enumerable:!0,get:function(){return a.createOptimizedSortTokenSelector}}),Object.defineProperty(t,"optimizeBatchSelector",{enumerable:!0,get:function(){return a.optimizeBatchSelector}});var i=r(67888);Object.defineProperty(t,"parseToken",{enumerable:!0,get:function(){return i.parseToken}}),Object.defineProperty(t,"stringifyToken",{enumerable:!0,get:function(){return i.stringifyToken}});var s=r(55550);Object.defineProperty(t,"filterData",{enumerable:!0,get:function(){return s.filterData}});var c=r(92001);Object.defineProperty(t,"sortData",{enumerable:!0,get:function(){return c.sortData}});var d=r(99513);Object.defineProperty(t,"queryData",{enumerable:!0,get:function(){return d.queryData}});var l=r(78321);Object.defineProperty(t,"normalizeStringMapper",{enumerable:!0,get:function(){return l.normalizeStringMapper}}),n(r(14876),t)},78321:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeStringMapper=void 0;const o=r(28060),n=r(78043),a=(0,o.compose)(n.normalizeString,o.toLower);t.normalizeStringMapper=e=>"string"==typeof e?a(e):Array.isArray(e)?e.map(t.normalizeStringMapper):e},99513:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queryData=void 0;const o=r(55550),n=r(92001);t.queryData=function(e,t,r,a,i){const s=(0,o.filterData)(e,t,a,i);return(0,n.sortData)(e,r,s)}},43027:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.optimizeBatchSelector=t.createOptimizedFilterTokenSelector=t.createOptimizedSortTokenSelector=void 0;const o=r(28060),n=r(32034);t.createOptimizedSortTokenSelector=(0,n.createSelectorCreator)(n.defaultMemoize,((e,t)=>e.uniqField===t.uniqField&&e.sortCriteria.length===t.sortCriteria.length&&e.sortCriteria.every(((e,r)=>Object.keys(e).every((o=>e[o]===t.sortCriteria[r][o]))))));t.createOptimizedFilterTokenSelector=(0,n.createSelectorCreator)(n.defaultMemoize,((e,t)=>e.filterCriteria.length===t.filterCriteria.length&&e.filterCriteria.every(((e,r)=>Object.keys(e).every((o=>e[o]===t.filterCriteria[r][o]))))));const a=(0,n.createSelectorCreator)(n.defaultMemoize,((e,t)=>e.length===t.length&&e.every(((e,r)=>t[r]===e))));t.optimizeBatchSelector=e=>a(e,o.identity)},92001:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sortData=void 0;const o=r(78321),n=r(28060);function a(e,t){const{direction:r}=t,a=function(e,t){const{field:r}=t;return(0,n.compose)(o.normalizeStringMapper,e[r])}(e,t);return function(e){return"ascend"===e?n.ascend:n.descend}(r)(a)}t.sortData=function(e,t,r){const o=(0,n.compose)(String,e[t.uniqField]),i=[...t.sortCriteria.map((t=>a(e,t))),(0,n.ascend)(o)];return(0,n.sortWith)(i)(r)}},67888:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyToken=t.parseToken=void 0;const o=r(24555),n=r(93513);t.parseToken=function(e){const t=n.decode(e),r=(0,o.utf8ChunkDecode)(t);return JSON.parse(r)},t.stringifyToken=function(e){if(void 0===e)return"";const t=JSON.stringify(e),r=(0,o.utf8ChunkEncode)(t);return n.encode(r)}},14876:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},2427:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeAutoLoginService=t.loadMPFromStorageToStore=t.shouldTrigger=t.createMasterPasswordCipheringKey=t.AUTOLOGIN_EXPIRATION_DATE=void 0;const o=r(11814),n=r(41751),a=r(24555),i=r(75897),s=r(36109),c=r(59125),d=r(31891),l=r(88478),u=r(15876),p=r(8153),S=r(72879),g=r(40199),m=r(7605);t.AUTOLOGIN_EXPIRATION_DATE=1209600;t.createMasterPasswordCipheringKey=()=>(0,n.generateAESKey)();const y=()=>{try{const e=(()=>{const e=(0,m.getWindowLocalStorage)();return o.env.isBrowserEnvironment()&&e?parseInt(e["QA.EXTENSION-1474.expirationTimeSeconds"],10):void 0})();if(Number.isSafeInteger(e)&&e<t.AUTOLOGIN_EXPIRATION_DATE)return e}catch(e){(0,d.logError)(e)}return t.AUTOLOGIN_EXPIRATION_DATE};t.shouldTrigger=async(e,t,r)=>{try{if(t.setInstance(r),e.isAuthenticated())return!1;await(0,S.loadSessionKeysToStore)(e,t);const o=(0,l.sessionKeysSelector)(e.getState());return!!(0,S.areSessionKeysValid)(o)&&t.getInstance().doesMasterPasswordExist()}catch(e){if(e.message!==S.RememberMeErrorCode.EMPTY_SESSION_KEYS){const t=new Error(`[Autologin] - shouldTrigger: ${e}`);(0,c.sendExceptionLog)({error:t}),(0,d.logError)(e)}return!1}};t.loadMPFromStorageToStore=async(e,t,r,o)=>{const n=await(0,u.getMasterPasswordCipheringKey)(e,o);if((0,u.isApiError)(n))throw new Error(n.message);t.setInstance({raw:n.rememberMasterPasswordCipheringKey},"");const a=await r.getInstance().getMasterPassword();e.dispatch((0,i.updateMasterPassword)(a))};t.makeAutoLoginService=e=>({initialize:()=>(async e=>{try{const{storeService:r,localStorageService:o}=e;if(!r.isAuthenticated())throw new Error(S.RememberMeErrorCode.USER_NOT_AUTHENTICATED);const n=r.getState(),c=(0,l.deviceKeysSelector)(n),d=(0,l.ukiSelector)(n),m=(0,l.sessionKeysSelector)(n),v=(0,p.userLoginSelector)(n);if(!c||!d)throw new Error(S.RememberMeErrorCode.EMPTY_DEVICE_KEYS);if((0,S.areSessionKeysValid)(m))return;const A=await(0,t.createMasterPasswordCipheringKey)(),E=(0,a.bufferToBase64)(A),f=await(0,u.initRememberMasterPassword)(r,v,{rememberMasterPasswordCipheringKey:E});if((0,u.isApiError)(f))throw new Error(f.code);const h=(0,s.getUnixTimestamp)()+y(),_={accessKey:f.sessionAccessKey,secretKey:f.sessionSecretKey,expirationTimeSeconds:h};r.dispatch((0,i.loadSessionKeys)(_)),await o.getInstance().storeAuthenticationKeys(_),e.autoLoginEncryptorService.setInstance({raw:null,buffer:A},"");const T=(0,p.masterPasswordSelector)(n);await o.getInstance().storeMasterPassword(T),await(0,S.persistLocalAccountRememberMeType)(r,"autologin"),r.dispatch((0,g.setRememberMeTypeAction)("autologin"))}catch(e){const t=new Error(`[Autologin] - initialize: ${e}`);(0,c.sendExceptionLog)({error:t}),(0,d.logError)(t)}})(e),process:r=>(async(e,r)=>{try{const{storeService:o,autoLoginEncryptorService:n,localStorageService:a}=e;if(!await(0,t.shouldTrigger)(o,a,r))return;return(0,t.loadMPFromStorageToStore)(o,n,a,r)}catch(e){const t=new Error(`[Autologin] - processAutoLogin: ${e}`);(0,c.sendExceptionLog)({error:t}),(0,d.logError)(t)}})(e,r),shouldTrigger:r=>(0,t.shouldTrigger)(e.storeService,e.localStorageService,r)})},34077:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWebAuthnAuthenticationService=t.shouldTrigger=void 0;const o=r(24555),n=r(31891),a=r(41751),i=r(88478),s=r(15876),c=r(8153),d=r(75897),l=r(59125),u=r(33792),p=r(72879),S=r(40199);t.shouldTrigger=async(e,t,r)=>{try{if(t.setInstance(r),(0,c.isAuthenticatedSelector)(e.getState()))return!1;await(0,p.loadSessionKeysToStore)(e,t);const o=(0,i.sessionKeysSelector)(e.getState());return!!(0,p.areSessionKeysValid)(o)&&t.getInstance().doesMasterPasswordExist()}catch(e){if(e.message!==p.RememberMeErrorCode.EMPTY_SESSION_KEYS){const t=new Error(`[WebAuthnAuthentication] - shouldTrigger: ${e}`);(0,l.sendExceptionLog)({error:t}),(0,n.logError)(t)}return!1}};t.makeWebAuthnAuthenticationService=e=>({initialize:t=>(async(e,t)=>{try{const{storeService:r,localStorageService:n,webAuthnAuthenticationEncryptorService:i}=e,l=r.getState(),g=(0,c.userLoginSelector)(l),m=await(0,a.generate64BytesKey)(),y=(0,o.bufferToBase64)(m),v=atob(y),A=await(0,s.completeRememberMeRegistration)(r,g,{masterPasswordEncryptionKey:y,authenticator:t});if((0,s.isApiError)(A))throw new Error(A.code);const E={accessKey:A.sessionAccessKey,secretKey:A.sessionSecretKey,expirationTimeSeconds:A.sessionExpirationDateUnix};r.dispatch((0,d.loadSessionKeys)(E)),await n.getInstance().storeAuthenticationKeys(E);const f="",h=(0,u.getNoDerivationCryptoConfig)();i.setInstance({raw:v},f,h);const _=(0,c.masterPasswordSelector)(l);return await n.getInstance().storeWebAuthnMasterPassword(_),await(0,p.persistLocalAccountRememberMeType)(r,"webauthn"),r.dispatch((0,S.setRememberMeTypeAction)("webauthn")),!0}catch(e){const t=new Error(`[WebAuthnAuthentication] - initialize: ${e}`);return(0,l.sendExceptionLog)({error:t}),(0,n.logError)(t),!1}})(e,t),process:(t,r)=>(async(e,t,r)=>{try{const{storeService:o,webAuthnAuthenticationEncryptorService:n,localStorageService:a}=e,i=await(0,s.completeRememberMeOpenSession)(o,t,{authenticator:r});if((0,s.isApiError)(i))throw new Error(i.message);const c="",l=(0,u.getNoDerivationCryptoConfig)(),p=i.masterPasswordEncryptionKey,S=atob(p);n.setInstance({raw:S},c,l);const g=await a.getInstance().getWebAuthnMasterPassword();o.dispatch((0,d.updateMasterPassword)(g))}catch(e){const t=new Error(`[WebAuthnAuthentication] - processWebAuthnAuthentication: ${e}`);(0,l.sendExceptionLog)({error:t}),(0,n.logError)(t)}})(e,t,r),shouldTrigger:r=>(0,t.shouldTrigger)(e.storeService,e.localStorageService,r),deactivate:t=>(async(e,t)=>{const{storeService:r,localStorageService:o}=e,n=(0,i.deviceKeysSelector)(r.getState());if(!n)return!1;const a=await(0,s.deactivateRememberMe)(r,t,{deviceAccessKey:n.accessKey});return!(0,s.isApiError)(a)&&(await o.getInstance().cleanAuthenticationKey(),await(0,p.persistLocalAccountRememberMeType)(r,"disabled"),r.dispatch((0,S.setRememberMeTypeAction)("disabled")),!0)})(e,t)})},72879:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.areSessionKeysValid=t.loadSessionKeysToStore=t.shouldAskMasterPassword=t.cleanRememberMeStorageData=t.getLocalAccountRememberMeType=t.persistLocalAccountRememberMeType=t.RememberMeErrorCode=void 0;const o=r(54516),n=r(56816),a=r(1064),i=r(65866),s=r(75897),c=r(36109),d=r(8153),l=r(15876),u=r(88478),p=r(73144),S=r(59125),g=r(31891);var m;!function(e){e.USER_NOT_AUTHENTICATED="USER_NOT_AUTHENTICATED",e.EMPTY_DEVICE_KEYS="EMPTY_DEVICE_KEYS",e.EMPTY_SESSION_KEYS="EMPTY_SESSION_KEYS"}(m=t.RememberMeErrorCode||(t.RememberMeErrorCode={}));t.persistLocalAccountRememberMeType=async(e,t)=>{const{login:r,persistData:n}=e.getAccountInfo();n===a.PersistData.PERSIST_DATA_YES&&await(0,o.storeUserPublicSetting)(r,"rememberMeType",t)};t.getLocalAccountRememberMeType=e=>(0,o.getUserPublicSetting)(e,"rememberMeType");t.cleanRememberMeStorageData=async(e,r)=>{const o=(0,d.userLoginSelector)(e.getState()),a=[(0,n.removeData)(r,o,"authenticationKeys"),(0,n.removeData)(r,o,"registry"),(0,t.persistLocalAccountRememberMeType)(e,"disabled")];if("disabled"!==(0,u.rememberMeTypeSelector)(e.getState())){const t=new Promise((t=>{(async(e,t)=>{const r=(0,u.deviceKeysSelector)(e.getState());r&&await(0,l.deactivateRememberMe)(e,t,{deviceAccessKey:r.accessKey})})(e,o).then(t).catch((e=>{const r=p.CarbonError.fromAnyError(e).addContextInfo("RememberMe","cleanRememberMeStorageData");(0,g.logError)({message:"Error when deactivating remember me server side"}),(0,S.sendExceptionLog)({error:r}),t()}))}));a.push(t)}await Promise.all(a)};t.shouldAskMasterPassword=e=>{const t=(0,o.getUserPublicSetting)(e,"lastMasterPasswordOpenSessionTimestamp")||void 0;if(!t)return;return Date.now()-t>12096e5};t.loadSessionKeysToStore=async(e,t)=>{try{if(!await t.getInstance().doesAuthenticationKeysExist())throw new Error(m.EMPTY_SESSION_KEYS);const r=await t.getInstance().getAuthenticationKeys();e.dispatch((0,s.loadSessionKeys)(r))}catch(e){throw e.message.indexOf(i.DATA_TAMPERED_ERROR)>-1&&t.getInstance().cleanAuthenticationKey(),e}};t.areSessionKeysValid=e=>(null==e?void 0:e.expirationTimeSeconds)>(0,c.getUnixTimestamp)()},91450:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeLocalStorageService=void 0;const o=r(56816);t.makeLocalStorageService=e=>{let t=null;return{setInstance:r=>{t=(0,o.makeUserLocalDataService)(e,r)},getInstance:()=>{if(!t)throw new Error("makeLocalStorageService: You must call setInstance(login: string) before getting the instance");return t}}}},56816:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserLocalDataService=t.deleteAllLocalUserData=t.isDataStored=t.removeData=t.getStorageDebugKey=t.getStorageKey=t.STORAGE_VERSION=t.StoredUserDataTypeEnum=void 0;const o=r(31891),n=r(1064),a=r(48157),i=r(24555),s=r(8153),c=r(23452),d=r(33135),l=r(53494),u=r(69035),p=r(82174),S=r(93513);t.StoredUserDataTypeEnum=["abTests","authentication","authenticationKeys","darkWebMonitoring","dataLeaksEmailStatusList","eventStore","health","healthWasComputed","icons","localDataBackupLastLoginSuccessful","localDataBackupTmp","localKey","localSettings","notificationsStatus","personalData","personalFeatures","personalSettings","recoveryData","recoveryLocalKey","recoverySessionCredential","registry","remoteFileContent","remoteFileMeta","sharingData","sharingSync","teamAdminData","userActivity","vaultReport","analyticsIds","userAutofillCorrections","userAutofillCorrectionsMigrated"],t.STORAGE_VERSION="v1";t.getStorageKey=(e,r,o=t.STORAGE_VERSION)=>`${e}.${r}.${o}`;t.getStorageDebugKey=(e,r,o=t.STORAGE_VERSION)=>(0,t.getStorageKey)(e,r,o)+".clear";const g=(e,t)=>`${e}.${t}`,m=async(e,t,r)=>{const o=await e.getLocalStorage().readItem(r);if("string"!=typeof o||0===o.length)throw new Error(`value ${t} undefined`);return o},y=async(e,r,a,s)=>{const c=r.getLocalStorage(),d=(0,t.getStorageKey)(a,s);if(await c.itemExists(d))return(async(e,t,r,o)=>{const n=await m(t,r,o),a=await e.getInstance().decrypt(n),i=(0,l.inflateUtf16)(a);return JSON.parse(i)})(e,r,s,d);const u=g(a,s);if(await c.itemExists(u))return(async(e,t,r,a)=>{const s=await m(t,r,a),c=await e.getInstance().decrypt(s),d=(0,l.deflatedUtf8ToUtf16)(c,{skipUtf8Decoding:!0});if(0===d.length)throw new Error(n.AuthenticationCode[n.AuthenticationCode.WRONG_PASSWORD]);const u=S.decode(d);try{const e=(0,i.utf8ChunkDecode)(u);return JSON.parse(e)}catch(e){return o.default.log(e),u}})(e,r,s,u);const p=new Error("value "+s+" undefined");throw o.default.error(p),p},v=async(e,r,n,i,s)=>{try{const o=e.getLocalStorage(),c=(0,t.getStorageKey)(r,i);if(await o.writeItem(c,n),(0,a.isInternalTestUser)(r)&&s){const o=(0,t.getStorageDebugKey)(r,i);await e.getLocalStorage().writeItem(o,s)}}catch(e){const t=new Error(`[storeData] failed for dataType: ${i} with error: ${e}`);throw o.default.error(t),t}},A=async(e,t,r,o,n)=>{try{const a=JSON.stringify(o),i=(0,l.deflateUtf16)(a),s=await e.getInstance().encrypt(i);await v(t,r,s,n,o)}catch(e){throw e}};t.removeData=async(e,r,o)=>{const n=(0,t.getStorageKey)(r,o),i=g(r,o),s=(0,t.getStorageDebugKey)(r,o),c=((e,t)=>g(e,t)+".clear")(r,o),d=[e.removeItem(n),e.removeItem(i),...(0,a.isInternalTestUser)(r)?[e.removeItem(s),e.removeItem(c)]:[]];await Promise.all(d)};t.isDataStored=async(e,r,o)=>{const n=(0,t.getStorageKey)(r,o);if(await e.itemExists(n))return!0;const a=g(r,o);return await e.itemExists(a)},t.deleteAllLocalUserData=async function(e,r){const o=r.trim();for(const r of t.StoredUserDataTypeEnum)await(0,t.removeData)(e,o,r);for(const r of p.AUTOMATIC_FILE_UPDATE)await(0,t.removeData)(e,o,r);for(const r of Object.keys(p.MANUAL_FILE_UPDATE))await(0,t.removeData)(e,o,r)};t.makeUserLocalDataService=(e,r)=>{const n=()=>{const{storeService:t,masterPasswordEncryptorService:r,localDataEncryptorService:o}=e;return(0,s.isLocalKeyActivatedSelector)(t.getState())?o:r};return{storePersonalData:t=>A(n(),e.storageService,r,t,"personalData"),getPersonalData:()=>(o.default.log("Load Personal Data"),y(n(),e.storageService,r,"personalData")),doesPersonalDataExist:()=>(o.default.log("Check Personal Data existence"),(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"personalData")),storeLocalSettings:t=>A(n(),e.storageService,r,t,"localSettings"),getLocalSettings:()=>(o.default.log("Load Local Settings"),y(n(),e.storageService,r,"localSettings")),storePersonalSettings:t=>A(n(),e.storageService,r,t,"personalSettings"),getPersonalSettings:()=>(o.default.log("Load Personal Settings"),y(n(),e.storageService,r,"personalSettings")),storePersonalFeatures:t=>A(n(),e.storageService,r,t,"personalFeatures"),getPersonalFeatures:()=>(o.default.log("Load Personal Features"),y(n(),e.storageService,r,"personalFeatures")),storeNotificationsStatus:t=>A(n(),e.storageService,r,t,"notificationsStatus"),doesNotificationStatusExist:()=>(o.default.log("Check Notification Status existence"),(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"notificationsStatus")),getNotificationStatus:()=>(o.default.log("Load Notifications Status"),y(n(),e.storageService,r,"notificationsStatus")),storeFeatures:t=>A(n(),e.storageService,r,t,"personalFeatures"),getFeatures:()=>(o.default.log("Load Feature Flipping"),y(n(),e.storageService,r,"personalFeatures")),storeSharingData:t=>A(n(),e.storageService,r,t,"sharingData"),getSharingData:()=>(o.default.log("Load Sharing Data"),y(n(),e.storageService,r,"sharingData")),storeSharingSync:t=>A(n(),e.storageService,r,t,"sharingSync"),getSharingSync:()=>(o.default.log("Load Sharing Sync"),y(n(),e.storageService,r,"sharingSync")),doesSharingSyncExist:()=>(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"sharingSync"),storeTeamAdminData:t=>A(n(),e.storageService,r,t,"teamAdminData"),getTeamAdminData:()=>(o.default.log("Load Team Admin Data"),y(n(),e.storageService,r,"teamAdminData")),storeAuthenticationKeys:t=>A(e.authorizationKeysEncryptorService,e.storageService,r,t,"authenticationKeys"),getAuthenticationKeys:()=>(o.default.log("Load Authentication Keys"),y(e.authorizationKeysEncryptorService,e.storageService,r,"authenticationKeys").then((e=>e))),doesAuthenticationKeysExist:()=>(o.default.log("Check Authentication Keys existence"),(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"authenticationKeys")),cleanAuthenticationKey:()=>(0,t.removeData)(e.storageService.getLocalStorage(),r,"authenticationKeys"),storeAuthenticationData:t=>A(n(),e.storageService,r,t,"authentication"),getAuthenticationData:()=>y(n(),e.storageService,r,"authentication"),hasAuthenticationData:()=>(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"authentication"),doesMasterPasswordExist:()=>(o.default.log("Check Master Password Keys existence"),(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"registry")),getMasterPassword:()=>(o.default.log("Load Master Password via Auto login"),y(e.autoLoginEncryptorService,e.storageService,r,"registry")),storeMasterPassword:t=>(o.default.log("Store Master Password via Auto login"),A(e.autoLoginEncryptorService,e.storageService,r,t,"registry")),getWebAuthnMasterPassword:()=>(o.default.log("Load Master Password via WebAuthn login"),y(e.webAuthnAuthenticationEncryptorService,e.storageService,r,"registry")),storeWebAuthnMasterPassword:t=>(o.default.log("Store Master Password via WebAuthn login"),A(e.webAuthnAuthenticationEncryptorService,e.storageService,r,t,"registry")),getLocalKey:()=>y(e.masterPasswordEncryptorService,e.storageService,r,"localKey"),doesLocalKeyExist:()=>(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"localKey"),storeLocalKey:t=>A(e.masterPasswordEncryptorService,e.storageService,r,t,"localKey"),doesLocalDataExist:()=>Promise.all(["localSettings","personalData","personalSettings"].map((o=>(0,t.isDataStored)(e.storageService.getLocalStorage(),r,o)))).then((e=>e.every((e=>e)))),storeUserABTests:t=>A(n(),e.storageService,r,t,"abTests"),getUserABTests:()=>(o.default.log("Load User AB Tests"),y(n(),e.storageService,r,"abTests")),doesDarkWebExist:()=>(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"darkWebMonitoring"),storeDarkWeb:t=>A(n(),e.storageService,r,t,"darkWebMonitoring"),getDarkWeb:()=>(o.default.log("Load Dark Web Monitoring"),y(n(),e.storageService,r,"darkWebMonitoring")),storeHealth:t=>{const o=(0,c.healthToStorage)(t);return A(n(),e.storageService,r,o,"health")},getHealth:async()=>{if(!await(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"health"))return null;const o=await y(n(),e.storageService,r,"health");return(0,c.healthFromStorage)(o)},storeIcons:async t=>{const o=(0,d.iconsToStorage)(t);return A(n(),e.storageService,r,o,"icons")},getIcons:async()=>{if(!await(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"icons"))return null;const o=await y(n(),e.storageService,r,"icons");return(0,d.iconsFromStorage)(o)},doesUserActivityExist:()=>(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"userActivity"),storeUserActivity:t=>A(n(),e.storageService,r,t,"userActivity"),getUserActivity:()=>y(n(),e.storageService,r,"userActivity"),doesVaultReportExist:()=>(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"vaultReport"),storeVaultReport:t=>A(n(),e.storageService,r,t,"vaultReport"),getVaultReport:()=>y(n(),e.storageService,r,"vaultReport"),storeEventStore:t=>A(n(),e.storageService,r,t,"eventStore"),getEventStore:async()=>await(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"eventStore")?y(n(),e.storageService,r,"eventStore"):null,storeHealthWasComputed:t=>A(n(),e.storageService,r,t,"healthWasComputed"),getHealthWasComputed:async()=>!!await(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"healthWasComputed")&&y(n(),e.storageService,r,"healthWasComputed"),storeRecoveryLocalKey:async t=>{const o=e.storageService;return v(o,r,t,"recoveryLocalKey")},getRecoveryLocalKey:async()=>{const o=(0,t.getStorageKey)(r,"recoveryLocalKey");return await m(e.storageService,"recoveryLocalKey",o)},storeRecoverySessionCredential:t=>A(n(),e.storageService,r,t,"recoverySessionCredential"),getRecoverySessionCredential:async()=>y(n(),e.storageService,r,"recoverySessionCredential"),doesRecoverySessionCredentialExist:async()=>(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"recoverySessionCredential"),cleanRecoverySetupData:async()=>{const o=e.storageService.getLocalStorage();return await(0,t.removeData)(o,r,"recoverySessionCredential"),await(0,t.removeData)(o,r,"recoveryLocalKey")},doesRecoveryLocalKeyExist:async()=>(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"recoveryLocalKey"),cleanRecoveryData:async()=>{const o=e.storageService.getLocalStorage();return await(0,t.removeData)(o,r,"recoveryData")},storeRecoveryData:async t=>{const o=e.storageService;return await v(o,r,t,"recoveryData")},getRecoveryData:async()=>{const o=(0,t.getStorageKey)(r,"recoveryData");return await m(e.storageService,"recoveryData",o)},doesRecoveryDataExist:()=>(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"recoveryData"),storeAnalyticsIds:t=>A(n(),e.storageService,r,t,"analyticsIds"),getAnalyticsIds:()=>((0,o.log)({message:"Load Analytics IDs"}),y(n(),e.storageService,r,"analyticsIds")),doesAnalyticsIdsExist:()=>((0,o.log)({message:"Check Analytics IDs existence"}),(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"analyticsIds")),loadUserAutofillCorrections:async()=>{(0,o.log)({message:"Load User Autofill Corrections"});if(await(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"userAutofillCorrections"))return y(n(),e.storageService,r,"userAutofillCorrections");if(await(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"userAutofillCorrectionsMigrated"))return{userAutofillCorrections:[],maverickRules:[]};const a=await(0,u.getLegacyUserAutofillCorrectionRules)(e.storageService);return await A(n(),e.storageService,r,a,"userAutofillCorrections"),await A(n(),e.storageService,r,!0,"userAutofillCorrectionsMigrated"),a},storeUserAutofillCorrections:t=>A(n(),e.storageService,r,t,"userAutofillCorrections"),storeRemoteFileContent:(t,o)=>A(n(),e.storageService,r,o,t),storeRemoteFileMeta:t=>A(n(),e.storageService,r,t,"remoteFileMeta"),getRemoteFileMeta:()=>y(n(),e.storageService,r,"remoteFileMeta"),getRemoteFileContent:t=>y(n(),e.storageService,r,t),cleanAllRemoteFiles:async()=>{const o=e.storageService.getLocalStorage();await(0,t.removeData)(o,r,"remoteFileMeta");for(const e of p.AUTOMATIC_FILE_UPDATE)await(0,t.removeData)(o,r,e);for(const e of Object.keys(p.MANUAL_FILE_UPDATE))await(0,t.removeData)(o,r,e)},cleanSingleFileStorage:async o=>{const a=e.storageService.getLocalStorage();await(0,t.removeData)(a,r,o);const i=await y(n(),e.storageService,r,"remoteFileMeta");return delete i[o],A(n(),e.storageService,r,i,"remoteFileMeta")},isRemoteFileMetaDataExist:()=>(0,t.isDataStored)(e.storageService.getLocalStorage(),r,"remoteFileMeta"),isRemoteFileContentExist:o=>(0,t.isDataStored)(e.storageService.getLocalStorage(),r,o)}}},64122:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeStorageService=t.CarbonLocalStorage=void 0;const o=r(31891);t.CarbonLocalStorage=class{constructor(e){this._storage=e}itemExists(e){return this._storage.itemExists(e)}readItem(e){return this._storage.readItem(e)}async writeItem(e,t){const r=await this.backupItem(e);try{await this._storage.writeItem(e,t),r&&await r.clean()}catch(e){o.Debugger.error("CarbonLocalStorage:writeItem error:",e),r?(o.Debugger.error("CarbonLocalStorage couldn't save data, reverting to backup version"),await r.restoreAndClean()):o.Debugger.error("CarbonLocalStorage couldn't save data and no backup version to restore")}}removeItem(e){return this._storage.removeItem(e)}async getSuitableBackupKey(e){const t=t=>e+"."+t;let r=1;for(;await this._storage.itemExists(t(r));)r++;return t(r)}async backupItem(e){if(!await this._storage.itemExists(e))return null;const t=await this.getSuitableBackupKey(e),r=await this._storage.readItem(e);await this._storage.writeItem(t,r);const o=this._storage;async function n(){return await o.removeItem(t)}return{clean:n,restoreAndClean:async function(){const r=await o.readItem(t);return await o.writeItem(e,r),await n()}}}};t.makeStorageService=()=>{let e=null;return{setInstance:t=>{e=t},getLocalStorage:()=>{if(!e)throw new Error("makeStorageService: You must call setInstance(instance: AsyncStorage) before getting the instance");return e}}}},78043:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeString=void 0;t.normalizeString=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()},67488:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getStyxApiCredentials=void 0;const o=r(99093),n=r(26615);t.getStyxApiCredentials=function(e,t){if(t.authenticationType!==o.ApiAuthType.App)return{type:o.ApiAuthType.None};const r={appKeys:(0,n.styxKeysSelector)(e)};return{type:o.ApiAuthType.App,...r}}},12671:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMakeStyxApiRequest=t.getEventsPayload=void 0;const o=r(88478),n=r(34251),a=r(99093),i=r(36109),s=r(10036),c=r(62550),d=r(40914),l=r(67488),u=r(48157),p=r(18017),S=r(14247),g=r(72844);t.getEventsPayload=function(e){return e.map((e=>JSON.stringify(e))).join("\n")},t.getMakeStyxApiRequest=function(e,t,r){return async(m,y)=>{const v={login:"",teamUuid:"",payload:"",...y||{}},A=(0,n.getMethodParams)(r,v.payload),E=(0,n.getAuthParams)(t,{login:v.login,teamUuid:v.teamUuid}),f="POST"===A.method?A.payload:"",h=(0,o.dashlaneServerDeltaTimestampSelector)(m.getState())||0,_=Math.round((0,i.getUnixTimestamp)()-h),T=(0,l.getStyxApiCredentials)(m.getState(),E),I=(0,o.platformInfoSelector)(m.getState()),C={"Content-Type":"application/x-jsonlines","X-TIMESTAMP":_.toString()},P={"dashlane-client-agent":(0,n.getApiClientAgentHeader)(I)},D=function(e){const t=e.getAccountInfo().login,r=t&&(0,u.isInternalTestUser)(t),o=(0,p.applicationBuildTypeSelector)(e.getState()),n=o===S.ApplicationBuildType.DEV||o===S.ApplicationBuildType.QA;return r||n}(m);D&&(C["X-DL-TEST"]="true");const O=Object.keys(P),b=await async function(e,t,r,n,s,c){if(r.type===a.ApiAuthType.None)return{};const d=(0,o.dashlaneServerDeltaTimestampSelector)(e.getState())||0,l=Math.round((0,i.getUnixTimestamp)()-d),u={pathname:t,method:"POST",rawBody:c,headers:n};return{Authorization:await(0,g.signRequest)({request:u,timestamp:l,credentials:r,headersToSign:s})}}(m,e,T,{...P,...C},O,f),w={...P,...b,...C},N=`${s.config.DASHLANE_STYX_HOST_WITH_SCHEME}${e}`,{data:R}=await function(e,t,r){const o={headers:r,validateStatus:n.validateStatus};switch(e.method){case a.ApiRequestMethod.GET:return(0,c.get)(t,o);case a.ApiRequestMethod.POST:return(0,c.post)(t,e.payload,o);default:(0,d.assertUnreachable)(e)}}(A,N,w);return R}}},89593:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SendTokenStatus=t.makeWSAuthentication=void 0;const o=r(49188),n="authentication";var a;function i(e){if("string"!=typeof e){const t=JSON.stringify(e);throw new Error(`unsupported_response - ${t}`)}}t.makeWSAuthentication=()=>({askServerToSendToken:e=>function(e){return(0,o._makeRequest)(n,7,"sendtoken",e,{responseType:"text"}).then((e=>{if(i(e),void 0===a[e])throw new Error(`unknown_status - ${e}`);return a[e]}))}(e),registerUki:e=>function(e){return(0,o._makeRequest)(n,7,"registeruki",e,{responseType:"text"}).then((e=>{if(i(e),"ERROR"===e)throw new Error("Error: Failed to register the UKI");return e}))}(e),getTemporaryToken:e=>function(e){return(0,o._makeRequest)(n,7,"getTemporaryToken",e).then((e=>(i(e.token),e.token)))}(e),validity:e=>function(e){return(0,o._makeRequest)(n,7,"validity",e,{responseType:"text"})}(e)}),function(e){e[e.ERROR=0]="ERROR",e[e.SUCCESS=1]="SUCCESS",e[e.OTP_NEEDED=2]="OTP_NEEDED",e[e.UNKNOWN_USER=3]="UNKNOWN_USER"}(a=t.SendTokenStatus||(t.SendTokenStatus={}))},57064:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSBackup=void 0;const o=r(49188),n="backup";t.makeWSBackup=()=>({latest:e=>a(e),upload:e=>i(e),unlock:e=>s(e),erase:e=>c(e)});const a=e=>(0,o._makeRequest)(n,12,"latest",Object.assign({},e,{sharingTimestamp:0})),i=e=>(0,o._makeRequest)(n,12,"upload",e),s=e=>(0,o._makeRequest)(n,12,"unlock",e),c=e=>(0,o._makeRequest)(n,12,"erase",e)},14050:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSBreaches=void 0;const o=r(49188);t.makeWSBreaches=()=>({get:e=>(0,o._makeRequest)("breaches",1,"get",e)})},40881:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSContactInfo=void 0;const o=r(49188),n="contactinfos";t.makeWSContactInfo=()=>({getContactInfo:e=>function(e){return(0,o._makeRequest)(n,1,"get",{login:e.login,uki:e.uki})}(e)})},55459:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSCountry=void 0;const o=r(49188),n="country";t.makeWSCountry=()=>({getCurrentCountry:(e={})=>function(e){return(0,o._makeRequest)(n,1,"get",e).then((e=>e.content))}(e)})},81948:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getWSDataLeaksEmailErrorCode=t.isWSDataLeaksEmailResponseSuccess=t.makeWSDataLeaks=void 0;const o=r(43728),n=r(73144),a=r(15424),i=r(10036),s="dataleak";function c(e){return S(s,1,"optin",e)}function d(e){return S(s,1,"optout",e)}function l(e){return S(s,1,"status",e)}function u(e){return S(s,1,"leaks",e)}function p(e){return S(s,1,"confirm",e)}async function S(e,t,r,s){const c=`${i.config.DASHLANE_WS_HOST_WITH_SCHEME}/${t}/${e}/${r}`,{data:d}=await(0,o.postDataToUrl)(c,s);return function(e,t){if(429===t.code||t.error&&-32600===t.error.code){throw new n.CarbonError(a.WSError,a.WSErrorCode.THROTTLED).addAdditionalInfo({webService:e})}return t}(c,d)}t.makeWSDataLeaks=()=>({confirm:p,optin:c,optout:d,status:l,leaks:u}),t.isWSDataLeaksEmailResponseSuccess=function(e){return 200===e.code},t.getWSDataLeaksEmailErrorCode=function(e){return e.content&&e.content.results.length>0?e.content.results[0].result:""}},1376:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSDevices=void 0;const o=r(49188),n="devices";t.makeWSDevices=()=>({list:e=>a(e),deactivate:e=>i(e),changeName:e=>s(e)});const a=e=>(0,o._makeRequest)(n,1,"list",{login:e.login,uki:e.uki}).then((e=>e.content)),i=e=>(0,o._makeRequest)(n,1,"deactivate",{login:e.login,uki:e.uki,deviceId:e.deviceId}),s=e=>(0,o._makeRequest)(n,1,"changename",{login:e.login,uki:e.uki,deviceId:e.deviceId,updatedName:e.updatedDeviceName})},15424:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WSError=t.WSErrorMessages=t.WSErrorCode=void 0,function(e){e[e.THROTTLED=0]="THROTTLED",e[e.REQUEST_FAILED=1]="REQUEST_FAILED"}(r=t.WSErrorCode||(t.WSErrorCode={})),t.WSErrorMessages={[r.THROTTLED]:"THROTTLED",[r.REQUEST_FAILED]:"WebService responded with error code in payload"},t.WSError={codes:r,name:"WSError",messages:t.WSErrorMessages}},39328:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSFeatures=void 0;const o=r(49188),n="features";t.makeWSFeatures=()=>({fetchFeatures:e=>function(e){return(0,o._makeRequest)(n,1,"getForUser",e).then((e=>e.content))}(e)})},21715:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSIconCrawler=void 0;const o=r(49188);t.makeWSIconCrawler=()=>({getIcons:n});const n=async e=>(0,o._makeRequest)("iconcrawler",2,"getIcons",{domainsInfo:e})},30136:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDirectPayment=t.makeWSPremium=void 0;const o=r(49188),n="premium";t.makeWSPremium=()=>({status:e=>function(e){return(0,o._makeRequest)(n,3,"status",{login:e.login,uki:e.uki,billingInformation:e.billingInformation,spaces:e.spaces,autoRenewal:e.autoRenewal,familyInformation:e.familyInformation,previousPlan:e.previousPlan,needsAutoRenewalFailed:e.needsAutoRenewalFailed,teamInformation:!1,capabilities:!0}).then((e=>{if(!e.success)throw new Error("failed fetching premium status");var t;return e.hasOwnProperty("billingInformation")&&(e.billingInformation=(t=e.billingInformation)?{cardExpirationYear:Number(t.card_exp_year),cardExpirationMonth:Number(t.card_exp_month),cardLast4Digits:Number(t.card_last4),cardType:t.card_type}:void 0),e}))}(e),setAutoRenewal:e=>function(e){return(0,o._makeRequest)(n,3,"setAutoRenewal",{login:e.login,uki:e.uki,enabled:e.enabled})}(e),updateCardToken:e=>function(e){return(0,o._makeRequest)(n,3,"updateCardToken",{login:e.login,uki:e.uki,tokenId:e.tokenId,stripeAccount:e.stripeAccount})}(e),getABTestingVersionDetails:e=>function(e){return(0,o._makeRequest)(n,3,"getABTestingVersionDetails",e)}(e),getSubscriptionCode:e=>function({login:e,uki:t}){return(0,o._makeRequest)(n,3,"getSubscriptionCode",{login:e,uki:t})}(e)}),t.getDirectPayment=function(e){return(0,o._makeRequest)(n,3,"directpayment",{login:e})}},3341:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSQA=void 0;const o=r(49188);t.makeWSQA=()=>({tokens:e=>function(e){return(0,o._makeRequest)("qa",1,"tokens",e)}(e)})},10070:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSRecovery=void 0;const o=r(49188),n="recovery";t.makeWSRecovery=()=>({getSetupRequisites:e=>async function(e){return(0,o._makeRequest)(n,1,"getSetupRequisites",e)}(e),setRecoveryClientKeys:e=>async function(e){return(0,o._makeRequest)(n,1,"setRecoveryClientKeys",e)}(e),request:e=>async function(e){return(0,o._makeRequest)(n,1,"request",e)}(e),getPendingRequests:e=>async function(e){const{content:t}=await(0,o._makeRequest)(n,1,"getPendingRequests",e);return t}(e),acceptRequest:e=>async function(e){return(0,o._makeRequest)(n,1,"accept",e)}(e),refuseRequest:e=>async function(e){return(0,o._makeRequest)(n,1,"refuse",e)}(e),cancelRequest:e=>async function(e){return(0,o._makeRequest)(n,1,"cancel",e)}(e)})},16003:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSSecureFile=void 0;const o=r(49188),n="securefile";function a(e){return(0,o._makeRequest)(n,1,"getDownloadLink",e)}function i(e){return(0,o._makeRequest)(n,1,"delete",e)}function s(e){return(0,o._makeRequest)(n,1,"getUploadLink",e)}function c(e){return(0,o._makeRequest)(n,1,"commit",e)}t.makeWSSecureFile=()=>({getDownloadLink:a,getUploadLink:s,commit:c,delete:i})},96502:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setTeamSettings=t.getTeamSettings=t.makeWSSettings=void 0;const o=r(49188),n="teamPlans";function a(e){return(0,o._makeRequest)(n,1,"status",e)}function i(e){return(0,o._makeRequest)(n,1,"editSettings",e)}t.makeWSSettings=()=>({getTeamSettings:e=>a(e),setTeamSettings:e=>i(e)}),t.getTeamSettings=a,t.setTeamSettings=i},69838:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeSharingWS=t.get=void 0;const o=r(49188);function n(e,t,r){const n={login:e,uki:t,action:JSON.stringify(r)};return(0,o._makeRequest)("sharing",2,"get",n).then((({content:e})=>e))}t.get=n;t.makeSharingWS=()=>({get:(e,t,r)=>n(e,t,r)})},78756:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemWS=void 0;const o=r(49188);t.makeItemWS=()=>({updateItem:(e,t,r)=>function(e,t,r){const n={login:e,uki:t,action:JSON.stringify(r)};return(0,o._makeRequest)("sharing",2,"performItemGroupAction",n).then((e=>{const t=e.content,r=t.itemErrors;if(r&&r.length>0)throw new Error(r[0].message);return t}))}(e,t,r)})},69245:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemGroupWS=void 0;const o=r(49188);function n(e,t,r){const n={login:e,uki:t,action:JSON.stringify(r)};return(0,o._makeRequest)("sharing",2,"performItemGroupAction",n).then((e=>{const t=e.content,r=t.itemGroupErrors;if(r&&r.length>0)throw new Error(r[0].message);const{itemGroups:o,items:n}=t;return{itemGroups:o,items:n}}))}t.makeItemGroupWS=()=>({createSpecialItemGroup:(e,t,r)=>n(e,t,r).then((({itemGroups:e})=>e&&e[0])),createItemGroup:n,deleteGroup:(e,t,r)=>n(e,t,r),addItems:(e,t,r)=>n(e,t,r),updateItem:(e,t,r)=>n(e,t,r),acceptItemGroup:n,refuseItemGroup:n,inviteItemGroupMembers:n,revokeItemGroupMembers:n,updateItemGroupMembers:n})},51768:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserGroupWS=void 0;const o=r(49188);function n(e,t,r){const n={login:e,uki:t,action:JSON.stringify(r)};return(0,o._makeRequest)("userGroup",1,"performUserGroupAction",n).then((e=>{const{itemGroups:t,items:r,userGroupErrors:o,userGroups:n}=e.content;if(o&&o.length>0)throw new Error(o[0].message);return{itemGroups:t,items:r,userGroups:n}}))}t.makeUserGroupWS=()=>({create:(e,t,r)=>n(e,t,r),delete:(e,t,r)=>n(e,t,r),rename:(e,t,r)=>n(e,t,r),invite:(e,t,r)=>n(e,t,r),revoke:(e,t,r)=>n(e,t,r),update:(e,t,r)=>n(e,t,r),accept:(e,t,r)=>n(e,t,r),refuse:(e,t,r)=>n(e,t,r)})},66990:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckChangePasswordStatus=t.makeWSStrongAuth=void 0;const o=r(49188),n=r(31891),a="strongauth";var i;t.makeWSStrongAuth=()=>({checkChangeMasterPassword:e=>function({login:e,otp:t,deviceId:r}){return(0,o._makeRequest)(a,3,"getServerKey",{login:e,otp:t,deviceID:r,isMxAware:!0}).then((e=>{if(n.default.log("checkChangeMasterPassword: "+(e?JSON.stringify(e):"response null")),!e||!e.message)throw new Error("Unknown response from server");if(void 0===i[e.message])throw new Error(`unknown_message - ${JSON.stringify(e)}`);return{status:i[e.message],content:e.content}}))}(e)}),function(e){e[e.Unauthorized=0]="Unauthorized",e[e.OK=1]="OK"}(i=t.CheckChangePasswordStatus||(t.CheckChangePasswordStatus={}))},69716:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSTeamPlans=void 0;const o=r(49188),n="teamPlans";t.makeWSTeamPlans=()=>({findUserGroups:e=>function(e){return(0,o._makeRequest)(n,1,"findUserGroups",e)}(e),getMembers:e=>function(e){return(0,o._makeRequest)(n,1,"members",e)}(e),proposeMembers:e=>function(e){return(0,o._makeRequest)(n,1,"proposeMembers",e)}(e),acceptTeam:e=>function(e){return(0,o._makeRequest)(n,1,"acceptTeam",e)}(e),addTeamAdmin:e=>function(e){return(0,o._makeRequest)(n,1,"addTeamCaptain",e)}(e),removeTeamAdmin:e=>function(e){return(0,o._makeRequest)(n,1,"removeTeamCaptain",e)}(e),registerFreeTrial:e=>function(e){return(0,o._makeRequest)(n,1,"registerFreeTrial",e)}(e),confirmFreeTrial:e=>function(e){return(0,o._makeRequest)(n,1,"confirmFreeTrial",e)}(e),getDirectorySyncRequest:e=>function(e){return(0,o._makeRequest)(n,1,"getDirectorySyncRequest",e)}(e),updateDirectorySyncRequestStatus:e=>function(e){return(0,o._makeRequest)(n,1,"updateDirectorySyncRequestStatus",e)}(e),spaceDeleted:e=>function(e){return(0,o._makeRequest)(n,1,"spaceDeleted",e)}(e),getTeamInfoLog:e=>function(e){return(0,o._makeRequest)(n,1,"getTeamInfoLog",e)}(e)})},85492:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.makeWSUserActivity=void 0;const o=r(49188);async function n(e){return await(0,o._makeRequest)("useractivity",2,"create",e)}t.makeWSUserActivity=()=>({create:n}),t.create=n},10196:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSUserAlias=void 0;const o=r(49188),n="userAlias";t.makeWSUserAlias=()=>({findUsersByAliases:e=>function(e){return(0,o._makeRequest)(n,1,"findUsers",{login:e.login,uki:e.uki,aliases:e.aliases}).then((e=>e.content))}(e)})},20550:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isWSResponseSuccess=void 0,t.isWSResponseSuccess=function(e){return 200===e.code}},37771:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSService=void 0;const o=r(89593),n=r(40881),a=r(55459),i=r(81948),s=r(1376),c=r(39328),d=r(30136),l=r(10070),u=r(66990),p=r(69716),S=r(10196),g=r(96502),m=r(69245),y=r(3341),v=r(69838),A=r(57064),E=r(14050),f=r(51768),h=r(85492),_=r(21715),T=r(16003);t.makeWSService=()=>({authentication:(0,o.makeWSAuthentication)(),backup:(0,A.makeWSBackup)(),breaches:(0,E.makeWSBreaches)(),contactInfo:(0,n.makeWSContactInfo)(),country:(0,a.makeWSCountry)(),dataleaks:(0,i.makeWSDataLeaks)(),devices:(0,s.makeWSDevices)(),features:(0,c.makeWSFeatures)(),iconCrawler:(0,_.makeWSIconCrawler)(),itemGroup:(0,m.makeItemGroupWS)(),premium:(0,d.makeWSPremium)(),recovery:(0,l.makeWSRecovery)(),settings:(0,g.makeWSSettings)(),strongAuth:(0,u.makeWSStrongAuth)(),teamPlans:(0,p.makeWSTeamPlans)(),userAlias:(0,S.makeWSUserAlias)(),sharing:(0,v.makeSharingWS)(),userGroup:(0,f.makeUserGroupWS)(),qa:(0,y.makeWSQA)(),userActivity:(0,h.makeWSUserActivity)(),secureFile:(0,T.makeWSSecureFile)()})},49188:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._makeRequest=t.WsError=void 0;const o=r(43728),n=r(73144),a=r(15424),i=r(10036);!function(e){e[e.THROTTLED=-999]="THROTTLED"}(t.WsError||(t.WsError={})),t._makeRequest=function(e,t,r,s,c){const d=`${i.config.DASHLANE_WS_HOST_WITH_SCHEME}/${t}/${e}/${r}`;return(0,o.postDataToUrl)(d,s,c).then((e=>{const t="string"==typeof e?e:e.data;return function(e,t){var r,o;if("string"==typeof t)return t;if(429===t.code||t.error&&-32600===t.error.code){throw new n.CarbonError(a.WSError,a.WSErrorCode.THROTTLED).addAdditionalInfo({webService:e})}if("code"in t&&200!==t.code||"success"in t&&!t.success||"error"in t&&t.error){throw new n.CarbonError(a.WSError,a.WSErrorCode.REQUEST_FAILED).addAdditionalInfo({webService:e,message:t.message,webServiceSubMessage:(null===(r=t.content)||void 0===r?void 0:r.message)||(null===(o=t.content)||void 0===o?void 0:o.error)||t.content,code:t.code})}return t}(d,t)}))}},47729:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.freeWorker=t.getWorker=t.getWasmPort=t.setWasmPort=t.getWorkerPath=t.setWorkerPath=t.setWorkersPath=void 0;const o=r(11814);let n={};const a={};t.setWorkersPath=function(e){n=e},t.setWorkerPath=function(e,t){n[e]=t},t.getWorkerPath=function(e){return n[e]},t.setWasmPort=function(e){a.wasmPort=e},t.getWasmPort=function(){return a.wasmPort};const i=[],s=[];function c(e){const t=new Worker(e);return i.push(t),t}t.getWorker=function(e){return new Promise((t=>{if(i.length<function(){const e=o.navigator.getNavigator();return e&&e.hardwareConcurrency?e.hardwareConcurrency:4}()){t(c(e))}else s.push({resolve:t,path:e})}))},t.freeWorker=function(e){const t=i.indexOf(e);if(t<0)console.error("freeWorker: trying to terminate a worker that does not exist");else if(e.terminate(),i.splice(t,1),s.length>0){const{resolve:e,path:t}=s.shift();e(c(t))}}},21515:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.KWXMLError=t.KWXMLErrorMessages=t.KWXMLErrorCode=void 0,function(e){e[e.PARSING_FAILED=0]="PARSING_FAILED"}(r=t.KWXMLErrorCode||(t.KWXMLErrorCode={})),t.KWXMLErrorMessages={[r.PARSING_FAILED]:"Failed to parse Dashlane XML"},t.KWXMLError={codes:r,name:"KWXMLError",messages:t.KWXMLErrorMessages}},89422:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findAllKWXMLElementsOfType=t.removeNamespace=t.getDashlaneXml=t.parseDashlaneXml=void 0;const o=r(28060),n=r(44015),a=r(73144),i=r(21515),s=r(69748),c=r(71693),d=r(52858);function l(e){const t={KWAuthentifiant:d.fixCredentialTypesFromStore,KWSecureNote:d.fixNoteTypesFromStore,KWSecurityBreach:d.fixBreachTypesFromStore,KWSettingsManagerApp:c.fixPersonalSettingTypes.fromStore};let r=(0,o.compose)((0,o.reject)(o.isNil),(0,o.omit)((0,o.defaultTo)([],{KWAuthentifiant:["domainIcon"],KWSettingsManagerApp:["kwType","LastBackupTime","Id"]}[e.kwType])))(function(e,t){function r(t){return(0,s.default)(t)?Object.keys(t).reduce(((n,a)=>{const i=e[a]||a,c=t[a];return Array.isArray(c)?n[i]=c.map((0,o.unary)(r)):(0,s.default)(c)?n[i]=r(c):n[i]=c,n}),{}):t}return r(t)}({kwType:"__type__"},e));return t[e.kwType]&&(r=t[e.kwType](r)),r}function u(e){if(e.includes(":")){const t=e.indexOf(":");return e.substring(t+1,e.length)}return e}t.parseDashlaneXml=async function(e){try{return await new Promise(((t,r)=>{(0,n.parseXml)(((e,o)=>e?r(e):t(o)),e,{fixType:!1})}))}catch(e){throw new a.CarbonError(i.KWXMLError,i.KWXMLErrorCode.PARSING_FAILED).addAdditionalInfo({libError:`${e}`})}},t.getDashlaneXml=function(e){const t=Array.isArray(e)?(0,o.map)(l,e):l(e);return(0,n.toXml)(t,{pretty:!1,allowEmpty:!0})},t.removeNamespace=u,t.findAllKWXMLElementsOfType=function e(t,r,o=[]){if(u(t.__type__)===r&&o.push(t),t.__children__&&t.__children__.length>0)for(let a=0;a<t.__children__.length;a++){const i=t.__children__[a];(0,n.isKWXMLElement)(i)&&e(i,r,o)}return o}},17496:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(21999),n=r(32997),a=r(98678),i=r(28277),s=r(20128),c=r(57783);t.config={commands:{abortDeviceLimitFlow:{handler:c.abortDeviceLimitFlow},loginViaSSO:{handler:o.loginViaSSO},unlinkPreviousDevice:{handler:a.unlinkPreviousDevice},unlinkMultipleDevices:{handler:i.unlinkMultipleDevices}},queries:{getLoginDeviceLimitFlow:{selector:n.viewedLoginDeviceLimitFlowSelector}},liveQueries:{liveLoginDeviceLimitFlow:{operator:s.loginDeviceLimitFlowView$}}}},26601:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.LoginDeviceLimitFlowStage=t.USER_STILL_OVERFLOWING=t.AuthenticationCode=t.SsoMigrationServerMethod=t.LoginViaSsoCode=void 0;var a=r(53092);Object.defineProperty(t,"LoginViaSsoCode",{enumerable:!0,get:function(){return a.LoginViaSsoCode}}),Object.defineProperty(t,"SsoMigrationServerMethod",{enumerable:!0,get:function(){return a.SsoMigrationServerMethod}});var i=r(1064);Object.defineProperty(t,"AuthenticationCode",{enumerable:!0,get:function(){return i.AuthenticationCode}});var s=r(59537);Object.defineProperty(t,"USER_STILL_OVERFLOWING",{enumerable:!0,get:function(){return s.USER_STILL_OVERFLOWING}});var c=r(70728);Object.defineProperty(t,"LoginDeviceLimitFlowStage",{enumerable:!0,get:function(){return c.LoginDeviceLimitFlowStage}}),n(r(43856),t),n(r(48286),t),n(r(66121),t),n(r(59687),t)},20060:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkMultipleDevicesErrorReached=t.multipleDevicesLimitStillReached=t.oneDeviceLimitStillReached=t.sessionOpenedAfterDeviceLimitRemoval=t.refreshDeviceLimitStatusFailed=t.deviceLimitRemoved=t.deviceLimitStatusUpdated=t.unlinkingSucceeded=t.unlinkingFailed=t.unlinkingMultipleDevicesRequested=t.unlinkPreviousDeviceRequested=t.multipleDevicesLimitReached=t.oneDeviceLimitReached=t.UNLINK_MULTIPLE_DEVICES_ERROR=t.UNLINKING_SUCCEEDED=t.UNLINKING_FAILED=t.UNLINK_MULTIPLE_DEVICES_REQUESTED=t.UNLINK_PREVIOUS_DEVICE_REQUESTED=t.SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL=t.REFRESH_DEVICE_LIMIT_STATUS_FAILED=t.MULTIPLE_DEVICES_LIMIT_STILL_REACHED=t.MULTIPLE_DEVICES_LIMIT_REACHED=t.ONE_DEVICE_LIMIT_STILL_REACHED=t.ONE_DEVICE_LIMIT_REACHED=t.DEVICE_LIMIT_STATUS_UPDATED=t.DEVICE_LIMIT_REMOVED=void 0,t.DEVICE_LIMIT_REMOVED="DEVICE_LIMIT_REMOVED",t.DEVICE_LIMIT_STATUS_UPDATED="DEVICE_LIMIT_STATUS_UPDATED",t.ONE_DEVICE_LIMIT_REACHED="ONE_DEVICE_LIMIT_REACHED",t.ONE_DEVICE_LIMIT_STILL_REACHED="ONE_DEVICE_LIMIT_STILL_REACHED",t.MULTIPLE_DEVICES_LIMIT_REACHED="MULTIPLE_DEVICES_LIMIT_REACHED",t.MULTIPLE_DEVICES_LIMIT_STILL_REACHED="MULTIPLE_DEVICES_LIMIT_STILL_REACHED",t.REFRESH_DEVICE_LIMIT_STATUS_FAILED="REFRESH_DEVICE_LIMIT_STATUS_FAILED",t.SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL="SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL",t.UNLINK_PREVIOUS_DEVICE_REQUESTED="UNLINK_PREVIOUS_DEVICE_REQUESTED",t.UNLINK_MULTIPLE_DEVICES_REQUESTED="UNLINK_MULTIPLE_DEVICES_REQUESTED",t.UNLINKING_FAILED="UNLINKING_FAILED",t.UNLINKING_SUCCEEDED="UNLINKING_SUCCEEDED",t.UNLINK_MULTIPLE_DEVICES_ERROR="UNLINK_MULTIPLE_DEVICES_ERROR";t.oneDeviceLimitReached=e=>({type:t.ONE_DEVICE_LIMIT_REACHED,deviceLimitStatus:e.deviceLimitStatus,login:e.login,subscriptionCode:e.subscriptionCode});t.multipleDevicesLimitReached=e=>({type:t.MULTIPLE_DEVICES_LIMIT_REACHED,deviceLimitStatus:e.deviceLimitStatus,login:e.login,subscriptionCode:e.subscriptionCode});t.unlinkPreviousDeviceRequested=()=>({type:t.UNLINK_PREVIOUS_DEVICE_REQUESTED});t.unlinkingMultipleDevicesRequested=()=>({type:t.UNLINK_MULTIPLE_DEVICES_REQUESTED});t.unlinkingFailed=()=>({type:t.UNLINKING_FAILED});t.unlinkingSucceeded=()=>({type:t.UNLINKING_SUCCEEDED});t.deviceLimitStatusUpdated=()=>({type:t.DEVICE_LIMIT_STATUS_UPDATED});t.deviceLimitRemoved=()=>({type:t.DEVICE_LIMIT_REMOVED});t.refreshDeviceLimitStatusFailed=()=>({type:t.REFRESH_DEVICE_LIMIT_STATUS_FAILED});t.sessionOpenedAfterDeviceLimitRemoval=()=>({type:t.SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL});t.oneDeviceLimitStillReached=e=>({type:t.ONE_DEVICE_LIMIT_STILL_REACHED,updatedDeviceLimitStatus:e.updatedDeviceLimitStatus});t.multipleDevicesLimitStillReached=e=>({type:t.MULTIPLE_DEVICES_LIMIT_STILL_REACHED,updatedDeviceLimitStatus:e.updatedDeviceLimitStatus});t.unlinkMultipleDevicesErrorReached=e=>({type:t.UNLINK_MULTIPLE_DEVICES_ERROR,retryPayload:e.retryPayload})},39712:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyLoginDeviceLimitFlowState=void 0;const o=r(20060),n=r(70728),a=r(62393),i=r(40914),s=(e,t)=>t.type===o.ONE_DEVICE_LIMIT_REACHED?(0,a.atOneDeviceLimitReachedStage)({login:t.login,subscriptionCode:t.subscriptionCode,deviceLimitStatus:t.deviceLimitStatus}):t.type===o.MULTIPLE_DEVICES_LIMIT_REACHED?(0,a.atMultipleDevicesLimitReachedStage)({login:t.login,subscriptionCode:t.subscriptionCode,deviceLimitStatus:t.deviceLimitStatus}):e,c=(e,t)=>{switch(t.type){case o.UNLINK_PREVIOUS_DEVICE_REQUESTED:return(0,a.atUnlinkingAndOpeningSessionStage)(e);case o.DEVICE_LIMIT_STATUS_UPDATED:return(0,a.atRefreshingDeviceLimitStatusStage)(e)}return e},d=(e,t)=>{switch(t.type){case o.UNLINK_MULTIPLE_DEVICES_REQUESTED:return(0,a.atUnlinkingAndOpeningSessionStage)(e);case o.DEVICE_LIMIT_STATUS_UPDATED:return(0,a.atRefreshingDeviceLimitStatusStage)(e)}return e},l=(e,t)=>{switch(t.type){case o.UNLINK_MULTIPLE_DEVICES_ERROR:return(0,a.atUnlinkMultipleDevicesErrorStage)({...e,retryPayload:t.retryPayload});case o.UNLINK_MULTIPLE_DEVICES_REQUESTED:return(0,a.atUnlinkingAndOpeningSessionStage)(e);case o.UNLINKING_SUCCEEDED:return(0,a.atDeviceLimitDoneStage)(e)}return e},u=e=>{const{deviceLimitStatus:t}=e;switch(t._tag){case"limitedToOneDevice":return(0,a.atOneDeviceLimitReachedStage)({...e,deviceLimitStatus:t});case"limitedToMultipleDevices":return(0,a.atMultipleDevicesLimitReachedStage)({...e,deviceLimitStatus:t});default:(0,i.assertUnreachable)(t)}},p=(e,t)=>{switch(t.type){case o.ONE_DEVICE_LIMIT_STILL_REACHED:return(0,a.atOneDeviceLimitReachedStage)({...e,deviceLimitStatus:t.updatedDeviceLimitStatus});case o.MULTIPLE_DEVICES_LIMIT_STILL_REACHED:return(0,a.atMultipleDevicesLimitReachedStage)({...e,deviceLimitStatus:t.updatedDeviceLimitStatus});case o.REFRESH_DEVICE_LIMIT_STATUS_FAILED:return u(e);case o.DEVICE_LIMIT_REMOVED:return(0,a.atOpeningSessionAfterDeviceLimitRemovalStage)(e)}return e},S=(e,t)=>{switch(t.type){case o.UNLINKING_SUCCEEDED:return(0,a.atDeviceLimitDoneStage)(e);case o.UNLINKING_FAILED:return u(e);case o.UNLINK_MULTIPLE_DEVICES_ERROR:return(0,a.atUnlinkMultipleDevicesErrorStage)({...e,retryPayload:t.retryPayload})}return e};function g(){return{flow:null}}t.default=(e={flow:null},t)=>{if(null===e.flow)return{flow:s(null,t)};switch(e.flow.name){case n.LoginDeviceLimitFlowStage.OneDeviceLimitReached:return{flow:c(e.flow,t)};case n.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError:return{flow:l(e.flow,t)};case n.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached:return{flow:d(e.flow,t)};case n.LoginDeviceLimitFlowStage.RefreshingDeviceLimitStatus:return{flow:p(e.flow,t)};case n.LoginDeviceLimitFlowStage.UnlinkingAndOpeningSession:return{flow:S(e.flow,t)};case n.LoginDeviceLimitFlowStage.OpeningSessionAfterDeviceLimitRemoval:case n.LoginDeviceLimitFlowStage.DeviceLimitDone:return e;default:return(0,i.assertUnreachable)(e.flow)}},t.getEmptyLoginDeviceLimitFlowState=g},57783:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.abortDeviceLimitFlow=void 0;const o=r(35410),n=r(74453),a=r(59125);t.abortDeviceLimitFlow=async function(e){const{sessionService:t}=e;try{return await t.getInstance().user.closeSession(),{success:!0}}catch(e){const t=(0,n.augmentDeviceLimitError)(e,"abortDeviceLimitFlow");return(0,a.sendExceptionLog)({error:t}),{success:!1,error:{code:o.AbortDeviceLimitFlowError.UnexpectedError}}}}},83555:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPairingGroupDevices=t.findMyPairingGroup=t.isDevicePartOfPairingGroup=t.isDesktopPlatform=void 0;const o=r(90823);t.isDesktopPlatform=e=>e===o.Platform.DesktopLegacyWindows||e===o.Platform.DesktopLegacyMacOS||e===o.Platform.DesktopUWP;t.isDevicePartOfPairingGroup=(e,t)=>t.devices.includes(e.deviceId);t.findMyPairingGroup=(e,t)=>e.find((e=>e.pairingGroupUUID===t));t.getPairingGroupDevices=(e,t)=>t.filter((({deviceId:t})=>e.devices.includes(t)))},34220:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeDeviceInfoService=void 0;const o=r(28060),n=r(15876),a=r(90823),i={[a.Platform.Android]:"server_android",[a.Platform.CarbonSimulator]:"server_carbon_simulator",[a.Platform.CarbonTests]:"server_carbon_tests",[a.Platform.CarbonUnknown]:"server_carbon_unknown",[a.Platform.DesktopLegacyMacOS]:"server_macosx",[a.Platform.DesktopLegacyWindows]:"server_win",[a.Platform.DesktopUWP]:"desktop_win",[a.Platform.IPad]:"server_ipad",[a.Platform.IPhone]:"server_iphone",[a.Platform.IPod]:"server_ipod",[a.Platform.StandaloneExtension]:"server_standalone",[a.Platform.TeamAdminConsole]:"server_tac",[a.Platform.WebApp]:"server_leeloo",[a.Platform.WebAppDev]:"server_leeloo_dev"},s=(0,o.invertObj)(i),c=e=>{return{deviceId:e.deviceId,deviceName:e.deviceName,devicePlatform:(t=e.devicePlatform,s[t]),lastActivityDate:e.lastActivityDateUnix,isBucketOwner:e.isBucketOwner,temporary:e.temporary};var t},d=e=>({pairingGroupUUID:e.pairingGroupUUID,devices:e.devices,isBucketOwner:e.isBucketOwner});t.makeDeviceInfoService=e=>({getDevicesInfo:t=>(async(e,t)=>{const r=await n.listDevices(e,t);if(n.isApiError(r))throw new Error(`Failed to get devices: ${r.message}`);return{devices:r.devices.map(c),pairingGroups:r.pairingGroups.map(d)}})(e,t)})},90823:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Platform=void 0,function(e){e[e.Android=0]="Android",e[e.CarbonSimulator=1]="CarbonSimulator",e[e.CarbonTests=2]="CarbonTests",e[e.CarbonUnknown=3]="CarbonUnknown",e[e.DesktopLegacyMacOS=4]="DesktopLegacyMacOS",e[e.DesktopLegacyWindows=5]="DesktopLegacyWindows",e[e.DesktopUWP=6]="DesktopUWP",e[e.IPad=7]="IPad",e[e.IPhone=8]="IPhone",e[e.IPod=9]="IPod",e[e.StandaloneExtension=10]="StandaloneExtension",e[e.TeamAdminConsole=11]="TeamAdminConsole",e[e.WebApp=12]="WebApp",e[e.WebAppDev=13]="WebAppDev"}(t.Platform||(t.Platform={}))},6342:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toPlatformView=void 0;const o=r(90823),n=r(48286),a={[o.Platform.Android]:n.PlatformView.Android,[o.Platform.CarbonSimulator]:n.PlatformView.Other,[o.Platform.CarbonTests]:n.PlatformView.Other,[o.Platform.CarbonUnknown]:n.PlatformView.Other,[o.Platform.DesktopLegacyMacOS]:n.PlatformView.DesktopMacOS,[o.Platform.DesktopLegacyWindows]:n.PlatformView.DesktopWindows,[o.Platform.DesktopUWP]:n.PlatformView.DesktopWindows,[o.Platform.IPad]:n.PlatformView.IPad,[o.Platform.IPhone]:n.PlatformView.IPhone,[o.Platform.IPod]:n.PlatformView.IPod,[o.Platform.StandaloneExtension]:n.PlatformView.StandaloneExtension,[o.Platform.TeamAdminConsole]:n.PlatformView.TeamAdminConsole,[o.Platform.WebApp]:n.PlatformView.WebApp,[o.Platform.WebAppDev]:n.PlatformView.WebApp};t.toPlatformView=e=>a[e]},48286:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformView=void 0,function(e){e.Android="android",e.DesktopMacOS="macosx",e.DesktopWindows="windows",e.IPad="ipad",e.IPhone="iphone",e.IPod="ipod",e.Other="other",e.StandaloneExtension="saex",e.TeamAdminConsole="tac",e.WebApp="webapp"}(t.PlatformView||(t.PlatformView={}))},41524:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceLimitCapabilityEventBus=void 0;t.DeviceLimitCapabilityEventBus=class{constructor(e,t){this.services=e,this.connector=t}register(e){const t=[];return Object.keys(e).forEach((r=>{const{handler:o}=e[r],n=this.connector[r].on((()=>o(this.services)));t.push(n)})),()=>{t.forEach((e=>e()))}}}},66128:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceLimitCapabilityEvents=void 0;const o=r(72931);t.DeviceLimitCapabilityEvents={deviceLimitCapabilityUpdated:(0,o.slot)()}},24158:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceLimitFlowEventsManager=t.DeviceLimitFlowEventsManager=void 0;const o=r(28354),n=r(20128),a=r(3343);class i{constructor(e){this.registrations=[];e.getState$().pipe((0,n.loginDeviceLimitFlow$)(),(0,a.pairwise)()).subscribe(this.onTransition.bind(this))}addEventListener(e,t){const r=(0,o.v4)();return this.registrations.push({id:r,event:e,listener:t}),r}removeTransitionEventListener(e){this.registrations=this.registrations.filter((t=>t.id!==e))}onTransition([e,t]){this.registrations.forEach((({event:r,listener:o})=>{("exit"===r.type&&r.from===(null==e?void 0:e.name)||"entry"===r.type&&r.to===(null==t?void 0:t.name))&&o(r)}))}}let s;t.DeviceLimitFlowEventsManager=i;t.getDeviceLimitFlowEventsManager=e=>(s||(s=new i(e)),s)},62393:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.atUnlinkMultipleDevicesErrorStage=t.atDeviceLimitDoneStage=t.atRefreshingDeviceLimitStatusStage=t.atOpeningSessionAfterDeviceLimitRemovalStage=t.atUnlinkingAndOpeningSessionStage=t.atMultipleDevicesLimitReachedStage=t.atOneDeviceLimitReachedStage=void 0;const o=r(70728);t.atOneDeviceLimitReachedStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.OneDeviceLimitReached});t.atMultipleDevicesLimitReachedStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached});t.atUnlinkingAndOpeningSessionStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.UnlinkingAndOpeningSession});t.atOpeningSessionAfterDeviceLimitRemovalStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.OpeningSessionAfterDeviceLimitRemoval});t.atRefreshingDeviceLimitStatusStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.RefreshingDeviceLimitStatus});t.atDeviceLimitDoneStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.DeviceLimitDone});t.atUnlinkMultipleDevicesErrorStage=e=>({...e,deviceLimitStatus:e.deviceLimitStatus,name:o.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError})},20128:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginDeviceLimitFlowView$=t.loginDeviceLimitFlow$=void 0;const o=r(18948),n=r(3343),a=r(32997);t.loginDeviceLimitFlow$=()=>(0,o.pipe)((0,n.map)(a.loginDeviceLimitFlowSelector),(0,n.distinctUntilChanged)(((e,t)=>(null==e?void 0:e.name)===(null==t?void 0:t.name))));t.loginDeviceLimitFlowView$=()=>(0,o.pipe)((0,n.map)(a.viewedLoginDeviceLimitFlowSelector),(0,n.distinctUntilChanged)(((e,t)=>(null==e?void 0:e.name)===(null==t?void 0:t.name))))},32997:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewedLoginDeviceLimitFlowSelector=t.loginDeviceLimitFlowSelector=void 0;const o=r(18311);t.loginDeviceLimitFlowSelector=e=>e.userSession.loginDeviceLimitFlow.flow;t.viewedLoginDeviceLimitFlowSelector=e=>{const r=(0,t.loginDeviceLimitFlowSelector)(e);return r?(0,o.toLoginDeviceLimitFlowView)(r):null}},70728:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoginDeviceLimitFlowStage=void 0,function(e){e.OneDeviceLimitReached="OneDeviceLimitReached",e.MultipleDevicesLimitReached="MultipleDevicesLimitReached",e.UnlinkingAndOpeningSession="UnlinkingAndOpeningSession",e.UnlinkingMultipleDevicesError="UnlinkingMultipleDevicesError",e.RefreshingDeviceLimitStatus="RefreshingDeviceLimitStatus",e.OpeningSessionAfterDeviceLimitRemoval="OpeningSessionAfterDeviceLimitRemoval",e.DeviceLimitDone="DeviceLimitDone"}(t.LoginDeviceLimitFlowStage||(t.LoginDeviceLimitFlowStage={}))},18311:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toLoginDeviceLimitFlowView=t.toMultipleDevicesLimitErrorStageView=t.toMultipleDevicesLimitReachedStageView=void 0;const o=r(70728),n=r(53606),a=r(44383),i=r(40914);t.toMultipleDevicesLimitReachedStageView=e=>({name:o.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached,login:e.login,devicesToDeactivate:e.deviceLimitStatus.devices.map(a.toDeviceToDeactivateInfoView),subscriptionCode:e.subscriptionCode});t.toMultipleDevicesLimitErrorStageView=e=>({name:o.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError,login:e.login,retryPayload:e.retryPayload,subscriptionCode:e.subscriptionCode});t.toLoginDeviceLimitFlowView=e=>{switch(e.name){case o.LoginDeviceLimitFlowStage.OneDeviceLimitReached:return s=e,{name:o.LoginDeviceLimitFlowStage.OneDeviceLimitReached,login:s.login,previousDevice:(0,n.toPreviousDeviceInfo)(s.deviceLimitStatus.bucketOwner),subscriptionCode:s.subscriptionCode};case o.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached:return(0,t.toMultipleDevicesLimitReachedStageView)(e);case o.LoginDeviceLimitFlowStage.UnlinkingAndOpeningSession:case o.LoginDeviceLimitFlowStage.DeviceLimitDone:case o.LoginDeviceLimitFlowStage.RefreshingDeviceLimitStatus:case o.LoginDeviceLimitFlowStage.OpeningSessionAfterDeviceLimitRemoval:return r=e.name,a=e.login,{name:r,login:a};case o.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError:return(0,t.toMultipleDevicesLimitErrorStageView)(e);default:return(0,i.assertUnreachable)(e)}var r,a,s}},43856:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},81073:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.startDeviceLimitFlow=t.getDeviceLimitStatus=t.attemptGetDeviceLimitStatus=void 0;const o=r(14122),n=r(8153),a=r(14481),i=r(76183),s=r(84239),c=r(34220),d=r(81403),l=r(20060),u=r(22029),p=r(88478),S=r(8368),g=r(73144),m=r(62550);t.attemptGetDeviceLimitStatus=async e=>{try{return await Promise.race([(0,t.getDeviceLimitStatus)(e),new Promise((e=>setTimeout((()=>e((0,d.noDeviceLimit)())),3e3)))])}catch(e){return(e=>{if(!(0,g.isCarbonError)(e,m.HttpError,m.HttpErrorCode.NETWORK_ERROR)&&!(0,g.isCarbonError)(e,m.HttpError,m.HttpErrorCode.CONNECTION_ABORTED)&&!(0,g.isCarbonError)(e,m.HttpError,m.HttpErrorCode.CONNECTION_TIMED_OUT))throw e;return(0,d.noDeviceLimit)()})(e)}};t.getDeviceLimitStatus=async e=>{const{storeService:t}=e,r=t.getState();if((0,S.isSSOUserSelector)(r))return(0,d.noDeviceLimit)();const l=(0,o.featuresSelector)(r),g=(0,a.pairingIdSelector)(r),m=(0,n.premiumStatusSelector)(r),y=(0,n.userLoginSelector)(r),v=(0,c.makeDeviceInfoService)(t),A=await v.getDevicesInfo(y),E=(0,p.getDeviceIdSelector)(r,y),f=(0,u.deviceKeysSelector)(t.getState()),h=(0,i.isOneDeviceLimitApplicable)(l,g,A,E,m);if("limitedToOneDevice"===h._tag)return(0,d.limitedToOneDevice)(h.bucketOwner);const _=(0,s.isMultipleDevicesLimitApplicable)(A,m,f);return"limitedToMultipleDevices"===_._tag?(0,d.limitedToMultipleDevices)(_.devices):(0,d.noDeviceLimit)()};t.startDeviceLimitFlow=async(e,t)=>{const{sessionService:r,storeService:o}=e,a=o.getState(),i=(0,n.userLoginSelector)(a),s=r.getInstance().user,c=await s.fetchSubscriptionCode();if("limitedToOneDevice"===t._tag){const e=(0,l.oneDeviceLimitReached)({deviceLimitStatus:t,subscriptionCode:c,login:i});o.dispatch(e)}else if("limitedToMultipleDevices"===t._tag){const e=(0,l.multipleDevicesLimitReached)({deviceLimitStatus:t,subscriptionCode:c,login:i});o.dispatch(e)}}},81403:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.noDeviceLimit=t.limitedToMultipleDevices=t.limitedToOneDevice=void 0;t.limitedToOneDevice=e=>({_tag:"limitedToOneDevice",bucketOwner:e});t.limitedToMultipleDevices=e=>({_tag:"limitedToMultipleDevices",devices:e});t.noDeviceLimit=()=>({_tag:"noDeviceLimit"})},35410:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbortDeviceLimitFlowError=void 0,function(e){e.UnexpectedError="UNEXPECTED_ERROR"}(t.AbortDeviceLimitFlowError||(t.AbortDeviceLimitFlowError={}))},90339:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refreshDeviceLimitStatus=void 0;const o=r(59125),n=r(33441),a=r(74453),i=r(20060),s=r(81073);t.refreshDeviceLimitStatus=async e=>{const{sessionService:t,storeService:r}=e;try{const c=t.getInstance().user;await c.refreshSessionData();const d=await(0,s.getDeviceLimitStatus)(e);if("noDeviceLimit"===d._tag)r.dispatch((0,i.deviceLimitRemoved)()),await(async e=>{const{sessionService:t,storeService:r}=e;try{await(0,n.sessionDidOpen)(e),r.dispatch((0,i.sessionOpenedAfterDeviceLimitRemoval)())}catch(r){(0,a.notifyDeviceLimitError)(e,r);const n=(0,a.augmentDeviceLimitError)(r,"openSessionAfterDeviceLimitRemoval");(0,o.sendExceptionLog)({error:n}),t.close()}})(e);else if("limitedToOneDevice"===d._tag){const e=(0,i.oneDeviceLimitStillReached)({updatedDeviceLimitStatus:d});r.dispatch(e)}else if("limitedToMultipleDevices"===d._tag){const e=(0,i.multipleDevicesLimitStillReached)({updatedDeviceLimitStatus:d});r.dispatch(e)}}catch(e){r.dispatch((0,i.refreshDeviceLimitStatusFailed)());const t=(0,a.augmentDeviceLimitError)(e,"refreshDeviceLimitStatus");(0,o.sendExceptionLog)({error:t})}}},74453:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.augmentDeviceLimitError=t.notifyDeviceLimitError=void 0;const o=r(90441),n=r(96285),a=e=>"object"==typeof e&&e instanceof Error,i=e=>a(e)?e.message:"No valid error reported";t.notifyDeviceLimitError=async function(e,t){const{storeService:r}=e,a=(0,o.addNewLoginNotification)({type:n.LoginNotificationType.UNKNOWN_ERROR,message:i(t)});r.dispatch(a)},t.augmentDeviceLimitError=function(e,t){const r=`[DeviceLimit] - ${t}: ${i(e)}`,o=new Error(r);return a(e)&&(o.stack=e.stack),o}},84239:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isMultipleDevicesLimitApplicable=void 0;const o=r(46326),n=(e,t)=>t.lastActivityDate-e.lastActivityDate;t.isMultipleDevicesLimitApplicable=(e,t,r)=>{var a,i,s;if(((null===(s=null===(i=null===(a=null==t?void 0:t.capabilities)||void 0===a?void 0:a.devicesLimit)||void 0===i?void 0:i.info)||void 0===s?void 0:s.limit)||0)<=1)return(0,o.notLimitedToMultipleDevices)();const{nonPairedDevices:c,pairingGroups:d}=(({pairingGroups:e,devices:t})=>{const r=t.filter((t=>!e.find((e=>e.devices.includes(t.deviceId)))&&t),[]);return{pairingGroups:e,nonPairedDevices:r}})(e);if(t.capabilities.devicesLimit.info.limit<c.length+d.length){const t=(({pairingGroups:e,devices:t,nonPairedDevices:r,deviceKeys:o})=>{const a=[...t].sort(n),i=[];for(const r of e){let e;e=r.devices.includes(null==o?void 0:o.accessKey)?{...t.find((e=>e.deviceId===(null==o?void 0:o.accessKey))),isCurrentDevice:!0}:a.find((e=>r.devices.includes(e.deviceId))),i.push({...e,deviceId:r.pairingGroupUUID,isPairingGroup:!0})}const s=r.map((e=>e.deviceId===(null==o?void 0:o.accessKey)?{...e,isCurrentDevice:!0}:e));return[...i,...s].sort(n)})({devices:e.devices,nonPairedDevices:c,pairingGroups:d,deviceKeys:r});return(0,o.limitedToMultipleDevices)(t)}return(0,o.notLimitedToMultipleDevices)()}},46326:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.healthCheckSuccessfulContinueFlowLog=t.healthCheckUnsuccessfulContinueFlowLog=t.limitedToMultipleDevices=t.notLimitedToMultipleDevices=void 0;const o=r(97211);t.notLimitedToMultipleDevices=()=>({_tag:"notLimitedToMultipleDevices"});t.limitedToMultipleDevices=e=>({_tag:"limitedToMultipleDevices",devices:e});t.healthCheckUnsuccessfulContinueFlowLog=e=>({code:o.UsageLogCode.USAGE_DARK_WEB_MONITORING,content:{type:"device_sync_limit",subtype:"unlink_screen",action:"unsuccess_unlink",subaction:e}});t.healthCheckSuccessfulContinueFlowLog=e=>({code:o.UsageLogCode.USAGE_DARK_WEB_MONITORING,content:{type:"device_sync_limit",subtype:"unlink_screen",action:"success_unlink",subaction:e}})},59537:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UNEXPECTED_ERROR=t.USER_STILL_OVERFLOWING=void 0,t.USER_STILL_OVERFLOWING="USER_STILL_OVERFLOWING",t.UNEXPECTED_ERROR="UNEXPECTED_ERROR"},44383:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toDeviceToDeactivateInfoView=void 0;const o=r(6342),n=r(48286);t.toDeviceToDeactivateInfoView=e=>({...e,platform:e.devicePlatform?(0,o.toPlatformView)(e.devicePlatform):n.PlatformView.Other})},59687:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},76183:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMonoBucketOwner=t.isOneDeviceLimitApplicable=void 0;const o=r(28060),n=r(83555),a=r(67249);function i(e){var t,r;const{devices:a,pairingGroups:i}=e;let s=null,c=null!==(t=a.find((e=>e.isBucketOwner)))&&void 0!==t?t:null;if(!c&&(s=null!==(r=i.find((e=>e.isBucketOwner)))&&void 0!==r?r:null,s)){const e=(0,n.getPairingGroupDevices)(s,a),t=(e,t)=>e.lastActivityDate-t.lastActivityDate;e.sort(t);const r=e=>Boolean(e.devicePlatform&&(0,n.isDesktopPlatform)(e.devicePlatform)),i=(0,o.partition)(r,e);c=(0,o.unnest)(i)[0]||null}return{bucketOwner:c,bucketOwnerPairingGroup:s}}t.isOneDeviceLimitApplicable=function(e,t,r,o,s){var c,d,l;const{bucketOwner:u,bucketOwnerPairingGroup:p}=i(r),{pairingGroups:S}=r;if(!(e&&e.MonoBucket_carbon_release))return(0,a.notLimitedToOneDevice)();if(!Boolean(1===(null===(l=null===(d=null===(c=null==s?void 0:s.capabilities)||void 0===c?void 0:c.devicesLimit)||void 0===d?void 0:d.info)||void 0===l?void 0:l.limit)))return(0,a.notLimitedToOneDevice)();const g=!(!p||!t)&&p.pairingGroupUUID===t,m=(0,n.findMyPairingGroup)(S,null!=t?t:""),y=!(!u||!m)&&(0,n.isDevicePartOfPairingGroup)(u,m);return!u||u.deviceId===o||g||y?(0,a.notLimitedToOneDevice)():(0,a.limitedToOneDevice)(u)},t.getMonoBucketOwner=i},67249:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notLimitedToOneDevice=t.limitedToOneDevice=void 0;t.limitedToOneDevice=e=>({_tag:"limitedToOneDevice",bucketOwner:e});t.notLimitedToOneDevice=()=>({_tag:"notLimitedToOneDevice"})},41899:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnlinkPreviousDeviceError=void 0,function(e){e.UnexpectedError="UNEXPECTED_ERROR"}(t.UnlinkPreviousDeviceError||(t.UnlinkPreviousDeviceError={}))},53606:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toPreviousDeviceInfo=void 0;const o=r(6342),n=r(48286);t.toPreviousDeviceInfo=({deviceName:e,devicePlatform:t,lastActivityDate:r})=>({name:null!=e?e:"",platform:t?(0,o.toPlatformView)(t):n.PlatformView.Other,lastActive:r})},66121:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},56071:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupDeviceLimitEventBus=void 0;const o=r(70728),n=r(90339),a=r(20060),i={deviceLimitCapabilityUpdated:{handler:e=>{const t=(0,a.deviceLimitStatusUpdated)();e.storeService.dispatch(t),(0,n.refreshDeviceLimitStatus)(e)}}},s={type:"entry",to:o.LoginDeviceLimitFlowStage.OneDeviceLimitReached},c={type:"exit",from:o.LoginDeviceLimitFlowStage.OneDeviceLimitReached},d={type:"entry",to:o.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached},l={type:"exit",from:o.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached};t.setupDeviceLimitEventBus=(e,t)=>{let r;const o=()=>r=e.register(i),n=()=>r();t.addEventListener(s,o),t.addEventListener(c,n),t.addEventListener(d,o),t.addEventListener(l,n)}},28277:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkMultipleDevices=void 0;const o=r(8153),n=r(15876),a=r(84239),i=r(84146),s=r(33441),c=r(46326),d=r(90441),l=r(45082),u=r(34220),p=r(20060),S=r(74453),g=r(59125),m=r(59537),y=r(22029);t.unlinkMultipleDevices=async(e,t)=>{var r,v;const{storeService:A,sessionService:E}=e,f=A.getState(),h=(0,o.userLoginSelector)(f);A.dispatch((0,p.unlinkingMultipleDevicesRequested)());const _=((null===(r=t.deviceIds)||void 0===r?void 0:r.length)||0)+((null===(v=t.pairingGroupIds)||void 0===v?void 0:v.length)||0),T=await(async(e,t,r)=>{const{storeService:o}=e,a=e=>{const t=(0,p.unlinkMultipleDevicesErrorReached)({retryPayload:r});return o.dispatch(t),{success:!1,error:{code:e.code}}};try{const e=await(0,n.deactivateDevices)(o,t,r);if((0,n.isApiError)(e)&&e.code!==n.CLIENT_DEVICES_NOT_FOUND&&e.code!==n.PAIRING_GROUPS_NOT_FOUND)return a(e)}catch(e){return a(e)}})(e,h,t);if(T)return T;const I=await(async(e,t,r)=>{const{storeService:n}=e,s=n.getState(),S=(0,o.premiumStatusSelector)(s),g=(0,u.makeDeviceInfoService)(n),v=await g.getDevicesInfo(t),A=(0,y.deviceKeysSelector)(n.getState()),E=(0,a.isMultipleDevicesLimitApplicable)(v,S,A);if("limitedToMultipleDevices"===E._tag){n.dispatch((0,p.deviceLimitStatusUpdated)()),(0,i.sendUsageLog)(n,(0,c.healthCheckUnsuccessfulContinueFlowLog)(r));const e=(0,d.addNewLoginNotification)({type:l.LoginNotificationType.UNKNOWN_ERROR,message:`${m.USER_STILL_OVERFLOWING}`});n.dispatch(e);const t=(0,p.multipleDevicesLimitStillReached)({updatedDeviceLimitStatus:{_tag:"limitedToMultipleDevices",devices:E.devices}});return n.dispatch(t),{success:!1,error:{code:m.USER_STILL_OVERFLOWING}}}return!1})(e,h,_);if(I)return I;try{return(0,i.sendUsageLog)(A,(0,c.healthCheckSuccessfulContinueFlowLog)(_)),await(0,s.sessionDidOpen)(e),A.dispatch((0,p.unlinkingSucceeded)()),{success:!0}}catch(t){return E.close(),(0,S.notifyDeviceLimitError)(e,t),A.dispatch((0,p.unlinkingFailed)()),(0,g.sendExceptionLog)({error:(0,S.augmentDeviceLimitError)(t,"unlinkMultipleDevices")}),{success:!1,error:{code:m.UNEXPECTED_ERROR}}}}},98678:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkPreviousDevice=void 0;const o=r(33441),n=r(20060),a=r(41899),i=r(74453),s=r(59125);t.unlinkPreviousDevice=async function(e){const{storeService:t}=e;try{return t.dispatch((0,n.unlinkPreviousDeviceRequested)()),await(0,o.sessionDidOpen)(e),t.dispatch((0,n.unlinkingSucceeded)()),{success:!0}}catch(r){t.dispatch((0,n.unlinkingFailed)()),(0,i.notifyDeviceLimitError)(e,r);const o=(0,i.augmentDeviceLimitError)(r,"unlinkPreviousDevice");return(0,s.sendExceptionLog)({error:o}),{success:!1,error:{code:a.UnlinkPreviousDeviceError.UnexpectedError}}}}},33441:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DifferentLoginAuthorized=t.sessionDidOpen=t.openSessionWithMasterPassword=t.updateSessionUponLoginAction=t.makeLoginController=void 0;const o=r(19935),n=r(97211),a=r(32234),i=r(13308),s=r(49914),c=r(2090),d=r(32234),l=r(75897),u=r(48027),p=r(59944),S=r(53667),g=r(54516),m=r(1064),y=r(84146),v=r(6261),A=r(43728),E=r(33792),f=r(76409),h=r(56431),_=r(88478),T=r(78261),I=r(37959),C=r(33722),P=r(38652),D=r(93668),O=r(56816),b=r(40390),w=r(8153),N=r(8368),R=r(15443),L=r(97055),U=r(72879),M=r(84335),k=r(40914),F=r(38568),B=r(18017),G=r(14481),K=r(81073),j=r(14122),V=r(75159),H=r(67365),W=r(84717);async function x(e,t,r,o){const{storeService:n,sessionService:i}=e;if(ee(n))throw new Error(a.AuthenticationCode[a.AuthenticationCode.SESSION_ALREADY_OPENED]);if(""===t)throw new Error(a.AuthenticationCode[a.AuthenticationCode.EMPTY_LOGIN]);if(!(0,A.isValidLogin)(t))throw new Error(a.AuthenticationCode[a.AuthenticationCode.INVALID_LOGIN]);if(""===r)throw new Error(a.AuthenticationCode[a.AuthenticationCode.EMPTY_MASTER_PASSWORD]);let s=oe.FORBIDDEN;if(o&&void 0!==o.authorizeDifferentLogin&&(s=o.authorizeDifferentLogin),n.getUserLogin()&&n.getUserLogin()!==t&&(n.isAuthenticated()&&await i.close(),s===oe.FORBIDDEN))throw new Error(a.AuthenticationCode[a.AuthenticationCode.DIFFERENT_LOGIN_PROVIDED_WITH_TOKEN_OR_OTP]);n.hasSessionId()&&n.getUserLogin()===t&&r&&n.dispatch((0,l.updateMasterPassword)(r));const c=o&&o.serverKey;if(c&&n.dispatch((0,l.updateServerKey)(c)),n.getUserLogin()!==t||void 0===r){const e=(0,N.ssoSettingsSelector)(n.getState());await i.close(),i.setInstance(t,r),e.ssoToken&&n.dispatch((0,M.storeSSOSettings)(e))}}async function z(e,t,r,o,a,s){try{const{storeService:c,sessionService:l}=e,u=(0,A.normalizeEmail)(t);await x(e,u,r),await te(o);if(await l.getInstance().user.accountExistsLocally())throw new Error("Unexpected local account presence during OTP1 step");return await i.registerDevice(c,a,(0,m.makeOTP)(o),s),r?Y(e,u,r,{isDataPersisted:a}):(d.triggerAskMasterPassword(u),n.LoginResultEnum.MasterPasswordMissing)}catch(e){throw d.triggerOpenSessionFailed(e),e}}async function Y(e,t,r,o){try{const{storeService:s,sessionService:d,masterPasswordEncryptorService:u,localDataEncryptorService:p,remoteDataEncryptorService:S,localStorageService:g}=e;let y=o&&o.isDataPersisted;void 0===y&&(y=s.getAccountInfo().persistData);const v=o&&o.serverKey,h=Boolean(o&&o.rememberMasterPassword);t=(0,A.normalizeEmail)(t),await x(e,t,r,{authorizeDifferentLogin:oe.AUTHORIZED,serverKey:v});const _=await d.getInstance().user.accountExistsLocally();if(_){const e=g.getInstance();if(await e.doesLocalKeyExist())try{const t=await e.getLocalKey();t.length<64&&s.dispatch((0,l.updateIsLocalKeyMigrationRequired)(!0));const r="",o=(0,E.getNoDerivationCryptoConfig)();p.setInstance({raw:t},r,o),s.dispatch((0,l.updateIsLocalKeyActivated)(!0))}catch(e){throw new Error(a.AuthenticationCode[a.AuthenticationCode.WRONG_PASSWORD])}await c.loadLocalData(d,s,u)}else{const e=s.getState(),t=(0,w.isRemoteKeyActivatedSelector)(e)&&S?S:u;await i.validateMasterPassword(s,t)}return(null==o?void 0:o.rememberMasterPassword)&&s.dispatch((0,l.rememberMasterPasswordUpdated)(h)),_?await async function(e,t){const{sessionService:r,storeService:o,localDataEncryptorService:a}=e,i=r.getInstance().user,s=o.getState();(0,w.isLocalKeyMigrationRequiredSelector)(s)&&(await(0,f.generateLocalkeyAndSetupEncryptorService)(a,o,r,m.PersistData.PERSIST_DATA_YES),await i.persistAllData());await i.refreshSessionData(),(null==t?void 0:t.requiredPermissions)&&await $(o,r,t.requiredPermissions);const c=await(0,K.attemptGetDeviceLimitStatus)(e);if("noDeviceLimit"!==c._tag)return await(0,K.startDeviceLimitFlow)(e,c),n.LoginResultEnum.DeviceLimitFlow;return X(e,t)}(e,o):await Q(e,y,o)}catch(e){throw d.triggerOpenSessionFailed(e),e}}t.makeLoginController=e=>{const t={openSession:(t,r)=>async function(e,t,r){try{const{storeService:o,sessionService:i,wsService:s,storageService:c}=e,l=c.getLocalStorage();t=(0,A.normalizeEmail)(t);const u=r&&r.password;await x(e,t,u,{authorizeDifferentLogin:oe.AUTHORIZED});let p=await i.getInstance().user.accountExistsLocally();switch(await Z(o,l,s,p)){case a.AuthenticationCode.SSO_LOGIN_BYPASS:return(0,H.triggerServiceProviderUrlRedirect)(o.getState(),t),n.LoginResultEnum.SSOLogin;case a.AuthenticationCode.ASK_MASTER_PASSWORD:if(!p)throw new Error("checkLogin should never return ASK_MASTER_PASSWORD for remote accounts");return u?Y(e,t,u):(d.triggerAskMasterPassword(t),n.LoginResultEnum.MasterPasswordMissing);case a.AuthenticationCode.ASK_OTP:return d.triggerOpenSessionOTPSent({hasU2F:!1}),n.LoginResultEnum.OTPMissing;case a.AuthenticationCode.ASK_OTP_FOR_NEW_DEVICE:return d.triggerOpenSessionOTPForNewDeviceRequired(),n.LoginResultEnum.OTPMissing;case a.AuthenticationCode.ASK_TOKEN:if(p=await i.getInstance().user.accountExistsLocally(),p)throw new Error("Unexpected local account presence during email token step");return d.triggerOpenSessionTokenSent({isResendAction:!1}),n.LoginResultEnum.TokenMissing;case a.AuthenticationCode.USE_LOCAL_UKI:if((0,_.ukiSelector)(o.getState()))return Q(e,m.PersistData.PERSIST_DATA_YES);throw new Error(a.AuthenticationCode[a.AuthenticationCode.UNKNOWN_UKI]);case a.AuthenticationCode.ASK_DASHLANE_AUTHENTICATOR:if(p=await i.getInstance().user.accountExistsLocally(),p)throw new Error("Unexpected local account presence during dashlane authenticator step");return d.triggerOpenSessionDashlaneAuthenticator(),n.LoginResultEnum.DashlaneAuthenticatorApprovalMissing;default:throw new Error(a.AuthenticationCode[a.AuthenticationCode.UNKNOWN_ERROR])}}catch(e){throw d.triggerOpenSessionFailed(e),e}}(e,t,r),openSessionWithToken:(t,r,o,s,c)=>async function(e,t,r,o,s,c){try{const{storeService:l,sessionService:u}=e;t=(0,A.normalizeEmail)(t),await x(e,t,r),await re(o);if(await u.getInstance().user.accountExistsLocally())throw new Error(a.AuthenticationCode[a.AuthenticationCode.TOKEN_PROVIDED_FOR_LOCAL_SESSION]);if(await i.registerDevice(l,s,(0,m.makeEmailToken)(o),c)!==a.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from verifyOtpOrToken");return r?Y(e,t,r,{isDataPersisted:s}):(d.triggerAskMasterPassword(t),n.LoginResultEnum.MasterPasswordMissing)}catch(e){throw d.triggerOpenSessionFailed(e),e}}(e,t,r,o,s,c),openSessionWithDashlaneAuthenticator:(t,r,o,s)=>async function(e,t,r,o,s){try{const{storeService:c,sessionService:l}=e;t=(0,A.normalizeEmail)(t),await x(e,t,r);if(await l.getInstance().user.accountExistsLocally())throw new Error(a.AuthenticationCode[a.AuthenticationCode.DASHLANE_AUTHENTICATOR_ASKED_FOR_LOCAL_SESSION]);const u=await i.registerDeviceWithDashlaneAuthenticator(c,o,s);if(u===a.AuthenticationCode.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED)return n.LoginResultEnum.DashlaneAuthenticatorApprovalCancelled;if(u!==a.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from verifyDashlaneAuthenticatorPush");return r?Y(e,t,r,{isDataPersisted:o}):(d.triggerAskMasterPassword(t),n.LoginResultEnum.MasterPasswordMissing)}catch(e){d.triggerOpenSessionFailed(e)}}(e,t,r,o,s),cancelDashlaneAuthenticatorRegistration:()=>i.cancelRegistrationWithDashlaneAuthenticator(),openSessionWithOTP:(t,r,o,i)=>async function(e,t,r,o,i){const{storageService:l,storeService:u,sessionService:S}=e;try{t=(0,A.normalizeEmail)(t),await x(e,t,r),await te(o);if(!await S.getInstance().user.accountExistsLocally())return z(e,t,r,o,i);if(u.getAccountInfo().otpType!==p.OtpType.OTP_LOGIN)throw new Error(a.AuthenticationCode[a.AuthenticationCode.OTP_PROVIDED_FOR_LOCAL_NON_OTP_SESSION]);const g=await(0,s.convertTokenToAuthTicket)(u,(0,m.makeOTP)(o));if(!1===g.success){const{error:{code:e,message:t}}=g;if(e===a.AuthenticationCode.BUSINESS_ERROR)throw new Error(t);throw new Error(a.AuthenticationCode[e])}const y=g.authTicket;if(await c.completeLogin(u,l.getLocalStorage(),y)!==a.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from verifyOtpOrToken");return r?Y(e,t,r,{isDataPersisted:i}):(d.triggerAskMasterPassword(t),n.LoginResultEnum.MasterPasswordMissing)}catch(e){if(J(e)){const e=await(0,C.getLocalAccounts)(u,l.getLocalStorage());d.sendLocalAccounts(e)}throw d.triggerOpenSessionFailed(e),e}}(e,t,r,o,i),openSessionWithOTPForNewDevice:(t,r,o,n,a)=>z(e,t,r,o,n,a),openSessionWithMasterPassword:(t,r,o)=>Y(e,t,r,o),openSessionResendToken:t=>async function(e,t){await i.askServerToSendToken(e,t),d.triggerOpenSessionTokenSent({isResendAction:!0})}(e.wsService,t),loadAccountCreationInfos:(t,r,o,n,a,i)=>async function(e,t,r,o,n,a,i){const s=(0,h.secureDeviceName)(o);await x(e,t,r),e.storeService.dispatch((0,I.deviceRegistered)((0,I.makeDeviceRegistrationKeys)(n.accessKey,n.secretKey),i,t)),e.storeService.dispatch((0,v.registerDeviceName)(s)),e.storeService.dispatch((0,v.registerLastSync)(a))}(e,t,r,o,n,a,i),openExtraDeviceSession:(t,r)=>async function(e,t,r){try{const{sessionService:o}=e;t=(0,A.normalizeEmail)(t);const i=r&&r.password,s=r&&r.serverKey;await x(e,t,i,{authorizeDifferentLogin:oe.AUTHORIZED,serverKey:s});const c=(e=>{if(!e)return a.AuthenticationCode.PROVIDE_EXTRA_DEVICE_TOKEN;return a.AuthenticationCode.ASK_MASTER_PASSWORD})(await o.getInstance().user.accountExistsLocally());switch(c){case a.AuthenticationCode.PROVIDE_EXTRA_DEVICE_TOKEN:return d.triggerOpenSessionExtraDeviceTokenRequired(),n.LoginResultEnum.ExtraDeviceTokenMissing;case a.AuthenticationCode.ASK_MASTER_PASSWORD:return i?Y(e,t,i,{serverKey:s}):(d.triggerAskMasterPassword(t),n.LoginResultEnum.MasterPasswordMissing);default:(0,k.assertUnreachable)(c)}}catch(e){throw d.triggerOpenSessionFailed(e),e}}(e,t,r),openSessionWithExtraDeviceToken:(t,r,o,s)=>async function(e,t,r,o,s){try{const{storeService:c,sessionService:l}=e;t=(0,A.normalizeEmail)(t);const u=s&&s.password;await x(e,t,u,{authorizeDifferentLogin:oe.AUTHORIZED}),await re(r);if(await l.getInstance().user.accountExistsLocally())throw new Error(a.AuthenticationCode[a.AuthenticationCode.TOKEN_PROVIDED_FOR_LOCAL_SESSION]);const p=s&&s.deviceName;return await i.registerDevice(c,o,(0,m.makeExtraDeviceToken)(r),p),await(0,W.logToggleAnalyticsEvent)(e),u?Y(e,t,u):(d.triggerAskMasterPassword(t),n.LoginResultEnum.MasterPasswordMissing)}catch(e){throw d.triggerOpenSessionFailed(e),e}}(e,t,r,o,s)};return Object.keys(t).forEach((r=>{t[r]=e.perfLogService.createPerfMeasuring(r,t[r],(e=>{throw e}))})),t},t.updateSessionUponLoginAction=x,t.openSessionWithMasterPassword=Y;const $=async(e,t,r)=>{const o=e.getSpaceData(),n=(0,L.isBillingAdminInCurrentSpace)(o),i=(0,L.isTeamAdminInCurrentSpace)(o),s=n||i;if(["billing","full"].includes(r)&&!s)throw e.isAuthenticated()&&await t.close(),new Error(a.AuthenticationCode[a.AuthenticationCode.USER_UNAUTHORIZED])},q=async e=>{e.startPeriodicSync();await e.accountExistsLocally()?await e.attemptSync(o.Trigger.Login):await e.sync(o.Trigger.InitialLogin)};async function Q(e,t,r){const{localDataEncryptorService:o,sessionService:a,storageService:i,storeService:s}=e,{login:c,otpType:d}=s.getAccountInfo();await(0,O.deleteAllLocalUserData)(i.getLocalStorage(),c),await(0,f.generateLocalkeyAndSetupEncryptorService)(o,s,a,t),t===m.PersistData.PERSIST_DATA_YES&&(d===p.OtpType.OTP_LOGIN&&(0,g.storeUserPublicSetting)(s.getAccountInfo().login,"otp2",!0),await(0,F.persistLocalUsersAuthenticationData)(i,s)),function(e,t){const r=(0,g.getCommonAppSetting)("anonymousComputerId"),{otpType:o}=e.getAccountInfo(),a=(0,B.migratedToSAEXSelector)(e.getState());(0,y.sendUsageLog)(e,{code:n.UsageLogCode.USAGE_NEW_DEVICE,content:{anonymouscomputerid:r,otpstyle:o,creation:!1,preloaded:!1,permanent_add:t===m.PersistData.PERSIST_DATA_YES,migrated_to_saex:Boolean(a)}})}(s,t);const l=a.getInstance().user;await l.refreshSessionData(),(null==r?void 0:r.requiredPermissions)&&await $(s,a,r.requiredPermissions);const u=await(0,K.getDeviceLimitStatus)(e);return"noDeviceLimit"!==u._tag?(await(0,K.startDeviceLimitFlow)(e,u),n.LoginResultEnum.DeviceLimitFlow):X(e,r)}async function X(e,t){try{const{autoLoginService:r,eventBusService:i,sessionService:s,storeService:c,storageService:p,wsService:v}=e,A=s.getInstance().user,E=c.getState(),f=(0,w.userLoginSelector)(E);c.dispatch((0,S.confirmUserAuthentication)()),((e,t)=>{const{login:r,persistData:o,sessionStartTime:n}=e.getAccountInfo();o===m.PersistData.PERSIST_DATA_YES&&((0,g.storeUserPublicSetting)(r,"lastSuccessfulLoginTime",n),void 0!==(null==t?void 0:t.triggeredByRememberMeType)&&"disabled"!==(null==t?void 0:t.triggeredByRememberMeType)||(0,g.storeUserPublicSetting)(r,"lastMasterPasswordOpenSessionTimestamp",n))})(c,t);const h=(0,R.recoveryInProgressSelector)(E),_=await(async e=>{const{sessionService:t,storeService:r}=e,o=t.getInstance().user,n=r.getState(),a=(0,R.recoveryInProgressSelector)(n);if(void 0!==(0,N.ssoMigrationInfoSelector)(n).migration||a)return!0;const i=!await o.accountExistsLocally(),s=(0,T.changeMPinProgressSelector)(n);return!(!i&&!s||(await q(o),0))})(e);if(!h){!function(e){const t=e.getState(),r=(0,j.hasFeatureSelector)(t,"webproduct_carbon_httpFetchApi")?V.HttpClientImplementationLibrary.FetchApi:V.HttpClientImplementationLibrary.Axios;(0,V.setHttpClientImplementationLibrary)(r)}(c);(async(e,t,r)=>{const o=e.getState(),n=(0,G.pairingIdSelector)(o);d.triggerSessionOpened(e,t,r,n)})(c,p,await(0,y.getAndTriggerRefreshAccountInfo)(c,s,v))}A.startPeriodicSyncUsageLog(),(0,b.sendLegacyLogUserLogin)(c,t),(0,b.sendNewLogUserLogin)(o.Status.Success,e,null==t?void 0:t.triggeredByRememberMeType),(0,W.logToggleAnalyticsEvent)(e),(0,u.sendUsageLogPremiumUser)(c).catch((()=>{})),!1===_&&await q(A);const I=await(0,C.getLocalAccounts)(c,p.getLocalStorage());(0,a.sendLocalAccounts)(I),c.getUserSession().rememberMasterPassword&&"webauthn"!==(0,U.getLocalAccountRememberMeType)(f)&&r.initialize(),i.sessionOpened({login:f});return(0,j.hasFeatureSelector)(E,P.ENFORCE_2FA_FF)&&(A.startPeriodic2FAInfoRefresh(),(0,D.refreshTwoFactorAuthenticationInfoService)(c,v)),c.dispatch((0,l.updateSessionDidOpen)(!0)),n.LoginResultEnum.LoggedIn}catch(t){const{storeService:r}=e;throw r.dispatch((0,S.userAuthenticationFailed)()),r.dispatch((0,l.updateSessionDidOpen)(!1)),t}}t.sessionDidOpen=X;const J=e=>e&&"object"==typeof e&&e.message===a.AuthenticationCode[a.AuthenticationCode.DEVICE_NOT_REGISTERED],Z=async(e,t,r,o)=>{if(o)try{return await c.checkLogin(e,t)}catch(e){if(!J(e))throw e}const n=(0,_.ukiSelector)(e.getState());return n?i.checkLoginWithUki(e,r,n):i.requestDeviceRegistration(e)},ee=e=>e.getAccountInfo().isAuthenticated;function te(e){if(!e||0===e.length)throw new Error(a.AuthenticationCode[a.AuthenticationCode.EMPTY_OTP])}function re(e){if(!e||0===e.length)throw new Error(a.AuthenticationCode[a.AuthenticationCode.EMPTY_TOKEN])}var oe;!function(e){e[e.AUTHORIZED=0]="AUTHORIZED",e[e.FORBIDDEN=1]="FORBIDDEN"}(oe=t.DifferentLoginAuthorized||(t.DifferentLoginAuthorized={}))},21999:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginViaSSO=void 0;const o=r(40837),n=r(88478),a=r(50542),i=r(90441),s=r(96285),c=r(43728),d=r(33441),l=r(56431),u=r(33792),p=r(76409),S=r(24555),g=r(53494),m=r(15876),y=r(53092),v=r(1064),A=r(75897),E=r(13308),f=r(1064),h=r(8153),_=r(8368),T=r(40653),I=r(653),C=r(67365),P=r(63983),D=r(37730),O=r(49914),b=r(59944),w=r(84335),N=r(1064);t.loginViaSSO=async function(e,t){const{sessionService:r,storeService:n}=e,{ssoServiceProviderKey:a,exist:d,ssoToken:u,consents:p,currentAuths:S=y.SsoMigrationServerMethod.SSO,expectedAuths:g=y.SsoMigrationServerMethod.SSO,inStore:m,anonymousUserId:v}=t,A=(0,c.normalizeEmail)(t.login),E=(0,l.secureDeviceName)(t.deviceName),f={...t,login:A,deviceName:E};if(!(a&&A||m))return n.dispatch((0,i.addNewLoginNotification)({type:s.LoginNotificationType.SSO_SETUP_ERROR})),(0,C.makeReturnErrorObject)(y.LoginViaSsoCode.EMPTY_LOGIN);try{if(!d){const t={ssoServiceProviderKey:a,login:A,deviceName:E,ssoToken:u,consents:p,anonymousUserId:v};return await(0,o.createSSOAccount)(e,t)}if(!(0,C.isSupportedTransitionFlow)(S,g))return n.dispatch((0,i.addNewLoginNotification)({type:s.LoginNotificationType.SSO_SETUP_ERROR})),(0,C.makeReturnErrorObject)(y.LoginViaSsoCode.UNSUPPORTED_TRANSITION);if(S===y.SsoMigrationServerMethod.MP&&g===y.SsoMigrationServerMethod.SSO)return await R(e,f);if(S===y.SsoMigrationServerMethod.SSO&&g===y.SsoMigrationServerMethod.MP){const e={ssoUser:!0,migration:N.SSOMigrationType.SSO_TO_MP};n.dispatch((0,w.storeSSOSettings)(e)),f.requiredPermissions=null}r.setInstance(A,void 0);return await r.getInstance().user.accountExistsLocally()?await L(e,f):await U(e,f)}catch(e){return n.dispatch((0,i.addNewLoginNotification)({type:s.LoginNotificationType.UNKNOWN_ERROR,message:e.message})),(0,C.makeReturnErrorObject)(y.LoginViaSsoCode.UNKNOWN_ERROR,e.message)}};const R=async(e,t)=>{const{storeService:r}=e;let{ssoServiceProviderKey:o,ssoToken:n}=t;const{login:a}=t,{isAuthenticated:c,otpType:l}=r.getAccountInfo();if(t.inStore){const e=(0,_.ssoSettingsSelector)(r.getState());if(o=e.ssoServiceProviderKey,n=e.ssoToken,!o||!n)return r.dispatch((0,i.addNewLoginNotification)({type:s.LoginNotificationType.SSO_SETUP_ERROR})),(0,C.makeReturnErrorObject)(y.LoginViaSsoCode.SSO_VERIFICATION_FAILED)}if(!c){const t={ssoUser:!0,serviceProviderUrl:"",ssoServiceProviderKey:o,ssoToken:n,migration:N.SSOMigrationType.MP_TO_SSO};r.dispatch((0,w.storeSSOSettings)(t));return(0,d.makeLoginController)(e).openSession(a),r.dispatch((0,i.addNewLoginNotification)({type:s.LoginNotificationType.RELOGIN_NEEDED})),(0,C.makeReturnErrorObject)(y.LoginViaSsoCode.INNACTIVE_SESSION)}if(l===b.OtpType.NO_OTP){const{success:e}=await(0,O.convertTokenToAuthTicket)(r,(0,T.makeSsoToken)(n));if(!e)return r.dispatch((0,i.addNewLoginNotification)({type:s.LoginNotificationType.SSO_SETUP_ERROR})),(0,C.makeReturnErrorObject)(y.LoginViaSsoCode.SSO_VERIFICATION_FAILED)}const u={newPassword:o,flow:D.ChangeMPFlowPath.MP_TO_SSO},p=await(0,P.changeMasterPassword)(e,u);return!1===p.success?(r.dispatch((0,i.addNewLoginNotification)({type:s.LoginNotificationType.UNKNOWN_ERROR,message:p.error.code})),p):(r.dispatch((0,w.resetSSOSettings)()),(0,C.successResponse)())},L=async(e,{login:t,ssoServiceProviderKey:r,ssoToken:o,requiredPermissions:a})=>{const{storeService:c}=e,l=(0,n.getDeviceIdSelector)(c.getState(),t);if(null===l)throw new Error(v.AuthenticationCode[v.AuthenticationCode.DEVICE_NOT_REGISTERED]);const E=await(0,O.convertTokenToAuthTicket)(c,(0,T.makeSsoToken)(o));if(!1===E.success){const{error:{message:e}}=E;return c.dispatch((0,i.addNewLoginNotification)({type:s.LoginNotificationType.SSO_SETUP_ERROR})),(0,C.makeReturnErrorObject)(y.LoginViaSsoCode.SSO_VERIFICATION_FAILED,e)}const h=E.authTicket,_=await(0,I.completeLoginWithAuthTicket)(c,{login:t,deviceAccessKey:l,authTicket:h});if((0,m.isApiError)(_))return(0,C.formatAPIError)(_);const{masterPasswordEncryptorService:P,remoteDataEncryptorService:D}=e,{ssoServerKey:b,remoteKeys:w}=_,N=(0,S.base64ToBuffer)(b),R=w.filter((e=>"sso"===e.type))[0];let L;try{const e=(0,S.base64ToBuffer)(r),t=(0,p.getEncryptionKeyBuffer)(e,N,{skipDerivation:!0});L=(0,S.arrayBufferToText)(t);const o=(0,u.getNoDerivationCryptoConfig)();P.setInstance({raw:L},"",o);const n=await P.getInstance().decrypt(R.key),a=(0,g.deflatedUtf8ToUtf16)(n,{skipUtf8Decoding:!0,skipInflate:!0});D.setInstance({raw:a},"",o),c.dispatch((0,A.updateIsRemoteKeyActivated)(!0))}catch(e){return{success:!1,error:{code:y.LoginViaSsoCode.WRONG_PASSWORD}}}const U=f.PersistData.PERSIST_DATA_YES;return await(0,d.openSessionWithMasterPassword)(e,t,L,{isDataPersisted:U,serverKey:"",requiredPermissions:a}),(0,C.successResponse)()},U=async(e,t)=>{const{storeService:r,masterPasswordEncryptorService:o,remoteDataEncryptorService:n}=e,{deviceName:i,ssoToken:s,login:c,ssoServiceProviderKey:l,requiredPermissions:u}=t;r.dispatch((0,a.updateLocalUserInfo)(c,{ssoActivatedUser:!0}));const p=f.PersistData.PERSIST_DATA_YES,S={masterPasswordEncryptorService:o,remoteDataEncryptorService:n,ssoServiceProviderKey:l};await(0,E.registerDevice)(r,p,(0,T.makeSsoToken)(s),i,S);const g=e.storeService.getState(),m=(0,h.masterPasswordSelector)(g);return await(0,d.openSessionWithMasterPassword)(e,c,m,{isDataPersisted:p,serverKey:"",requiredPermissions:u}),(0,C.successResponse)()}},53092:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoginViaSsoCode=t.SsoMigrationServerMethod=void 0,function(e){e.SSO="sso",e.MP="master_password"}(t.SsoMigrationServerMethod||(t.SsoMigrationServerMethod={})),function(e){e.SUCCESS="SUCCESS",e.ASK_NEW_MP="ASK_NEW_MP",e.EMPTY_LOGIN="EMPTY_LOGIN",e.INNACTIVE_SESSION="INNACTIVE_SESSION",e.SSO_VERIFICATION_FAILED="SSO_VERIFICATION_FAILED",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.UNSUPPORTED_TRANSITION="UNSUPPORTED_TRANSITION",e.WRONG_PASSWORD="WRONG_PASSWORD"}(t.LoginViaSsoCode||(t.LoginViaSsoCode={}))},67365:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerServiceProviderUrlRedirect=t.successResponse=t.makeReturnErrorObject=t.formatAPIError=t.isSupportedTransitionFlow=void 0;const o=r(53092),n=r(15876),a=r(91033),i=r(8368);t.isSupportedTransitionFlow=(e,t)=>e===o.SsoMigrationServerMethod.SSO?t===o.SsoMigrationServerMethod.SSO||t===o.SsoMigrationServerMethod.MP:e===o.SsoMigrationServerMethod.MP&&t===o.SsoMigrationServerMethod.SSO;t.formatAPIError=e=>{switch(e.code){case n.B2bSsoUserNotFound:case n.InvalidSsoToken:case n.DeviceNotFound:case n.InvalidAuthTicket:return(0,t.makeReturnErrorObject)(o.LoginViaSsoCode.SSO_VERIFICATION_FAILED,e.message);default:return(0,t.makeReturnErrorObject)(o.LoginViaSsoCode.UNKNOWN_ERROR,e.message)}};t.makeReturnErrorObject=(e,t)=>({success:!1,error:{code:e,message:t}});t.successResponse=(e=o.LoginViaSsoCode.SUCCESS)=>({success:!0,code:e}),t.triggerServiceProviderUrlRedirect=function(e,t){const r=`${(0,i.serviceProviderUrlSelector)(e)}?username=${t}`;(0,a.emitServiceProviderUrl)(r)}},83687:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(17496),n=r(56071),a=r(41524),i=r(24158);t.bootstrap=(e,t,r)=>{if(e.register(o.config),r.connectors.deviceLimit){const e=new a.DeviceLimitCapabilityEventBus(t,r.connectors.deviceLimit),o=(0,i.getDeviceLimitFlowEventsManager)(t.storeService);(0,n.setupDeviceLimitEventBus)(e,o)}}},40390:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendNewLogUserLogin=t.sendLegacyLogUserLogin=void 0;const o=r(97211),n=r(19935),a=r(84717),i=r(84146),s=r(59944);var c;!function(e){e.REMEMBER_ME="autologin",e.WEBAUTHN="webauthn",e.MASTER_PASSWORD="disabled"}(c||(c={}));const d={[c.REMEMBER_ME]:{legacyLog:"FROM_APP_AUTO",newLog:void 0},[c.WEBAUTHN]:{legacyLog:"FROM_APP_WEBAUTHN",newLog:n.Mode.Biometric},[c.MASTER_PASSWORD]:{legacyLog:"FROM_APP_MANUAL",newLog:n.Mode.MasterPassword}};t.sendLegacyLogUserLogin=(e,t)=>{var r;const n={};"webauthn"===(null==t?void 0:t.triggeredByRememberMeType)&&(n.biometrics=(null==t?void 0:t.isWebAuthnAuthenticatorRoaming)?"roaming_authentication":"platform_authentication"),(0,i.sendUsageLog)(e,{code:o.UsageLogCode.USAGE_USER_LOGIN,content:{sender:d[null!==(r=null==t?void 0:t.triggeredByRememberMeType)&&void 0!==r?r:c.MASTER_PASSWORD].legacyLog,OTP:e.getAccountInfo().otpType!==s.OtpType.NO_OTP,...n}})};t.sendNewLogUserLogin=async(e,t,r)=>{const o=r===c.REMEMBER_ME;await(0,a.logEvent)(t,{event:new n.UserLoginEvent({status:e,...!o&&{mode:d[null!=r?r:c.MASTER_PASSWORD].newLog}})})}},29198:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(83687);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},5937:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(26103),n=r(43632),a=r(23491);t.config={commands:{clearAllStoredLoginNotification:{handler:n.clearAllStoredLoginNotification}},queries:{getLoginNotifications:{selector:o.loginNotificationListSelector}},liveQueries:{liveLoginNotifications:{operator:a.loginNotificationList$}}}},72722:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(5937);t.bootstrap=e=>{e.register(o.config)}},55052:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(72722);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},23491:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginNotificationList$=void 0;const o=r(18948),n=r(3343),a=r(26103);t.loginNotificationList$=()=>(0,o.pipe)((0,n.map)(a.loginNotificationListSelector),(0,n.distinctUntilChanged)())},26103:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginNotificationListSelector=void 0;t.loginNotificationListSelector=e=>e.inMemoryInterSessionUnsynced.loginNotification},43632:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearAllStoredLoginNotification=void 0;const o=r(90441);t.clearAllStoredLoginNotification=async e=>(e.storeService.dispatch((0,o.resetAllLoginNotification)()),{success:!0})},41525:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoginNotificationType=void 0;var o=r(96285);Object.defineProperty(t,"LoginNotificationType",{enumerable:!0,get:function(){return o.LoginNotificationType}})},40005:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(75538),n=r(39924),a=r(73847),i=r(99366);t.config={commands:{updateLoginStepInfo:{handler:a.updateLoginStepInfoHandler},resetLoginStepInfo:{handler:i.resetLoginStepInfoHandler}},queries:{getLoginStepInfo:{selector:o.loginStepInfoSelector}},liveQueries:{liveLoginStepInfo:{operator:n.liveLoginStepInfo$}}}},13005:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoginStep=void 0;var o=r(8735);Object.defineProperty(t,"LoginStep",{enumerable:!0,get:function(){return o.LoginStep}})},93267:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetLoginStepInfo=t.updateLoginStepInfoStep=t.updateLoginStepInfoLogin=t.RESET_LOGIN_STEP_INFO=t.UPDATE_LOGIN_STEP_INFO_STEP=t.UPDATE_LOGIN_STEP_INFO_LOGIN=void 0,t.UPDATE_LOGIN_STEP_INFO_LOGIN="UPDATE_LOGIN_STEP_INFO_LOGIN",t.UPDATE_LOGIN_STEP_INFO_STEP="UPDATE_LOGIN_STEP_INFO_STEP",t.RESET_LOGIN_STEP_INFO="RESET_LOGIN_STEP_INFO";t.updateLoginStepInfoLogin=e=>({type:t.UPDATE_LOGIN_STEP_INFO_LOGIN,login:e});t.updateLoginStepInfoStep=e=>({type:t.UPDATE_LOGIN_STEP_INFO_STEP,step:e});t.resetLoginStepInfo=()=>({type:t.RESET_LOGIN_STEP_INFO})},75538:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginStepInfoSelector=void 0;t.loginStepInfoSelector=e=>{const t=e.userSession.localSettings.loginStepInfo;return(null==t?void 0:t.validated)&&(null==t?void 0:t.step)?t:null}},13719:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(40005);t.bootstrap=e=>{e.register(o.config)}},99366:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetLoginStepInfoHandler=void 0;const o=r(93267);t.resetLoginStepInfoHandler=e=>(e.storeService.dispatch((0,o.resetLoginStepInfo)()),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},73847:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateLoginStepInfoHandler=void 0;const o=r(93267);t.updateLoginStepInfoHandler=(e,t)=>(void 0!==t.login&&e.storeService.dispatch((0,o.updateLoginStepInfoLogin)(t.login)),void 0!==t.step&&e.storeService.dispatch((0,o.updateLoginStepInfoStep)(t.step)),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},10300:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(13719);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},39924:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.liveLoginStepInfo$=void 0;const o=r(18948),n=r(3343),a=r(75538);t.liveLoginStepInfo$=()=>(0,o.pipe)((0,n.map)(a.loginStepInfoSelector),(0,n.distinctUntilChanged)())},8735:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoginStep=void 0,function(e){e.Email="email",e.Welcome="welcome",e.OTP1="OTP1",e.OTP2="OTP2",e.BackupCodeOTP1="backupCodeOTP1",e.BackupCodeOTP2="backupCodeOTP2",e.OTPToken="token",e.Password="password",e.SSO="SSO",e.ActivateSSO="activateSSO",e.WebAuthn="webAuthn",e.WebAuthnError="webAuthnError",e.DeviceLimitReached="deviceLimitReached",e.DashlaneAuthenticator="dashlaneAuthenticator"}(t.LoginStep||(t.LoginStep={}))},38580:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendAccountCreationLog=void 0;const o=r(84137),n=r(57695);t.sendAccountCreationLog=function(e,t){return(0,o.default)((0,n.default)(e,t))}},57695:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeAccountCreationParams=void 0;const o=r(27023),n=r(54516);function a(e,t){return{userId:e.getPersonalSettings().AnonymousUserId,device:(0,n.getCommonAppSetting)("anonymousComputerId"),kw_test_:t.kw_test_,kw_test_login:t.kw_test_login,origin:t.origin,session:(0,o.getApplicationSessionId)()}}t.default=function(e,t){const r=e.getPlatformInfo();return Object.assign({},a(e,t),{version:r.appVersion,platform:r.platformName})},t.makeAccountCreationParams=a},84137:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.USAGE_LOG_ENDPOINT=void 0;const o=r(31891),n=r(43728);t.USAGE_LOG_ENDPOINT="https://kck3hlb9.dashlane.com/2/softwareusage/createaccount",t.default=function(e){return(0,n.postDataToUrl)(t.USAGE_LOG_ENDPOINT,e).then((()=>{})).catch((e=>o.default.log(e)))}},71370:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Debugger=void 0;const o=r(85795),n=r(77800),a=([e,...t])=>{let r="",o=[];"string"==typeof e?r=e:o=[e],o=[...o,...t];const n=(e=>e.reduce(((e,t)=>{const r=Object.keys(e).length;return{...e,[r]:t}}),{}))(o);return{message:r,details:n}};const i=function(){const e=e=>(...t)=>{const r={...a(t),level:e};(0,o.log)(r)};return{log:e(n.LogLevel.Debug),info:e(n.LogLevel.Info),warn:e(n.LogLevel.Warn),error:e(n.LogLevel.Error)}}();t.Debugger=i,t.default=i},85795:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.redirectConsoleLogs=t.logVerbose=t.logDebug=t.logInfo=t.logWarn=t.logError=t.log=void 0;const o=r(28060),n=r(10036),a=r(99676),i=r(77800),s=r(52649),c=r(40914),d=r(71878);let l=null;const u=e=>t=>{const{level:r=i.LogLevel.Error}=t,o=(e=>{switch(e){case i.LogLevel.Error:return console.error;case i.LogLevel.Warn:return console.warn;case i.LogLevel.Info:return console.info;case i.LogLevel.Verbose:return console.log;case i.LogLevel.Debug:return console.debug;default:return(0,c.assertUnreachable)(e)}})(r),n=e(t);o.call(this,n)},p=(0,s.formatLogEntry)(s.formatLogEntryDetail),S=(e,t)=>r=>o=>t(o[e])&&r(o),g=S("tag",((e=[])=>{const t=n.config.LOG_TAGS||[],r="string"==typeof t?[t]:[...t],o="string"==typeof e?[e]:[...e];return!r.length||r.some((e=>o.includes(e)))})),m=S("level",(e=>e>=n.config.LOG_LEVEL)),y=(0,o.pipe)((e=>t=>(l||u(e))(t)),m,g)(p);y({message:"~~~ Logs activated ~~~",level:i.LogLevel.Info,tag:[d.LOGS_LOG_TAG,d.DEBUGGER_LOG_TAG]}),t.log=y,t.logError=(0,a.withErrorLevel)(y),t.logWarn=(0,a.withWarnLevel)(y),t.logInfo=(0,a.withInfoLevel)(y),t.logDebug=(0,a.withDebugLevel)(y),t.logVerbose=(0,a.withVerboseLevel)(y);t.redirectConsoleLogs=e=>(l=e,()=>{l=null})},99676:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.withVerboseLevel=t.withDebugLevel=t.withInfoLevel=t.withWarnLevel=t.withErrorLevel=t.withTag=t.withLevel=void 0;const o=r(77800),n=(e,t)=>r=>o=>r({[e]:t,...o});t.withLevel=e=>n("level",e);t.withTag=e=>n("tag",e),t.withErrorLevel=(0,t.withLevel)(o.LogLevel.Error),t.withWarnLevel=(0,t.withLevel)(o.LogLevel.Warn),t.withInfoLevel=(0,t.withLevel)(o.LogLevel.Info),t.withDebugLevel=(0,t.withLevel)(o.LogLevel.Debug),t.withVerboseLevel=(0,t.withLevel)(o.LogLevel.Verbose)},52649:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatLogEntryDetail=t.formatLogEntry=void 0;const o=r(73144),n=r(77800);function a(e){const{stack:t}=e;let r=`${e}`;if(t&&"string"==typeof t){t.substr(0,t.indexOf("\n"))===r&&(r="")}return`${r}${r?`\n${t}`:t}`}const i={[n.LogLevel.Error]:"(e)",[n.LogLevel.Warn]:"(w)",[n.LogLevel.Info]:"(i)",[n.LogLevel.Debug]:"(d)",[n.LogLevel.Verbose]:"(v)"};t.formatLogEntry=e=>t=>{const{details:r={},level:o=n.LogLevel.Debug,message:a,tag:s=[]}=t,c=function(e){const t=Array.isArray(e)?e:[e];return t.length?` [${t.join("|")}]`:""}(s),d=i[o],l=Boolean(a),u=l?` ${a}`:"",p=function(e,t,r){return Object.keys(t).reduce(((o,n)=>!Number.isInteger(parseInt(n,10))&&r?`${o} ${n}:${e(t[n])}`:`${o} ${e(t[n])}`),"")}(e,r,l);return`${d}${c}${u}${p}`};t.formatLogEntryDetail=e=>(0,o.isCarbonError)(e)?function(e){const t=e.getAdditionalInfoString(),r=t?`\n${t}`:"";return`${a(e)}${r}`}(e):e instanceof Error?a(e):"object"==typeof e?JSON.stringify(e):String(e)},31891:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.withWarnLevel=t.withVerboseLevel=t.withTag=t.withLevel=t.withInfoLevel=t.withErrorLevel=t.withDebugLevel=t.Silent=t.LogLevel=t.redirectConsoleLogs=t.logWarn=t.logVerbose=t.logInfo=t.logError=t.logDebug=t.log=void 0;const a=r(71370);t.default=a.Debugger;var i=r(85795);Object.defineProperty(t,"log",{enumerable:!0,get:function(){return i.log}}),Object.defineProperty(t,"logDebug",{enumerable:!0,get:function(){return i.logDebug}}),Object.defineProperty(t,"logError",{enumerable:!0,get:function(){return i.logError}}),Object.defineProperty(t,"logInfo",{enumerable:!0,get:function(){return i.logInfo}}),Object.defineProperty(t,"logVerbose",{enumerable:!0,get:function(){return i.logVerbose}}),Object.defineProperty(t,"logWarn",{enumerable:!0,get:function(){return i.logWarn}}),Object.defineProperty(t,"redirectConsoleLogs",{enumerable:!0,get:function(){return i.redirectConsoleLogs}}),n(r(71370),t);var s=r(77800);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return s.LogLevel}}),Object.defineProperty(t,"Silent",{enumerable:!0,get:function(){return s.Silent}});var c=r(99676);Object.defineProperty(t,"withDebugLevel",{enumerable:!0,get:function(){return c.withDebugLevel}}),Object.defineProperty(t,"withErrorLevel",{enumerable:!0,get:function(){return c.withErrorLevel}}),Object.defineProperty(t,"withInfoLevel",{enumerable:!0,get:function(){return c.withInfoLevel}}),Object.defineProperty(t,"withLevel",{enumerable:!0,get:function(){return c.withLevel}}),Object.defineProperty(t,"withTag",{enumerable:!0,get:function(){return c.withTag}}),Object.defineProperty(t,"withVerboseLevel",{enumerable:!0,get:function(){return c.withVerboseLevel}}),Object.defineProperty(t,"withWarnLevel",{enumerable:!0,get:function(){return c.withWarnLevel}})},77800:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Silent=t.LogLevel=void 0,function(e){e[e.Verbose=0]="Verbose",e[e.Debug=10]="Debug",e[e.Info=20]="Info",e[e.Warn=30]="Warn",e[e.Error=40]="Error"}(t.LogLevel||(t.LogLevel={})),t.Silent=100},45324:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(84717);t.config={commands:{logEvent:{handler:o.logEvent},logPageView:{handler:o.logPageView},flushQueue:{handler:o.flushQueue}},queries:{},liveQueries:{}}},99857:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StyxApiResult=void 0,function(e){e[e.AllBatchesSent=0]="AllBatchesSent",e[e.SomeBatchesSent=1]="SomeBatchesSent",e[e.NoBatchesSent=2]="NoBatchesSent"}(t.StyxApiResult||(t.StyxApiResult={}))},82360:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(45324);t.bootstrap=e=>{e.register(o.config)}},83794:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decryptEvents=t.encryptEvents=void 0;const o=r(34929),n=r(10423),a=r(53528),i=r(53494);t.encryptEvents=async function(e,t,r){const s=JSON.stringify(t),c=(0,i.deflateUtf16)(s),d=await async function({storeService:e,encryptionKey:t,data:r}){const i=(0,o.makeDataEncryptorService)(e),{cryptoConfig:s}=(0,a.parsePayload)(n.CRYPTO_NODERIVATION_HMAC64);i.setInstance({raw:t},"",s);const c=await i.getInstance().encrypt(r);return i.close(),c}({storeService:e,encryptionKey:r,data:c});return d},t.decryptEvents=async function(e,t,r){const n=await async function({storeService:e,encryptedData:t,encryptionKey:r}){const n=(0,o.makeDataEncryptorService)(e);n.setInstance({raw:r},"");const a=await n.getInstance().decrypt(t);return n.close(),a}({storeService:e,encryptedData:t,encryptionKey:r}),a=(0,i.inflateUtf16)(n);return JSON.parse(a)}},93836:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.chunkArray=t.getOsContext=t.getOsVersion=t.getOsType=t.getBrowserContext=t.getAppContext=t.applicationBuildTypeToHermesBuildType=t.platformStringToAppPlatform=t.createLogger=void 0;const o=r(19935),n=r(11814),a=r(14247);t.createLogger=e=>{const{eventLoggerService:t}=e,r=t.getRepository();return{logger:r.createLogger(),logRepository:r}};t.platformStringToAppPlatform=e=>{switch(e){case"server_standalone":case"server_carbon_simulator":case"server_carbon_unknown":case"server_carbon_tests":return o.Platform.Saex;case"server_leeloo_dev":case"server_leeloo":case"server_tac":return o.Platform.Web;case"desktop_win":throw new Error(`Hermes Web SDK: Unsupported platform "${e}" detected. This platform is not supported by the Hermes Web SDK or Styx API.`)}};t.applicationBuildTypeToHermesBuildType=e=>{switch(e){case a.ApplicationBuildType.DEV:return o.BuildType.Dev;case a.ApplicationBuildType.QA:return o.BuildType.Qa;case a.ApplicationBuildType.NIGHTLY:return o.BuildType.Nightly;default:return o.BuildType.Production}};t.getAppContext=e=>{const r=e.getPlatformInfo(),o=e.getState().device.application.settings.buildType;return{platform:(0,t.platformStringToAppPlatform)(r.platformName),version:r.appVersion,build_type:(0,t.applicationBuildTypeToHermesBuildType)(o)}};t.getBrowserContext=()=>({name:n.browser.getBrowserName(),version:n.browser.getBrowserVersion(),user_agent:n.navigator.getNavigator().userAgent});t.getOsType=e=>{let t=o.OsType.Other;const r=e.os.toLowerCase().replace(/[ -/]+/g,"_");return Object.values(o.OsType).map((e=>e.toString())).includes(r)&&(t=r),t};t.getOsVersion=e=>{const t="Mac OS"===e.os?e.osVersion.replace("OS_X_","").replace(/_/g,"."):e.osVersion,r=/([0-9]{1,3}(?:\.[0-9]{0,4}){0,2})/.exec(t);return r&&r.length>=2?r[1]:"0"};t.getOsContext=e=>{const r=e.getPlatformInfo();return{type:(0,t.getOsType)(r),version:(0,t.getOsVersion)(r),locale:r.lang}},t.chunkArray=function e(t,r){return t.length<=r?[t]:[t.slice(0,r),...e(t.slice(r),r)]}},74293:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeEventLoggerService=t.bootstrap=void 0;const o=r(19935),n=r(93836),a=r(54516),i=r(53992),s=r(31050),c=r(67830);var d=r(82360);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return d.bootstrap}});t.makeEventLoggerService=e=>{let t=null;const r=()=>{var r,o;if(!t)throw new Error("makeEventLoggerService: You must call initRepository() before getting the repository instance");const n=e.storeService.getUserSession();return((null===(r=n.analyticsIds)||void 0===r?void 0:r.userAnalyticsId)||(null===(o=n.analyticsIds)||void 0===o?void 0:o.deviceAnalyticsId))&&t.setTrackingInfo(n.analyticsIds.userAnalyticsId,n.analyticsIds.deviceAnalyticsId),t};return{initRepository:()=>{var r,i;const s=e.storeService,c=(0,n.getAppContext)(s),d=(0,n.getOsContext)(s),l=(0,n.getBrowserContext)(),u=(0,a.getCommonAppSetting)("installationId");t=new o.LogRepository(c,d,l,u);const p=s.getUserSession();((null===(r=p.analyticsIds)||void 0===r?void 0:r.userAnalyticsId)||(null===(i=p.analyticsIds)||void 0===i?void 0:i.deviceAnalyticsId))&&t.setTrackingInfo(p.analyticsIds.userAnalyticsId,p.analyticsIds.deviceAnalyticsId)},getRepository:r,logEvent:async o=>{const{interactionDataConsent:n}=await(0,c.getGlobalExtensionSettings)(e);if(!(!1!==n))return;return r().createLogger().logEvent(o),(0,s.storeEventsInQueue)(e,t)},logSync:async o=>{const{interactionDataConsent:n}=await(0,c.getGlobalExtensionSettings)(e);if(!(!1!==n))return;return r().createLogger().logEvent(o),(0,s.storeEventsInQueue)(e,t)},flushEventQueue:()=>(0,i.sendEventQueueToStyx)(e)}}},65612:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.immediatelySendEvents=t.queueEvents=t.queueLogRepositoryEvents=void 0;const o=r(14247),n=r(18017),a=r(99857),i=r(53992),s=r(31050);async function c(e,t){const r=t.logStorage.containsPriorityEvent();try{if(await(0,s.storeEventsInQueue)(e,t),r){return await(0,i.sendEventQueueToStyx)(e)}return{success:!0,result:a.StyxApiResult.NoBatchesSent}}catch(e){return{success:!1,result:a.StyxApiResult.NoBatchesSent}}}async function d(e,t){try{return await(0,i.immediatelySendEventsToStyx)(e,t)}catch(e){return{success:!1,result:a.StyxApiResult.NoBatchesSent}}}t.queueLogRepositoryEvents=async function(e,t){return(0,n.applicationBuildTypeSelector)(e.storeService.getState())===o.ApplicationBuildType.QA?d(e,t):c(e,t)},t.queueEvents=c,t.immediatelySendEvents=d},26615:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.styxKeysSelector=void 0;t.styxKeysSelector=e=>e.userSession.sdkAuthentication.styxKeys},53992:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.immediatelySendEventsToStyx=t.sendEventQueueToStyx=void 0;const o=r(54516),n=r(99093),a=r(12671),i=r(45082),s=r(83794),c=r(93836),d=r(31050);let l=!1;async function u(e,t,r){let o=[];if(!t||0===t.length)return o;const i=(0,a.getMakeStyxApiRequest)(r,n.ApiAuthType.App,n.ApiRequestMethod.POST),s=(0,c.chunkArray)(t,450);try{for(const t of s){if(!(await i(e,{payload:(0,a.getEventsPayload)(t)})).success)break;o=o.concat(t.map((({id:e})=>e)))}}catch{return o}return o}t.sendEventQueueToStyx=async function(e){if(!0===l)return{success:!0,result:i.StyxApiResult.NoBatchesSent};l=!0;const{storageService:t,storeService:r}=e,n=t.getLocalStorage(),a=(0,o.getCommonAppSetting)("eventLoggerQueueKey");if(!await n.itemExists(d.EVENT_QUEUE_STORAGE_KEY))return l=!1,{success:!0,result:i.StyxApiResult.NoBatchesSent};const c=await n.readItem(d.EVENT_QUEUE_STORAGE_KEY);if(!c)return l=!1,{success:!0,result:i.StyxApiResult.NoBatchesSent};if("string"!=typeof c)throw new Error("value of EventLogger.eventQueue is expected to be a string");const p=await(0,s.decryptEvents)(r,c,a),S=p.filter((e=>"anonymous"===e.category)),g=p.filter((e=>"user"===e.category)),m=await u(r,S,"/v1/event/anonymous"),y=await u(r,g,"/v1/event/user"),v=await n.readItem(d.EVENT_QUEUE_STORAGE_KEY);if("string"!=typeof v)throw new Error("value of EventLogger.eventQueue is expected to be a string");const A=(await(0,s.decryptEvents)(r,v,a)).filter((({id:e})=>!(m.includes(e)||y.includes(e)))),E=await(0,s.encryptEvents)(r,A,a);await n.writeItem(d.EVENT_QUEUE_STORAGE_KEY,E);const f=m.length>0||y.length>0,h=0===E.length;let _=i.StyxApiResult.NoBatchesSent;return h?_=i.StyxApiResult.AllBatchesSent:f&&(_=i.StyxApiResult.SomeBatchesSent),l=!1,{success:!0,result:_}},t.immediatelySendEventsToStyx=async function(e,t){const{storeService:r}=e,o=t.logStorage.copy();t.logStorage.removeEvents(o.map((e=>e.id)));const n=o.filter((e=>"anonymous"===e.category)),a=o.filter((e=>"user"===e.category)),s=await u(r,n,"/v1/event/anonymous"),c=await u(r,a,"/v1/event/user"),d=s.length>0||c.length>0,l=s.length+c.length===o.length;let p=i.StyxApiResult.NoBatchesSent;return l?p=i.StyxApiResult.AllBatchesSent:d&&(p=i.StyxApiResult.SomeBatchesSent),{success:!0,result:p}}},84717:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.flushQueue=t.logToggleAnalyticsEvent=t.logPageView=t.logEvent=void 0;const o=r(19935),n=r(67830),a=r(99857),i=r(93836),s=r(65612),c=r(53992),d=r(31050);t.logEvent=async function(e,t){const{interactionDataConsent:r}=await(0,n.getGlobalExtensionSettings)(e);if(!(!1!==r))return{result:a.StyxApiResult.NoBatchesSent,success:!1};const{logger:o,logRepository:c}=(0,i.createLogger)(e);return o.logEvent(t.event),(0,s.queueLogRepositoryEvents)(e,c)},t.logPageView=async function(e,t){const{interactionDataConsent:r}=await(0,n.getGlobalExtensionSettings)(e);if(!(!1!==r))return{result:a.StyxApiResult.NoBatchesSent,success:!1};const{logger:o,logRepository:c}=(0,i.createLogger)(e);return o.logView(t.pageView,t.browseComponent),(0,s.queueLogRepositoryEvents)(e,c)},t.logToggleAnalyticsEvent=async function(e){const{interactionDataConsent:t}=await(0,n.getGlobalExtensionSettings)(e),{logger:r,logRepository:a}=(0,i.createLogger)(e),c=!1!==t;if(c||(0,d.clearEventQueue)(e,a),r.logEvent(new o.UserToggleAnalyticsEvent({isAnalyticsEnabled:c})),!t)try{return(0,s.immediatelySendEvents)(e,a)}catch{return(0,s.queueLogRepositoryEvents)(e,a)}return(0,s.queueLogRepositoryEvents)(e,a)},t.flushQueue=function(e){return(0,c.sendEventQueueToStyx)(e)}},31050:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearEventQueue=t.storeEventsInQueue=t.EVENT_QUEUE_STORAGE_KEY=void 0;const o=r(54516),n=r(83794);t.EVENT_QUEUE_STORAGE_KEY="EventLogger.eventQueue",t.storeEventsInQueue=async function(e,r){const{storageService:a,storeService:i}=e,s=a.getLocalStorage(),c=(0,o.getCommonAppSetting)("eventLoggerQueueKey"),d=r.logStorage.copy();let l=[];const u=[];if(await s.itemExists(t.EVENT_QUEUE_STORAGE_KEY)){const e=await s.readItem(t.EVENT_QUEUE_STORAGE_KEY);if("string"!=typeof e)throw new Error("value of EventLogger.eventQueue is expected to be a string");e&&(l=await(0,n.decryptEvents)(i,e,c))}l=l.concat(d),l.map((e=>u.filter((t=>t.id===e.id)).length>0?null:u.push(e)));const p=await(0,n.encryptEvents)(i,u,c);await s.writeItem(t.EVENT_QUEUE_STORAGE_KEY,p);const S=d.map((e=>e.id));r.logStorage.removeEvents(S)},t.clearEventQueue=async function(e,r){const{storageService:a,storeService:i}=e,s=a.getLocalStorage(),c=(0,o.getCommonAppSetting)("eventLoggerQueueKey"),d=await(0,n.encryptEvents)(i,[],c);await s.writeItem(t.EVENT_QUEUE_STORAGE_KEY,d);const l=r.logStorage.copy().map((e=>e.id));r.logStorage.removeEvents(l)}},7634:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(84573);t.config={commands:{logException:{handler:o.logException}},liveQueries:{},queries:{}}},51313:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},11664:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(7634);t.bootstrap=e=>{e.register(o.config)}},59125:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendTypedExceptionLog=t.sendExceptionLog=t.setAllowedToSendExceptionLog=t.bootstrap=void 0;const o=r(25110),n=r(54519),a=r(31891);var i=r(11664);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return i.bootstrap}});let s=!0;t.setAllowedToSendExceptionLog=e=>s=e,t.sendExceptionLog=async function(e){if(s)try{await(0,o.default)((0,n.default)("carbonException",e))}catch(e){a.Debugger.error(`[Exception] - sendExceptionLog: ${e.message||e}`)}},t.sendTypedExceptionLog=async function(e,t){if(s)try{await(0,o.default)((0,n.default)(e,t))}catch(e){a.Debugger.error(`[Exception] - sendTypedExceptionLog: ${e.message||e}`)}}},54519:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.anonymousSessionId=void 0;const o=r(28354),n=r(38215),a=r(15528),i=r(73144);function s(e){return{action:"logOnline",code:e.code===a.ExceptionCriticality.WARNING?a.ExceptionCriticality.WARNING:a.ExceptionCriticality.ERROR,message:e.message||"",exceptiontype:e.type,functionName:e.funcName,file:e.fileName,legacy:Boolean(e.legacy),line:e.line,stack:e.precisions,sessionId:t.anonymousSessionId,additionalInfo:e.additionalInfo||""}}function c(e,t){const r=t;if(r.error){const t=r.error.precisions&&"string"==typeof r.error.precisions?`${r.error.message}\n${r.error.precisions}`:r.error.message,o=(0,i.isCarbonError)(r.error)?r.error.getAdditionalInfoString():"";return s({type:e,message:t,code:r.code||r.error.errorLevel,precisions:r.error.stack,additionalInfo:o})}return s(Object.assign({type:e},t))}t.anonymousSessionId=(0,o.v4)(),t.default=function(e,t){return{...(r=(0,n.getPlatformInfo)(),{type:r.platformName,version:r.appVersion,osVersion:r.osVersion,browser:r.browser,browserVersion:r.browserVersion,os:r.os}),...c(e,t)};var r}},25110:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EXCEPTION_LOG_ENDPOINT=void 0;const o=r(43728),n=r(31891);t.EXCEPTION_LOG_ENDPOINT="https://kck3hlb9.dashlane.com/1/softwarelog/create";t.default=function(e){return function(e,t,r){const o=e.message||e.functionName||e.file||"UNKNOWN_EXCEPTION";return a[o]=a[o]||0,a[o]++,a[o]>t?Promise.resolve():r()}(e,10,(()=>(0,o.postDataToUrl)(t.EXCEPTION_LOG_ENDPOINT,e).then((()=>{})).catch((e=>n.default.log(e)))))};const a={}},84573:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logException=void 0;const o=r(59125);t.logException=async function(e,t){return await(0,o.sendTypedExceptionLog)(t.exceptionType,t.log),{success:!0}}},15528:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionCriticality=void 0,function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR"}(t.ExceptionCriticality||(t.ExceptionCriticality={}))},61828:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendInstallerLog=void 0;const o=r(69239),n=r(87649);t.sendInstallerLog=function(e,t){var r,a;if(!1!==(null===(a=null===(r=e.getState().device.globalExtensionSettings)||void 0===r?void 0:r.extensionSettings)||void 0===a?void 0:a.interactionDataConsent))return(0,o.default)((0,n.default)(e,t))}},87649:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(28060),n=r(27023),a=r(54516),i=["precisions"];function s(e){const t=e.getPlatformInfo(),r=e.getLocation().country;return{platform:t.platformName,anonymousapplicationid:t.anonymousApplicationId,lang:t.lang,browser:t.browser,browserversion:t.browserVersion,country:r||t.country,os:t.os,oscountry:t.osCountry,osversion:t.osVersion,version:t.appVersion}}function c(e){return{abtesting:e.getABTesting().version}}t.default=function(e,t){const r=t&&t.precisions&&t.precisions.usagepartnerid,d={...t,...s(e),...c(e),...(0,a.getCommonAppSettings)()?{sessioninstallerid:(0,n.getApplicationSessionId)(),anonymouscomputerid:(0,a.getCommonAppSetting)("anonymousComputerId")}:null,step:t.step,content:(l=(0,o.omit)(["usagepartnerid"],t.precisions),JSON.stringify(l))};var l;return r&&(d.usagepartnerid=r),(0,o.omit)(i,d)}},69239:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INSTALLER_LOG_ENDPOINT=void 0;const o=r(31891),n=r(43728);t.INSTALLER_LOG_ENDPOINT="https://kck3hlb9.dashlane.com/1/installerlog/create",t.default=function(e){if(!e.sessioninstallerid&&!e.desktopanonymouscomputerid||!e.anonymouscomputerid){const e="Not sending InstallerLog, missing sessioninstallerid or anonymouscomputerid";return o.default.warn(e),Promise.reject(new Error(e))}return(0,n.postDataToUrl)(t.INSTALLER_LOG_ENDPOINT,e).then((()=>{})).catch((e=>o.default.log(e)))}},95187:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeLogsControllerServices=void 0;t.makeLogsControllerServices=e=>({sendPerfLog:t=>function(e,t){return e.sendPerfLog(t)}(e.perfLogService,t)})},92357:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createPerfMeasuringPromise=t.sendPerfLog=t.makePerfLogService=void 0;const o=r(33661),n=r(35104),a=r(78312);function i(e,t){var r,a;if(!1!==(null===(a=null===(r=e.getState().device.globalExtensionSettings)||void 0===r?void 0:r.extensionSettings)||void 0===a?void 0:a.interactionDataConsent))return(0,o.default)((0,n.makeLog)(e,t))}t.makePerfLogService=e=>({sendPerfLog:t=>i(e,t),createPerfMeasuring:(r,o,n)=>(...a)=>(0,t.createPerfMeasuringPromise)(e,i,r,o,n)(...a)}),t.sendPerfLog=i;t.createPerfMeasuringPromise=(e,t,r,o,n)=>async(...i)=>{const s=(0,a.default)(r);s.mark();try{const n=await o(...i),a=s.measure();return t(e,{type:"WP_PERFORMANCE",scope:"unit",content:{name:r,time:a}}),n}catch(e){throw s.clear(),n&&n(e),e}}},35104:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeLog=void 0;const o=r(59125),n=r(97211),a=r(28060),i=r(54516),s=r(31891),c=r(96828).i8;t.makeLog=function(e,t){return function(e,t){if(!d(e)[t.type]){const e=`Unhandled logtype: ${t.type}:${n.PerfLogType[t.type]}`;s.default.log(e),(0,o.sendExceptionLog)({error:new Error(e)})}return d(e)[t.type](t)}(e,t)};const d=e=>{const t=e.isAuthenticated(),r=e.getPlatform().info,o={os:(s=r).os,version:s.appVersion,lang:s.lang,oslang:"",anonymouscomputerid:(0,i.getCommonAppSetting)("anonymousComputerId"),browser:s.browser,browserVersion:s.browserVersion};var s;const d=["content","type","anonymouscomputerid","os","version","lang","oslang"];return{[n.PerfLogType.WP_PERFORMANCE]:t=>{const n=t,s={...n,anonymouscomputerid:(0,i.getCommonAppSetting)("anonymousComputerId"),browser:o.browser,origin:"carbon",originVersion:c,os:o.os,platform:r.platformName,platformVersion:r.appVersion,lang:"en",channel:"unknown"};e.getPersonalSettings().AnonymousUserId&&(s.anonymousUserId=e.getPersonalSettings().AnonymousUserId);const l=Object.keys(s).reduce(((e,t)=>(d.includes(t)&&(e[t]=s[t]),e)),{content:""}),u=n.content;return{...l,type:"WpPerfs",version:r.appVersion,content:JSON.stringify(Object.assign((0,a.mapObjIndexed)(((e,t)=>{if(!t||!d.includes(t.toString())){if(null==e)throw new Error(`Error sending WpPerfs, ${t} has an undefined value`);return e.toString()}}),s),{...u}))}},[n.PerfLogType.ANALYSIS_PERFORMANCE]:e=>{const r=e.info,n={loggedin:t,cpp5_1an:r.firstAnalysis,cpp6_2an:r.secondAnalysis,cpp9_form:r.formAnalysis,cpp10_7an:r.seventhAnalysis,timeToImpalas:r.timeToImpalas,totalAnalysisTime:r.totalAnalysisTime,timeSinceLaunch:r.timeSinceLaunch,tabs:r.nbTabs,analysisMode:r.analysisMode};return Object.assign(o,{type:"AnalysisReport",content:JSON.stringify(Object.assign((0,a.mapObjIndexed)(((e,t)=>{if(null==e)throw new Error(`Error sending AnalysisReport, ${t} has an undefined value`);return e.toString()}),n),{browser:o.browser,browserVersion:o.browserVersion}))})},[n.PerfLogType.WA_PERFORMANCE]:e=>{const t=e,r=(0,a.mapObjIndexed)(((e,t)=>{if(null===e)throw new Error(`Error sending WaPerflog, ${t} has an undefined value`);return e.toString()}),t.content);return{type:"WaPerfs",anonymouscomputerid:o.anonymouscomputerid,os:o.os,version:o.version,lang:o.lang,content:JSON.stringify({subtype:r.subtype,duration:r.duration,action:r.action,subaction:r.subaction,analysisMode:r.analysisMode,browser:o.browser,browserVersion:o.browserVersion})}}}}},33661:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PERF_LOG_ENDPOINT=void 0;const o=r(43728),n=r(31891);t.PERF_LOG_ENDPOINT="https://kck3hlb9.dashlane.com/1/perflog/create",t.default=function(e){return(0,o.postDataToUrl)(t.PERF_LOG_ENDPOINT,e).then((()=>{})).catch((e=>n.default.log("Error sending Perflog",e)))}},73442:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendUsageLog=void 0;const o=r(50510),n=r(44573),a=r(73144),i=r(59125);t.sendUsageLog=async function(e,t,r){var s,c;if(!1!==(null===(c=null===(s=e.getState().device.globalExtensionSettings)||void 0===s?void 0:s.extensionSettings)||void 0===c?void 0:c.interactionDataConsent))try{await(0,o.default)((0,n.default)(e,t,r))}catch(e){const t=a.CarbonError.fromAnyError(e).addContextInfo("UsageLog","sendUsageLog");(0,i.sendExceptionLog)({error:t})}}},44573:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeSdkParams=t.makePlatformParams=t.makeSessionUsageLogsParams=void 0;const o=r(97211),n=r(17509),a=r(87459),i=r(48157),s=r(54516),c=r(27023);function d(e,t){if(e&&t){const r=t.concat("-",e);return(0,a.computeHashMD5)(r)}return e}function l(e){return({code:t,content:r})=>{const a=new Date,i=a.toISOString().replace(/\.\d{3}Z$/,"Z"),s=Math.floor(a.getTime()/1e3),c=function(e,t,r){if(e===o.UsageLogCode.USAGE_GROUP_SHARING){const e=t;return{...t,userGroupId:d(e.userGroupId,r),itemGroupId:d(e.itemGroupId,r),targetUserid:d(e.targetUserid,r)}}return t&&"website"in t?{...t,website:(0,n.extractFullDomain)(t.website)}:t}(t,r,e);return{code:t,isodatetime:i,timestamp:s,...c}}}function u(e){const t=e.getAccountInfo().login,r=t&&(0,i.isInternalTestUser)(t)?{kw_test_:!0,kw_test_login:t}:{};return{session:(0,c.getApplicationSessionId)(),userId:e.getPersonalSettings().AnonymousUserId,device:(0,s.getCommonAppSetting)("anonymousComputerId"),...r}}function p(e){const t=e.getPlatformInfo();return{platform:t.platformName,version:t.appVersion,browser:t.browser,browserversion:t.browserVersion,os:t.os,osversion:t.osVersion}}function S(e,t){const r=e.getSdkAuthentication();return r&&r.anonymousPartnerId?{usagepartnerid:r.anonymousPartnerId,sdkversion:t,version:t,device:(0,s.getCommonAppSetting)("anonymousComputerId")}:{}}t.default=function(e,t,r={}){const o=p(e),n=u(e),a=S(e,o.version),i=function(e,t){const{UsagelogToken:r}=e.getPersonalSettings(),o=Array.isArray(t)?t.map(l(r)):l(r)(t);return JSON.stringify(o)}(e,t);return{...o,...n,...a,content:i,...r}},t.makeSessionUsageLogsParams=u,t.makePlatformParams=p,t.makeSdkParams=S},50510:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.USAGE_LOG_ENDPOINT=void 0;const o=r(31891),n=r(43728);t.USAGE_LOG_ENDPOINT="https://kck3hlb9.dashlane.com/2/softwareusage/create",t.default=function(e){if(!e.session||!e.userId){const e="Not sending UsageLog, missing session or userId";return o.default.warn(e),Promise.reject(new Error(e))}return(0,n.postDataToUrl)(t.USAGE_LOG_ENDPOINT,e).then((()=>{})).catch((e=>o.default.log(e)))}},54808:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getItemParams=t.sendSharingUsageLogs=t.sendSharingUsageLog=void 0;const o=r(11814),n=r(97211),a=r(73442);t.sendSharingUsageLog=async function(e,t){const r={code:n.UsageLogCode.USAGE_GROUP_SHARING,content:t};return(0,a.sendUsageLog)(e,r)},t.sendSharingUsageLogs=async function(e,t){const r=n.UsageLogCode.USAGE_GROUP_SHARING,o=t.map((e=>({code:r,content:e})));return(0,a.sendUsageLog)(e,o)},t.getItemParams=function(e){return{itemType:n.isCredential(e)?"AUTHENTICATION":"NOTE",...n.isCredential(e)?{website:o.url.getSafeDomainForUrl(e.Url)}:{},itemId:e.AnonId}}},11406:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.stopTimedTrigger=t.startTimedTrigger=void 0;const o=r(97211),n=r(73442);t.startTimedTrigger=function(e){return setInterval((()=>{(0,n.sendUsageLog)(e,{code:o.UsageLogCode.USAGE_SYNC,content:{}})}),18e5)},t.stopTimedTrigger=function(e){clearInterval(e)}},48027:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendUsageLogPremiumUser=t.getFamilyPlanStatus=t.getAvailablePlans=t.TeamPlanStatus=t.FamilyPlanStatus=void 0;const o=r(28060),n=r(97211),a=r(84146),i=r(97055),s=r(30136);var c,d;async function l(e){const{offers:t,premiumPlusOffers:r}=await(0,s.getDirectPayment)(e),n=(0,o.map)((e=>e.name),t),a=(0,o.map)((e=>e.name),r);return n.concat(a)}!function(e){e.nofamily="nofamily",e.admin="admin",e.member="member"}(c=t.FamilyPlanStatus||(t.FamilyPlanStatus={})),function(e){e.billing="billing",e.noteam="noteam",e.admin="admin",e.member="member"}(d=t.TeamPlanStatus||(t.TeamPlanStatus={})),t.getAvailablePlans=l;t.getFamilyPlanStatus=e=>e?e.isAdmin?c.admin:c.member:c.nofamily,t.sendUsageLogPremiumUser=async function(e){var r,o,s,c,u,p,S,g,m,y;const v=e.getLocalSettings().premiumStatus,A=e.getSpaceData(),E=e.getLocation();if(!v)return;const{planType:f,planName:h,statusCode:_,autoRenewal:T,endDate:I,capabilities:C,familyMembership:P}=v,D=e.getAccountInfo().login,O=await l(D);(0,a.sendUsageLog)(e,{code:n.UsageLogCode.USAGE_PREMIUM_USER,content:{country:E.country,availablePlans:O,isPremium:(e=>e===n.PremiumStatusCode.PREMIUM||e===n.PremiumStatusCode.PREMIUM_CANCELLED)(_),isLegacy:_===n.PremiumStatusCode.OLD_ACCOUNT,planType:f,planName:h,status:_,AutoRenewalStatus:T,endDate:I,teamPlanStatus:(e=>(0,i.isBillingAdminInCurrentSpace)(e)?d.billing:(0,i.isTeamAdminInCurrentSpace)(e)?d.admin:(0,i.getCurrentTeamId)(e)?d.member:d.noteam)(A),familyPlanStatus:(0,t.getFamilyPlanStatus)(P),creditMonitoring:!!(null===(r=null==C?void 0:C.creditMonitoring)||void 0===r?void 0:r.enabled),dataLeak:!!(null===(o=null==C?void 0:C.dataLeak)||void 0===o?void 0:o.enabled),identityRestoration:!!(null===(s=null==C?void 0:C.identityRestoration)||void 0===s?void 0:s.enabled),identityTheftProtection:!!(null===(c=null==C?void 0:C.identityTheftProtection)||void 0===c?void 0:c.enabled),passwordChanger:!!(null===(u=null==C?void 0:C.passwordChanger)||void 0===u?void 0:u.enabled),passwordsLimit:!!(null===(p=null==C?void 0:C.passwordsLimit)||void 0===p?void 0:p.enabled),secureNotes:!!(null===(S=null==C?void 0:C.secureNotes)||void 0===S?void 0:S.enabled),secureWifi:!!(null===(g=null==C?void 0:C.secureWiFi)||void 0===g?void 0:g.enabled),securityBreach:!!(null===(m=null==C?void 0:C.securityBreach)||void 0===m?void 0:m.enabled),sharingLimit:!!(null===(y=null==C?void 0:C.sharingLimit)||void 0===y?void 0:y.enabled)}})}},71878:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.USAGE_LOG_TAG=t.PERF_LOG_TAG=t.INSTALLER_LOG_TAG=t.EXCEPTION_LOG_TAG=t.DEBUGGER_LOG_TAG=t.LOGS_LOG_TAG=void 0,t.LOGS_LOG_TAG="Logs",t.DEBUGGER_LOG_TAG="Debugger",t.EXCEPTION_LOG_TAG="Exception",t.INSTALLER_LOG_TAG="Installer",t.PERF_LOG_TAG="Perf",t.USAGE_LOG_TAG="Usage"},3107:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(89739),n=r(3032),a=r(95362),i=r(22052);t.config={commands:{markNotificationAsInteracted:{handler:o.markNotificationAsInteracted},markNotificationAsSeen:{handler:n.markNotificationAsSeen}},queries:{getNotificationStatus:{selector:i.notificationsStatusSelector}},liveQueries:{liveNotificationStatus:{operator:a.notificationsStatus$}}}},44116:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationStatus=t.NotificationName=void 0;var o=r(12097);Object.defineProperty(t,"NotificationName",{enumerable:!0,get:function(){return o.NotificationName}}),Object.defineProperty(t,"NotificationStatus",{enumerable:!0,get:function(){return o.NotificationStatus}})},57824:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(3107);t.bootstrap=e=>{e.register(o.config)}},55665:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(57824);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},89739:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.markNotificationAsInteracted=void 0;const o=r(62602),n=r(22052);t.markNotificationAsInteracted=async(e,t)=>{const{storeService:r,localStorageService:a}=e;r.dispatch((0,o.MarkAsInteracted)(t));const i=(0,n.notificationsStatusSelector)(r.getState());a.getInstance().storeNotificationsStatus(i)}},3032:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.markNotificationAsSeen=void 0;const o=r(62602),n=r(22052);t.markNotificationAsSeen=async(e,t)=>{const{storeService:r,localStorageService:a}=e;r.dispatch((0,o.markAsSeen)(t));const i=(0,n.notificationsStatusSelector)(r.getState());a.getInstance().storeNotificationsStatus(i)}},12097:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationStatus=t.NotificationName=void 0,function(e){e.PaymentFailureChurning="paymentFailureChurning",e.PaymentFailureChurned="paymentFailureChurned",e.IdsPromotion="idsPromotion",e.SwitchToMlAnalysisEngine="switchToMlAnalysisEngine",e.VpnProviderIsNowHotspot="vpnProviderIsNowHotspot",e.VpnHostpotshieldInstalled="vpnHostpotshieldInstalled",e.VpnIsReleased="vpnIsReleased",e.PopupIncomingTabPayments="popupIncomingTabPayments",e.PopupIncomingTabSecureNotes="popupIncomingTabSecureNotes",e.PopupIncomingTabPersonalInfo="popupIncomingTabPersonalInfo",e.PopupIncomingTabIDs="popupIncomingTabIDs",e.TacWebFirstBanner="tacWebFirstBanner",e.NewAccountMenuTooltip="newAccountMenuTooltip",e.TacGetTheExtensionBanner="tacGetTheExtensionBanner",e.TacEnableAccountRecoveryBanner="tacEnableAccountRecoveryBanner",e.TacOnlyOneAdminBanner="tacOnlyOneAdminBanner",e.TacActivityBetaBanner="tacActivityBetaBanner",e.PasswordHistoryBanner="passwordHistoryBanner",e.SharingCenterDisabledBanner="sharingCenterDisabledBanner",e.SCIMMarketingInfoBoxHomePage="scimMarketingInfoBoxHomePage",e.SCIMMarketingInfoBoxWebappPage="scimMarketingInfoBoxWebappPage",e.SCIMMarketingInfoBoxSetupPage="scimMarketingInfoBoxSetupPage"}(t.NotificationName||(t.NotificationName={})),function(e){e.Interacted="interacted",e.Seen="seen",e.Unseen="unseen"}(t.NotificationStatus||(t.NotificationStatus={}))},36660:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(692),n=r(94693),a=r(33094),i=r(43573),s=r(26432),c=r(32713),d=r(45009),l=r(70795),u=r(23985),p=r(24822),S=r(6687),g=r(55645);t.config={commands:{createPasswordChange:{handler:n.createPasswordChange},getRecipe:{handler:o.downloadRecipe},getSupportedCredentialsForPasswordChange:{handler:c.filterSupportedCredentials},generatePasswordForCredential:{handler:s.generatePassword},answerPasswordChangeUserPrompt:{handler:d.answerUserPrompt},sendPasswordChangeDumps:{handler:l.sendDumps},deletePasswordChangeDumps:{handler:u.deleteDumps},dismissPasswordChangeNotifications:{handler:p.dismissPasswordChangeNotification},registerPasswordChangeChangeAttempt:{handler:S.registerChangeAttemptHandler},updateRelatedPasswordChangerCredentials:{handler:g.changePasswordForPasswordChangerHandler}},queries:{getPasswordChanges:{selector:a.passwordChangesSelector},hasPendingPasswordChangeDumps:{selector:a.hasDumpsSelector},getPasswordChangeNotifications:{selector:a.passwordChangesNotificationsSelector}},liveQueries:{livePasswordChanges:{operator:i.passwordChanges$},liveHasPendingPasswordChangeDumps:{operator:i.hasDumpsSelector$},livePasswordChangeNotifications:{operator:i.passwordChangesNotifications$}}}},30357:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(45639),t)},15648:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(36660);t.bootstrap=e=>{e.register(o.config)}},43341:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(15648);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},74715:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SERVER_SIGNATURE_PUBLIC_KEY=void 0,t.SERVER_SIGNATURE_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAv+XVv970tQg2SmaSxBUY\nWsCjUtzlkJhuhq/p+GE96kLbWBVZkkG+IRAfT6lN7cN3b5hoDdtWtVN99MrZQ1Li\nkVAFjrY0Hu+vyFpJRxo2/KbW6Y9fidIL8WQtr7f9EhK/CCUKdug7kkxq/cKV4J25\n3HIqWN3UrF0EjeUCMNdIZmyUnaQlB/8E0VGzssxUUDC3RkkAs+ccRJ5oXv5aKIZB\nzp1giSfWhqdhCLxvvdYI6/LUiUjdBMyFyoDm9+g9w+jUBzJXa+5EjZy6KQPbZM3S\nbDvq4VBrzVMf1JDacXeiJ3E0yLOqYLQjRWDBZ7J/blNPvf+jKbUEPKQq+DkxGjnS\ncZAbAQ8gBgW2OSn3dz04mEeNGTZiJcvR9qJGQ3xPIOT+uiBB7iwcbcpWmxhNIXNd\n9ipmzspRZT5zlpuVq8ppy/RdtcTIG0ooY3wAbld83hOkORCqAWd72Uxpcga38zMl\nMOrMxZVxphKUkRzO/nXwxbybsmz5QVnmQJ5c7nkD9Cr0xBEbyy1zh/HQdBT52QQI\n8RaO8QQvVhPeHbjlgOxKBlLyG8VMyIu4oODQw+MO7MSo+E9T2v2vSAlpkxxdGlKV\nauZ+kEriQ2dLfanZCP1ON0jsdoWbIAIPWKgfc+ZYUok0ak2tpqq1zNC2cLp60MMD\ns7Bnr2DUA8NesiksMUYlLncCAwEAAQ==\n-----END PUBLIC KEY-----\n"},60110:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordChangerEventBusClient=void 0;t.PasswordChangerEventBusClient=class{constructor(e){this.changer=e}answerUserPrompt(e){return this.changer.livePasswordChangeUserPromptAnswer(e.changeId,e)}getVersion(){return this.changer.getVersion()}async changePassword(e,t){const r=this.changer.dumpCreated.on((e=>{t.onDumpCreated(e)})),o=await this.changer.changePassword(e);if(t.onNewProgress(o),!o.running)return void r();const n=this.changer.notifyPasswordChangeUserPrompt.on(e.credential.id,t.onNewUserPrompt),a=this.changer.passwordChangeNotification.on(e.credential.id,(e=>{t.onNewProgress(e),e.running||(r(),n(),a())}))}async getPasswordRequirements(e){return await this.changer.getPasswordChangeRequirements({domain:e})}}},14271:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.passwordChangerEvents=t.PasswordChangeRequirementError=void 0;const o=r(72931);!function(e){e.DomainNotSupported="DomainNotSupported"}(t.PasswordChangeRequirementError||(t.PasswordChangeRequirementError={})),t.passwordChangerEvents={getVersion:(0,o.slot)(),changePassword:(0,o.slot)(),passwordChangeNotification:(0,o.slot)(),getPasswordChangeRequirements:(0,o.slot)(),notifyPasswordChangeUserPrompt:(0,o.slot)(),livePasswordChangeUserPromptAnswer:(0,o.slot)(),dumpCreated:(0,o.slot)()}},43573:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.passwordChangesNotifications$=t.hasDumpsSelector$=t.passwordChanges$=void 0;const o=r(18948),n=r(3343),a=r(33094);t.passwordChanges$=()=>(0,o.pipe)((0,n.map)(a.passwordChangesSelector),(0,n.distinctUntilChanged)());t.hasDumpsSelector$=()=>(0,o.pipe)((0,n.map)(a.hasDumpsSelector),(0,n.distinctUntilChanged)());t.passwordChangesNotifications$=()=>(0,o.pipe)((0,n.map)(a.passwordChangesNotificationsSelector),(0,n.distinctUntilChanged)())},33094:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.passwordChangerRecipesChannelSelector=t.passwordChangeLinkedCredentials=t.hasDumpsSelector=t.dumpsSelector=t.passwordChangeSelector=t.passwordChangesNotificationsSelector=t.passwordChangesSelector=void 0;const o=r(17509),n=r(54090),a=r(1237),i=r(36519),s=r(14122),c=e=>e.userSession.passwordChangerState||{dumps:[],progresses:{},notifications:{}};t.passwordChangesSelector=e=>c(e).progresses;t.passwordChangesNotificationsSelector=e=>c(e).notifications;t.passwordChangeSelector=(e,r)=>(0,t.passwordChangesSelector)(e)[r]||{running:!1};t.dumpsSelector=e=>c(e).dumps;t.hasDumpsSelector=e=>c(e).dumps.length>0;t.passwordChangeLinkedCredentials=(e,t)=>{var r;const s=(0,a.credentialSelector)(e,t);if(!s)return[];const c=null===(r=(0,o.getParsedUrl)(s.Url))||void 0===r?void 0:r.rootDomain;if(!c)return[];const d=new Set((0,n.getWebsitesAssociatedToUrl)(c));return(0,i.credentialsSelector)(e).filter((e=>e.Password===s.Password)).filter((e=>!!s.Email&&s.Email===e.Email||!!s.Login&&s.Login===e.Login)).filter((e=>{var t;return d.has(null===(t=(0,o.getParsedUrl)(e.Url))||void 0===t?void 0:t.rootDomain)}))};t.passwordChangerRecipesChannelSelector=e=>(0,s.hasFeatureSelector)(e,"saexPasswordChangerQARecipes")?"qa":"prod"},45009:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.answerUserPrompt=void 0;const o=r(52938);t.answerUserPrompt=async(e,t)=>{e.storeService.dispatch((0,o.reportPasswordChangeEndrompt)(t.changeId,t.promptId));const r=e.infrastructureService.passwordChanger;r&&await r.answerUserPrompt(t)}},55645:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.changePasswordForPasswordChangerHandler=void 0;const o=r(97747),n=r(31891),a=r(59125),i=r(33094);t.changePasswordForPasswordChangerHandler=async function(e,t){try{const r=e.storeService.getState(),n=(0,i.passwordChangeLinkedCredentials)(r,t.baseCredentialId).map((r=>{var n,a;return(0,o.updateCredential)({storeService:e.storeService,sessionService:e.sessionService,eventLoggerService:e.eventLoggerService},{id:r.Id,usageLogComponentName:"PWD_CHANGER",update:{password:null!==(n=t.update.password)&&void 0!==n?n:r.Password,login:null!==(a=t.update.login)&&void 0!==a?a:r.Login}})}));return await Promise.all(n),{success:!0}}catch(e){const t=new Error(`[PasswordChange] - changePasswordForPasswordChangerHandler: ${e}`);return n.Debugger.error(t),(0,a.sendExceptionLog)({error:t}),{success:!1}}}},23985:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteDumps=void 0;const o=r(52938);t.deleteDumps=async function(e){const{storeService:t}=e;t.dispatch((0,o.reportDumpsDeleted)())}},26432:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generatePassword=void 0;const o=r(45639),n=r(64159),a=r(31891),i=r(59125),s=r(34280),c=r(1237);t.generatePassword=async function(e,t){try{const{infrastructureService:r,storeService:a}=e;if(!r.passwordChanger)throw new Error("No password changer plugin");if(!(0,c.credentialSelector)(e.storeService.getState(),t.credentialId))return{success:!1,error:o.GeneratePasswordError.NoSuchCredential};const i=(await(0,s.getDomainForPasswordChange)(e,[t.credentialId]))[t.credentialId];if(!i)return{success:!1,error:o.GeneratePasswordError.DomainNotSupported};const d=await r.passwordChanger.getPasswordRequirements(i);if(!d.success)return{success:!1,error:o.GeneratePasswordError.DomainNotSupported};return{success:!0,password:n.generatePassword(a.getPersonalSettings(),d.requirements)}}catch(e){const t=new Error(`[PasswordChange] - generatePassword: ${e}`);return a.Debugger.error(t),(0,i.sendExceptionLog)({error:t}),{success:!1,error:o.GeneratePasswordError.UnexpectedError}}}},37716:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getActiveDomains=void 0;const o=r(64255),n=r(15876),a=r(44461),i=e=>{const t=e.match(/^(\d+)\.(\d+)\.(\d+)/);if(!t)return;return{major:Number(t[1]),minor:Number(t[2]),patch:Number(t[3])}};t.getActiveDomains=async function(e,t,r,s){const c=await(0,o.listActiveDomains)(e,r,{channel:s});if((0,n.isApiError)(c))throw new Error(c.code);const{s3Location:d}=c,l=await(0,a.get)(d),u=i(t);if(!u)throw new Error("Should not happen");return Object.keys(l.data).filter((e=>l.data[e])).filter((e=>{var t;return!(null!==(t=l.data[e].excludedPlatforms)&&void 0!==t?t:[]).includes("web_extension")})).filter((e=>{if(!l.data[e].minimumEngineVersion)return!0;const t=i(l.data[e].minimumEngineVersion);return!t||(e=>!(u.major<e.major)&&(u.major>e.major||!(u.minor<e.minor)&&(u.minor>e.minor||u.patch>=e.patch)))(t)})).reduce(((e,t)=>({...e,[t]:l.data[t]})),{})}},34280:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDomainForPasswordChange=void 0;const o=r(17509),n=r(1237),a=r(54090),i=r(8153),s=r(37716),c=r(33094);t.getDomainForPasswordChange=async(e,t)=>{const{storeService:r}=e,d=r.getState(),l=(0,c.passwordChangerRecipesChannelSelector)(d),u=(0,i.userLoginSelector)(d);if(!u)throw new Error("Unauthenticated user");const p=await(0,s.getActiveDomains)(r,await e.infrastructureService.passwordChanger.getVersion(),u,l),S=e=>{const t=(0,o.getParsedUrl)(e);if(t.fullDomain)return[t.fullDomain,t.subDomainName,...(0,a.getWebsitesAssociatedToUrl)(e)].find((e=>p[e]))};return t.map((e=>(0,n.credentialSelector)(d,e))).reduce(((e,t)=>({...e,[t.Id]:S(t.Url)})),{})}},24822:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dismissPasswordChangeNotification=void 0;const o=r(52938);t.dismissPasswordChangeNotification=async function(e,t){const{storeService:r}=e;r.dispatch((0,o.notificationDismissed)(new Set(t.ids)))}},94693:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createPasswordChange=void 0;const o=r(17509),n=r(45639),a=r(52938),i=r(93394),s=r(1237),c=r(33094),d=r(14122),l=r(34280);t.createPasswordChange=async function(e,t){var r,u,p,S,g,m;const y=(0,d.hasFeatureSelector)(e.storeService.getState(),"ptu_web_pwcDumpsExternal"),{storeService:v,infrastructureService:A}=e;if(!A.passwordChanger)return{success:!1,reason:n.CreatePasswordChangeError.NoPasswordChangerPlugin};const E=v.getState(),f=(0,s.credentialSelector)(E,t.credentialId);if(void 0===f)return{success:!1,reason:n.CreatePasswordChangeError.NoSuchCredential};if(!(await(0,l.getDomainForPasswordChange)(e,[t.credentialId]))[t.credentialId])throw new Error("Credential should have a domain");if((0,c.passwordChangeSelector)(E,t.credentialId).running)return{success:!1,reason:n.CreatePasswordChangeError.ChangeInProgress};function h(e){v.dispatch((0,a.reportPasswordChangeProgress)(t.credentialId,e))}return h({running:!0,state:i.PasswordChangeOngoingStatus.Waiting}),A.passwordChanger.changePassword({credential:{id:f.Id,email:null!==(u=null===(r=t.overrides)||void 0===r?void 0:r.email)&&void 0!==u?u:f.Email,login:null!==(S=null===(p=t.overrides)||void 0===p?void 0:p.login)&&void 0!==S?S:f.Login,password:null!==(m=null===(g=t.overrides)||void 0===g?void 0:g.password)&&void 0!==m?m:f.Password},domain:(0,o.getParsedUrl)(f.Url).fullDomain,options:{newPassword:t.newPassword,isBulkChange:!1,bulkChangeCredentialCount:1}},{onDumpCreated:e=>{y&&v.dispatch((0,a.reportNewDump)(e))},onNewProgress:h,onNewUserPrompt:e=>v.dispatch((0,a.reportPasswordChangeStartPrompt)(f.Id,e))}),{success:!0,credentialId:t.credentialId}}},692:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.downloadRecipe=t.downloadRecipes=void 0;const o=r(24675);o.configure({useWebWorkers:!1});const n=r(15876),a=r(24555),i=r(96045),s=r(53494),c=r(40232),d=r(30507),l=r(8153),u=r(21337),p=r(74715),S=r(45639),g=r(31891),m=r(59125),y=r(37716),v=r(17509),A=r(54090),E=r(49500),f=r(33094);async function h(e,t){const{storeService:r}=e,S=r.getState(),h=(0,f.passwordChangerRecipesChannelSelector)(S),_=(0,l.userLoginSelector)(S);if(!_)throw new Error("Unauthenticated user");const T=(0,u.getCurrentUserInfo)(r),I=t.domains.map((e=>({domain:e,parsed:(0,v.getParsedUrl)(e)}))).reduce(((e,t)=>({...e,[t.domain]:[t.parsed.fullDomain,t.parsed.subDomainName,...(0,A.getWebsitesAssociatedToUrl)(t.domain)]})),{}),C=await async function(e,t,r,o,n){const a=await(0,y.getActiveDomains)(e,t,r,o);return Object.keys(n).map((e=>({key:e,bundle:n[e].map((e=>{var t;return{domainInBundle:e,bundleName:null===(t=a[e])||void 0===t?void 0:t.bundle}})).find((e=>e.bundleName))}))).filter((e=>!!e.bundle)).reduce(((e,t)=>e.set(t.key,t.bundle)),new Map)}(r,await e.infrastructureService.passwordChanger.getVersion(),_,h,I);try{return await async function(e,t,r,l,u){const S=[...new Set([...l.values()].map((e=>e.bundleName)))];if(!S.length)return{success:!0,recipes:new Map};const g=await(0,E.getBundles)(e,t,{channel:r,names:S});if((0,n.isApiError)(g))throw new Error(g.code);const m=(0,i.makeAsymmetricEncryption)({hashAlgorithm:d.HashAlgorithm.SHA_1}),y=(0,i.makeAsymmetricEncryption)({hashAlgorithm:d.HashAlgorithm.SHA_256}),v=await Promise.all(g.bundles.map((async e=>({...e,data:(0,a.bufferToBase64)(await(await fetch(e.s3Location)).arrayBuffer()),aesKey:(0,a.ab2str)((0,a.base64ToBuffer)(await m.decrypt(u,e.aesKeyEncrypted)))}))));if((await Promise.all(v.map((async e=>({name:e.name,isValid:await y.verify(p.SERVER_SIGNATURE_PUBLIC_KEY,e.signature,e.data)}))))).find((e=>!e.isValid)))throw new Error("Invalid signature, file corrupted");const A=await Promise.all(v.map((async e=>({...e,zip:await new o.ZipReader(new o.BlobReader(new Blob([(0,a.str2ab)((0,s.deflatedUtf8ToUtf16)(await(0,s.decipherDashlaneSecureData)(e.data,e.aesKey,"",(0,c.makeGetDerivateKeyWithCacheAndQueue)()),{skipInflate:!0}))]))).getEntries()}))));return{success:!0,recipes:(await Promise.all([...l.keys()].map((e=>({domain:e,entry:A.map((t=>({zip:t.zip,entry:t.zip.find((t=>t.filename===`${l.get(e).domainInBundle}.json`))}))).find((e=>!!e.zip))}))).filter((e=>!!e.entry)).map((async e=>({domain:e.domain,zip:await e.entry.entry.getData(new o.TextWriter)}))))).reduce(((e,t)=>e.set(t.domain,t.zip)),new Map)}}(r,_,h,C,T.privateKey)}catch(e){const t=new Error(`[PasswordChange] - downloadRecipe: ${e}`);return g.default.error(t),(0,m.sendExceptionLog)({error:t}),{success:!1}}}t.downloadRecipes=h,t.downloadRecipe=async function(e,t){const r=await h(e,{domains:[t.domain]});if(r.success){const e=r.recipes.get(t.domain);return e?{success:!0,recipe:e}:{success:!1,error:S.GetRecipeErrors.DomainNotFound}}return{success:!1,error:S.GetRecipeErrors.InternalError}}},6687:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registerChangeAttemptHandler=void 0;const o=r(15876),n=r(97406);t.registerChangeAttemptHandler=async(e,t)=>{const r=await(0,n.registerChangeAttempt)(e.storeService,{platform:"server_standalone",...t});return{success:!(0,o.isApiError)(r)}}},70795:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendDumps=void 0;const o=r(15876),n=r(85170),a=r(52938),i=r(8153),s=r(36109),c=r(31891),d=r(59125),l=r(33094);async function u(e,t,r){const a="saex-dump-"+(0,s.getUnixTimestamp)()+".json",i=await(0,n.getDumpUploadLink)(e,t,{files:[a]});if((0,o.isApiError)(i))throw new Error(i.code);const c=i.files[0],d=new FormData;for(const e of Object.keys(c.uploadHeaders))d.append(e,c.uploadHeaders[e]);d.append("key",c.key),d.append("acl",i.acl),d.append("file",new Blob([(new TextEncoder).encode(r.data)]),c.file);const l=await fetch(i.url,{method:"POST",body:d});if(l.status>=400)throw new Error(`Failed to put with ${l.status} - ${l.statusText}`)}t.sendDumps=async function(e){const{storeService:t}=e,r=t.getState(),o=(0,i.userLoginSelector)(r);try{for(;(0,l.hasDumpsSelector)(r);){const e=(0,l.dumpsSelector)(r)[0];await u(t,o,e),t.dispatch((0,a.reportDumpSent)(e))}return{success:!0}}catch(e){const t=new Error(`[PasswordChange] - sendDumps: ${e}`);return c.Debugger.error(t),(0,d.sendExceptionLog)({error:t}),{success:!1}}}},32713:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.filterSupportedCredentials=t.getEligibleCredentials=void 0;const o=r(17509),n=r(45639),a=r(36519),i=r(31891),s=r(59125),c=r(54090),d=r(8153),l=r(30590),u=r(37716),p=r(33094);t.getEligibleCredentials=(e,t)=>{const r=(0,a.credentialsSelector)(e),n=(null==t?void 0:t.length)?null==t?void 0:t.map((e=>r.find((t=>t.Id===e)))):r,i=(0,l.limitedSharingItemsSelector)(e),s=new Set(Object.keys(i).filter((e=>i[e])));return n.filter((e=>!!e&&(e.Email||e.Login)&&e.Password&&e.Url&&(0,o.getParsedUrl)(e.Url).fullDomain&&!s.has(e.Id)))},t.filterSupportedCredentials=async function(e,r){var a,l;try{const i=(0,t.getEligibleCredentials)(e.storeService.getState(),r.credentialIds),s={};if((null!==(l=null===(a=r.credentialIds)||void 0===a?void 0:a.length)&&void 0!==l?l:0)>i.length)return{success:!1,error:n.GetSupportedCredentialsForPasswordChangeError.CredentialNotFound};if(!i.length)return{success:!0,supportedCredentialIds:[]};for(const e of i){const{fullDomain:t,subDomainName:r}=(0,o.getParsedUrl)(e.Url),n=(0,c.getWebsitesAssociatedToUrl)(e.Url);for(const o of[t,r,...n])o&&(s[o]=s[o]||new Set,s[o].add(e.Id))}const S=await async function(e,t){const{storeService:r}=e,o=r.getState(),n=(0,p.passwordChangerRecipesChannelSelector)(o),a=(0,d.userLoginSelector)(o);if(!a)throw new Error("Unauthenticated user");const i=await e.infrastructureService.passwordChanger.getVersion(),s=await(0,u.getActiveDomains)(r,i,a,n);return t.filter((e=>!!s[e]))}(e,Object.keys(s));return{success:!0,supportedCredentialIds:[...S.map((e=>s[e])).reduce(((e,t)=>new Set([...e,...t])),new Set)]}}catch(e){const t=new Error(`[PasswordChange] - filterSupportedCredentials: ${e}`);return i.Debugger.error(t),(0,s.sendExceptionLog)({error:t}),{success:!1,error:n.GetSupportedCredentialsForPasswordChangeError.UnexpectedError}}}},93394:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FailureCode=t.UserPromptAnswerError=t.OtherUserPromptInputType=t.OtherUserPromptClassification=t.UserPromptType=t.PasswordChangeFinalStatus=t.PasswordChangeOngoingStatus=void 0,function(e){e.Waiting="waiting",e.Signin="signing",e.ChangingPassword="changingPassword"}(t.PasswordChangeOngoingStatus||(t.PasswordChangeOngoingStatus={})),function(e){e.Failed="Failed",e.Completed="Completed"}(t.PasswordChangeFinalStatus||(t.PasswordChangeFinalStatus={})),function(e){e.ReCaptcha="ReCaptcha",e.HCaptcha="HCaptcha",e.Other="Other"}(t.UserPromptType||(t.UserPromptType={})),function(e){e.Sms="sms",e.Email="email",e.Image="image",e.Otp="otp",e.Unknown="unknown"}(t.OtherUserPromptClassification||(t.OtherUserPromptClassification={})),function(e){e.Number="number",e.Chars="chars",e.Wait="wait",e.Any="any"}(t.OtherUserPromptInputType||(t.OtherUserPromptInputType={})),function(e){e.Canceled="canceled",e.Unexpected="unexpected"}(t.UserPromptAnswerError||(t.UserPromptAnswerError={})),function(e){e.InternalError="InternalError",e.LoginFailure="LoginFailure",e.AccountIssue="AccountIssue",e.PasswordRequirementError="PasswordRequirementError",e.ChangeNotConfirmed="ChangeNotConfirmed"}(t.FailureCode||(t.FailureCode={}))},59860:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},82172:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreatePasswordChangeError=void 0,function(e){e.NoPasswordChangerPlugin="NoPasswordChangerPlugin",e.NoSuchCredential="NoSuchCredential",e.ChangeInProgress="ChangeInProgress"}(t.CreatePasswordChangeError||(t.CreatePasswordChangeError={}))},94392:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratePasswordError=void 0,function(e){e.NoSuchCredential="NoSuchCredential",e.DomainNotSupported="DomainNotSupported",e.UnexpectedError="UnexpectedError"}(t.GeneratePasswordError||(t.GeneratePasswordError={}))},3360:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetRecipeErrors=void 0,function(e){e[e.DomainNotFound=0]="DomainNotFound",e[e.InternalError=1]="InternalError"}(t.GetRecipeErrors||(t.GetRecipeErrors={}))},45639:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(93394),t),n(r(3360),t),n(r(82172),t),n(r(94392),t),n(r(95900),t),n(r(76235),t),n(r(40925),t),n(r(43605),t),n(r(59860),t)},40925:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordChangeNotificationStatus=void 0,function(e){e.Unread="unread",e.Dismissed="dismissed"}(t.PasswordChangeNotificationStatus||(t.PasswordChangeNotificationStatus={}))},43605:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},76235:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},95900:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetSupportedCredentialsForPasswordChangeError=void 0,function(e){e.CredentialNotFound="CredentialNotFound",e.UnexpectedError="UnexpectedError"}(t.GetSupportedCredentialsForPasswordChangeError||(t.GetSupportedCredentialsForPasswordChangeError={}))},29774:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(26132),n=r(23612),a=r(37236);t.config={commands:{generatePassword:{handler:o.generatePasswordHandler},generateAndSavePassword:{handler:o.generateAndSavePasswordHandler},savePasswordGenerationSettings:{handler:n.savePasswordGenerationSettingsHandler}},queries:{getPasswordGenerationSettings:{selector:a.passwordGenerationSettingsSelector}},liveQueries:{}}},25259:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(29774);t.bootstrap=e=>{e.register(o.config)}},26132:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateAndSavePasswordHandler=t.generatePasswordHandler=void 0;const o=r(81604),n=r(31891),a=r(59125),i=r(84146);t.generatePasswordHandler=async function(e,t){try{const r=(0,i.makeSessionController)(e).generatePassword(t.settings);return{success:!0,password:r,strength:await(0,o.evaluatePasswordStrength)(r)}}catch(e){return(0,n.logError)(e),(0,a.sendExceptionLog)({error:e}),{success:!1}}},t.generateAndSavePasswordHandler=async function(e,t){try{const r=(0,i.makeSessionController)(e).generateAndSavePassword(t.url);return{success:!0,password:r,strength:await(0,o.evaluatePasswordStrength)(r)}}catch(e){return(0,n.logError)(e),(0,a.sendExceptionLog)({error:e}),{success:!1}}}},23612:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.savePasswordGenerationSettingsHandler=void 0;const o=r(19935),n=r(31891),a=r(59125),i=r(64159),s=r(62737),c=r(35436);t.savePasswordGenerationSettingsHandler=async function(e,t){try{const n=(0,i.fixIncoherentSettings)(t),a={GeneratorDefaultSize:(r=n).length,GeneratorDefaultAvoidAmbiguousChars:r.avoidAmbiguous,GeneratorDefaultDigits:r.digits,GeneratorDefaultLetters:r.letters,GeneratorDefaultSymbols:r.symbols};(0,s.updatePersonalSettings)(e.storeService,e.sessionService,a),(0,c.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},o.Trigger.SettingsChange)}catch(e){(0,n.logError)(e),(0,a.sendExceptionLog)({error:e})}var r}},37236:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.passwordGenerationSettingsSelector=void 0;const o=r(8153),n=r(64159);t.passwordGenerationSettingsSelector=function(e){const t=(0,o.personalSettingsSelector)(e);return(0,n.getDefaultPasswordGenerationSettings)(t)}},9614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(15702),n=r(62722);t.config={commands:{isPasswordLeaked:{handler:o.isPasswordLeaked}},queries:{},liveQueries:{liveIsPasswordLeaked:{operator:n.isPasswordLeaked$}}}},53631:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(9614);t.bootstrap=e=>{e.register(o.config)}},22502:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordLeakErrors=t.GetHashesError=void 0,function(e){e.GET_HASHES_ERROR="GET_HASHES_ERROR",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.SERVER_ERROR="SERVER_ERROR"}(t.GetHashesError||(t.GetHashesError={})),function(e){e.VAULT_SYNC_ERROR="VAULT_SYNC_ERROR",e.GET_REMOTE_TIME_ERROR="GET_REMOTE_TIME_ERROR"}(t.PasswordLeakErrors||(t.PasswordLeakErrors={}))},33700:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.computePasswordLeakHash=void 0;const o=r(47729),n=r(8248);t.computePasswordLeakHash=async function(e){const t=(0,o.getWorkerPath)("Argon2JsWrapperForWasm"),r=(0,o.getWorkerPath)("Argon2Asm"),a=(0,o.getWorkerPath)("Argon2Wasm");return n.hash({pass:e,salt:"z8CXohryCcGAa7CESNHYnedqbDyp",time:3,mem:32768,hashLen:32,parallelism:2,type:n.ArgonType.Argon2d,asmFileUrl:r,wasmFileUrl:a,argon2FileUrl:t})}},11454:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendInstallerLog78=t.INSTALLER_LOG_78_ENDPOINT=void 0;const o=r(31891),n=r(8153),a=r(43728);t.INSTALLER_LOG_78_ENDPOINT="https://kck3hlb9.dashlane.com/1/installerlog/createLight",t.sendInstallerLog78=async function(e,r,i,s){const c={step:"78",version:(0,n.appVersionSelector)(e),platform:(0,n.platformNameSelector)(e),anonymousid:r,leaked:i,from:s};try{await(0,a.postDataToUrl)(t.INSTALLER_LOG_78_ENDPOINT,c)}catch(e){o.default.error(e)}}},44034:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(53631);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},62722:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isPasswordLeaked$=void 0;const o=r(18948),n=r(3343),a=r(25975);t.isPasswordLeaked$=()=>(0,o.pipe)((0,n.map)(a.isPasswordLeakedSelector),(0,n.distinctUntilChanged)())},76433:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.passwordLeakLastCheckedTimestampSelector=t.passwordLeakAnonymousIdSelector=void 0;const o=r(8153);t.passwordLeakAnonymousIdSelector=e=>(0,o.personalSettingsSelector)(e).PasswordLeakAnonymousId;t.passwordLeakLastCheckedTimestampSelector=e=>(0,o.personalSettingsSelector)(e).PasswordLeakLastCheckedTimestamp},25975:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isPasswordLeakedSelector=void 0;t.isPasswordLeakedSelector=e=>e.userSession.account.isPasswordLeaked},13874:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getHashes=void 0;const o=r(28060),n=r(15876),a=r(31891),i=r(22502),s=r(33700);t.getHashes=async function(e,t){let r;try{const{hashHex:e}=await(0,s.computePasswordLeakHash)(t.password);r=e}catch(e){return{success:!1,error:{code:i.GetHashesError.GET_HASHES_ERROR}}}const c=r.substr(0,6);try{const t=await(0,n.getHashes)(e,{hashPrefix:c});if((0,n.isApiError)(t))return{success:!1,error:{code:i.GetHashesError.SERVER_ERROR}};const a=(0,o.omit)(["code"],t);return{success:!0,response:{hashList:Object.keys(a).map((e=>a[e])),originalHash:r}}}catch(e){return a.Debugger.error(`[Password Leak Checking] getHashesRequest - Failed: ${e}`),{success:!1,error:{code:i.GetHashesError.UNKNOWN_ERROR}}}}},15702:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isPasswordLeaked=void 0;const o=r(28354),n=r(15876),a=r(22502),i=r(11454),s=r(76433),c=r(13874),d=r(77333),l=r(53667);t.isPasswordLeaked=async function(e,t){const{from:r,password:u}=t,{sessionService:p,storeService:S}=e,g=S.getState();let m=(0,s.passwordLeakAnonymousIdSelector)(g);const y=await(0,n.getRemoteTime)(S);if((0,n.isApiError)(y))return{success:!1,error:{code:a.PasswordLeakErrors.GET_REMOTE_TIME_ERROR}};const v={PasswordLeakLastCheckedTimestamp:y.timestamp};if(!m){const e=(0,o.v4)();v.PasswordLeakAnonymousId=e,m=e}S.dispatch((0,d.editPersonalSettings)(v));try{const e=p.getInstance().user;e.persistPersonalSettings(),e.attemptSync()}catch{return{success:!1,error:{code:a.PasswordLeakErrors.VAULT_SYNC_ERROR}}}const A=await(0,c.getHashes)(S,{password:u});if(!1===A.success)return{success:!1,error:A.error};const{response:{hashList:E,originalHash:f}}=A,h=E.includes(f);return(0,i.sendInstallerLog78)(g,m,h,r),S.dispatch((0,l.setPasswordLeaked)(h)),{success:!0,response:{isLeaked:h}}}},77912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shouldTriggerMasterPasswordLeakCheck=t.MIN_DIFF_TO_RUN=void 0;const o=r(14122),n=r(76433),a=r(8153);t.MIN_DIFF_TO_RUN=1209600,t.shouldTriggerMasterPasswordLeakCheck=function(e){if(!(0,a.isAuthenticatedSelector)(e))return!1;const r=(0,o.hasFeatureSelector)(e,"masterPasswordLeakCheckLog"),i=(0,n.passwordLeakLastCheckedTimestampSelector)(e),s=Math.floor(Date.now()/1e3);return r&&(i?s-i:1/0)>=t.MIN_DIFF_TO_RUN}},1133:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(61419);t.setupSubscriptions=async function(e,t){e.sessionOpened.on((()=>(0,o.triggerMasterPasswordLeakCheck)(t)))}},61419:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerMasterPasswordLeakCheck=void 0;const o=r(77912),n=r(15702),a=r(8153);t.triggerMasterPasswordLeakCheck=async function(e){const t=e.storeService.getState();if((0,o.shouldTriggerMasterPasswordLeakCheck)(t)){const r=(0,a.masterPasswordSelector)(t);(0,n.isPasswordLeaked)(e,{password:r,from:"carbon/sessionOpened/shouldRunMasterPasswordLeakCheck"})}}},42038:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(16061),n=r(63034),a=r(93966),i=r(79798),s=r(26544);t.config={commands:{cancelAutoRenew:{handler:a.cancelAutoRenew},downloadCustomerInvoice:{handler:n.downloadCustomerInvoice},fetchInvoiceList:{handler:i.fetchInvoiceList},requestRefund:{handler:s.requestRefund}},queries:{getInvoicesCount:{selector:o.allInvoicesLengthSelector},getInvoiceList:{selector:o.viewedQueriedInvoicesSelector},getInvoiceListYears:{selector:o.invoiceListYearsSelector}},liveQueries:{}}},89941:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OrderDir=void 0,function(e){e.ascending="ascending",e.descending="descending"}(t.OrderDir||(t.OrderDir={}))},92293:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(42038);t.bootstrap=e=>{e.register(o.config)}},93966:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cancelAutoRenew=void 0;const o=r(59125);t.cancelAutoRenew=async function(e){const{sessionService:t,storeService:r}=e;if(!r.isAuthenticated())return{success:!1};try{return await t.getInstance().payment.cancelPremiumSubscription(),{success:!0}}catch(e){const t=`[SessionController] - cancelPremiumSubscription: ${e}`,r=new Error(t);return(0,o.sendExceptionLog)({error:r}),{success:!1,error:{code:t}}}}},63034:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.downloadCustomerInvoice=void 0;const o=r(15876),n=r(66164);t.downloadCustomerInvoice=async function(e,t){const{storeService:r}=e,a=r.getUserLogin(),i=await(0,n.getCustomerInvoice)(r,a,t);return(0,o.isApiError)(i)?{success:!1}:{success:!0,data:JSON.stringify({data:Array.apply(null,new Uint8Array(i.data))})}}},79798:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fetchInvoiceList=void 0;const o=r(15876),n=r(38387),a=r(6146);t.fetchInvoiceList=async function(e){const{storeService:t}=e,r=t.getUserLogin();if(!t.isAuthenticated())return{success:!1};try{const e=await(0,n.listInvoices)(t,r);return(0,o.isApiError)(e)?{success:!1}:(t.dispatch((0,a.receivedInvoiceList)(e.invoices)),{success:!0})}catch(e){return{success:!1}}}},26544:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestRefund=void 0;const o=r(15876),n=r(63774),a=r(84146);t.requestRefund=async function(e,t){const{sessionService:r,storeService:i,wsService:s}=e,c=i.getUserLogin();if(!i.isAuthenticated())return{success:!1};try{const e=await(0,n.grantFullRefundAndCancelSubscription)(i,c,t);return(0,o.isApiError)(e)?{success:!1}:(t&&!t.dryRun&&(0,a.refeshAccountInfo)(i,r,s),{success:!0})}catch(e){return{success:!1}}}},41222:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(92293);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},41811:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getInvoiceMappers=void 0;const o=r(25424);t.getInvoiceMappers=()=>({amountPaid:e=>e.amountPaid,invoiceId:e=>e.invoiceId,planName:e=>(e=>"essentials"===e.planFeature?"ESSENTIALS":["family_created","family_renewed"].includes(e.eventType)?"FAMILY":"sync"===e.planFeature?"PREMIUM":"OTHER")(e),startDate:e=>e.startDate,startYear:e=>(e=>(0,o.fromUnixTime)(e.startDate).getFullYear().toString())(e)})},80271:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(96477),n=r(85391),a=r(15684),i=r(4317);t.config={commands:{unlockProtectedItems:{handler:o.unlockProtectedItems},disableCredentialProtection:{handler:i.disableCredentialProtectionHandler}},queries:{areProtectedItemsUnlocked:{selector:a.areProtectedItemsAvailableSelector}},liveQueries:{liveAreProtectedItemsUnlocked:{operator:n.areProtectedItemsUnlocked$}}}},48152:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlockProtectedItemsWrongPasswordError=t.UnlockProtectedItemsStatus=t.DisableCredentialProtectionStatus=void 0;var o=r(3577);Object.defineProperty(t,"DisableCredentialProtectionStatus",{enumerable:!0,get:function(){return o.DisableCredentialProtectionStatus}}),Object.defineProperty(t,"UnlockProtectedItemsStatus",{enumerable:!0,get:function(){return o.UnlockProtectedItemsStatus}}),Object.defineProperty(t,"unlockProtectedItemsWrongPasswordError",{enumerable:!0,get:function(){return o.unlockProtectedItemsWrongPasswordError}})},96477:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlockProtectedItems=void 0;const o=r(3577),n=r(49914);t.unlockProtectedItems=async function(e,t){const{storeService:r,masterPasswordEncryptorService:a}=e;return await(0,n.validateMasterPassword)(r,a,t)?{status:o.UnlockProtectedItemsStatus.SUCCESS}:{status:o.UnlockProtectedItemsStatus.ERROR,error:{code:o.unlockProtectedItemsWrongPasswordError}}}},11032:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(80271);t.bootstrap=e=>{e.register(o.config)}},4317:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableCredentialProtectionHandler=void 0;const o=r(45082),n=r(98107);t.disableCredentialProtectionHandler=async function(e,{credentialId:t}){const{storeService:r,sessionService:a,eventLoggerService:i}=e;try{return await(0,n.disableCredentialProtection)({storeService:r,sessionService:a,eventLoggerService:i},t),{status:o.DisableCredentialProtectionStatus.SUCCESS}}catch(e){return{status:o.DisableCredentialProtectionStatus.ERROR}}}},98107:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableCredentialProtection=void 0;const o=r(1237),n=r(97747),a=({update:{autoprotected:e}})=>({AutoProtected:e});t.disableCredentialProtection=async function({storeService:e,sessionService:t,eventLoggerService:r},i){const s=e.getState();if(!(0,o.credentialSelector)(s,i))throw new Error("Credential does not exist, cant update");(0,n.updateCredential)({storeService:e,sessionService:t,eventLoggerService:r},{id:i,update:{autoprotected:!1}},a)}},16463:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var a=r(11032);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}}),n(r(48152),t)},85391:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.areProtectedItemsUnlocked$=void 0;const o=r(18948),n=r(15684),a=r(3343);t.areProtectedItemsUnlocked$=()=>(0,o.pipe)((0,a.map)((e=>(0,o.interval)(1e3).pipe((0,a.map)((()=>e))))),(0,a.switchMap)((e=>e)),(0,a.map)(n.areProtectedItemsAvailableSelector),(0,a.distinctUntilChanged)())},15684:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.areProtectedItemsAvailableSelector=t.areProtectedItemsUnlockedSelector=void 0;const o=r(8368),n=r(8153);t.areProtectedItemsUnlockedSelector=e=>Date.now()-(0,n.lastMasterPasswordCheckSelector)(e)<(e=>/^kw_test_auto_ut_fast_mpcheck_.*/.test((0,n.userLoginSelector)(e))?5e3:3e5)(e);t.areProtectedItemsAvailableSelector=e=>(0,t.areProtectedItemsUnlockedSelector)(e)||(0,o.isSSOUserSelector)(e)},3577:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DisableCredentialProtectionStatus=t.unlockProtectedItemsWrongPasswordError=t.UnlockProtectedItemsStatus=void 0,function(e){e.SUCCESS="success",e.ERROR="error"}(t.UnlockProtectedItemsStatus||(t.UnlockProtectedItemsStatus={})),t.unlockProtectedItemsWrongPasswordError="WRONG PASSWORD",function(e){e.SUCCESS="success",e.ERROR="error"}(t.DisableCredentialProtectionStatus||(t.DisableCredentialProtectionStatus={}))},58732:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(19925),n=r(72040),a=r(94317),i=r(8153),s=r(87354);t.config={commands:{activateAccountRecovery:{handler:n.activateAccountRecovery},setupMasterPasswordForRecovery:{handler:a.setupMasterPasswordForRecovery},deactivateAccountRecovery:{handler:n.deactivateAccountRecovery},registerDeviceForRecovery:{handler:a.registerDeviceForRecovery},startAccountRecovery:{handler:a.startAccountRecovery},sendRecoveryRequest:{handler:a.sendRecoveryRequest},cancelRecoveryRequest:{handler:a.cancelRecoveryRequest},checkRecoveryRequestStatus:{handler:a.checkRecoveryRequestStatus},recoverUserData:{handler:a.recoverUserData},checkDoesLocalRecoveryKeyExist:{handler:a.checkDoesLocalRecoveryKeyExist},isRecoveryRequestPending:{handler:n.isRecoveryRequestPending}},queries:{getRecoveryOptInSetting:{selector:i.accountRecoveryOptInSelector},getShouldShowFeatureActivationModal:{selector:o.shouldShowFeatureActivationModalSelector},getAccountRecoveryRequestCount:{selector:o.accountRecoveryRequestsCountSelector}},liveQueries:{liveAccountRecoveryRequestCount:{operator:s.accountRecoveryRequestsCount$}}}},70588:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},52745:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeRecoveryController=void 0;const o=r(96045),n=r(31891),a=r(59125),i=r(21337),s=r(62380);function c(e,t,r){return(0,a.sendExceptionLog)({error:t}),n.Debugger.log(e,t),{error:{message:t.message,action:r}}}t.makeRecoveryController=(e,t)=>({getMasterPasswordResetDemandList:r=>function(e,t,r,o){const n=o.teamId;return t.recovery.getPendingRequests({login:r.login,uki:r.uki,teamId:n}).then((t=>{const o=e.getTeamAdminData(),a=Object.assign({},o),i=t.filter((e=>e.login!==r.login));return a.teams[n]&&(a.teams[n].notifications={accountRecoveryRequests:i},(0,s.updateTeamAdminData)(e,a)),{demands:i}})).catch((e=>({demands:[],error:c("Master Password Reset: Error while getPendingRequests",e,o).error})))}(e,t,(0,i.getCurrentUserInfo)(e),r),acceptMasterPasswordResetDemand:r=>function(e,t,r){const n=(0,o.makeAsymmetricEncryption)();return n.decrypt(t.privateKey,r.recoveryKey).then((e=>n.encrypt(r.userPublicKey,e))).then((o=>e.recovery.acceptRequest({login:t.login,uki:t.uki,sourceLogin:r.login,payload:o}))).then((()=>({}))).catch((e=>c("Master Password Reset: Error while acceptRequest",e,r)))}(t,(0,i.getCurrentUserInfo)(e),r),declineMasterPasswordResetDemand:r=>function(e,t,r){return e.recovery.refuseRequest({login:t.login,uki:t.uki,sourceLogin:r.login}).then((()=>({}))).catch((e=>c("Master Password Reset: Error while refuseRequest",e,r)))}(t,(0,i.getCurrentUserInfo)(e),r)})},50190:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(58732);t.bootstrap=e=>{e.register(o.config)}},13347:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(50190);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},87354:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountRecoveryRequestsCount$=void 0;const o=r(18948),n=r(3343),a=r(19925);t.accountRecoveryRequestsCount$=function(){return(0,o.pipe)((0,n.map)((e=>(0,a.accountRecoveryRequestsCountSelector)(e))),(0,n.distinctUntilChanged)())}},19925:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountRecoveryRequestsCountSelector=t.selectTeamAdminData=t.recoveryHashFromPremiumStatusSelector=t.recoveryHashFromPersonalSettingsSelector=t.shouldShowFeatureActivationModalSelector=void 0;const o=r(14122),n=r(66288),a=r(8368),i=r(8153),s=r(97055);t.shouldShowFeatureActivationModalSelector=e=>{const t=(0,o.hasFeatureSelector)(e,"SAEXAccountRecoveryv3"),r=(0,n.isRecoveryEnabledSelector)(e),i="boolean"==typeof e.userSession.personalSettings.RecoveryOptIn;return!(0,a.isSSOUserSelector)(e)&&t&&r&&!i};t.recoveryHashFromPersonalSettingsSelector=e=>(0,i.personalSettingsSelector)(e).RecoveryHash||"";t.recoveryHashFromPremiumStatusSelector=e=>(0,i.premiumStatusSelector)(e).recoveryHash||"";t.selectTeamAdminData=e=>{var t;return null!==(t=e.userSession.teamAdminData)&&void 0!==t?t:{teams:{}}};t.accountRecoveryRequestsCountSelector=e=>{var r,o,n,a;const i=(0,s.getCurrentTeamId)(e.userSession.spaceData);if(!i)return 0;const{teams:c}=(0,t.selectTeamAdminData)(e);return Number(null!==(a=null===(n=null===(o=null===(r=c[i])||void 0===r?void 0:r.notifications)||void 0===o?void 0:o.accountRecoveryRequests)||void 0===n?void 0:n.length)&&void 0!==a?a:0)}},94317:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.recoverUserData=t.checkDoesLocalRecoveryKeyExist=t.cancelRecoveryRequest=t.checkRecoveryRequestStatus=t.sendRecoveryRequest=t.setupMasterPasswordForRecovery=t.registerDeviceForRecovery=t.startAccountRecovery=void 0;const o=r(97211),n=r(37906),a=r(59125),i=r(13308),s=r(1064),c=r(47599),d=r(96045),l=r(15876),u=r(99514),p=r(15443),S=r(8153),g=r(75897),m=r(32234),y=r(94722),v=r(33441),A=r(97605);t.startAccountRecovery=async function(e,t){const{storeService:r}=e,{login:o}=t,a=await(0,u.requestDeviceRegistration)(r,{login:o});return(0,l.isApiError)(a)?{success:!1,error:{code:n.ApiErrorType.StartAccountRecoveryFailed,message:`Start account recovery failed: ${a.message}`}}:(r.dispatch((0,y.saveRecoverySessionData)({verificationMethod:a.verification})),{success:!0,verification:a.verification})},t.registerDeviceForRecovery=async function(e,t){try{const{token:r,login:o}=t,{storeService:a,wsService:d}=e,S=a.getState(),g=a.getPlatformInfo().platformName,m=!0,v=await(0,u.requestDeviceRegistration)(a,{login:o});if((0,l.isApiError)(v))return{success:!1,error:{code:n.ApiErrorType.RegisterDeviceFailed,message:"Recovery Device request registration failed"}};const A=(0,p.recoveryIsOtpSelector)(S),E=await(0,c.ensureDeviceId)(),f=(0,i.generateUki)(E),h={uki:f,login:o,platform:g,temporary:s.PersistData.PERSIST_DATA_NO,recovery:m},_=A?{otp:r}:{token:r};if("SUCCESS"!==await d.authentication.registerUki({...h,..._}))return{success:!1,error:{code:n.ApiErrorType.RegisterDeviceFailed,message:"Recovery Device registration failed"}};a.dispatch((0,y.saveRecoverySessionData)({recoveryUki:f}))}catch(e){return(0,a.sendExceptionLog)({error:e}),{success:!1,error:{code:n.ApiErrorType.RegisterDeviceFailed,message:e.message}}}return{success:!0}},t.setupMasterPasswordForRecovery=async function(e,t){try{const{storeService:r,localStorageService:o}=e,{masterPassword:a}=t,i=r.getState(),s=(0,p.recoveryUkiSelector)(i);if(!s)return{success:!1,error:{code:n.ApiErrorType.SetupMasterPasswordForRecoveryFailed,message:"recoveryUki does not exist"}};r.dispatch((0,g.updateMasterPassword)(a));const c=(0,d.makeCryptoService)(),{public:l,private:u}=await c.asymmetricEncryption.generateRsaKeyPair();r.dispatch((0,y.saveRecoverySessionData)({publicKey:l}));const S=await(0,A.encryptUkiAndPrivateKey)(s,u,a,r);return await o.getInstance().storeRecoveryData(S),{success:!0}}catch(e){return{success:!1,error:{code:n.ApiErrorType.SetupMasterPasswordForRecoveryFailed,message:e.message}}}},t.sendRecoveryRequest=async function(e){try{const{storeService:t,wsService:r}=e;return await(0,A.sendRecoveryRequestToAdmin)(t,r),{success:!0}}catch(e){return(0,a.sendExceptionLog)({error:e}),{success:!1,error:{code:n.ApiErrorType.RecoveryRequestFailed,message:e.message}}}},t.checkRecoveryRequestStatus=async function(e,t){try{const{storeService:r,localStorageService:o,wsService:a}=e,{masterPassword:i}=t,s=r.getState(),c=(0,S.userLoginSelector)(s);if(!c)return{success:!1,error:{code:n.ApiErrorType.CheckRecoveryStatusFailed,message:"Missing login"}};r.dispatch((0,g.updateMasterPassword)(i));const d=await(0,A.retrieveRecoveryUkiFromStorage)(r,o,i),{content:{status:l,payload:u,recoveryServerKey:p}}=await a.recovery.request({login:c,uki:d});return u&&p&&r.dispatch((0,y.saveRecoverySessionData)({userServerProtectedSymmetricalKey:u,recoveryServerKeyBase64:p})),{success:!0,response:{status:l}}}catch(e){return{success:!1,error:{code:n.ApiErrorType.CheckRecoveryStatusFailed,message:e.message}}}},t.cancelRecoveryRequest=async function(e){try{const{storeService:t,localStorageService:r,wsService:o}=e,n=t.getState(),a=(0,S.userLoginSelector)(n),i=(0,S.masterPasswordSelector)(n),s=await(0,A.retrieveRecoveryUkiFromStorage)(t,r,i);return await o.recovery.cancelRequest({login:a,uki:s}),await r.getInstance().cleanRecoveryData(),{success:!0}}catch(e){return{success:!1,error:{code:n.ApiErrorType.CancelRecoveryRequestFailed,message:e.message}}}},t.checkDoesLocalRecoveryKeyExist=async function(e){try{const{localStorageService:t}=e,r=t.getInstance();return{success:!0,doesExist:await r.doesRecoveryLocalKeyExist()}}catch(e){return{success:!1,error:{code:n.ApiErrorType.CheckLocalRecoveryKeyFailed,message:e.message}}}},t.recoverUserData=async function(e,t){const{localStorageService:r,storeService:i,sessionService:c}=e,l=i.getState(),u=r.getInstance(),g=await(0,A.validateInitialData)(l,u);let E="";const f=e=>{E+=`[CARBON] - Recovery User Data - ${e}\n`};if(!g.success)return g;const{masterPassword:h}=t;try{f("Extract PrKey START");const t=await(0,A.extractPrivateKeyFromRecoveryData)(e,h,f);f("Extract PrKey SUCCESS");const{userServerProtectedSymmetricalKey:r}=(0,p.recoveryDataSelector)(l),c=await(0,d.makeAsymmetricEncryption)();f("Decrypt user protected key START");const g=await c.decrypt(t,r);f("Decrypt user protected key SUCCESS"),f("Decrypt server protected key START");const m=await(0,A.extractRecoveryKey)(i,g,f);f("Decrypt server protected key SUCCESS"),f("Extract local Key START");const _=await(0,A.extractLocalKey)(e,m,f);f("Extract local Key SUCCESS"),await(0,A.prepareLocalDataEncryptorService)(e,_),f("Get recovery credentials START");const T=await u.getRecoverySessionCredential();f("Get recovery credentials SUCCESS");const{masterPassword:I}=JSON.parse(atob(T)),C=(0,S.userLoginSelector)(l),P=s.PersistData.PERSIST_DATA_YES;i.dispatch((0,y.saveRecoverySessionData)({recoveryInProgress:!0})),f("Open session START");const D=await(0,v.openSessionWithMasterPassword)(e,C,I,{isDataPersisted:P,serverKey:(0,S.serverKeySelector)(l)});if(f("Open session SUCCESS"),D!==o.LoginResultEnum.LoggedIn)return f("Open session SUCCESS but user not logged in"),(0,a.sendExceptionLog)({message:E,funcName:"recoverUserData"}),(0,A.recoveryFlowError)(n.ApiErrorType.RecoverUserDataFailed,`Unable to login with ${D}`);i.dispatch((0,y.saveRecoverySessionData)({recoveryInProgress:!1,currentPassword:I}))}catch(e){return f(`Recovery failed with error: ${e}`),(0,a.sendExceptionLog)({message:E,funcName:"recoverUserData",precisions:e.stack}),i.dispatch((0,y.resetRecoverySessionData)()),await c.close(),(0,m.triggerOpenSessionFailed)(new Error(m.AuthenticationCode[m.AuthenticationCode.WRONG_PASSWORD])),(0,A.recoveryFlowError)(n.ApiErrorType.RecoverUserDataFailed,"Unable to decipher data")}return{success:!0}}},97605:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.storeSessionCredentialForRecovery=t.prepareLocalDataEncryptorService=t.extractLocalKey=t.extractRecoveryKey=t.extractPrivateKeyFromRecoveryData=t.validateInitialData=t.recoveryFlowError=t.retrieveRecoveryUkiFromStorage=t.triggerCleanOrSetupAccountRecovery=t.isARFeatureActivatedForUser=t.isARAvailableForUser=t.sendRecoveryRequestToAdmin=t.encryptUkiAndPrivateKey=t.resetAdminProtectedSymmetricalKeys=t.sendAdminProtectedSymmetricalKeys=t.getAdminProtectedSymmetricalKeys=t.encryptRecoveryData=t.getRecoveryKey=t.getSetupRequisitesData=void 0;const o=r(22029),n=r(14122),a=r(53494),i=r(34929),s=r(24555),c=r(41751),d=r(33792),l=r(96045),u=r(53528),p=r(59125),S=r(8153),g=r(8368),m=r(94722),y=r(75897),v=r(15443),A=r(1064),E=r(66288),f=r(72040),h=r(37906),_=r(19925);function T(e){const t=e.getState(),r=(0,S.activeSpacesSelector)(t)[0],n=null==r?void 0:r.teamId;if(!n)throw new Error("[getSetupRequisitesData] - user should be part of a team to activate Account Recovery");const a=Number(n),i=(0,S.userLoginSelector)(t),s=(0,o.ukiSelector)(t);if(!i||!s)throw new Error("[getSetupRequisitesData] - missing login or uki");return{teamId:a,login:i,uki:s}}async function I({storeService:e,encryptionKey:t,data:r}){const o=(0,i.makeDataEncryptorService)(e),n=(0,u.getCryptoConfig)(e);o.setInstance({raw:t},"",n);const a=await o.getInstance().encrypt(r);return o.close(),a}async function C({storeService:e,encryptedData:t,encryptionKey:r}){const o=(0,i.makeDataEncryptorService)(e),{cryptoConfig:n}=(0,u.parsePayload)(u.ARGON2_DEFAULT_PAYLOAD);o.setInstance({raw:r},"",n);const a=await o.getInstance().decrypt(t,{logging:!0});return o.close(),a}function P(e){const t=(0,g.isSSOUserSelector)(e),r=(0,n.hasFeatureSelector)(e,"SAEXAccountRecoveryv3"),o=(0,E.isRecoveryEnabledSelector)(e);return!t&&r&&o}function D(e){const t=P(e),r=(0,S.accountRecoveryOptInSelector)(e);return t&&r}t.getSetupRequisitesData=async function(e,t){try{const{teamId:r,login:o,uki:n}=T(e),{content:a}=await t.recovery.getSetupRequisites({login:o,uki:n,teamId:r});return a}catch(e){throw new Error(`[getSetupRequisitesData] - getSetupRequisites failed with error ${e}`)}},t.getRecoveryKey=async function(e){const t=e.getState();let r,o=(0,S.recoveryKeySelector)(t);return o?r=(0,s.base64ToBuffer)(o):(r=await(0,c.generateAESKey)(),o=(0,s.bufferToBase64)(r)),{recoveryKeyBufferClear:r,recoveryKeyBase64Clear:o,recoveryKeyRawClear:atob(o)}},t.encryptRecoveryData=I,t.getAdminProtectedSymmetricalKeys=async function(e,t){const r=(0,l.makeAsymmetricEncryption)(),o=[];for(const n of e){const{login:e,publicKey:a}=n,i=await r.encrypt(a,t);o.push({login:e,key:i})}return o},t.sendAdminProtectedSymmetricalKeys=async function(e,t,r){try{const o=JSON.stringify(r),{teamId:n,login:a,uki:i}=T(e);return void await t.recovery.setRecoveryClientKeys({login:a,uki:i,recoveryClientKeys:o,teamId:n})}catch(e){throw new Error(`[sendAdminProtectedSymmetricalKeys] - setRecoveryClientKeys failed with error ${e}`)}},t.resetAdminProtectedSymmetricalKeys=async function(e,t){try{const{teamId:r,login:o,uki:n}=T(e),a=JSON.stringify([]);return void await t.recovery.setRecoveryClientKeys({login:o,uki:n,recoveryClientKeys:a,teamId:r})}catch(e){throw new Error(`[resetAdminProtectedSymmetricalKeys] - setRecoveryClientKeys failed with error ${e}`)}},t.encryptUkiAndPrivateKey=async function(e,t,r,o){const n=JSON.stringify({recoveryUki:e,privateKey:t}),i=(0,a.deflateUtf16)(n);return await I({storeService:o,encryptionKey:r,data:i})},t.sendRecoveryRequestToAdmin=async function(e,t){try{const r=e.getState(),o=(0,S.userLoginSelector)(r),{recoveryUki:n,publicKey:a}=(0,v.recoveryDataSelector)(r);if(!o||!n||!a)throw new Error("Missing recoveryUki or publicKey");return void await t.recovery.request({login:o,uki:n,publicKey:a})}catch(e){throw new Error(`[sendAccountRecoveryRequest] - failed with error ${e}`)}},t.isARAvailableForUser=P,t.isARFeatureActivatedForUser=D,t.triggerCleanOrSetupAccountRecovery=async function(e){const{storeService:t,localStorageService:r,wsService:o}=e,n=t.getState();if((0,v.recoveryInProgressSelector)(n))return;await r.getInstance().cleanRecoveryData();const a=await async function(e,t){const r=e.getState();if(!D(r))return Promise.resolve(!1);const{persistData:o}=e.getAccountInfo();if(o===A.PersistData.PERSIST_DATA_NO)return Promise.resolve(!1);const n=!!(0,S.recoveryKeySelector)(r),a=!!await t.getInstance().doesRecoveryLocalKeyExist();if(n&&a)return(0,_.recoveryHashFromPersonalSettingsSelector)(r)!==(0,_.recoveryHashFromPremiumStatusSelector)(r);return!0}(t,r);if(a)return void await(0,f.setupAccountRecoveryForDevice)(t,r,o);const i=await async function(e,t){const r=D(e.getState()),o=t.getInstance(),n=!!await o.doesRecoveryLocalKeyExist(),a=!!await o.doesRecoverySessionCredentialExist();return!r&&(n||a)}(t,r);i&&await r.getInstance().cleanRecoverySetupData()},t.retrieveRecoveryUkiFromStorage=async function(e,t,r){try{const o=await t.getInstance().getRecoveryData(),n=await C({storeService:e,encryptedData:o,encryptionKey:r}),i=(0,a.inflateUtf16)(n),{recoveryUki:s}=JSON.parse(i);return s}catch(e){const t=`retrieveRecoveryUkiFromStorage failed with error ${e.message}`;throw new Error(t)}};t.recoveryFlowError=(e,t)=>{const r=new Error(`[AccountRecovery]: ${e} ${t}`);return(0,p.sendExceptionLog)({error:r}),{success:!1,error:{code:e,message:t}}},t.validateInitialData=async function(e,r){if(!await r.doesRecoveryLocalKeyExist()||!await r.doesRecoveryDataExist()||!await r.doesRecoverySessionCredentialExist())return(0,t.recoveryFlowError)(h.ApiErrorType.RecoverUserDataFailed,"Missing local data");const{userServerProtectedSymmetricalKey:o,recoveryServerKeyBase64:n}=(0,v.recoveryDataSelector)(e);return o&&n?{success:!0}:(0,t.recoveryFlowError)(h.ApiErrorType.RecoveryRequestFailed,"missing payload")},t.extractPrivateKeyFromRecoveryData=async function(e,t,r){const{localStorageService:o,storeService:n}=e,i=o.getInstance();r("extractPrivateKeyFromRecoveryData - getRecoveryData");const c=await i.getRecoveryData(),d=n.getPlatformInfo();r(`[extra] platform: ${d.platformName}`),r(`[extra] browser: ${d.browser} @ ${d.browserVersion}`);const l=(0,s.base64ToBuffer)(c),p=(0,u.parseCipheredData)(new Uint8Array(l));r(`[extra] cryptoConfig derivation: ${JSON.stringify(p.cryptoConfig)}`),r("extractPrivateKeyFromRecoveryData - decryptRecoveryData");const S=await C({storeService:n,encryptedData:c,encryptionKey:t});r("extractPrivateKeyFromRecoveryData - inflateUtf16 data");const g=(0,a.inflateUtf16)(S);r("extractPrivateKeyFromRecoveryData - parse JSON data");const{recoveryUki:y,privateKey:v}=JSON.parse(g);return n.dispatch((0,m.saveRecoverySessionData)({recoveryUki:y})),v},t.extractRecoveryKey=async function(e,t,r){const o=e.getState(),{recoveryServerKeyBase64:n}=(0,v.recoveryDataSelector)(o);if(!n)throw new Error("Missing payload");const a=atob(n),i=e.getPlatformInfo();r(`[extra] platform: ${i.platformName}`),r(`[extra] browser: ${i.browser} @ ${i.browserVersion}`);const c=(0,s.base64ToBuffer)(t),d=(0,u.parseCipheredData)(new Uint8Array(c));r(`[extra] cryptoConfig derivation: ${JSON.stringify(d.cryptoConfig)}`),r("extractRecoveryKey - decryptRecoveryData");const l=await C({storeService:e,encryptedData:t,encryptionKey:a});return r("extractRecoveryKey - arrayBufferToText"),(0,s.arrayBufferToText)(l)},t.extractLocalKey=async function(e,t,r){const{storeService:o,localStorageService:n}=e,i=n.getInstance();r("extractLocalKey - getRecoveryLocalKey");const c=await i.getRecoveryLocalKey(),d=e.storeService.getPlatformInfo();r(`[extra] platform: ${d.platformName}`),r(`[extra] browser: ${d.browser} @ ${d.browserVersion}`);const l=(0,s.base64ToBuffer)(c),p=(0,u.parseCipheredData)(new Uint8Array(l));r(`[extra] cryptoConfig derivation: ${JSON.stringify(p.cryptoConfig)}`),r("extractLocalKey - decryptRecoveryData");const S=await C({storeService:o,encryptedData:c,encryptionKey:t});return r("extractLocalKey - inflateUtf16 localKey"),(0,a.inflateUtf16)(S)},t.prepareLocalDataEncryptorService=async function(e,t){const{localDataEncryptorService:r,storeService:o}=e,n=e.storeService.getUserSession().serverKey,a=(0,d.getNoDerivationCryptoConfig)();r.setInstance({raw:t},n,a),await r.getInstance().prepareCrypto(),o.dispatch((0,y.updateIsLocalKeyActivated)(!0))},t.storeSessionCredentialForRecovery=async function(e,t){const r=e.getState(),o=(0,S.masterPasswordSelector)(r);if(D(r)&&o){const e={masterPassword:o,recoveryKey:null},r=btoa(JSON.stringify(e));await t.getInstance().storeRecoverySessionCredential(r)}}},72040:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isRecoveryRequestPending=t.deactivateAccountRecovery=t.setupAccountRecoveryForDevice=t.activateAccountRecovery=void 0;const o=r(53494),n=r(97605),a=r(37906),i=r(84146),s=r(8153),c=r(77333);async function d(e,t,r){const{hash:a,recipients:i,recoveryServerKey:s}=await(0,n.getSetupRequisitesData)(e,r),{recoveryKeyBufferClear:d,recoveryKeyBase64Clear:l,recoveryKeyRawClear:u}=await(0,n.getRecoveryKey)(e),p=t.getInstance(),S=await p.getLocalKey(),g=(0,o.deflateUtf16)(S),m=await(0,n.encryptRecoveryData)({storeService:e,encryptionKey:u,data:g});t.getInstance().storeRecoveryLocalKey(m);const y=atob(s),v=await(0,n.encryptRecoveryData)({storeService:e,encryptionKey:y,data:d}),A=await(0,n.getAdminProtectedSymmetricalKeys)(i,v);await(0,n.sendAdminProtectedSymmetricalKeys)(e,r,A);const E={RecoveryHash:a,RecoveryKey:l};e.dispatch((0,c.editPersonalSettings)(E)),await(0,n.storeSessionCredentialForRecovery)(e,t)}t.activateAccountRecovery=async function(e){const{sessionService:t,storeService:r,localStorageService:o,wsService:l}=e,u=r.getState();if(!(0,n.isARAvailableForUser)(u))return{success:!1,error:{code:a.ApiErrorType.AccountRecoveryNotAvailableError}};(0,s.accountRecoveryOptInSelector)(u)||r.dispatch((0,c.editPersonalSettings)({RecoveryOptIn:!0}));try{await d(r,o,l),await t.getInstance().user.persistPersonalSettings(),await(0,i.sessionForceSync)(t)}catch(e){return{success:!1,error:{code:a.ApiErrorType.RecoverySetupFailed,message:e.message}}}return{success:!0}},t.setupAccountRecoveryForDevice=d,t.deactivateAccountRecovery=async function(e){const{sessionService:t,storeService:r,localStorageService:o,wsService:i}=e,s=r.getState();if(!(0,n.isARAvailableForUser)(s))return{success:!1,error:{code:a.ApiErrorType.AccountRecoveryNotAvailableError}};const d={RecoveryKey:"",RecoveryHash:"",RecoveryOptIn:!1};try{r.dispatch((0,c.editPersonalSettings)(d)),await t.getInstance().user.persistPersonalSettings(),await o.getInstance().cleanRecoverySetupData(),await(0,n.resetAdminProtectedSymmetricalKeys)(r,i)}catch(e){return{success:!1,error:{code:a.ApiErrorType.RecoveryDeactivationFailed,message:e.message}}}return{success:!0}},t.isRecoveryRequestPending=async function(e){try{return{success:!0,response:await e.localStorageService.getInstance().doesRecoveryDataExist()}}catch(e){return{success:!1,error:{code:a.ApiErrorType.IsRecoveryRequestPendingFailed,message:e}}}}},26877:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(97605);t.setupSubscriptions=function(e,t){e.sessionOpened.on((()=>(0,o.triggerCleanOrSetupAccountRecovery)(t))),e.syncSuccess.on((()=>(0,o.triggerCleanOrSetupAccountRecovery)(t)))}},37906:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RequestStatus=t.ApiErrorType=void 0,function(e){e.CheckRecoveryStatusFailed="CHECK_RECOVERY_STATUS_FAILED",e.RecoverySetupFailed="RECOVERY_SETUP_FAILED",e.RecoveryDeactivationFailed="RECOVERY_DEACTIVATION_FAILED",e.RecoveryRequestFailed="RECOVERY_REQUEST_FAILED",e.RegisterDeviceFailed="REGISTER_DEVICE_FAILED",e.SetupMasterPasswordForRecoveryFailed="SETUP_MASTERPASSWORD_FOR_RECOVERY_FAILED",e.CancelRecoveryRequestFailed="CANCEL_RECOVERY_REQUEST_FAILED",e.RecoverUserDataFailed="RECOVER_REQUEST_FAILED",e.CheckLocalRecoveryKeyFailed="CHECK_LOCAL_RECOVERY_KEY_FAILED",e.StartAccountRecoveryFailed="START_ACCOUNT_RECOVERY_FAILED",e.AccountRecoveryNotAvailableError="ACCOUNT_RECOVERY_NOT_AVAILABLE_ERROR",e.IsRecoveryRequestPendingFailed="IS_RECOVERY_REQUEST_PENDING_FAILED"}(t.ApiErrorType||(t.ApiErrorType={})),function(e){e.PENDING="PENDING",e.APPROVED="APPROVED",e.REFUSED="REFUSED",e.OVERRIDDEN="OVERRIDDEN",e.CANCELED="CANCELED"}(t.RequestStatus||(t.RequestStatus={}))},97036:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(5554),n=r(5547);t.config={commands:{},queries:{getFileContent:{selector:n.fileContentBlobUpdateSelector}},liveQueries:{liveFileMeta:{operator:o.fileMetaUpdate$}}}},36462:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(97036);t.bootstrap=e=>{e.register(o.config)}},82174:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MANUAL_FILE_UPDATE=t.AUTOMATIC_FILE_UPDATE=t.REMOTE_FILE_KEY=void 0,t.REMOTE_FILE_KEY="-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAzOFwZBlj8livLhzIN8xm\ny/c+gn9FpUNOEIPoiN7kcAlj+oIlWqW5TgRZLqvyA0WxhTcG7icTpC+UwBXvENdV\n3nTzmuB8W6ZnRTjrtAlSxqp0Yfr2eQEGZFTlfBFUneqq4RZ6e/B3nIRHG1sEkVhd\noBbenPWou+WHqaqnah0AZVfxx4bJq1wor1LpH7gxELthvsThBelQz4Lmns4hCjzq\nRCDjQ1PG9HpDwwRHyi9xJYWoLR6C3rHZ1mmldg7TS41cCWkKsPDiIrIzEN+94dGG\nqSAx4kti0ltRcjLcBuJhQ3FHaAU7ksSubEg+l0W8PWAKjNbhUpFXduqXjxZ9nhuS\n2sxETZoadgU6YDEyqk3W7c+dhpTioMZEsJXpBVdC2jbblPHBRXBTmdOdb7xlBrGQ\nzoyPpS0PcI9oa8o9na9J8DSqnEbLwXdOlv4TUoxrswD6nmnR31/W+C4PSC8yEUEx\nESiG6IfAakFICxVESBp1VZA7NUbT6JkrhQaz//AVuGAyMoDuXorRGQPit+9DgF2l\neSr0zLzO2MVfMXXKBnueZmjNLvYy2Q2e8QX1jsuvwFhDBt1QmfisdiGSPC7jp0rO\nXdu5eCQuHVYeApipVKry58So783jimUa+mpA0/NUyiYaON7zndtZlQv/y+dqvseT\na2iA73nMVy4y9F95mwdG8ykCAwEAAQ==\n-----END PUBLIC KEY-----\n",t.AUTOMATIC_FILE_UPDATE=["overrides.json"],t.MANUAL_FILE_UPDATE={}},27670:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.downloadRemoteFileHandler=t.fetchFile=void 0;const o=r(15876),n=r(58007),a=r(24555),i=r(2301),s=r(17086),c=r(48669),d=r(97921),l=r(95242),u=r(5547),p=r(8153),S=r(12120);async function g(e){try{return(await(0,S.httpGetUsingFetch)(e,{responseType:"arraybuffer"})).data}catch(e){throw new l.RemoteFileError(l.RemoteFileErrorNames.DownloadError,e.message)}}function m(e,t,r,o){e.dispatch((0,s.updateFileContentAction)({[t]:o})),e.dispatch((0,s.updateFileMetaAction)({[t]:r}))}async function y(e,[t,r]){if(!function(e){switch(e.status){case d.UPDATE_AVAILABLE_HTTP_STATUS:return!0;case d.NO_CURRENT_UPDATE_HTTP_STATUS:case d.FILE_NOT_FOUND_HTTP_STATUS:case d.SERVER_ERROR_HTTP_STATUS:default:return!1}}(r))return{fileName:t,isUpdated:!1,fileMetaData:r};try{const o=await async function(e,t){const r=await g(e.url);return e.key?await(0,i.decipherRemoteFileUpdate)((0,a.bufferToBase64)(r),e,(0,p.sharingKeysSelector)(t.getState()).privateKey):r}(r,e);m(e,t,r.revision,o)}catch(e){return(0,l.assertRemoteFileError)(e,!0),{fileName:t,isUpdated:!1,fileMetaData:r}}return{fileName:t,isUpdated:!0,fileMetaData:r}}t.fetchFile=g;t.downloadRemoteFileHandler=async(e,t)=>{const{storeService:r}=e,a=await async function(e,{automaticFileUpdate:t,manualFileUpdate:r}){const o=await(0,c.retrieveFileMetaDataFromLocalStorage)(e.localStorageService);return{...t.reduce(((e,t)=>(e[t]=null!==o&&t in o?o[t]:0,e)),{}),...r}}(e,t);try{const t=await async function(e,t){const r=await(0,n.getFilesMeta)(e,(0,p.userLoginSelector)(e.getState()),t);if((0,n.isGetFilesMetaSuccess)(r)){const{code:e,data:t,...o}=r;return o}if((0,o.isApiError)(r))throw new l.RemoteFileError(l.RemoteFileErrorNames.ServerError,r.message)}(r,a);if(0!==Object.keys(t).length){const o=await function(e,t){return Promise.all(Object.entries(e).map((e=>y(t,e))))}(t,r),n=await async function({localStorageService:e,storeService:t},r){return await Promise.all(r.filter((({isUpdated:e})=>e)).map((async({fileName:r})=>{try{return await(0,c.persistSingleFileContent)(e.getInstance(),t,r),[r,!0]}catch(e){return(0,l.assertRemoteFileError)(e,!0),[r,!1]}})))}(e,o),i=n.filter((([e,t])=>!t)).map((([e,t])=>e));r.dispatch((0,s.deleteFileMetaAction)(i)),await function({localStorageService:e,storeService:t},r,o){const n=e.getInstance();return Promise.all(r.filter((({isUpdated:e})=>!e)).map((async({fileName:r})=>{if(!n.isRemoteFileContentExist(r))return;const a=await(0,c.retrieveFileContentFromLocalStorage)(e,r);null!==a&&m(t,r,o[r],a)})))}(e,o,a),await(0,c.persistFileMeta)(e.localStorageService.getInstance(),r)}}catch(e){(0,l.assertRemoteFileError)(e,!0)}return(0,u.fileMetaUpdateSelector)(r.getState())}},2301:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decipherRemoteFileUpdate=void 0;const o=r(53494),n=r(40232),a=r(24555),i=r(30507),s=r(96045),c=r(82174),d=r(95242),l=r(93513);t.decipherRemoteFileUpdate=async function(e,t,r){const u=await async function(e,t){const r=(0,s.makeAsymmetricEncryption)({hashAlgorithm:i.HashAlgorithm.SHA_1});try{return l.decode(await r.decrypt(t,e))}catch(e){throw new d.RemoteFileError(d.RemoteFileErrorNames.DecipherError,"Invalid encryption on deciphering key")}}(t.key,r),p=(0,s.makeAsymmetricEncryption)({hashAlgorithm:i.HashAlgorithm.SHA_256}),S=await async function(e,t,r){return await e.verify(c.REMOTE_FILE_KEY,t,r)}(p,t.signature,e);if(!S)throw new d.RemoteFileError(d.RemoteFileErrorNames.DecipherError,"Invalid signature detected on file");return await async function(e,t){try{return(0,a.str2ab)((0,o.deflatedUtf8ToUtf16)(await(0,o.decipherDashlaneSecureData)(e,t,"",(0,n.makeGetDerivateKeyWithCacheAndQueue)()),{skipInflate:!0}))}catch(e){throw new d.RemoteFileError(d.RemoteFileErrorNames.DecipherError,"Invalid encryption on file")}}(e,u)}},46716:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(36462);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},5554:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fileMetaUpdate$=void 0;const o=r(18948),n=r(3343),a=r(5547);t.fileMetaUpdate$=()=>(0,o.pipe)((0,n.map)(a.fileMetaUpdateSelector),(0,n.distinctUntilChanged)())},48669:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveFileContentFromLocalStorage=t.retrieveFileMetaDataFromLocalStorage=t.persistSingleFileContent=t.persistFileMeta=void 0;const o=r(1064),n=r(5547),a=r(95242),i=r(24555);t.persistFileMeta=async function(e,t){const{persistData:r,isAuthenticated:i}=t.getAccountInfo();if(i&&r!==o.PersistData.PERSIST_DATA_NO&&e)try{await e.storeRemoteFileMeta((0,n.fileMetaUpdateSelector)(t.getState()))}catch{throw new a.RemoteFileError(a.RemoteFileErrorNames.LocalStorageError,"Cannot persist file metadata in local storage")}},t.persistSingleFileContent=async function(e,t,r){const{persistData:s,isAuthenticated:c}=t.getAccountInfo();if(c&&s!==o.PersistData.PERSIST_DATA_NO&&e){const o=await(0,n.fileContentABUpdateSelector)(t.getState(),r);try{await e.storeRemoteFileContent(r,(0,i.bufferToBase64)(o))}catch(e){throw new a.RemoteFileError(a.RemoteFileErrorNames.LocalStorageError,`Cannot persist ${r} content in local storage`)}}},t.retrieveFileMetaDataFromLocalStorage=async function(e){const t=e.getInstance();return await t.isRemoteFileMetaDataExist()?await t.getRemoteFileMeta():Promise.resolve(null)},t.retrieveFileContentFromLocalStorage=async function(e,t){const r=e.getInstance();return await r.isRemoteFileContentExist(t)?(0,i.base64ToBuffer)(await r.getRemoteFileContent(t)):Promise.resolve(null)}},95242:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.assertRemoteFileError=t.RemoteFileError=t.RemoteFileErrorNames=void 0,function(e){e.DecipherError="DECIPHER_ERROR",e.ServerError="SERVER_ERROR",e.DownloadError="DOWNLOAD_ERROR",e.LocalStorageError="LOCAL_STORAGE_ERROR"}(t.RemoteFileErrorNames||(t.RemoteFileErrorNames={}));class r extends Error{constructor(e,t){super(t),this.name=e}}t.RemoteFileError=r,r.errorInstance="REMOTE_FILE_ERROR",t.assertRemoteFileError=function(e,t){}},5547:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fileContentBlobUpdateSelector=t.FileContentsUpdateSelector=t.fileContentABUpdateSelector=t.fileMetaUpdateSelector=void 0;t.fileMetaUpdateSelector=e=>e.device.remoteFile.fileMetaData;t.fileContentABUpdateSelector=(e,t)=>e.device.remoteFile.fileContentState[t];t.FileContentsUpdateSelector=e=>e.device.remoteFile.fileContentState;t.fileContentBlobUpdateSelector=(e,t)=>{return r=e.device.remoteFile.fileContentState[t],new Blob([r]);var r}},51951:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(42614);t.setupSubscriptions=async function(e,t){e.sessionOpened.on((()=>(0,o.triggerDownloadRemoteFileUpdate)(t)))}},42614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerDownloadRemoteFileUpdate=void 0;const o=r(27670),n=r(82174),a=r(14122);t.triggerDownloadRemoteFileUpdate=async function(e){if(!function(e){return e.coreAnalysis_web_remoteFileUpdate_prod}((0,a.featuresSelector)(e.storeService.getState())))return;const t={automaticFileUpdate:n.AUTOMATIC_FILE_UPDATE,manualFileUpdate:n.MANUAL_FILE_UPDATE};await(0,o.downloadRemoteFileHandler)(e,t)}},97921:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SERVER_ERROR_HTTP_STATUS=t.FILE_NOT_FOUND_HTTP_STATUS=t.NO_CURRENT_UPDATE_HTTP_STATUS=t.UPDATE_AVAILABLE_HTTP_STATUS=void 0,t.UPDATE_AVAILABLE_HTTP_STATUS="update_available",t.NO_CURRENT_UPDATE_HTTP_STATUS="unknown_revision",t.FILE_NOT_FOUND_HTTP_STATUS="not_found",t.SERVER_ERROR_HTTP_STATUS="error_server"},99901:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(41162),n=r(56780),a=r(74141);t.config={commands:{updateMigrationOnboarding:{handler:a.updateMigrationOnboarding}},queries:{getMigrationOnboarding:{selector:o.migrationOnboardingSelector},getDesktopLogin:{selector:o.desktopLoginSelector}},liveQueries:{liveMigrationOnboarding:{operator:n.migrationOnboarding$}}}},58780:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MigrationOnboardingStep=void 0;var o=r(61921);Object.defineProperty(t,"MigrationOnboardingStep",{enumerable:!0,get:function(){return o.MigrationOnboardingStep}})},71343:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(99901);t.bootstrap=e=>{e.register(o.config)}},24696:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(71343);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},56780:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.migrationOnboarding$=void 0;const o=r(18948),n=r(3343),a=r(41162);t.migrationOnboarding$=()=>(0,o.pipe)((0,n.map)(a.migrationOnboardingSelector),(0,n.distinctUntilChanged)())},41162:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.desktopLoginSelector=t.migrationOnboardingSelector=void 0;t.migrationOnboardingSelector=e=>e.userSession.localSettings.migrationOnboarding;t.desktopLoginSelector=e=>e.device.application.settings.desktopLogin},85893:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initializeMigrationOnboarding=void 0;const o=r(18017),n=r(61921),a=r(6261);t.initializeMigrationOnboarding=async function(e){const{storeService:t,sessionService:r}=e,i=(0,o.migratedToSAEXSelector)(t.getState());if(void 0!==i){const e=function(e,t){return"Known"===e.type?e.value:t?n.MigrationOnboardingStep.NOT_SEEN:n.MigrationOnboardingStep.SEEN}(t.getLocalSettings().migrationOnboarding,i);t.dispatch((0,a.migrationOnboardingUpdated)(e)),await r.getInstance().user.persistLocalSettings()}return{success:!0}}},74141:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateMigrationOnboarding=void 0;const o=r(6261);t.updateMigrationOnboarding=async function({storeService:e,sessionService:t},r){return e.dispatch(o.migrationOnboardingUpdated(r)),await t.getInstance().user.persistLocalSettings(),{success:!0}}},68655:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(85893);t.setupSubscriptions=async function(e,t){e.sessionOpened.on((()=>{(0,o.initializeMigrationOnboarding)(t)}))}},61921:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MigrationOnboardingStep=void 0,function(e){e.NOT_SEEN="NOT_SEEN",e.SEEN="SEEN"}(t.MigrationOnboardingStep||(t.MigrationOnboardingStep={}))},84520:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(64803),n=r(72397),a=r(11744),i=r(80286),s=r(66016),c=r(22029),d=r(73937),l=r(99673),u=r(8961),p=r(58289),S=r(84442),g=r(75247),m=r(74293),y=r(59125),v=r(47171),A=r(77795),E=r(42891),f=r(33204),h=r(29198),_=r(10300),T=r(4666),I=r(55052),C=r(55665),P=r(43341),D=r(25259),O=r(44034),b=r(16463),w=r(13347),N=r(24696),R=r(40653),L=r(23757),U=r(94707),M=r(68374),k=r(63150),F=r(41222),B=r(71838),G=r(22384),K=r(69815),j=r(46716),V=[n.bootstrap,a.bootstrap,c.bootstrap,u.bootstrap,d.bootstrap,l.bootstrap,p.bootstrap,S.bootstrap,g.bootstrap,m.bootstrap,y.bootstrap,i.bootstrap,v.bootstrap,A.bootstrap,E.bootstrap,f.bootstrap,T.bootstrap,h.bootstrap,I.bootstrap,C.bootstrap,P.bootstrap,b.bootstrap,w.bootstrap,R.bootstrap,L.bootstrap,U.bootstrap,M.bootstrap,k.bootstrap,N.bootstrap,D.bootstrap,O.bootstrap,s.bootstrap,G.vpnApiBootstrap,F.bootstrap,B.bootstrap,_.bootstrap,K.bootstrap,j.bootstrap];t.bootstrap=(e,t,r)=>{const n=(0,o.getCoreServices)(e);V.forEach((e=>{e(t,n,r)}))}},79639:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCurrentLocation=t.setPlatform=t.initCarbon=void 0;const o=r(97211),n=r(72931),a=r(20367),i=r(66280),s=r(13331),c=r(33673),d=r(63272),l=r(44992),u=r(47599),p=r(38215),S=r(31891),g=r(64803),m=r(47729),y=r(66348),v=r(59125),A=r(15528),E=r(72093),f=r(45068),h=r(81604),_=r(31448),T=r(3692),I=r(30301),C=r(84520),P=r(66378),D=r(64122),O=r(75159);t.initCarbon=async function(e){var r;if((0,P.setPublicPath)(e.publicPath),!e.storageLayer)throw new Error("Missing Storage layer prevents Carbon initialization");(null===(r=e.config)||void 0===r?void 0:r.FETCH_HTTP_REQUESTS)&&(0,O.setHttpClientImplementationLibrary)(O.HttpClientImplementationLibrary.FetchApi,{setAsDefault:!0});const p=e.infrastructure?(0,T.makeInfrastructureService)(e.infrastructure):{},y=(0,g.carbonServices)({storageLayer:new D.CarbonLocalStorage(e.storageLayer),infrastructure:p});(0,t.setPlatform)(y,e.platformInfo),await(0,_.setupEventBus)(y),(0,h.loadFrequencyLists)();const{debug:v,e2e:A}=e.connectors;let{leeloo:b,maverick:w,extension:N,diagnostic:R,api:L}=e.connectors;b=b||(0,n.createEventBus)({events:o.CarbonLeelooConnector}),w=w||(0,n.createEventBus)({events:o.CarbonMaverickConnector}),N=N||(0,n.createEventBus)({events:o.ExtensionCarbonConnector}),R=R||(0,n.createEventBus)({events:o.CarbonDiagnosticConnector}),L=L||(0,n.createEventBus)({events:f.apiEvents}),v&&(0,c.subscribeToDebugEvents)(v),A&&(0,l.subscribeToE2EEvents)(A,y),(0,a.subscribeToExtensionEvents)(N,y),(0,i.subscribeToLeelooEvents)(b,y),(0,s.subscribeToMaverickEvents)(w,y),(0,d.subscribeToDiagnosticEvents)(R);const U=new I.TsEventBusCommandQueryBus(y,f.apiEvents,L);return(0,C.bootstrap)(y,U,null==e?void 0:e.infrastructure),e.wasmPort&&(0,m.setWasmPort)(e.wasmPort),e.workers&&(0,m.setWorkersPath)(e.workers),e.plugins&&(0,E.setPlugins)(e.plugins),(0,u.initAuthenticatedCarbonApplication)(e,y).then((()=>y)).catch((e=>{throw S.Debugger.error(e,"error while initializing SDK"),e}))};t.setPlatform=(e,t)=>{e.getInstance(g.CarbonServicesTypeEnum.StoreService).getStore().dispatch((0,y.savePlatformInfo)(t)),(0,p.setPlatformInfo)(t)},t.fetchCurrentLocation=function(e,t){return e.country.getCurrentCountry().then((e=>{t.dispatch((0,y.saveCurrentLocation)(e))})).catch((e=>{const t=new Error(`[Sdk/Default] - fetchCurrentLocation: ${e}`);(0,v.sendExceptionLog)({error:t,code:A.ExceptionCriticality.WARNING})}))}},31448:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupEventBus=void 0;const o=r(64803),n=r(84442),a=r(40653),i=r(23757),s=r(68655),c=r(63150),d=r(36391),l=r(41639),u=r(1133),p=r(26877),S=r(66625),g=r(6107),m=r(89322),y=r(71008),v=r(54564),A=r(51951);t.setupEventBus=async function(e){const t=(0,o.getCoreServices)(e),r=t.eventBusService,E=[p.setupSubscriptions,m.setupSubscriptions,y.setupSubscriptions,S.setupSubscriptions,n.setupSubscriptions,g.setupSubscriptions,u.setupSubscriptions,s.setupSubscriptions,a.setupSubscriptions,c.setupSubscriptions,i.setupSubscriptions,d.setupSubscriptions,l.setupSubscriptions,v.setupUserSettingsLogSubscriptions,A.setupSubscriptions].map((e=>e(r,t)));return Promise.all(E)}},64803:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCoreServices=t.carbonServices=t.CarbonServicesTypeEnum=void 0;const o=r(47193),n=r(34929),a=r(91450),i=r(64122),s=r(52267),c=r(37771),d=r(92357),l=r(65866),u=r(2427),p=r(34077),S=r(46947),g=r(74293);var m;!function(e){e.StoreService="StoreService",e.StorageService="StorageService",e.SessionService="SessionService",e.MasterPasswordEncryptorService="MasterPasswordEncryptorService",e.LocalDataEncryptorService="LocalDataEncryptorService",e.RemoteDataEncryptorService="RemoteDataEncryptorService",e.AuthorizationKeysEncryptorService="AuthorizationKeysEncryptorService",e.LocalStorageService="LocalStorageService",e.WSService="WSService",e.PerfLogService="PerfLogService",e.AutoLoginService="AutoLoginService",e.WebAuthnAuthenticationService="WebAuthnAuthenticationService",e.EventBusService="EventBusService",e.InfrastructureService="InfrastructureService",e.EventLoggerService="EventLoggerService",e.TeamDeviceEncryptedConfigEncryptorService="TeamDeviceEncryptedConfigEncryptorService"}(m=t.CarbonServicesTypeEnum||(t.CarbonServicesTypeEnum={}));t.carbonServices=e=>{const t=(0,o.makeStoreService)(),r=(0,S.makeEventBusService)(),y=e.masterPasswordEncryptorService?e.masterPasswordEncryptorService():(0,n.makeDataEncryptorService)(t),v=e.localDataEncryptorService?e.localDataEncryptorService():(0,n.makeDataEncryptorService)(t),A=e.remoteDataEncryptorService?e.remoteDataEncryptorService():(0,n.makeDataEncryptorService)(t),E=e.teamDeviceEncryptedConfigEncryptorService?e.teamDeviceEncryptedConfigEncryptorService():(0,n.makeDataEncryptorService)(t),f=(0,l.makeKeyDataEncryptorService)(),h=(0,n.makeDataEncryptorService)(t),_=Object.assign({},(0,c.makeWSService)(),e.wsService?e.wsService(t):{}),T=(0,i.makeStorageService)();T.setInstance(e.storageLayer);const I=e.authorizationKeysEncryptorService?e.authorizationKeysEncryptorService():(0,l.makeKeyDataEncryptorService)();(0,n.setObfuscatingKey)(I);const C=(0,a.makeLocalStorageService)({masterPasswordEncryptorService:y,localDataEncryptorService:v,authorizationKeysEncryptorService:I,autoLoginEncryptorService:f,webAuthnAuthenticationEncryptorService:h,storageService:T,storeService:t}),P=(0,g.makeEventLoggerService)({storeService:t,storageService:T}),D=(0,s.makeSessionService)({masterPasswordEncryptorService:y,localDataEncryptorService:v,remoteDataEncryptorService:A,storeService:t,localStorageService:C,storageLayer:e.storageLayer,wsService:_,eventBusService:r,eventLoggerService:P,teamDeviceEncryptedConfigEncryptorService:E}),O=(0,u.makeAutoLoginService)({autoLoginEncryptorService:f,localStorageService:C,wsService:_,authorizationKeysEncryptorService:I,storeService:t}),b=(0,p.makeWebAuthnAuthenticationService)({webAuthnAuthenticationEncryptorService:h,storeService:t,localStorageService:C,authorizationKeysEncryptorService:I}),w=(0,d.makePerfLogService)(t);return{services:[{type:m.WSService,instance:_},{type:m.StoreService,instance:t},{type:m.StorageService,instance:T},{type:m.LocalStorageService,instance:C},{type:m.SessionService,instance:D},{type:m.PerfLogService,instance:w},{type:m.AuthorizationKeysEncryptorService,instance:I},{type:m.AutoLoginService,instance:O},{type:m.WebAuthnAuthenticationService,instance:b},{type:m.EventBusService,instance:r},{type:m.MasterPasswordEncryptorService,instance:y},{type:m.RemoteDataEncryptorService,instance:A},{type:m.LocalDataEncryptorService,instance:v},{type:m.InfrastructureService,instance:e.infrastructure},{type:m.EventLoggerService,instance:P},{type:m.TeamDeviceEncryptedConfigEncryptorService,instance:E}],getInstance:function(e){const t=this.services.find((t=>t.type===e));if(void 0===t)throw new Error("Service "+e+" not defined");return t.instance}}};t.getCoreServices=e=>{const t=e.getInstance(m.StoreService),r=e.getInstance(m.RemoteDataEncryptorService),o=e.getInstance(m.MasterPasswordEncryptorService),n=e.getInstance(m.LocalDataEncryptorService),a=e.getInstance(m.AuthorizationKeysEncryptorService),i=e.getInstance(m.LocalStorageService),s=e.getInstance(m.StorageService),c=e.getInstance(m.SessionService),d=e.getInstance(m.WSService),l=e.getInstance(m.PerfLogService);return{storeService:t,remoteDataEncryptorService:r,masterPasswordEncryptorService:o,localDataEncryptorService:n,authorizationKeysEncryptorService:a,localStorageService:i,storageService:s,sessionService:c,wsService:d,autoLoginService:e.getInstance(m.AutoLoginService),webAuthnAuthenticationService:e.getInstance(m.WebAuthnAuthenticationService),perfLogService:l,eventBusService:e.getInstance(m.EventBusService),infrastructureService:e.getInstance(m.InfrastructureService),eventLoggerService:e.getInstance(m.EventLoggerService),teamDeviceEncryptedConfigEncryptorService:e.getInstance(m.TeamDeviceEncryptedConfigEncryptorService)}}},3692:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeInfrastructureService=void 0;const o=r(60110);t.makeInfrastructureService=function(e){return{passwordChanger:e.connectors.passwordChanger&&new o.PasswordChangerEventBusClient(e.connectors.passwordChanger)}}},64025:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(14271),t),n(r(66128),t)},9451:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(8153),n=r(8368),a=r(10364),i=r(91033),s=r(49914),c=r(10693),d=r(26553),l=r(18496);t.config={commands:{validateToken:{handler:s.validateToken},validateMasterPassword:{handler:s.validateMasterPasswordHandler},resetProtectedItemAutofillTimer:{handler:s.resetProtectedItemAutofillTimerHandler},forceSync:{handler:c.forceSyncHandler},updatePremiumChurningDismissDate:{handler:d.updatePremiumChurningDismissDateHandler},setCredentialSearchOrder:{handler:l.setCredentialSearchOrderHandler}},queries:{getActiveSpaces:{selector:o.activeSpacesSelector},getMasterPasswordAndServerKey:{selector:o.masterPasswordAndServerKeySelector,allowedPlatforms:["desktop_win"]},getIsAuthenticated:{selector:o.isAuthenticatedSelector},getSyncInfo:{selector:o.syncSelector},getIsSyncInProgress:{selector:o.syncIsInProgressSelector},getPremiumStatus:{selector:o.premiumStatusSelector},getIsSSOUser:{selector:n.isSSOUserSelector},getSSOMigrationInfo:{selector:n.ssoMigrationInfoSelector},getUserLogin:{selector:o.userLoginSelector},getPublicUserId:{selector:o.publicUserIdSelector},getAnalyticsInstallationId:{selector:o.analyticsInstallationIdSelector},getUserLoginStatus:{selector:a.loginStatusSelector},getWebOnboardingMode:{selector:o.webOnboardingModeSelector},getPremiumChurningDismissDate:{selector:o.premiumChurningDismissDateSelector},getIsPaymentFailureChurningDismissed:{selector:o.isPaymentFailureChurningDismissedSelector},getCredentialSearchOrder:{selector:o.getCredentialSearchOrderSelector},getDidOpen:{selector:o.didOpenSelector},getPlatformName:{selector:o.platformNameSelector}},liveQueries:{liveSyncInfo:{operator:i.syncInfo$},liveIsSyncInProgress:{operator:i.syncInProgress$},liveLoginStatus:{operator:a.getLoginStatus$},livePremiumStatus:{operator:i.premiumStatus$},liveServiceProviderUrl:{subject:i.getServiceProviderUrl$},liveWebOnboardingMode:{operator:i.webOnboardingMode$},liveDidOpen:{operator:i.didOpen$}}}},54836:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncStatuses=t.SSOMigrationType=t.CredentialSearchOrder=void 0;var o=r(1064);Object.defineProperty(t,"CredentialSearchOrder",{enumerable:!0,get:function(){return o.CredentialSearchOrder}}),Object.defineProperty(t,"SSOMigrationType",{enumerable:!0,get:function(){return o.SSOMigrationType}}),Object.defineProperty(t,"SyncStatuses",{enumerable:!0,get:function(){return o.SyncStatuses}})},83197:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerSendTransactionDecipheringDiagnosticLog=void 0;const o=r(63272),n=r(31891);t.triggerSendTransactionDecipheringDiagnosticLog=function(e){n.default.log("SendDecipheringLog"),(0,o.default)().decipheringDiagnosticLogEvent(e)}},17210:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendFeaturesUpdateEvent=t.persistFeatures=t.getFeatures=t.factory=void 0;const o=r(92533),n=r(1064),a=r(32234);function i(){return{getFeatures:function(e,t,r,n){return t.features.fetchFeatures({login:r,uki:n}).then((t=>{e.dispatch((0,o.refreshedFeatures)(t))}))},persistFeatures:function(e,t,r){return t.persistData===n.PersistData.PERSIST_DATA_NO?Promise.resolve():e?e.storePersonalFeatures(r).then((()=>{})):void 0},sendFeaturesUpdateEvent:function(e){const t=e.getPersonalFeatures();if(t.features){const e={lastUpdate:t.lastUpdateTimestamp,list:t.features};(0,a.sendFeatures)(e)}}}}t.factory=i;const s=i(),c=s.getFeatures;t.getFeatures=c;const d=s.persistFeatures;t.persistFeatures=d;const l=s.sendFeaturesUpdateEvent;t.sendFeaturesUpdateEvent=l},2090:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUsersSSOInfo=t.loadLocalData=t.completeLogin=t.checkLogin=void 0;const o=r(54516),n=r(1064),a=r(53667),i=r(59944),s=r(84335),c=r(75897),d=r(88478),l=r(22029),u=r(15876),p=r(40914),S=r(62550),g=r(73144),m=r(55015),y=r(8153),v=r(1064);t.checkLogin=async function(e,r){const c=e.getState(),v=(0,y.userLoginSelector)(c);let A,E;try{const t=await async function(e,t){const r=await(0,l.getLocalAccounts)(e,t);return r.map((e=>e.login)).map((t=>({login:t,deviceAccessKey:(0,d.getDeviceAccessKeySelector)(e.getState(),t)})))}(e,r),o=(0,d.getDeviceAccessKeySelector)(c,v),a=await(0,u.requestLogin)(e,{login:v,deviceAccessKey:o,profiles:t});if((0,u.isApiError)(a))return async function(e,t,r){if(!(0,u.isApiErrorOfType)(u.BusinessError,t))throw new Error(`Failed to request login (${t.code})`);const o=t.code;switch(o){case u.DeviceDeactivated:case u.DeviceNotFound:throw await(0,m.wipeOutLocalAccounts)(e,[r]),new Error(n.AuthenticationCode[n.AuthenticationCode.DEVICE_NOT_REGISTERED]);case u.ClientVersionDoesNotSupportSSOMigration:throw new Error(n.AuthenticationCode[n.AuthenticationCode.CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION]);default:(0,p.assertUnreachable)(o)}}(r,a,v);!async function(e,t){const{profilesToDelete:r}=t;if((r||[]).length>0)return;const o=r.map((e=>e.login));await(0,m.wipeOutLocalAccounts)(e,o)}(r,a),A=a.verification,E=a.ssoInfo}catch(e){if(!(0,g.isCarbonError)(e,S.HttpError))throw e;A=function(e){return function(e){return(0,o.getUserPublicSetting)(e,"otp2")?i.OtpType.OTP_LOGIN:null}(e)===i.OtpType.OTP_LOGIN?[{type:"totp"}]:[]}(v)}const f=function(e,t=[],r){if(t.some((({type:e})=>"sso"===e))&&(null==r?void 0:r.serviceProviderUrl))return n.AuthenticationCode.SSO_LOGIN_BYPASS;const a=function(e){if(e.some((e=>"totp"===e.type)))return i.OtpType.OTP_LOGIN;if(e.length>0)throw new Error("Unsupported 2FA method requested");return null}(t);if(function(e,t){(0,o.storeUserPublicSetting)(e,"otp2",t===i.OtpType.OTP_LOGIN)}(e,a),a===i.OtpType.OTP_LOGIN)return n.AuthenticationCode.ASK_OTP;return n.AuthenticationCode.ASK_MASTER_PASSWORD}(v,A,E);return function(e,r,o){switch(e){case n.AuthenticationCode.SSO_LOGIN_BYPASS:if(!(null==o?void 0:o.serviceProviderUrl))throw new Error("[LocalAuthentication] - Unable to use SSO verification. Missing SSO information.");r.dispatch((0,s.storeSSOSettings)({ssoUser:!0,...(0,t.getUsersSSOInfo)(o)}));break;case n.AuthenticationCode.ASK_OTP:r.dispatch((0,a.enableOtp)(i.OtpType.OTP_LOGIN))}e!==n.AuthenticationCode.SSO_LOGIN_BYPASS&&r.dispatch((0,s.storeSSOSettings)({ssoUser:!1,...(0,t.getUsersSSOInfo)(o)}))}(f,e,E),f},t.completeLogin=async function(e,t,r){const o=e.getUserLogin(),a={login:o,deviceAccessKey:(0,d.getDeviceAccessKeySelector)(e.getState(),o),authTicket:r},i=await(0,u.completeLoginWithAuthTicket)(e,a);if((0,u.isApiError)(i))return async function(e,t,r){if(!(0,u.isApiErrorOfType)(u.BusinessError,t))throw new Error(`Failed to complete login (${t.code})`);const o=t.code;switch(o){case u.DeviceNotFound:throw await(0,m.wipeOutLocalAccounts)(e,[r]),new Error(n.AuthenticationCode[n.AuthenticationCode.DEVICE_NOT_REGISTERED]);case u.InvalidAuthTicket:throw new Error(n.AuthenticationCode[n.AuthenticationCode.TOKEN_NOT_VALID]);default:(0,p.assertUnreachable)(o)}}(t,i,o);const{serverKey:s}=i;if(!s)throw new Error(n.AuthenticationCode[n.AuthenticationCode.SERVER_KEY_MISSING]);return e.dispatch((0,c.updateServerKey)(s)),n.AuthenticationCode.ASK_MASTER_PASSWORD},t.loadLocalData=async function(e,t,r){return r.getInstance().prepareCrypto(),await e.getInstance().user.loadSessionData(),t.dispatch((0,a.localDataLoaded)()),n.AuthenticationCode.LOGGEDIN};t.getUsersSSOInfo=e=>{if(!e)return{serviceProviderUrl:""};const t=(e=>{if(e.migration)switch(e.migration){case"mp_user_to_sso_member":return v.SSOMigrationType.MP_TO_SSO;case"sso_member_to_admin":case"sso_member_to_mp_user":return v.SSOMigrationType.SSO_TO_MP}})(e);return{serviceProviderUrl:e.serviceProviderUrl?e.serviceProviderUrl:"",...void 0!==t?{migration:t}:{}}}},10364:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLoginStatus$=t.loginStatusSelector=void 0;const o=r(32034),n=r(18948),a=r(3343),i=(0,o.createSelector)((e=>e.userSession.session.sessionId),(e=>e.userSession.account.isAuthenticated),((e,t)=>e&&t));t.loginStatusSelector=(0,o.createSelector)(i,(e=>e.userSession.account),((e,t)=>{if(!e)return{login:null,loggedIn:!1};const{isAuthenticated:r,login:o}=t;return{loggedIn:r,login:o}}));t.getLoginStatus$=()=>(0,n.pipe)((0,a.map)(t.loginStatusSelector),(0,a.distinctUntilChanged)())},93918:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.openWebOnboardingTab=t.updateWebOnboardingMode=void 0;const o=r(6261),n=r(32234);t.updateWebOnboardingMode=function(e,t,r){if(!e.isAuthenticated())throw new Error("No session set");e.dispatch(o.webOnboardingModeUpdated(r));const a=e.getLocalSettings().webOnboardingMode;n.sendWebOnboardingModeUpdate(a),t.getInstance().user.persistLocalSettings()},t.openWebOnboardingTab=function(e,t){if(!e.hasSessionId())throw new Error("No session set");n.openWebOnboardingTab({domain:t.domain,url:t.url})}},66075:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isOnboardingNotificationShowing=void 0;const o=r(97211);t.isOnboardingNotificationShowing=e=>{const{completedSteps:t,flowLoginCredentialOnWeb:r,leelooStep:n,popoverStep:a}=e,{SHOW_LOGIN_USING_EXTENSION_NOTIFICATION:i,SHOW_PASSWORD_SAVE_SUCCESS:s,SHOW_WEB_SAVE_AND_AUTOLOGIN_COMPLETED:c}=o.WebOnboardingLeelooStep,{SHOW_LOGIN_NOTIFICATION:d}=o.WebOnboardingPopoverStep,l=r&&n===i,u=t.saveCredentialOnWeb&&n===s,p=t.saveCredentialOnWeb&&t.loginCredentialOnWeb&&n===c;return l||u||p||r&&a===d}},86205:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeDashlaneApiPairingService=void 0;const o=r(15876),n=r(31891);t.makeDashlaneApiPairingService=e=>({requestPairing:t=>(async(e,t)=>{try{const r=await o.requestPairing(e,t);if(o.isApiError(r))throw r;return r}catch(e){return void(0,n.logError)({message:`Pairing request failed: ${e}`})}})(e,t)})},14481:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pairingIdSelector=t.isPairingEnabledSelector=void 0;t.isPairingEnabledSelector=e=>Boolean(e.userSession.session.pairingId);t.pairingIdSelector=e=>e.userSession.session.pairingId},61663:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestPairing=void 0;const o=r(14481),n=r(54516),a=r(75897),i=r(86205);t.requestPairing=async(e,t)=>{const r=e.getState();if((0,o.pairingIdSelector)(r))return;if(!(0,n.getSyncAppSetting)("syncWithLocalClients"))return;const s=(0,i.makeDashlaneApiPairingService)(e),c=await s.requestPairing(t),d=null==c?void 0:c.pairingId;d&&e.dispatch((0,a.pairingSucceeded)(d))}},12940:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFreshPremiumStatus=t.refreshPremiumStatus=void 0;const o=r(28060),n=r(31891),a=r(59125),i=r(1005),s=r(16165);t.refreshPremiumStatus=async function(e,t,r,o){const d=e.getLocalSettings().premiumStatus;try{const n=await c(t,r,o),a=n&&n.spaces||[];return e.dispatch((0,i.premiumStatusUpdated)(n)),(0,s.refreshSpaceData)(e,a),n}catch(e){const t=new Error(`[PremiumController] - refreshPremiumStatus: ${e}`);if(n.default.error(t),(0,a.sendExceptionLog)({error:t}),d)return d;throw e}};function c(e,t,r){return e.premium.status({login:t,uki:r,billingInformation:!0,spaces:!0,autoRenewal:!0,familyInformation:!0,previousPlan:!0,needsAutoRenewalFailed:!0}).then((e=>{const t=(0,o.pick)(["statusCode","billingInformation","planName","planType","planFeature","endDate","spaces","autoRenewal","previousPlan","autoRenewalFailed","autoRenewInfo","recoveryHash"],e);return t.capabilities=(e=>{if(!e.capabilities||!e.capabilities.length)return;return e.capabilities.reduce(((e,t)=>{const{capability:r,...o}=t;return e[r]=o,e}),{})})(e),e.hasOwnProperty("familyMembership")&&(t.familyMembership=(e=>e.familyMembership?e.familyMembership[0]:void 0)(e)),t}))}t.getFreshPremiumStatus=c},13308:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUsersSSOInfo=t.validateMasterPassword=t.registerDevice=t.registerDeviceWithDashlaneAuthenticator=t.cancelRegistrationWithDashlaneAuthenticator=t.generateUki=t.askServerToSendToken=t.checkLoginWithUki=t.requestDeviceRegistration=t.SendTokenStatus=void 0;const o=r(28354),n=r(28060),a=r(1064),i=r(1064),s=r(89593),c=r(31891),d=r(6261),l=r(59944),u=r(53667),p=r(60087),S=r(31354),g=r(1005),m=r(24555),y=r(33792),v=r(76409),A=r(53494),E=r(75897),f=r(11814),h=r(84335),_=r(44521);var T=r(89593);Object.defineProperty(t,"SendTokenStatus",{enumerable:!0,get:function(){return T.SendTokenStatus}});const I=r(40914),C=r(56431),P=r(1064),D=r(49914),O=r(8153),b=r(15876);let w,N;t.requestDeviceRegistration=async function(e){const r=e.getAccountInfo().login,o=await(0,b.requestDeviceRegistration)(e,{login:r,hasDashlaneAuthenticatorSupport:!0});if((0,b.isApiError)(o))return function(e){if(!(0,b.isApiErrorOfType)(b.BusinessError,e))throw new Error(`Failed to request device registration (${e.code})`);const t=e.code;switch(t){case b.UserNotFound:throw new Error(i.AuthenticationCode[i.AuthenticationCode.USER_DOESNT_EXIST]);case b.SSOBlocked:throw new Error(i.AuthenticationCode[i.AuthenticationCode.SSO_BLOCKED]);case b.ClientVersionDoesNotSupportSSOMigration:throw new Error(i.AuthenticationCode[i.AuthenticationCode.CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION]);default:(0,I.assertUnreachable)(t)}}(o);const{verification:n,ssoInfo:a}=o;if(!n)throw new Error("[requestDeviceRegistration] - No verfication in API response.");const s=function(e=[],t){if(e.some((({type:e})=>"sso"===e))&&(null==t?void 0:t.serviceProviderUrl))return i.AuthenticationCode.SSO_LOGIN_BYPASS;if(e.some((({type:e})=>"email_token"===e)))return i.AuthenticationCode.ASK_TOKEN;if(e.some((({type:e})=>"totp"===e)))return i.AuthenticationCode.ASK_OTP_FOR_NEW_DEVICE;if(e.some((({type:e})=>"dashlane_authenticator"===e)))return i.AuthenticationCode.ASK_DASHLANE_AUTHENTICATOR;throw new Error("[requestDeviceRegistration - getVerificationType] - Verification not supported!")}(n,a);return function(e,r,o){if(e===i.AuthenticationCode.SSO_LOGIN_BYPASS){if(!(null==o?void 0:o.serviceProviderUrl))throw new Error("[requestDeviceRegistration - processVerification] - Unable to use SSO verification. Missing SSO information.");r.dispatch((0,h.storeSSOSettings)({ssoUser:!0,...(0,t.getUsersSSOInfo)(o)}))}e!==i.AuthenticationCode.SSO_LOGIN_BYPASS&&r.dispatch((0,h.storeSSOSettings)({ssoUser:!1,...(0,t.getUsersSSOInfo)(o)}))}(s,e,a),s},t.checkLoginWithUki=async function(e,t,r){const o=e.getAccountInfo().login,n=await async function(e,t,r){return"UKI VALID"===await e.authentication.validity({login:t,uki:r})}(t,o,r);if(!n)throw new Error(i.AuthenticationCode[i.AuthenticationCode.INVALID_UKI]);return e.dispatch((0,u.confirmUserAuthentication)()),Promise.resolve(i.AuthenticationCode.USE_LOCAL_UKI)},t.askServerToSendToken=async function(e,t){const r=await e.authentication.askServerToSendToken({login:t});if(r!==s.SendTokenStatus.SUCCESS)throw c.default.log(`Server failed to send a token with status: ${s.SendTokenStatus[r]}`),new Error(i.AuthenticationCode[i.AuthenticationCode.SEND_TOKEN_FAILED])};t.generateUki=function(e){return`${e}-${(0,o.v4)()}`};const R=async(e,t)=>{const r=await(0,D.dashlaneAuthenticatorGetAuthTicket)(e,t);if(!1===r.success){const{error:{code:e,message:t}}=r;if(e===i.AuthenticationCode.BUSINESS_ERROR)throw new Error(t);throw new Error(i.AuthenticationCode[e])}return null==w||w(a.CancelDashlaneAuthenticatorRegistration.COMPLETED),r.authTicket};t.cancelRegistrationWithDashlaneAuthenticator=async function(){null==N||N(a.CancelDashlaneAuthenticatorRegistration.CANCELLED)},t.registerDeviceWithDashlaneAuthenticator=async function(e,t,r){const o=new Promise(((e,t)=>{w=e,N=t}));let n;try{n=(await Promise.all([R(e,r),o]))[0]}catch(e){if(e===a.CancelDashlaneAuthenticatorRegistration.CANCELLED)return i.AuthenticationCode.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED;throw e}finally{N=void 0,w=void 0}if(n){const o=await((e,t,r,o)=>{const n=o||f.device.getDefaultDeviceName(),i=e.getPlatformInfo(),s=e.getAccountInfo().login,c={deviceName:(0,C.secureDeviceName)(n),appVersion:i.appVersion,platform:i.platformName,osCountry:(0,b.makeSafeCountry)(e.getLocation().country||i.country),osLanguage:(0,b.makeSafeLanguage)(i.lang),temporary:t!==a.PersistData.PERSIST_DATA_YES};return(0,b.completeDeviceRegistrationWithAuthTicket)(e,{device:c,login:s,authTicket:r})})(e,t,n,r);(0,b.isApiError)(o)&&function(e){if(!(0,b.isApiErrorOfType)(b.BusinessError,e))throw new Error(`Failed to complete device registration (${e.code})`);const t=e.code;if(t===b.InvalidAuthTicket)throw new Error(i.AuthenticationCode[i.AuthenticationCode.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED]);(0,I.assertUnreachable)(t)}(o);const{deviceAccessKey:s,deviceSecretKey:c,settings:d,serverKey:l,deviceAnalyticsId:u,userAnalyticsId:p,publicUserId:S}=o,{login:g}=e.getAccountInfo();return e.dispatch((0,_.deviceRegistered)((0,_.makeDeviceRegistrationKeys)(s,c),t,g)),l&&e.dispatch((0,E.updateServerKey)(l)),e.dispatch((0,E.updateSettingsForMPValidation)(d)),u&&e.dispatch((0,E.updateDeviceAnalyticsId)(u)),p&&e.dispatch((0,E.updateUserAnalyticsId)(p)),S&&e.dispatch((0,E.updatePublicUserId)(S)),i.AuthenticationCode.ASK_MASTER_PASSWORD}throw new Error("Authentication Ticket is missing")};t.registerDevice=async function(e,t,r,o,s){const c=await(async(e,t)=>{const r=await(0,D.convertTokenToAuthTicket)(e,t);if(!1===r.success){const{error:{code:e,message:t}}=r;if(e===i.AuthenticationCode.BUSINESS_ERROR)throw new Error(t);throw new Error(i.AuthenticationCode[e])}return r.authTicket})(e,r),d=await((e,t,r,o,n)=>{const i=n||f.device.getDefaultDeviceName(),s=e.getPlatformInfo(),c=e.getAccountInfo().login,d={deviceName:(0,C.secureDeviceName)(i),appVersion:s.appVersion,platform:s.platformName,osCountry:(0,b.makeSafeCountry)(e.getLocation().country||s.country),osLanguage:(0,b.makeSafeLanguage)(s.lang),temporary:r!==a.PersistData.PERSIST_DATA_YES};switch(t.type){case"extraDeviceToken":return(0,b.completeExtraDeviceRegistrationWithToken)(e,{device:d,login:c,verification:{token:(0,P.extractExtraDeviceToken)(t)}});case"emailToken":case"otp":case"sso":return(0,b.completeDeviceRegistrationWithAuthTicket)(e,{device:d,login:c,authTicket:o});default:(0,I.assertUnreachable)(t)}})(e,r,t,c,o);if((0,b.isApiError)(d))return function(e,t){if(!(0,b.isApiErrorOfType)(b.BusinessError,e))throw new Error(`Failed to complete device registration (${e.code})`);const r=e.code;switch(r){case b.UserNotFound:throw new Error(i.AuthenticationCode[i.AuthenticationCode.INVALID_LOGIN]);case b.VerificationFailed:case b.InvalidAuthTicket:if("otp"===t.type)throw new Error(i.AuthenticationCode[i.AuthenticationCode.OTP_NOT_VALID]);throw new Error(i.AuthenticationCode[i.AuthenticationCode.TOKEN_NOT_VALID]);case b.VerificationMethodDisabled:throw new Error(i.AuthenticationCode[i.AuthenticationCode.REGISTER_DEVICE_FAILED]);default:(0,I.assertUnreachable)(r)}}(d,r);const{deviceAccessKey:p,deviceSecretKey:S,settings:g,serverKey:h,ssoServerKey:T,remoteKeys:O,deviceAnalyticsId:w,userAnalyticsId:N,publicUserId:R}=d;if(T){const{masterPasswordEncryptorService:t,remoteDataEncryptorService:r,ssoServiceProviderKey:o}=s;if(!O||(0,n.isEmpty)(O))throw new Error("registerDevice failed with error: ssoServerKey or remoteKeys is missing");const a=(0,m.base64ToBuffer)(T),i=O.filter((e=>"sso"===e.type))[0];try{const n=(0,m.base64ToBuffer)(o),s=(0,v.getEncryptionKeyBuffer)(n,a,{skipDerivation:!0}),c=(0,m.arrayBufferToText)(s),d="",l=(0,y.getNoDerivationCryptoConfig)();e.dispatch((0,E.updateMasterPassword)(c)),await t.setInstance({raw:c},d,l);const u=await t.getInstance().decrypt(i.key),p=(0,A.deflatedUtf8ToUtf16)(u,{skipUtf8Decoding:!0,skipInflate:!0});await r.setInstance({raw:p},d,l),e.dispatch((0,E.updateIsRemoteKeyActivated)(!0))}catch(e){throw new Error(`registerDevice failed deciphering remoteKey with error: ${e}`)}}const{login:L}=e.getAccountInfo();return e.dispatch((0,_.deviceRegistered)((0,_.makeDeviceRegistrationKeys)(p,S),t,L)),h&&e.dispatch((0,E.updateServerKey)(h)),e.dispatch((0,E.updateSettingsForMPValidation)(g)),"otp"===(null==r?void 0:r.type)&&((e,t)=>{t?e.dispatch((0,u.enableOtp)(l.OtpType.OTP_LOGIN)):e.dispatch((0,u.enableOtp)(l.OtpType.OTP_NEW_DEVICE))})(e,h),w&&e.dispatch((0,E.updateDeviceAnalyticsId)(w)),N&&e.dispatch((0,E.updateUserAnalyticsId)(N)),R&&e.dispatch((0,E.updatePublicUserId)(R)),i.AuthenticationCode.ASK_MASTER_PASSWORD},t.validateMasterPassword=async function(e,t){try{const r=e.getState(),o=(0,O.masterPasswordValidationDataSelector)(r),n=e=>{},[a]=await S.decrypt(t.getInstance(),n,null,new Map,[o]);return e.dispatch(await(0,g.applyTransaction)(a)),e.dispatch(d.registerLastSync(p.MIN_SYNC_TIMESTAMP)),i.AuthenticationCode.LOGGEDIN}catch(e){throw new Error(i.AuthenticationCode[i.AuthenticationCode.WRONG_PASSWORD])}};t.getUsersSSOInfo=e=>{if(!e)return{serviceProviderUrl:""};const t=(e=>{if(e.migration)switch(e.migration){case"mp_user_to_sso_member":return P.SSOMigrationType.MP_TO_SSO;case"sso_member_to_admin":case"sso_member_to_mp_user":return P.SSOMigrationType.SSO_TO_MP}})(e);return{serviceProviderUrl:e.serviceProviderUrl?e.serviceProviderUrl:"",...void 0!==t?{migration:t}:{}}}},32234:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendConfirmCreateAccountResult=t.sendEncryptSettingsResult=t.sendSyncBackupChanged=t.sendFeatures=t.openWebOnboardingTab=t.sendWebOnboardingModeUpdate=t.sendTeamAdminDataUpdate=t.sendAccountInfo=t.changeDeviceNameResult=t.deactivateDeviceResult=t.updatePaymentCardTokenResult=t.reportDataUpdate=t.getDataUpdates=t.sendLocationInfo=t.sendLocalAccounts=t.triggerSessionSyncStatus=t.triggerSessionOpened=t.triggerOpenSessionFailed=t.triggerServerSidePairingStatusChanged=t.triggerLoginStatusChanged=t.triggerOpenSessionExtraDeviceTokenRequired=t.triggerOpenSessionDashlaneAuthenticator=t.triggerOpenSessionTokenSent=t.triggerAskMasterPassword=t.triggerOpenSessionOTPForNewDeviceRequired=t.triggerOpenSessionOTPSent=t.AuthenticationCode=void 0;const o=r(28060),n=r(97211),a=r(91359),i=r(38029),s=r(81489),c=r(59125),d=r(15528),l=r(31891),u=r(99436),p=r(59409),S=r(73144),g=r(62550),m=r(22029),y=r(1064);Object.defineProperty(t,"AuthenticationCode",{enumerable:!0,get:function(){return y.AuthenticationCode}});const v=r(89337),A=r(13),E=r(83477),f=r(55677),h=r(8368);function _(e){l.default.log(`Session status updated for ${e.login}`);const t=(0,a.default)();t&&t.loginStatusChanged(e);const r=(0,i.default)();r&&r.loginStatusChanged(e);const o=(0,s.default)();o&&o.loginStatusChanged(e)}function T(e){if(i.default){const t=(0,i.default)();t&&t.serverSidePairingStatusChanged(e)}}function I(e){switch(e){case y.AuthenticationCode.INVALID_LOGIN:case y.AuthenticationCode.EMPTY_LOGIN:case y.AuthenticationCode.EMPTY_MASTER_PASSWORD:case y.AuthenticationCode.EMPTY_TOKEN:case y.AuthenticationCode.EMPTY_OTP:case y.AuthenticationCode.NETWORK_ERROR:case y.AuthenticationCode.USER_DOESNT_EXIST:case y.AuthenticationCode.OTP_NOT_VALID:case y.AuthenticationCode.TOKEN_NOT_VALID:case y.AuthenticationCode.TOKEN_TOO_MANY_ATTEMPTS:case y.AuthenticationCode.WRONG_PASSWORD:return d.ExceptionCriticality.WARNING;default:return d.ExceptionCriticality.ERROR}}function C(e){return Promise.resolve({localAccounts:e}).then((e=>{l.default.log("send localAccountsListUpdated to leeloo");const t=(0,a.default)();t&&t.localAccountsListUpdated(e);const r=(0,i.default)();r&&r.localAccountsListUpdated(e)}))}function P(e){const t=e.getPersonalData(),r=e.getSpaceData(),n=e.getSharingData(),a=e.getUserLogin(),i=(0,o.curry)(u.removeCredentialsWithQuarantinedSpaces)(r),s=(0,o.pipe)(i,u.fixCredentialsWithMissingTitles)(t.credentials),c=["changesToUpload","changeHistories"],d=(0,o.omit)(c,{...t,credentials:s}),l=(0,u.handleLimitedSharedCredentialsPassword)(s,n,a),S=(0,p.handleLimitedSharedNotes)(t.notes,n,a);return{personalDataToSend:d,obfuscatedPersonalDataToSend:(0,o.omit)(c,{...t,credentials:l,notes:S})}}function D(e){const t=e.getState(),r=e.getSpaceData(),{obfuscatedPersonalDataToSend:o,personalDataToSend:n}=P(e),c=(0,a.default)(),d=(0,i.default)(),l=(0,s.default)();if(c&&c.dataModelUpdated(o),d&&d.spaceDataUpdated(r),l&&l.dataModelUpdated(n),c){const e=(0,v.getIconsUrlsForCredentials)(o.credentials),r=(0,A.getFormattedDomainsFromUrls)(e),n=(0,A.decryptIconsDomains)((0,E.iconsSelector)(t),r),a={...o,credentials:(0,v.getCredentialsWithWebsiteIcon)(o.credentials,n,f.defaultIconTypes)};c.dataModelUpdated(a)}}function O(e){const t=(0,a.default)();t&&t.accountInfoChanged(e);const r=(0,i.default)();r&&r.accountInfoChanged(e);const o=(0,s.default)();o&&o.accountInfoChanged(e)}function b(e){const t=(0,a.default)();t&&t.webOnboardingModeUpdated(e);const r=(0,i.default)();r&&r.webOnboardingModeUpdated(e)}function w(e){const t=(0,a.default)();t&&t.accountFeaturesChanged(e);const r=(0,i.default)();r&&r.accountFeaturesChanged(e);const o=(0,s.default)();o&&o.accountFeaturesChanged(e)}t.triggerOpenSessionOTPSent=function(e){l.default.log("Ask for OTP");const t=(0,a.default)();t&&t.openSessionOTPSent(e);const r=(0,i.default)();r&&r.openSessionOTPSent(e)},t.triggerOpenSessionOTPForNewDeviceRequired=function(){const e=(0,a.default)();e&&e.openSessionOTPForNewDeviceRequired();const t=(0,i.default)();t&&t.openSessionOTPForNewDeviceRequired()},t.triggerAskMasterPassword=function(e){l.default.log("Ask for master password");const t=(0,a.default)();t&&t.openSessionAskMasterPassword({login:e});const r=(0,i.default)();r&&r.openSessionAskMasterPassword({login:e})},t.triggerOpenSessionTokenSent=function(e){l.default.log("Ask for new device e-mail token");const t=(0,a.default)();t&&t.openSessionTokenSent(e);const r=(0,i.default)();r&&r.openSessionTokenSent(e)},t.triggerOpenSessionDashlaneAuthenticator=function(){(0,l.logDebug)({message:"Ask for new device dashlane authenticator push notification"});const e=(0,a.default)();e&&e.openSessionDashlaneAuthenticator();const t=(0,i.default)();t&&t.openSessionDashlaneAuthenticator()},t.triggerOpenSessionExtraDeviceTokenRequired=function(){const e=(0,a.default)();e&&e.openSessionExtraDeviceTokenRequired();const t=(0,i.default)();t&&t.openSessionExtraDeviceTokenRequired()},t.triggerLoginStatusChanged=_,t.triggerServerSidePairingStatusChanged=T,t.triggerOpenSessionFailed=function(e){var t;l.default.log("Failed to open Session"),l.default.log(`error: ${e}`);let r=e&&e.message&&void 0!==y.AuthenticationCode[e.message]?y.AuthenticationCode[e.message]:y.AuthenticationCode.UNKNOWN_ERROR;r===y.AuthenticationCode.UNKNOWN_ERROR&&((0,S.isCarbonError)(e,g.HttpError,g.HttpErrorCode.NETWORK_ERROR)&&(r=y.AuthenticationCode.NETWORK_ERROR),(null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.includes("TOKEN_NOT_VALID"))&&(r=y.AuthenticationCode.TOKEN_NOT_VALID));const o=r===y.AuthenticationCode.UNKNOWN_ERROR?e&&e.message&&"string"==typeof e.message?e.message:"89645128":"",n=new Error(`[SessionCommunication] - triggerOpenSessionFailed: ${e}`);n.stack=e.stack,l.default.error(n),(0,c.sendExceptionLog)({error:n,code:I(r)});const s={errorCode:y.AuthenticationCode[r],additionalErrorInfo:o,displayErrorCode:!0},d=(0,a.default)();d&&d.openSessionFailed(s);const u=(0,i.default)();u&&u.openSessionFailed(s)},t.triggerSessionOpened=function(e,t,r,o){const a=void 0!==(0,h.ssoMigrationInfoSelector)(e.getState()).migration;if(_({loggedIn:!0,login:e.getAccountInfo().login,needsSSOMigration:a}),O(r),D(e),b(e.getLocalSettings().webOnboardingMode),(0,m.getLocalAccounts)(e,t.getLocalStorage()).then((e=>{C(e)})),function(e){const t=e.getPersonalFeatures();t.features&&w({lastUpdate:t.lastUpdateTimestamp,list:t.features})}(e),void 0!==o){T({serverSidePairingStatus:o?n.ServerSidePairingStatus.PAIRED:n.ServerSidePairingStatus.UNPAIRED})}},t.triggerSessionSyncStatus=function(e){const t=(0,a.default)();t&&t.sessionSyncStatus(e);const r=(0,i.default)();r&&r.sessionSyncStatus(e)},t.sendLocalAccounts=C,t.sendLocationInfo=function(e){const t=(0,i.default)();t&&t.currentLocationUpdated(e)},t.getDataUpdates=P,t.reportDataUpdate=D,t.updatePaymentCardTokenResult=function(e){const t=(0,i.default)();t&&t.updatePaymentCardTokenResult(e)},t.deactivateDeviceResult=function(e){const t=(0,a.default)();t&&t.deactivateDeviceResult(e);const r=(0,i.default)();r&&r.deactivateDeviceResult(e)},t.changeDeviceNameResult=function(e){const t=(0,a.default)();t&&t.changeDeviceNameResult(e);const r=(0,i.default)();r&&r.changeDeviceNameResult(e)},t.sendAccountInfo=O,t.sendTeamAdminDataUpdate=function(e){const t=(0,i.default)();t&&t.teamAdminDataUpdated(e)},t.sendWebOnboardingModeUpdate=b,t.openWebOnboardingTab=function(e){const t=(0,a.default)();t&&t.openWebOnboardingTab(e)},t.sendFeatures=w,t.sendSyncBackupChanged=function(e){const t=(0,i.default)();t&&t.syncBackupChanged(e)},t.sendEncryptSettingsResult=function(e){const t=(0,i.default)();t&&t.encryptSettingsResultUpdated(e)},t.sendConfirmCreateAccountResult=function(e){const t=(0,i.default)();t&&t.confirmCreateAccountResultUpdated(e)}},84146:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refeshAccountInfo=t.AutofillProtectionStatus=t.sendUsageLog=t.toggleDashlaneOnSite=t.toggleDashlaneOnPage=t.getOtpForCredential=t.askWebsiteInfo=t.saveGeneratedPassword=t.generatePassword=t.getPasswordGenerationSettings=t.generateAndSavePassword=t.resumeSession=t.sessionForceSync=t.broascastSyncBackupChanged=t.getAndTriggerRefreshAccountInfo=t.makeSessionController=void 0;const o=r(19935),n=r(23464),a=r(31891),i=r(32234),s=r(16075),c=r(77333),d=r(424),l=r(59125),u=r(73442),p=r(64159),S=r(12940),g=r(38029),m=r(41147),y=r(41569),v=r(62737),A=r(9496),E=r(10112),f=r(56431),h=r(10364),_=r(88478),T=r(8153),I=r(14122),C=r(49914),P=r(21337);t.makeSessionController=e=>({askWebsiteInfo:t=>F(e.storeService,t),toggleDashlaneOnPage:t=>G(e.storeService,t),toggleDashlaneOnSite:t=>K(e.storeService,t),cancelPremiumSubscription:()=>async function(e,t,r){if(!e.isAuthenticated())return{success:!1};try{return await t.getInstance().payment.cancelPremiumSubscription(),b(e,t,r).then(w).catch((e=>{})),{success:!0}}catch(e){const t=e.message,r=new Error(`[SessionController] - cancelPremiumSubscription: ${e}`);return a.default.log(r),l.sendExceptionLog({error:r}),{success:!1,reason:t}}}(e.storeService,e.sessionService,e.wsService),changeDeviceName:(t,r)=>function(e,t,r,o){if(e.isAuthenticated()){const e=(0,f.secureDeviceName)(o);return t.getInstance().device.changeDeviceName(r,e).catch((e=>{const t=new Error(`[SessionController] - changeDeviceName: ${e}`);a.default.log(t),l.sendExceptionLog({error:t})}))}return Promise.resolve(null)}(e.storeService,e.sessionService,t,r),closeSession:()=>{return t=e.sessionService,a.default.log("SessionController/closeSession called"),t.close();var t},deactivateDevice:t=>function(e,t,r){if(e.isAuthenticated())return t.getInstance().device.deactivateDevice(r).catch((e=>{const t=new Error(`[SessionController] - deactivateDevice: ${e}`);a.default.log(t),l.sendExceptionLog({error:t})}));return Promise.resolve(null)}(e.storeService,e.sessionService,t),generateAndSavePassword:t=>L(e.storeService,e.sessionService,t),generatePassword:t=>M(e.storeService,t),getAndTriggerRefreshAccountInfo:()=>O(e.storeService,e.sessionService,e.wsService),getPasswordGenerationSettings:()=>U(e.storeService),getCurrentUserInfo:()=>(0,P.getCurrentUserInfo)(e.storeService),getDevicesList:()=>function(e,t){if(e.isAuthenticated())return t.getInstance().device.fetchDevicesList().catch((e=>(a.default.log("Error while fetching Devices list",e),[])));return Promise.resolve([])}(e.storeService,e.sessionService),getInvoices:()=>function(e,t){if(e.isAuthenticated())return t.getInstance().payment.fetchInvoices().catch((e=>{const t=new Error(`[SessionController] - getInvoices: ${e}`);return a.default.log(t),l.sendExceptionLog({error:t}),null}));return Promise.resolve(null)}(e.storeService,e.sessionService),getLoginStatus:()=>function(e){const t=e.getState();return(0,h.loginStatusSelector)(t)}(e.storeService),getPersonalData:()=>e.storeService.getPersonalData(),getPersonalSettings:()=>{return t=e.storeService,Promise.resolve(t.getPersonalSettings());var t},getTemporaryToken:()=>function(e,t){if(e.hasSessionId())return t.getInstance().device.fetchTemporaryToken().catch((e=>(a.default.log("Error while fetching Temporary token",e),null)));return Promise.resolve(null)}(e.storeService,e.sessionService),getUki:()=>{return t=e.storeService,{uki:(0,_.ukiSelector)(t.getState())};var t},isSaveCredentialDisabled:t=>(0,v.isSaveCredentialDisabledOnDomain)(e.storeService,t),signalSaveCredentialDisabled:t=>(0,v.signalSaveCredentialDisabled)(e.storeService,e.sessionService,t),resumeSession:()=>R(e.storeService,e.storageService,e.sessionService,e.wsService),saveGeneratedPassword:(t,r)=>k(e.storeService,e.sessionService,t,r),sendCredentialLoginUrl:(t,r)=>function(e,t,r){if(!e.isAuthenticated())return;const o=(0,m.findDataModelObject)(t,e.getPersonalData().credentials);o&&(0,g.default)().credentialLoginUrlRetrieved({requestId:r,credentialId:t,url:(0,y.getGoToUrlForCredential)(o)})}(e.storeService,t,r),sessionForceSync:()=>N(e.sessionService),updateCardToken:(t,r)=>async function(e,t,r,o,n){try{if(!e.isAuthenticated())return;const{payment:a}=t.getInstance(),s=await a.updatePaymentCard(o,n);i.updatePaymentCardTokenResult(s),b(e,t,r).then(w).catch((e=>{}))}catch(e){const t=e.message,r=new Error(`[SessionController] - updateCardToken: ${e}`);a.default.log(r),l.sendExceptionLog({error:r}),i.updatePaymentCardTokenResult({success:!1,reason:t})}}(e.storeService,e.sessionService,e.wsService,t,r),getOtpForCredential:t=>B(e.storeService,t),validateMasterPassword:t=>(0,C.validateMasterPassword)(e.storeService,e.masterPasswordEncryptorService,t)});const D={backupSyncOn:!1,devicesCount:0,premiumStatus:{statusCode:null},contactInfo:{},subscriptionCode:null};async function O(e,t,r){if(!e.isAuthenticated())return e.dispatch((0,d.saveAccountContactInfo)(D.contactInfo)),D;try{const o=await b(e,t,r);return e.dispatch((0,d.saveAccountContactInfo)(o.contactInfo)),w(o),o}catch(t){a.default.error("Error during getRefreshedAccountInfo",t);const r=(0,T.premiumStatusSelector)(e.getState()),o=r?{premiumStatus:r}:{};return{...D,...o}}}async function b(e,t,r){const{device:o,user:n}=t.getInstance(),i=(0,S.refreshPremiumStatus)(e,r,e.getUserLogin(),(0,_.ukiSelector)(e.getState())).then((()=>e.getLocalSettings().premiumStatus)),c=o.fetchDevicesList().then((e=>e.length)).catch((e=>1)),d=n.fetchContactInfo(),u=n.fetchSubscriptionCode();try{await n.fetchAccountInfo()}catch(e){(0,a.logError)(e),l.sendExceptionLog({error:e})}const[p,g,m,y]=await Promise.all([i,c,d,u]);if(!p)throw new Error("premium info should exist");const v=e.getState(),A=e.getPersonalSettings(),E=(0,I.featuresSelector)(v);return{premiumStatus:p,devicesCount:g,contactInfo:m,subscriptionCode:y,backupSyncOn:(0,s.isBackupSyncOn)(A,E)}}function w(e){i.sendAccountInfo(e)}async function N(e){await e.getInstance().user.attemptSync(o.Trigger.Manual)}function R(e,t,r,o){return(0,E.triggerABTestingChanged)(e.getABTesting()),i.sendLocationInfo(e.getPlatform().location),e.isAuthenticated()?O(e,r,o).then((r=>(i.triggerSessionOpened(e,t,r),!0))):Promise.resolve(null)}function L(e,t,r){return p.generateAndSavePassword(e,t,r)}function U(e){return p.getDefaultPasswordGenerationSettings(e.getPersonalSettings())}function M(e,t){return p.generatePassword(e.getPersonalSettings(),t)}function k(e,t,r,o){return p.saveGeneratedPassword(e,t,r,o)}function F(e,t){return(0,s.getWebsiteInfo)(e,t)}function B(e,t){const r=(0,m.findDataModelObject)(t,e.getPersonalData().credentials);return(null==r?void 0:r.OtpSecret)?(0,A.generateOtpFromSecret)(r.OtpSecret):""}function G(e,t){e.dispatch((0,c.toogleDashlaneOnPage)(t))}function K(e,t){e.dispatch((0,c.toogleDashlaneOnSite)(t))}t.getAndTriggerRefreshAccountInfo=O,t.broascastSyncBackupChanged=function(e){const t=e.getState(),r=e.getPersonalSettings(),o=(0,I.featuresSelector)(t),n=(0,s.isBackupSyncOn)(r,o);i.sendSyncBackupChanged(n)},t.sessionForceSync=N,t.resumeSession=R,t.generateAndSavePassword=L,t.getPasswordGenerationSettings=U,t.generatePassword=M,t.saveGeneratedPassword=k,t.askWebsiteInfo=F,t.getOtpForCredential=B,t.toggleDashlaneOnPage=G,t.toggleDashlaneOnSite=K,t.sendUsageLog=function(e,t){return(0,u.sendUsageLog)(e,t)},t.AutofillProtectionStatus=(0,n.Enum)("UNPROTECTED","LOCKED","UNLOCKED"),t.refeshAccountInfo=function(e,t,r){b(e,t,r).then(w).catch((e=>{}))}},16165:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFreshSpaceData=t.updateCurrentSpaceWith=t.updateSpaceData=t.refreshSpaceData=void 0;const o=r(36588),n=r(32234);function a(e,t){const r={spaces:t};e.dispatch((0,o.spaceDataUpdated)(r)),(0,n.reportDataUpdate)(e)}function i(e){const t=(e||[]).map((e=>({teamId:e.teamId,details:e})));return Promise.resolve(t)}t.refreshSpaceData=function(e,t){return i(t).then((t=>(a(e,t),t)))},t.updateSpaceData=a,t.updateCurrentSpaceWith=function(e,t){const r=e.getSpaceData().spaces.map((e=>"accepted"===e.details.status?t(e):e));a(e,r)},t.getFreshSpaceData=i},89284:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconsCacheLoaded=t.iconsRefreshed=t.iconsUpdated=t.ICONS_CACHE_LOADED=t.ICONS_REFRESHED=t.ICONS_UPDATED=void 0,t.ICONS_UPDATED="ICONS_UPDATED",t.ICONS_REFRESHED="ICONS_REFRESHED",t.ICONS_CACHE_LOADED="ICONS_CACHE_LOADED";t.iconsUpdated=e=>({type:t.ICONS_UPDATED,data:e});t.iconsRefreshed=e=>({type:t.ICONS_REFRESHED,data:e});t.IconsCacheLoaded=e=>({type:t.ICONS_CACHE_LOADED,data:e})},33135:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.iconsFromStorage=t.iconsToStorage=void 0;t.iconsToStorage=e=>({...e,domains:Array.from(e.domains.entries())});t.iconsFromStorage=e=>({...e,domains:new Map(e.domains)})},43455:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyIconByDomains=void 0;const o=r(89284),n=r(36109),a=r(87459);function i(){return{domains:new Map,lastUpdateTimeSeconds:0}}t.default=(e=i(),t)=>{switch(t.type){case o.ICONS_UPDATED:return{...e,domains:s(e,t.data)};case o.ICONS_REFRESHED:return{...e,domains:s(e,t.data),lastUpdateTimeSeconds:(0,n.getUnixTimestamp)()};case o.ICONS_CACHE_LOADED:return t.data;default:return e}},t.getEmptyIconByDomains=i;const s=(e,t)=>t.reduce(((e,t)=>{const{domain:r,...o}=t;if(!r)return e;const n=(0,a.computeHashMD5)(r);return e.get(n)||e.set(n,o),e}),new Map(e.domains))},54580:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sentUsageLog=t.loadedStoredUserABTests=t.refreshedUserABTests=t.SENT_AB_TEST_USAGE_LOG=t.STORED_USER_AB_TEST_LOADED=t.USER_AB_TESTS_UPDATED=void 0,t.USER_AB_TESTS_UPDATED="USER_AB_TEST_UPDATED",t.STORED_USER_AB_TEST_LOADED="STORED_USER_AB_TEST_LOADED",t.SENT_AB_TEST_USAGE_LOG="SENT_AB_TEST_USAGE_LOG";t.refreshedUserABTests=e=>({type:t.USER_AB_TESTS_UPDATED,lastUpdateTimestamp:Date.now(),tests:e});t.loadedStoredUserABTests=e=>({type:t.STORED_USER_AB_TEST_LOADED,userABTests:e});t.sentUsageLog=e=>({type:t.SENT_AB_TEST_USAGE_LOG,testName:e,lastUpdateTimestamp:Date.now()})},26065:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyTests=void 0;const o=r(54580);function n(){return{lastUpdateTimestamp:null,tests:{}}}t.getEmptyTests=n,t.default=(e={lastUpdateTimestamp:null,tests:{}},t)=>{switch(t.type){case o.USER_AB_TESTS_UPDATED:return{...e,tests:t.tests,lastUpdateTimestamp:t.lastUpdateTimestamp};case o.STORED_USER_AB_TEST_LOADED:return{...e,...t.userABTests};case o.SENT_AB_TEST_USAGE_LOG:return{...e,tests:{...e.tests,[t.testName]:{...e.tests[t.testName],usageLogHasBeenSent:!0}},lastUpdateTimestamp:t.lastUpdateTimestamp};default:return e}}},14384:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userABTestVariantSelector=t.userABTestSelector=t.userABTestsSelector=void 0;t.userABTestsSelector=e=>e.userSession.abTests;t.userABTestSelector=(e,r)=>(0,t.userABTestsSelector)(e).tests[r];t.userABTestVariantSelector=(e,r)=>{const o=(0,t.userABTestSelector)(e,r);return o?o.variant:void 0}},424:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.saveAccountContactInfo=t.SAVE_ACCOUNT_CONTACT_INFO=void 0,t.SAVE_ACCOUNT_CONTACT_INFO="SAVE_ACCOUNT_CONTACT_INFO";t.saveAccountContactInfo=e=>({type:t.SAVE_ACCOUNT_CONTACT_INFO,accountContactInfo:e})},13173:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(424);t.default=(e={},t)=>t.type===o.SAVE_ACCOUNT_CONTACT_INFO?{...e,...t.accountContactInfo}:e},64465:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountCreationStarted=t.saveAccountKeys=t.saveAccountSettings=t.ACCOUNT_CREATION_STARTED=t.SAVE_ACCOUNT_KEYS=t.SAVE_ACCOUNT_SETTINGS=void 0,t.SAVE_ACCOUNT_SETTINGS="SAVE_ACCOUNT_SETTINGS",t.SAVE_ACCOUNT_KEYS="SAVE_ACCOUNT_KEYS",t.ACCOUNT_CREATION_STARTED="ACCOUNT_CREATION_STARTED",t.saveAccountSettings=function(e){return{type:t.SAVE_ACCOUNT_SETTINGS,settings:e}},t.saveAccountKeys=function(e){return{type:t.SAVE_ACCOUNT_KEYS,accountKey:e}},t.accountCreationStarted=function(e){return{type:t.ACCOUNT_CREATION_STARTED,isSSO:e.isSSO}}},44320:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyAccountCreation=void 0;const o=r(64465),n=r(16075);function a(){return{settings:{personalSettings:(0,n.getEmptyPersonalSettings)(),promise:null},accountKey:{promise:null},isSSO:!1}}t.default=(e=a(),t)=>{switch(t.type){case o.SAVE_ACCOUNT_SETTINGS:return{...e,settings:{...t.settings,personalSettings:(0,n.getUpdatedPersonalSettings)(e.settings.personalSettings,t.settings.personalSettings)}};case o.SAVE_ACCOUNT_KEYS:return{...e,accountKey:t.accountKey};case o.ACCOUNT_CREATION_STARTED:return{...a(),isSSO:t.isSSO};default:return e}},t.getEmptyAccountCreation=a},99819:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSSOAccountCreationSelector=void 0;t.isSSOAccountCreationSelector=e=>e.userSession.accountCreation.isSSO},53667:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setPasswordLeaked=t.saveSubscriptionCode=t.localDataLoaded=t.userAuthenticationFailed=t.confirmUserAuthentication=t.enableOtp=t.USER_AUTHENTICATION_FAILED=t.SET_PASSWORD_LEAKED=t.SAVE_SUBSCRIPTION_CODE=t.LOCAL_DATA_LOADED=t.CONFIRM_USER_AUTHENTICATION=t.ENABLE_OTP=void 0;const o=r(1064);t.ENABLE_OTP="ENABLE_OTP",t.CONFIRM_USER_AUTHENTICATION="CONFIRM_USER_AUTHENTICATION",t.LOCAL_DATA_LOADED="LOCAL_DATA_LOADED",t.SAVE_SUBSCRIPTION_CODE="SAVE_SUBSCRIPTION_CODE",t.SET_PASSWORD_LEAKED="SET_PASSWORD_LEAKED",t.USER_AUTHENTICATION_FAILED="USER_AUTHENTICATION_FAILED";t.enableOtp=e=>({type:t.ENABLE_OTP,otpType:e});t.confirmUserAuthentication=()=>({type:t.CONFIRM_USER_AUTHENTICATION,sessionStartTime:Date.now()});t.userAuthenticationFailed=()=>({type:t.USER_AUTHENTICATION_FAILED});t.localDataLoaded=()=>({type:t.LOCAL_DATA_LOADED,persistData:o.PersistData.PERSIST_DATA_YES});t.saveSubscriptionCode=e=>({type:t.SAVE_SUBSCRIPTION_CODE,code:e});t.setPasswordLeaked=e=>({type:t.SET_PASSWORD_LEAKED,isPasswordLeaked:e})},59944:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyAccount=t.OtpType=void 0;const o=r(1005),n=r(44521),a=r(53667);var i;function s(){return{login:null,isAuthenticated:!1,sessionStartTime:null,persistData:null,otpType:i.NO_OTP,subscriptionCode:null,isPasswordLeaked:!1}}!function(e){e[e.NO_OTP=0]="NO_OTP",e[e.OTP_NEW_DEVICE=1]="OTP_NEW_DEVICE",e[e.OTP_LOGIN=2]="OTP_LOGIN"}(i=t.OtpType||(t.OtpType={})),t.getEmptyAccount=s,t.default=(e=s(),t)=>{switch(t.type){case o.OPEN_SESSION:return{...e,login:t.login};case n.DEVICE_REGISTERED:case a.LOCAL_DATA_LOADED:return{...e,persistData:t.persistData};case a.CONFIRM_USER_AUTHENTICATION:return{...e,isAuthenticated:!0,sessionStartTime:t.sessionStartTime};case a.USER_AUTHENTICATION_FAILED:return{...e,isAuthenticated:!1,sessionStartTime:null};case a.ENABLE_OTP:return{...e,otpType:t.otpType};case a.SAVE_SUBSCRIPTION_CODE:return{...e,subscriptionCode:t.code};case a.SET_PASSWORD_LEAKED:return{...e,isPasswordLeaked:t.isPasswordLeaked};default:return e}}},1005:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyTransaction=t.premiumStatusUpdated=t.localSettingsUpdated=t.closeSession=t.openSession=t.saveGeneratedPassword=t.savePersonalDataItems=t.savePersonalDataItem=t.SAVE_PERSONAL_ITEMS=t.SAVE_PERSONAL_ITEM=t.SAVE_GENERATED_PASSWORD=t.PREMIUM_STATUS_UPDATED=t.LOCAL_SETTINGS_UPDATED=t.EDIT_PERSONAL_SETTINGS_FROM_TRANSACTION=t.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION=t.ADD_PERSONAL_ITEM_FROM_TRANSACTION=t.CLOSE_SESSION=t.OPEN_SESSION=void 0;const o=r(9473);t.OPEN_SESSION="OPEN_SESSION",t.CLOSE_SESSION="CLOSE_SESSION",t.ADD_PERSONAL_ITEM_FROM_TRANSACTION="ADD_PERSONAL_ITEM_FROM_TRANSACTION",t.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION="REMOVE_PERSONAL_ITEM_FROM_TRANSACTION",t.EDIT_PERSONAL_SETTINGS_FROM_TRANSACTION="EDIT_PERSONAL_SETTINGS_FROM_TRANSACTION",t.LOCAL_SETTINGS_UPDATED="LOAD_STORED_LOCAL_SETTINGS",t.PREMIUM_STATUS_UPDATED="PREMIUM_STATUS_UPDATED",t.SAVE_GENERATED_PASSWORD="SAVE_GENERATED_PASSWORD",t.SAVE_PERSONAL_ITEM="SAVE_PERSONAL_ITEM",t.SAVE_PERSONAL_ITEMS="SAVE_PERSONAL_ITEMS",t.savePersonalDataItem=function(e,r,n){return{type:t.SAVE_PERSONAL_ITEM,dataType:o.default[r],dataModelObject:e,changeHistory:n}},t.savePersonalDataItems=function(e,r,n){return{type:t.SAVE_PERSONAL_ITEMS,dataType:o.default[r],dataModelObjects:e,changeHistory:n}},t.saveGeneratedPassword=function(e){return{type:t.SAVE_GENERATED_PASSWORD,generatedPassword:e}};t.openSession=e=>({type:t.OPEN_SESSION,login:e});t.closeSession=()=>({type:t.CLOSE_SESSION});t.localSettingsUpdated=e=>({type:t.LOCAL_SETTINGS_UPDATED,data:Object.assign({},e)});t.premiumStatusUpdated=e=>({type:t.PREMIUM_STATUS_UPDATED,premiumStatus:e});t.applyTransaction=async e=>{let r;return r="SETTINGS"===e.type?t.EDIT_PERSONAL_SETTINGS_FROM_TRANSACTION:"BACKUP_REMOVE"===e.action?t.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION:t.ADD_PERSONAL_ITEM_FROM_TRANSACTION,"BACKUP_EDIT"===e.action&&e.content&&(e.content.LastBackupTime=Math.floor(e.backupDate/1e3)),{type:r,itemId:e.identifier,content:e.content}}},68079:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetAuthTicketInfo=t.updateAuthTicketInfo=void 0;const o=r(68005);t.updateAuthTicketInfo=e=>({type:o.ADD_AUTH_TICKET_DATA,data:e});t.resetAuthTicketInfo=()=>({type:o.RESET_AUTH_TICKET_DATA})},50930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyAuthTicketInfo=void 0;const o=r(68005);t.getEmptyAuthTicketInfo=()=>({login:null,date:0,authTicket:null}),t.default=(e=(0,t.getEmptyAuthTicketInfo)(),r)=>{switch(r.type){case o.ADD_AUTH_TICKET_DATA:return{...e,...r.data};case o.RESET_AUTH_TICKET_DATA:return{...e,...(0,t.getEmptyAuthTicketInfo)()};default:return e}}},68005:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RESET_AUTH_TICKET_DATA=t.ADD_AUTH_TICKET_DATA=void 0,t.ADD_AUTH_TICKET_DATA="ADD_AUTH_TICKET_DATA",t.RESET_AUTH_TICKET_DATA="RESET_AUTH_TICKET_DATA"},11502:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addNewAutofillCorrection=t.loadedUserAutofillCorrections=t.ADD_NEW_USER_AUTOFILL_CORRECTION=t.LOADED_USER_AUTOFILL_CORRECTIONS=void 0,t.LOADED_USER_AUTOFILL_CORRECTIONS="LOADED_USER_AUTOFILL_CORRECTIONS",t.ADD_NEW_USER_AUTOFILL_CORRECTION="ADD_NEW_USER_AUTOFILL_CORRECTION";t.loadedUserAutofillCorrections=e=>({type:t.LOADED_USER_AUTOFILL_CORRECTIONS,data:e});t.addNewAutofillCorrection=e=>({type:t.ADD_NEW_USER_AUTOFILL_CORRECTION,data:e})},5464:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyUserAutofillCorrections=void 0;const o=r(11502);function n(){return{userAutofillCorrections:[],maverickRules:[]}}t.default=(e={userAutofillCorrections:[],maverickRules:[]},t)=>{switch(t.type){case o.LOADED_USER_AUTOFILL_CORRECTIONS:case o.ADD_NEW_USER_AUTOFILL_CORRECTION:return{maverickRules:t.data.maverickRules,userAutofillCorrections:t.data.userAutofillCorrections};default:return e}},t.getEmptyUserAutofillCorrections=n},69035:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertMaverickToUserAutofillCorrection=t.getLegacyUserAutofillCorrectionRules=t.ARE_USER_DEFINED_RULES_MIGRATED=t.MAVERICK_USER_DEFINED_RULES_STORAGE_KEY=t.AUTOFILL_ENGINE_USER_AUTOFILL_CORRECTIONS_STORAGE_KEY=void 0;const o=r(35017),n=r(73773),a=r(7605),i=r(31891);t.AUTOFILL_ENGINE_USER_AUTOFILL_CORRECTIONS_STORAGE_KEY="autofillEngine.userAutofillCorrections",t.MAVERICK_USER_DEFINED_RULES_STORAGE_KEY="maverick.userDefinedRules",t.ARE_USER_DEFINED_RULES_MIGRATED="autofillEngine.areUserDefinedRulesMigrated";t.getLegacyUserAutofillCorrectionRules=async e=>{const r=(0,a.getWindowLocalStorage)();if(!r){const t=e.getLocalStorage();return{userAutofillCorrections:await d(t),maverickRules:[]}}if(r.getItem(t.ARE_USER_DEFINED_RULES_MIGRATED)){const t=e.getLocalStorage();return{userAutofillCorrections:await d(t),maverickRules:s(r)}}const o=s(r);return{userAutofillCorrections:o.map(t.convertMaverickToUserAutofillCorrection),maverickRules:o}};t.convertMaverickToUserAutofillCorrection=e=>({fieldIdentifier:e.hashId,id:e.ruleId,domain:e.domain,correctedDataSource:o.AutofillEngineSignificationToDataSource[e.newSignification]});const s=e=>{const r=e.getItem(t.MAVERICK_USER_DEFINED_RULES_STORAGE_KEY);return r?c(r):[]},c=e=>{try{let t=JSON.parse(e);return"string"==typeof t&&(t=JSON.parse(t)),(0,n.isArrayOfLegacyMaverickUserDefinedRules)(t)?t:[]}catch(e){return(0,i.logError)({message:"could not parse the LegacyMaverickUserDefinedRule"}),[]}},d=async e=>{const r=await e.readItem(t.AUTOFILL_ENGINE_USER_AUTOFILL_CORRECTIONS_STORAGE_KEY);return(0,n.isArrayOfUserAutofillCorrections)(r)?r:[]}},78:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.changeMPDone=t.changeMPStart=t.SET_CHANGE_MP_DONE=t.SET_CHANGE_MP_START=void 0,t.SET_CHANGE_MP_START="SET_CHANGE_MP_START",t.SET_CHANGE_MP_DONE="SET_CHANGE_MP_DONE";t.changeMPStart=()=>({type:t.SET_CHANGE_MP_START});t.changeMPDone=()=>({type:t.SET_CHANGE_MP_DONE})},23471:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyChangeMPData=void 0;const o=r(78);function n(){return{changeMPinProgress:!1}}t.getEmptyChangeMPData=n,t.default=(e={changeMPinProgress:!1},t)=>{switch(t.type){case o.SET_CHANGE_MP_START:return{...e,changeMPinProgress:!0};case o.SET_CHANGE_MP_DONE:return{...e,changeMPinProgress:!1};default:return e}}},75910:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPUpdatedAction=t.CREDENTIAL_OTP_UPDATED=void 0,t.CREDENTIAL_OTP_UPDATED="CREDENTIAL_OTP_UPDATED";t.credentialOTPUpdatedAction=(e,r)=>({type:t.CREDENTIAL_OTP_UPDATED,credentialId:e,otp:r})},92909:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPUpdatedAction=t.credentialOTPs=void 0;var o=r(61286);Object.defineProperty(t,"credentialOTPs",{enumerable:!0,get:function(){return o.credentialOTPs}});var n=r(75910);Object.defineProperty(t,"credentialOTPUpdatedAction",{enumerable:!0,get:function(){return n.credentialOTPUpdatedAction}})},61286:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPs=void 0,t.credentialOTPs=function(e={},t){return"CREDENTIAL_OTP_UPDATED"===t.type?{...e,[t.credentialId]:t.otp}:e}},82526:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.darkWebOnboardingStateUpdated=t.dataLeaksEmailStatusListUpdated=t.ONBOARDING_STATE_UPDATED=t.DATA_LEAKS_BREACHES_UPDATED=t.DATA_LEAKS_EMAIL_STATUS_UPDATED=void 0,t.DATA_LEAKS_EMAIL_STATUS_UPDATED="DATA_LEAKS_EMAIL_STATUS_UPDATED",t.DATA_LEAKS_BREACHES_UPDATED="DATA_LEAKS_BREACHES_UPDATED",t.ONBOARDING_STATE_UPDATED="ONBOARDING_STATE_UPDATED";t.dataLeaksEmailStatusListUpdated=e=>({type:t.DATA_LEAKS_EMAIL_STATUS_UPDATED,emailList:e});t.darkWebOnboardingStateUpdated=e=>({type:t.ONBOARDING_STATE_UPDATED,onboardingState:e})},38071:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyDarkWebState=void 0;const o=r(82526),n=r(92847);function a(){return{emails:[],onboardingState:n.DarkWebOnboardingState.UNKNOWN}}t.getEmptyDarkWebState=a,t.default=(e=a(),t)=>{switch(t.type){case o.DATA_LEAKS_EMAIL_STATUS_UPDATED:return{...e,emails:t.emailList};case o.ONBOARDING_STATE_UPDATED:return{...e,onboardingState:t.onboardingState};default:return e}}},50412:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.teamDirectorySyncNotInProgress=t.teamDirectorySyncInProgress=t.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS=t.TEAM_DIRECTORY_SYNC_IN_PROGRESS=void 0,t.TEAM_DIRECTORY_SYNC_IN_PROGRESS="TEAM_DIRECTORY_SYNC_IN_PROGRESS",t.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS="TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS";t.teamDirectorySyncInProgress=e=>({type:t.TEAM_DIRECTORY_SYNC_IN_PROGRESS,teamId:e});t.teamDirectorySyncNotInProgress=e=>({type:t.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS,teamId:e})},5804:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isTeamDirectorySyncInProgress=t.getEmptyState=void 0;const o=r(50412);function n(){return{syncsInProgress:{}}}t.getEmptyState=n,t.isTeamDirectorySyncInProgress=function(e,t){return e.syncsInProgress[t]},t.default=(e={syncsInProgress:{}},t)=>{switch(t.type){case o.TEAM_DIRECTORY_SYNC_IN_PROGRESS:const{teamId:r}=t;return{...e,syncsInProgress:{...e.syncsInProgress,[r]:!0}};case o.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS:const{teamId:n}=t;return{...e,syncsInProgress:{...e.syncsInProgress,[n]:!1}};default:return e}}},92533:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refreshedFeatures=t.loadedStoredFeatures=t.LOADED_STORED_FEATURES=t.FEATURES_UPDATED=void 0,t.FEATURES_UPDATED="FEATURES_UPDATED",t.LOADED_STORED_FEATURES="STORED_FEATURES_LOADED";t.loadedStoredFeatures=e=>({type:t.LOADED_STORED_FEATURES,data:e});t.refreshedFeatures=e=>({type:t.FEATURES_UPDATED,lastUpdateTimestamp:Date.now(),features:e})},84636:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyFeatures=void 0;const o=r(92533);function n(){return{lastUpdateTimestamp:0,features:{}}}t.default=(e={lastUpdateTimestamp:0,features:{}},t)=>{switch(t.type){case o.FEATURES_UPDATED:return Object.assign({},e,{lastUpdateTimestamp:t.lastUpdateTimestamp,features:t.features});case o.LOADED_STORED_FEATURES:return Object.assign({},e,t.data);default:return e}},t.getEmptyFeatures=n},17086:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.deleteFileMetaAction=t.updateFileContentAction=t.updateFileMetaAction=t.FileActionsType=void 0,function(e){e.UpdateFileMeta="UPDATE_FILE_META",e.UpdateFileContent="UPDATE_FILE_CONTENT",e.DeleteFileMeta="DELETE_FILE_META"}(r=t.FileActionsType||(t.FileActionsType={}));t.updateFileMetaAction=e=>({type:r.UpdateFileMeta,filesMeta:e});t.updateFileContentAction=e=>({type:r.UpdateFileContent,filesContent:e});t.deleteFileMetaAction=e=>({type:r.DeleteFileMeta,fileNames:e})},67244:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.remoteFileReducer=void 0;const o=r(17086);function n(e,t){const r=Object.assign(e,{});for(const e of t)e in r&&delete r[e];return r}t.remoteFileReducer=(e={fileMetaData:{},fileContentState:{}},t)=>{switch(null==t?void 0:t.type){case o.FileActionsType.UpdateFileMeta:return((e,t)=>({...e,fileMetaData:{...e.fileMetaData,...t.filesMeta}}))(e,t);case o.FileActionsType.UpdateFileContent:return((e,t)=>({...e,fileContentState:{...e.fileContentState,...t.filesContent}}))(e,t);case o.FileActionsType.DeleteFileMeta:return((e,t)=>({...e,fileMetaData:n(e.fileMetaData,t.fileNames)}))(e,t)}return e}},60601:(e,t)=>{function r(e){return"boolean"==typeof e?e:"string"==typeof e?"true"===e.toLowerCase()||"yes"===e.toLowerCase():Boolean(e)}function o(e,t){return"boolean"===t?e?"true":"false":"yes-no"===t?e?"YES":"NO":null}function n(e){return"object"==typeof e?e:JSON.parse(e)}function a(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.fixProperties=t.fixPropertiesTypes=t.ObjectToJson=t.jsonToObject=t.booleanToString=t.stringToBoolean=void 0,t.stringToBoolean=r,t.booleanToString=o,t.jsonToObject=n,t.ObjectToJson=a,t.fixPropertiesTypes=function(e,t,o,a,i){const s={};return e.filter((e=>!!i[e])).forEach((e=>{s[e]=r(i[e])})),t.filter((e=>!!i[e])).forEach((e=>{s[e]=Number(i[e])})),o.filter((e=>!!i[e])).forEach((e=>{s[e]=n(i[e])})),a.filter((e=>i.hasOwnProperty(e))).forEach((e=>{const t=i[e];s[e]=null===t?"":String(t)})),Object.assign({},i,s)},t.fixProperties={fromStore:function(e,t,r,n){const i={};return Object.keys(e).filter((e=>!!n[e])).forEach((t=>{i[t]=o(n[t],e[t])})),Object.keys(t).filter((e=>!!n[e])).forEach((e=>{i[e]=n[e]&&n[e].toString()})),Object.keys(r).filter((e=>!!n[e])).forEach((e=>{i[e]=a(n[e])})),Object.assign({},n,i)},fromTransaction:function(e,t,o,a){const i={};return Object.keys(e).filter((e=>!!a[e])).forEach((e=>{i[e]=r(a[e])})),Object.keys(t).filter((e=>!!a[e])).forEach((e=>{i[e]=Number(a[e])})),Object.keys(o).filter((e=>!!a[e])).forEach((e=>{i[e]=n(a[e])})),Object.assign({},a,i)}}},1619:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.healthStateUpdated=t.breachedPasswordsUpdated=void 0;const o=r(60010);t.breachedPasswordsUpdated=e=>({type:o.BREACHED_PASSWORD_UPDATED,breachedPasswords:e});t.healthStateUpdated=e=>({type:o.HEALTH_STATE_UPDATED,healthState:e})},23452:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.healthFromStorage=t.healthToStorage=void 0;t.healthToStorage=e=>({...e,similarPasswords:Object.keys(e.similarPasswords||[]).reduce(((t,r)=>e.similarPasswords[r]?{...t,[r]:Array.from(e.similarPasswords[r])}:t),{})});t.healthFromStorage=e=>({...e,similarPasswords:Object.keys(e.similarPasswords||[]).reduce(((t,r)=>({...t,[r]:new Set(e.similarPasswords[r])})),{})})},35528:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyHealthState=void 0;const o=r(60010);function n(){return{breachedPasswords:{},credentialsHealth:{},similarPasswords:{}}}t.default=(e={breachedPasswords:{},credentialsHealth:{},similarPasswords:{}},t)=>{switch(t.type){case o.BREACHED_PASSWORD_UPDATED:return{...e,breachedPasswords:t.breachedPasswords};case o.HEALTH_STATE_UPDATED:return{...e,...t.healthState};default:return e}},t.getEmptyHealthState=n},60010:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HEALTH_STATE_UPDATED=t.BREACHED_PASSWORD_UPDATED=void 0,t.BREACHED_PASSWORD_UPDATED="BREACHED_PASSWORD_UPDATED",t.HEALTH_STATE_UPDATED="HEALTH_STATE_UPDATED"},10701:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userSessionReducer=void 0;var o=r(46261);Object.defineProperty(t,"userSessionReducer",{enumerable:!0,get:function(){return o.userSessionReducer}})},65175:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.killswitchStateUpdated=void 0;const o=r(56366);t.killswitchStateUpdated=e=>({type:o.KILLSWITCH_STATE_UPDATED,killswitchState:e})},9084:(e,t)=>{function r(){return{}}Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyKillswitchState=void 0,t.default=(e={},t)=>({...e,...t.killswitchState}),t.getEmptyKillswitchState=r},56366:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KILLSWITCH_STATE_UPDATED=void 0,t.KILLSWITCH_STATE_UPDATED="KILLSWITCH_STATE_UPDATED"},6261:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialSearchOrderUpdated=t.premiumChurningDismissDateUpdated=t.migrationOnboardingUpdated=t.webOnboardingModeUpdated=t.webOnboardingModeReset=t.localSettingsPremiumStatusUpdated=t.registerDeviceName=t.registerLastSync=t.loadStoredLocalSettings=t.CREDENTIAL_SEARCH_ORDER_UPDATED=t.PREMIUM_CHURNING_DISMISS_DATE_UPDATED=t.MIGRATION_ONBOARDING_UPDATED=t.WEB_ONBOARDING_MODE_RESET=t.WEB_ONBOARDING_MODE_UPDATED=t.PREMIUM_STATUS_UPDATED=t.REGISTER_DEVICE_NAME=t.REGISTER_LAST_SYNC=t.LOAD_STORED_LOCAL_SETTINGS=void 0,t.LOAD_STORED_LOCAL_SETTINGS="LOCAL_SETTINGS/LOAD_STORED_LOCAL_SETTINGS",t.REGISTER_LAST_SYNC="LOCAL_SETTINGS/REGISTER_LAST_SYNC",t.REGISTER_DEVICE_NAME="LOCAL_SETTINGS/REGISTER_DEVICE_NAME",t.PREMIUM_STATUS_UPDATED="LOCAL_SETTINGS/PREMIUM_STATUS_UPDATED",t.WEB_ONBOARDING_MODE_UPDATED="LOCAL_SETTINGS/WEB_ONBOARDING_MODE_UPDATED",t.WEB_ONBOARDING_MODE_RESET="LOCAL_SETTINGS/WEB_ONBOARDING_MODE_RESET",t.MIGRATION_ONBOARDING_UPDATED="LOCAL_SETTINGS/MIGRATION_ONBOARDING_UPDATED",t.PREMIUM_CHURNING_DISMISS_DATE_UPDATED="PREMIUM_CHURNING_DISMISS_DATE_UPDATED",t.CREDENTIAL_SEARCH_ORDER_UPDATED="CREDENTIAL_SEARCH_ORDER_UPDATED";t.loadStoredLocalSettings=e=>({type:t.LOAD_STORED_LOCAL_SETTINGS,data:Object.assign({},e)});t.registerLastSync=e=>({type:t.REGISTER_LAST_SYNC,lastSync:e});t.registerDeviceName=e=>({type:t.REGISTER_DEVICE_NAME,deviceName:e});t.localSettingsPremiumStatusUpdated=e=>({type:t.PREMIUM_STATUS_UPDATED,premiumStatus:e});t.webOnboardingModeReset=()=>({type:t.WEB_ONBOARDING_MODE_RESET});t.webOnboardingModeUpdated=e=>({type:t.WEB_ONBOARDING_MODE_UPDATED,webOnboardingMode:e});t.migrationOnboardingUpdated=e=>({type:t.MIGRATION_ONBOARDING_UPDATED,migrationOnboardingStep:e});t.premiumChurningDismissDateUpdated=e=>({type:t.PREMIUM_CHURNING_DISMISS_DATE_UPDATED,premiumChurningDismissDate:e});t.credentialSearchOrderUpdated=e=>({type:t.CREDENTIAL_SEARCH_ORDER_UPDATED,credentialSearchOrder:e})},22632:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyLocalSettings=t.getEmptyOnboardingMode=t.getEmptyLoginStepInfo=void 0;const o=r(28060),n=r(8735),a=r(93267),i=r(6261),s=r(1574),c=r(44521);function d(){return{step:null,login:"",validated:!1}}t.getEmptyLoginStepInfo=d;const l=(e,t)=>[n.LoginStep.Password,n.LoginStep.OTPToken].includes(t)?t:e.step,u=(e,t)=>t===n.LoginStep.OTPToken?Boolean(e.login):![n.LoginStep.OTP1,n.LoginStep.OTP2].includes(t)&&e.validated;t.default=(e=p(),r)=>{switch(r.type){case i.LOAD_STORED_LOCAL_SETTINGS:{const t=p();return{...t,...e,...r.data,webOnboardingMode:{...t.webOnboardingMode,...e.webOnboardingMode,...r.data.webOnboardingMode,completedSteps:{...t.webOnboardingMode.completedSteps,...e.webOnboardingMode.completedSteps,...r.data.webOnboardingMode.completedSteps}}}}case c.DEVICE_REGISTERED:return"uki"===r.registrationType.type?{...e,uki:r.registrationType.uki}:e;case i.REGISTER_LAST_SYNC:return Object.assign({},e,{lastSync:r.lastSync});case i.REGISTER_DEVICE_NAME:return Object.assign({},e,{deviceName:r.deviceName});case i.PREMIUM_STATUS_UPDATED:return Object.assign({},e,{premiumStatus:r.premiumStatus});case i.WEB_ONBOARDING_MODE_UPDATED:{const t=(0,o.mergeDeepRight)(p(),e);return(0,o.mergeDeepRight)(t,{webOnboardingMode:r.webOnboardingMode})}case i.WEB_ONBOARDING_MODE_RESET:return Object.assign({},e,{webOnboardingMode:(0,t.getEmptyOnboardingMode)()});case i.MIGRATION_ONBOARDING_UPDATED:return Object.assign({},e,{migrationOnboarding:{type:"Known",value:r.migrationOnboardingStep}});case i.PREMIUM_CHURNING_DISMISS_DATE_UPDATED:return Object.assign({},e,{premiumChurningDismissDate:r.premiumChurningDismissDate});case i.CREDENTIAL_SEARCH_ORDER_UPDATED:return Object.assign({},e,{credentialSearchOrder:r.credentialSearchOrder});case s.USER_MESSAGE_ADDED:return Object.assign({},e,{userMessages:[...e.userMessages,r.userMessage]});case s.USER_MESSAGES_DISMISSED:return Object.assign({},e,{userMessages:e.userMessages.map((e=>{return t=e,o=r.predicate,Object.entries(o).every((([e,r])=>(null==t?void 0:t[e])===r))?{...e,dismissedAt:Date.now()}:e;var t,o}))});case a.UPDATE_LOGIN_STEP_INFO_LOGIN:return Object.assign({},e,{loginStepInfo:{...e.loginStepInfo,login:r.login}});case a.UPDATE_LOGIN_STEP_INFO_STEP:return Object.assign({},e,{loginStepInfo:{...e.loginStepInfo,step:l(e.loginStepInfo,r.step),validated:u(e.loginStepInfo,r.step)}});case a.RESET_LOGIN_STEP_INFO:return Object.assign({},e,{loginStepInfo:{step:null,login:"",validated:!1}});default:return e}};function p(){return{uki:null,lastSync:0,premiumStatus:null,deviceName:null,migrationOnboarding:{type:"Unknown"},webOnboardingMode:(0,t.getEmptyOnboardingMode)(),premiumChurningDismissDate:null,credentialSearchOrder:null,userMessages:[],loginStepInfo:{step:null,login:"",validated:!1}}}t.getEmptyOnboardingMode=()=>({flowCredentialInApp:!1,flowLoginCredentialOnWeb:!1,flowSaveCredentialOnWeb:!1,flowImportPasswords:!1,flowAddMobileOnWeb:!1,flowTryAutofillOnWeb:!1,leelooStep:null,popoverStep:null,completedSteps:{saveCredentialInApp:!1,loginCredentialOnWeb:!1,saveCredentialOnWeb:!1,importPasswordsShown:!1,onboardingHubShown:!1,addMobileOnWeb:!1,tryAutofillOnWeb:!1}}),t.getEmptyLocalSettings=p},3874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deviceNameSelector=void 0;t.deviceNameSelector=e=>e.userSession.localSettings.deviceName},62602:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadNotificationsStatus=t.MarkAsInteracted=t.markAsSeen=t.LOAD_NOTIFICATIONS_STATE=t.MARK_AS_INTERACTED=t.MARK_AS_SEEN=void 0,t.MARK_AS_SEEN="MarkAsSeen",t.MARK_AS_INTERACTED="MarkAsInteracted",t.LOAD_NOTIFICATIONS_STATE="LoadNotificationsState";t.markAsSeen=e=>({type:t.MARK_AS_SEEN,notification:e});t.MarkAsInteracted=e=>({type:t.MARK_AS_INTERACTED,notification:e});t.loadNotificationsStatus=e=>({type:t.LOAD_NOTIFICATIONS_STATE,state:e})},61356:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyNotificationsState=void 0;const o=r(62602),n=r(12097),a={paymentFailureChurned:n.NotificationStatus.Unseen,paymentFailureChurning:n.NotificationStatus.Unseen,idsPromotion:n.NotificationStatus.Unseen,switchToMlAnalysisEngine:n.NotificationStatus.Unseen,vpnProviderIsNowHotspot:n.NotificationStatus.Unseen,vpnHostpotshieldInstalled:n.NotificationStatus.Unseen,vpnIsReleased:n.NotificationStatus.Unseen,popupIncomingTabPayments:n.NotificationStatus.Unseen,popupIncomingTabPersonalInfo:n.NotificationStatus.Unseen,popupIncomingTabIDs:n.NotificationStatus.Unseen,popupIncomingTabSecureNotes:n.NotificationStatus.Unseen,tacWebFirstBanner:n.NotificationStatus.Unseen,newAccountMenuTooltip:n.NotificationStatus.Unseen,tacGetTheExtensionBanner:n.NotificationStatus.Unseen,tacEnableAccountRecoveryBanner:n.NotificationStatus.Unseen,tacOnlyOneAdminBanner:n.NotificationStatus.Unseen,tacActivityBetaBanner:n.NotificationStatus.Unseen,passwordHistoryBanner:n.NotificationStatus.Unseen,sharingCenterDisabledBanner:n.NotificationStatus.Unseen,scimMarketingInfoBoxHomePage:n.NotificationStatus.Unseen,scimMarketingInfoBoxWebappPage:n.NotificationStatus.Unseen,scimMarketingInfoBoxSetupPage:n.NotificationStatus.Unseen};function i(){return a}t.getEmptyNotificationsState=i,t.default=(e=i(),t)=>{switch(t.type){case o.MARK_AS_INTERACTED:return{...e,[t.notification]:n.NotificationStatus.Interacted};case o.MARK_AS_SEEN:return{...e,[t.notification]:n.NotificationStatus.Seen};case o.LOAD_NOTIFICATIONS_STATE:return{...e,...t.state};default:return e}}},95362:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notificationsStatus$=void 0;const o=r(18948),n=r(3343),a=r(22052);t.notificationsStatus$=function(){const e=a.notificationsStatusSelector;return(0,o.pipe)((0,n.map)(e),(0,n.distinctUntilChanged)())}},22052:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notificationsStatusSelector=void 0;t.notificationsStatusSelector=e=>e.userSession.notificationsStatus},40326:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isReportNotificationsDismissedAction=t.isReportNewDumpAction=t.isReportDumpsDeletedAction=t.isReportDumpSentAction=t.isReportPasswordChangeEndromptAction=t.isReportPasswordChangeStartPromptAction=t.isReportPasswordChangeProgressAction=t.notificationDismissed=t.REPORT_NOTIFICATION_DISMISSED=t.reportDumpsDeleted=t.REPORT_DUMPS_DELETED=t.reportDumpSent=t.REPORT_DUMP_SENT=t.reportNewDump=t.REPORT_NEW_DUMP=t.reportPasswordChangeEndrompt=t.REPORT_PASSWORDCHANGE_END_PROMPT=t.reportPasswordChangeStartPrompt=t.REPORT_PASSWORDCHANGE_START_PROMPT=t.reportPasswordChangeProgress=t.REPORT_PASSWORDCHANGE_PROGRESS=void 0,t.REPORT_PASSWORDCHANGE_PROGRESS="REPORT_PASSWORDCHANGE_PROGRESS";t.reportPasswordChangeProgress=(e,r)=>({type:t.REPORT_PASSWORDCHANGE_PROGRESS,changeId:e,newProgress:r}),t.REPORT_PASSWORDCHANGE_START_PROMPT="REPORT_PASSWORDCHANGE_PROMPT_START";t.reportPasswordChangeStartPrompt=(e,r)=>({type:t.REPORT_PASSWORDCHANGE_START_PROMPT,changeId:e,newPrompt:r}),t.REPORT_PASSWORDCHANGE_END_PROMPT="REPORT_PASSWORDCHANGE_PROMPT_END";t.reportPasswordChangeEndrompt=(e,r)=>({type:t.REPORT_PASSWORDCHANGE_END_PROMPT,changeId:e,promptId:r}),t.REPORT_NEW_DUMP="REPORT_NEW_DUMP";t.reportNewDump=e=>({type:t.REPORT_NEW_DUMP,dump:e}),t.REPORT_DUMP_SENT="REPORT_DUMP_SENT";t.reportDumpSent=e=>({type:t.REPORT_DUMP_SENT,dump:e}),t.REPORT_DUMPS_DELETED="REPORT_DUMPS_DELETED";t.reportDumpsDeleted=()=>({type:t.REPORT_DUMPS_DELETED}),t.REPORT_NOTIFICATION_DISMISSED="REPORT_NOTIFICATIONS_DISMISSED";t.notificationDismissed=e=>({type:t.REPORT_NOTIFICATION_DISMISSED,ids:e});t.isReportPasswordChangeProgressAction=e=>e.type===t.REPORT_PASSWORDCHANGE_PROGRESS;t.isReportPasswordChangeStartPromptAction=e=>e.type===t.REPORT_PASSWORDCHANGE_START_PROMPT;t.isReportPasswordChangeEndromptAction=e=>e.type===t.REPORT_PASSWORDCHANGE_END_PROMPT;t.isReportDumpSentAction=e=>e.type===t.REPORT_DUMP_SENT;t.isReportDumpsDeletedAction=e=>e.type===t.REPORT_DUMPS_DELETED;t.isReportNewDumpAction=e=>e.type===t.REPORT_NEW_DUMP;t.isReportNotificationsDismissedAction=e=>e.type===t.REPORT_NOTIFICATION_DISMISSED},52938:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(39600),t),n(r(34449),t),n(r(40326),t)},39600:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.passwordChangeReducers=void 0;const o=r(40326),n=r(40925);t.passwordChangeReducers=(e={dumps:[],progresses:{},notifications:{}},t)=>(0,o.isReportNotificationsDismissedAction)(t)?((e,t)=>{const r={};for(const o of[...t.ids].filter((t=>!!e.notifications[t])))r[o]={...e.notifications[o],status:n.PasswordChangeNotificationStatus.Dismissed};return{...e,notifications:{...e.notifications,...r}}})(e,t):(0,o.isReportPasswordChangeProgressAction)(t)?((e,t)=>{const r=t.newProgress,o={[t.changeId]:r},a={changeId:t.changeId,status:n.PasswordChangeNotificationStatus.Unread},i={[t.changeId]:a};return{...e,progresses:{...e.progresses,...o},notifications:{...e.notifications,...i}}})(e,t):(0,o.isReportNewDumpAction)(t)?((e,t)=>(-1===e.dumps.findIndex((e=>e.data===t.dump.data))&&e.dumps.push(t.dump),{...e,dumps:e.dumps}))(e,t):(0,o.isReportDumpSentAction)(t)?((e,t)=>{const r=e.dumps.findIndex((e=>e.data===t.dump.data));return-1!==r&&e.dumps.splice(r,1),{...e,dumps:e.dumps}})(e,t):(0,o.isReportDumpsDeletedAction)(t)?{...e,dumps:[]}:(0,o.isReportPasswordChangeStartPromptAction)(t)||(0,o.isReportPasswordChangeEndromptAction)(t)?((e,t)=>{const r=e.progresses[t.changeId];if(!r||!r.running)return e;let a=[];if(r&&r.running&&(a=r.pendingPrompts||[]),(0,o.isReportPasswordChangeStartPromptAction)(t)){const e=t.newPrompt;a.push(e)}else if((0,o.isReportPasswordChangeEndromptAction)(t)){const e=t.promptId,r=a.findIndex((t=>t.id===e));r>=0&&a.splice(r,1)}r.pendingPrompts=a;const i={...e.progresses,[t.changeId]:r},s={changeId:t.changeId,status:n.PasswordChangeNotificationStatus.Unread},c={[t.changeId]:s};return{...e,progresses:i,notifications:{...e.notifications,...c}}})(e,t):e},34449:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6146:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.receivedInvoiceList=t.RECEIVED_INVOICE_LIST=void 0,t.RECEIVED_INVOICE_LIST="RECEIVED_USER_LIST";t.receivedInvoiceList=e=>({type:t.RECEIVED_INVOICE_LIST,invoicesList:e})},78655:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyPaymentsState=void 0;const o=r(6146);function n(){return{invoicesList:[]}}t.getEmptyPaymentsState=n,t.default=(e={invoicesList:[]},t)=>t.type===o.RECEIVED_INVOICE_LIST?{...e,invoicesList:t.invoicesList}:e},16061:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewedQueriedInvoicesSelector=t.searchGetters=t.invoiceMappersSelector=t.invoiceListYearsSelector=t.allInvoicesLengthSelector=t.allInvoicesSelector=void 0;const o=r(25424),n=r(3259),a=r(37047),i=r(57748),s=r(41811);t.allInvoicesSelector=e=>e.userSession.paymentsState.invoicesList;t.allInvoicesLengthSelector=e=>e.userSession.paymentsState.invoicesList.length;t.invoiceListYearsSelector=e=>{const t=e.userSession.paymentsState.invoicesList;if(t.length){const e=t.map((e=>(0,o.fromUnixTime)(e.startDate).getFullYear().toString()));return[...new Set(e)]}return[]};t.invoiceMappersSelector=e=>(0,s.getInvoiceMappers)(),t.searchGetters=[(0,i.stringProp)("amountPaid"),(0,i.stringProp)("planName"),(0,i.stringProp)("startDate"),(0,i.stringProp)("invoiceId"),(0,i.stringProp)("startYear")];const c=(0,a.match)(t.searchGetters),d=(0,n.getQuerySelector)(t.allInvoicesSelector,(()=>c),t.invoiceMappersSelector);t.viewedQueriedInvoicesSelector=(e,t)=>d(e,t)},37821:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateBreachesUpdaterStatus=t.teamSpaceContentControlApplied=t.storeChangesToUpload=t.breachesUpdated=t.updateLastBackupTime=t.removePersonalItem=t.saveNoteCategory=t.saveCredentialCategory=t.saveGeneratedPassword=t.savePaymentCard=t.unscheduleRemainingChanges=t.clearUploadedChanges=t.scheduleChangesForSync=t.loadStoredPersonalData=t.UNSCHEDULE_REMAINING_CHANGES=t.CLEAR_UPLOADED_CHANGES=t.SCHEDULE_CHANGES_FOR_SYNC=t.UPDATE_BREACHES_UPDATER_STATUS=t.TEAMSPACE_CONTENT_CONTROLLED=t.STORE_CHANGES_TO_UPLOAD=t.BREACHES_UPDATED=t.UPDATE_LAST_BACKUP_TIME=t.REMOVE_PERSONAL_ITEM=t.SAVE_PAYMENT_CARD=t.SAVE_NOTE_CATEGORY=t.SAVE_CREDENTIAL_CATEGORY=t.SAVE_PERSONAL_ITEMS=t.SAVE_PERSONAL_ITEM=t.SAVE_GENERATED_PASSWORD=t.LOAD_STORED_PERSONAL_DATA=void 0,t.LOAD_STORED_PERSONAL_DATA="PERSONAL_DATA/LOAD_STORED_PERSONAL_DATA",t.SAVE_GENERATED_PASSWORD="PERSONAL_DATA/SAVE_GENERATED_PASSWORD",t.SAVE_PERSONAL_ITEM="PERSONAL_DATA/SAVE_PERSONAL_ITEM",t.SAVE_PERSONAL_ITEMS="PERSONAL_DATA/SAVE_PERSONAL_ITEMS",t.SAVE_CREDENTIAL_CATEGORY="SAVE_CREDENTIAL_CATEGORY",t.SAVE_NOTE_CATEGORY="SAVE_NOTE_CATEGORY",t.SAVE_PAYMENT_CARD="SAVE_PAYMENT_CARD",t.REMOVE_PERSONAL_ITEM="REMOVE_PERSONAL_ITEM",t.UPDATE_LAST_BACKUP_TIME="UPDATE_LAST_BACKUP_TIME",t.BREACHES_UPDATED="BREACHES_UPDATED",t.STORE_CHANGES_TO_UPLOAD="STORE_CHANGES_TO_UPLOAD",t.TEAMSPACE_CONTENT_CONTROLLED="TEAMSPACE_CONTENT_CONTROLLED",t.UPDATE_BREACHES_UPDATER_STATUS="UPDATE_BREACHES_UPDATER_STATUS",t.SCHEDULE_CHANGES_FOR_SYNC="SCHEDULE_CHANGES_FOR_SYNC",t.CLEAR_UPLOADED_CHANGES="CLEAR_UPLOADED_CHANGES",t.UNSCHEDULE_REMAINING_CHANGES="UNSCHEDULE_REMAINING_CHANGES";t.loadStoredPersonalData=e=>({type:t.LOAD_STORED_PERSONAL_DATA,data:Object.assign({},e)});t.scheduleChangesForSync=()=>({type:t.SCHEDULE_CHANGES_FOR_SYNC});t.clearUploadedChanges=e=>({type:t.CLEAR_UPLOADED_CHANGES,uploadedItemIds:e});t.unscheduleRemainingChanges=()=>({type:t.UNSCHEDULE_REMAINING_CHANGES}),t.savePaymentCard=function(e){return{type:t.SAVE_PAYMENT_CARD,paymentCard:e}},t.saveGeneratedPassword=function(e){return{type:t.SAVE_GENERATED_PASSWORD,generatedPassword:e}},t.saveCredentialCategory=function(e){return{type:t.SAVE_CREDENTIAL_CATEGORY,credentialCategory:e}},t.saveNoteCategory=function(e){return{type:t.SAVE_NOTE_CATEGORY,noteCategory:e}},t.removePersonalItem=function(e,r,o){return{type:t.REMOVE_PERSONAL_ITEM,kwType:e,itemId:r,changeHistory:o}},t.updateLastBackupTime=function(e,r){return{type:t.UPDATE_LAST_BACKUP_TIME,transactions:e,backupTimeSec:r}},t.breachesUpdated=function(e,r,o){return{type:t.BREACHES_UPDATED,changes:e,revision:r,dataLeaksRefreshDate:o}},t.storeChangesToUpload=function(e){return{type:t.STORE_CHANGES_TO_UPLOAD,changesToUpload:e}},t.teamSpaceContentControlApplied=function(e,r,o){return{type:t.TEAMSPACE_CONTENT_CONTROLLED,updates:e,deletions:r,changeHistories:o}};t.updateBreachesUpdaterStatus=e=>({type:t.UPDATE_BREACHES_UPDATER_STATUS,breachesUpdaterStatus:e})},9473:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PERSONAL_DATA_COLLECTIONS_KEYS=t.DATAMODELOBJECT_TYPE_TO_STORE_KEY=void 0,t.DATAMODELOBJECT_TYPE_TO_STORE_KEY={KWAddress:"addresses",KWAuthCategory:"credentialCategories",KWAuthentifiant:"credentials",KWBankStatement:"bankAccounts",KWCompany:"companies",KWDataChangeHistory:"changeHistories",KWDriverLicence:"driverLicenses",KWEmail:"emails",KWFiscalStatement:"fiscalIds",KWGeneratedPassword:"generatedPasswords",KWIDCard:"idCards",KWIdentity:"identities",KWPassport:"passports",KWPaymentMean_creditCard:"paymentCards",KWPaymentMean_paypal:"paypalAccounts",KWPersonalWebsite:"personalWebsites",KWPhone:"phones",KWSecureNote:"notes",KWSecureNoteCategory:"noteCategories",KWSecurityBreach:"securityBreaches",KWSocialSecurityStatement:"socialSecurityIds",KWSecureFileInfo:"secureFileInfo"},t.default=t.DATAMODELOBJECT_TYPE_TO_STORE_KEY,t.PERSONAL_DATA_COLLECTIONS_KEYS=Object.keys(t.DATAMODELOBJECT_TYPE_TO_STORE_KEY).map((e=>t.DATAMODELOBJECT_TYPE_TO_STORE_KEY[e]))},42692:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.countPersonalDataItems=t.getEmptyBreachesMetadata=t.getLegacyEmptyBreaches=t.saveChangesToUpload=t.breachesUpdated=t.updateCredential=t.updateCredentials=t.updateLastBackupTime=t.saveObjects=t.saveNoteCategory=t.saveCredentialCategory=t.saveGeneratedPassword=t.savePersonalDataItems=t.savePersonalDataItem=t.savePaymentCard=t.removePersonalItem=t.teamSpaceContentControlApplied=t.savePersonalSettings=t.removePersonalItemFromTransaction=t.addPersonalItemFromTransaction=t.getEmptyPersonalDataState=void 0;const o=r(97211),n=r(28060),a=r(9473),i=r(46566),s=r(37821),c=r(1005),d=r(54322),l=r(77333),u=r(9237),p=r(7119),S=r(42136);function g(){return{addresses:[],bankAccounts:[],changesToUpload:[],changeHistories:[],companies:[],credentialCategories:[],credentials:[],driverLicenses:[],emails:[],fiscalIds:[],generatedPasswords:[],idCards:[],identities:[],noteCategories:[],notes:[],passports:[],paymentCards:[],paypalAccounts:[],personalWebsites:[],phones:[],securityBreaches:[],securityBreachesMetadata:(0,t.getEmptyBreachesMetadata)(),socialSecurityIds:[],breachesUpdaterStatus:u.BreachesUpdaterStatus.UNKNOWN,secureFileInfo:[]}}t.default=(e=g(),t,r)=>{switch(t.type){case s.LOAD_STORED_PERSONAL_DATA:return{...e,...(0,i.fixPersistedPersonalData)(t.data)};case c.ADD_PERSONAL_ITEM_FROM_TRANSACTION:return m(e,t);case c.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION:return y(e,t);case s.REMOVE_PERSONAL_ITEM:return _(e,t);case s.SAVE_PAYMENT_CARD:return T(e,t);case s.SAVE_PERSONAL_ITEM:return I(e,t,r);case s.SAVE_PERSONAL_ITEMS:return C(e,t,r);case s.SAVE_GENERATED_PASSWORD:return P(e,t,r);case s.SAVE_CREDENTIAL_CATEGORY:return D(e,t);case s.SAVE_NOTE_CATEGORY:return O(e,t);case s.CLEAR_UPLOADED_CHANGES:return A(e,t);case s.SCHEDULE_CHANGES_FOR_SYNC:return v(e,t);case s.UNSCHEDULE_REMAINING_CHANGES:return E(e,t);case l.EDIT_PERSONAL_SETTINGS:return f(e);case s.UPDATE_LAST_BACKUP_TIME:return b(e,t);case s.BREACHES_UPDATED:return N(e,t);case s.STORE_CHANGES_TO_UPLOAD:return R(e,t);case s.TEAMSPACE_CONTENT_CONTROLLED:return h(e,t);case s.UPDATE_BREACHES_UPDATER_STATUS:return{...e,breachesUpdaterStatus:t.breachesUpdaterStatus};default:return e}},t.getEmptyPersonalDataState=g;function m(e,t){if(r=t.itemId,o=t.content,!r||!o||!a.default.hasOwnProperty(o.kwType))return e;var r,o;const n=a.default[t.content.kwType],s=(0,i.fixPersonalDataItemFromExternalSource)(t.content,t.itemId);return{...e,[n]:L(e[n],s)}}function y(e,t){return t.itemId?t.content?F(e,[t.itemId],t.content.kwType):F(e,[t.itemId]):e}t.addPersonalItemFromTransaction=m,t.removePersonalItemFromTransaction=y;const v=(e,t)=>({...e,changesToUpload:e.changesToUpload.map(S.markChangeAsScheduled)}),A=(e,t)=>({...e,changesToUpload:(0,S.filterOutUploadedChanges)(e.changesToUpload,t.uploadedItemIds)}),E=(e,t)=>({...e,changesToUpload:e.changesToUpload.map(S.markChangeAsReadyForNextSync)});function f(e){if(e.changesToUpload.find((e=>"KWSettingsManagerApp"===e.kwType)))return e;const t=(0,p.createUploadChange)({itemId:"SETTINGS_userId",kwType:"KWSettingsManagerApp",action:"EDIT"});return{...e,changesToUpload:[...e.changesToUpload,t]}}function h(e,t){const{updates:r,deletions:o,changeHistories:n}=t,i=r.reduce(((e,t)=>{const{kwType:r}=t,o=a.default[r];return o?{...e,[o]:L(e[o]||[],t)}:e}),e),s=r.map(p.createUploadChangeForItem),c=Object.keys(o).reduce(((e,t)=>F(e,o[t],t)),i),d=Object.keys(o).reduce(((e,t)=>e.concat(o[t].map((0,p.createUploadChangeForDeletion)(t)))),[]),l=U(e.changeHistories,n),u=[...s,...d,...n.map(p.createUploadChangeForItem)];return{...c,changesToUpload:M(e.changesToUpload,u),changeHistories:l}}function _(e,t){const{changeHistory:r,kwType:o,itemId:n}=t,a=F(e,[n],o),i=[(0,p.createUploadChangeForDeletion)(o)(n),...r?[(0,p.createUploadChangeForItem)(r)]:[]],s=r?{changeHistories:L(e.changeHistories,r)}:{};return{...a,changesToUpload:M(a.changesToUpload,i),...s}}function T(e,{paymentCard:t}){return{...e,changesToUpload:M(e.changesToUpload,(0,p.createUploadChangeForItem)(t)),paymentCards:L(e.paymentCards,t)}}function I(e,{dataType:t,dataModelObject:r,changeHistory:o},n){const a=(0,d.associateTeamSpaceId)(r,n.spaces,e.credentials),i=o?{changeHistories:L(e.changeHistories,o)}:{},s=o?[(0,p.createUploadChangeForItem)(o)]:[],c=[(0,p.createUploadChangeForItem)(r),...s];return{...e,changesToUpload:M(e.changesToUpload,c),[t]:L(e[t],a),...i}}function C(e,{dataType:t,dataModelObjects:r,changeHistory:o},n){const a=r.map((t=>(0,d.associateTeamSpaceId)(t,n.spaces,e.credentials))),i=[...r.map(p.createUploadChangeForItem),...o.map(p.createUploadChangeForItem)];return{...e,changesToUpload:M(e.changesToUpload,i),[t]:U(e[t],a),changeHistories:U(e.changeHistories,o)}}function P(e,{generatedPassword:t},r){const o=(0,d.associateTeamSpaceId)(t,r.spaces,e.credentials);return{...e,changesToUpload:M(e.changesToUpload,(0,p.createUploadChangeForItem)(t)),generatedPasswords:L(e.generatedPasswords,o)}}function D(e,{credentialCategory:t}){return{...e,changesToUpload:M(e.changesToUpload,(0,p.createUploadChangeForItem)(t)),credentialCategories:L(e.credentialCategories,t)}}function O(e,{noteCategory:t}){return{...e,changesToUpload:M(e.changesToUpload,(0,p.createUploadChangeForItem)(t)),noteCategories:L(e.noteCategories,t)}}function b(e,{transactions:t,backupTimeSec:r}){return Object.keys(e).reduce(((o,n)=>(Array.isArray(e[n])&&(o[n]=function(e,t,r){const o=e.filter((e=>t.includes(e.Id))).map((e=>Object.assign(e,{LastBackupTime:r})));return e.filter((e=>!t.includes(e.Id))).concat(o)}(e[n],t,r)),o)),e)}function w(e,t){const{credentials:r}=e,o=L(r,t);return{...e,credentials:o}}function N(e,t){const{changes:{updates:r,deletions:n}}=t,a=o.DataModelType.KWSecurityBreach,i=F(e,n,a),s=r.map(p.createUploadChangeForItem),c=n.map((0,p.createUploadChangeForDeletion)(a)),d=M(i.changesToUpload,[...s,...c]),l=U(i.securityBreaches,r),u=void 0!==t.dataLeaksRefreshDate?t.dataLeaksRefreshDate:i.securityBreachesMetadata.latestDataLeaksBreachesUpdate;return{...i,securityBreaches:l,securityBreachesMetadata:{latestPublicBreachesRevision:t.revision,latestDataLeaksBreachesUpdate:u},changesToUpload:d}}function R(e,{changesToUpload:t}){return{...e,changesToUpload:M(e.changesToUpload,t)}}function L(e,t){const r=function(e,t){return e.filter((e=>e.Id!==t))}(e,t.Id);return r.concat(t)}function U(e,t){return[...k(e,t.map((e=>e.Id))),...t]}function M(e,t){const r=(t=Array.isArray(t)?t:[t]).concat(e||[]);return(0,n.uniqBy)((0,n.prop)("itemId"),r)}function k(e,t){return e.filter((e=>!t.includes(e.Id)))}function F(e,t,r){if(r&&a.default[r]){const o=a.default[r];return{...e,[o]:e[o]&&k(e[o],t)}}return a.PERSONAL_DATA_COLLECTIONS_KEYS.reduce(((r,o)=>{if(!(o in e))return r;const n=k(e[o],t);return{...r,[o]:n}}),e)}t.savePersonalSettings=f,t.teamSpaceContentControlApplied=h,t.removePersonalItem=_,t.savePaymentCard=T,t.savePersonalDataItem=I,t.savePersonalDataItems=C,t.saveGeneratedPassword=P,t.saveCredentialCategory=D,t.saveNoteCategory=O,t.saveObjects=function(e,t){return(0,n.reduce)(((e,t)=>{const r=a.default[t.kwType];return r&&(e[r]=e[r].concat(t)),e}),{...e},t)},t.updateLastBackupTime=b,t.updateCredentials=function(e,t){return t.reduce(((e,t)=>w(e,t)),e)},t.updateCredential=w,t.breachesUpdated=N,t.saveChangesToUpload=R;t.getLegacyEmptyBreaches=()=>({revision:0,breaches:[]});t.getEmptyBreachesMetadata=()=>({latestPublicBreachesRevision:0,latestDataLeaksBreachesUpdate:0});t.countPersonalDataItems=e=>Object.keys(a.default).reduce(((t,r)=>t+e[a.default[r]].length),0)},14363:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(28060),n=r(97211),a=r(55981);t.default=function(e){const t=(0,o.isNil)(e.LocaleFormat)?n.Country.UNIVERSAL:e.LocaleFormat,r=(0,o.isNil)(e.SpaceId)?a.PERSONAL_SPACE_ID:e.SpaceId;return{...e,LocaleFormat:t,SpaceId:r}}},52858:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fixBreachTypesFromStore=t.fixBreachTypesFromTransaction=t.fixCommonPropertiesTypes=t.fixGeneratedPasswordsTypes=t.fixCredentialTypesFromStore=t.fixNoteTypesFromStore=t.fixAttachmentProperties=t.fixNoteTypesFromTransaction=t.fixAllStringObject=t.fixDomainIconTypes=t.fixTrustedUrlTypes=t.fixCredentialTypesFromTransaction=void 0;const o=r(60601),n=["CreationDatetime","LastBackupTime","UserModificationDatetime"],a=["Id","AnonId","SpaceId"];function i(e){return(0,o.fixPropertiesTypes)([],[],[],["TrustedUrl","TrustedUrlExpire"],e)}function s(e){const{urls:t,...r}=(0,o.fixPropertiesTypes)([],[],[],["backgroundColor","mainColor"],e);return{...r,urls:"object"==typeof t&&null!==t?c(t):{}}}function c(e){const t=Object.keys(e);return(0,o.fixPropertiesTypes)([],[],[],t,e)}function d(e){return(0,o.fixPropertiesTypes)([],["version","localSize","remoteSize","creationDatetime","userModificationDatetime"],[],["id","type","filename","downloadKey","cryptoKey","owner"],e)}t.fixCredentialTypesFromTransaction=function(e){const t=["LastUse","ModificationDatetime","NumberUse","Strength"].concat(n),r=["Alias","Category","ConnectionOptions","Email","Login","Note","OtpSecret","Password","Port","SID","SecondaryLogin","Server","Title","Url","UserSelectedUrl"].concat(a),{TrustedUrlGroup:c,Attachments:l,domainIcon:u,...p}=(0,o.fixPropertiesTypes)(["AutoLogin","AutoProtected","Checked","SharedObject","SubdomainOnly","UseFixedUrl","limitedPermissions"],t,["Attachments"],r,e);return{...p,...Array.isArray(l)?{Attachments:l.map(d)}:{},..."object"==typeof u&&null!==u?{domainIcon:s(u)}:{},TrustedUrlGroup:c&&c.length>0?c.map(i):[]}},t.fixTrustedUrlTypes=i,t.fixDomainIconTypes=s,t.fixAllStringObject=c,t.fixNoteTypesFromTransaction=function(e){const t=["CreationDate","UpdateDate"].concat(n),r=["Title","Content","Category"].concat(a),{Attachments:i,Type:s,...c}=(0,o.fixPropertiesTypes)(["Secured"],t,["Attachments"],r,e);return{...c,...Array.isArray(i)?{Attachments:i.map(d)}:{},Type:s||"GRAY"}},t.fixAttachmentProperties=d,t.fixNoteTypesFromStore=function(e){const t={};return["Attachments"].filter((t=>!!e[t])).forEach((r=>{t[r]=JSON.stringify(e[r])})),Object.assign({},e,t)},t.fixCredentialTypesFromStore=function(e){const t={};return["Attachments"].filter((t=>!!e[t])).forEach((r=>{t[r]=JSON.stringify(e[r])})),Object.assign({},e,t)},t.fixGeneratedPasswordsTypes=function(e){const t=["GeneratedDate"].concat(n);return(0,o.fixPropertiesTypes)([],t,[],[],e)},t.fixCommonPropertiesTypes=function(e){return(0,o.fixPropertiesTypes)([],n,[],[],e)},t.fixBreachTypesFromTransaction=function(e){const t=[...n,"ContentRevision"],r=[...a,"AnonId","BreachId","Status"],i=(0,o.fixPropertiesTypes)([],t,["Content","LeakedPasswords"],r,e);return Array.isArray(i.LeakedPasswords)||(i.LeakedPasswords=[]),i},t.fixBreachTypesFromStore=function(e){const t={};return["Content","LeakedPasswords"].filter((t=>!!e[t])).forEach((r=>{t[r]=JSON.stringify(e[r])})),Array.isArray(e.LeakedPasswords)||(t.LeakedPasswords=JSON.stringify([])),{...e,...t}}},46566:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fixPersistedPersonalData=t.fixPersonalDataItemFromExternalSource=void 0;const o=r(28060),n=r(97211),a=r(52858),i=r(14363),s=r(96066),c=[{key:"credentials",isData:n.isCredential,fixData:e=>(0,a.fixCredentialTypesFromTransaction)(e),addDefaultValues:e=>(0,i.default)(e)},{key:"notes",isData:n.isNote,fixData:e=>(0,a.fixNoteTypesFromTransaction)(e),addDefaultValues:e=>(0,i.default)(e)},{key:"generatedPasswords",isData:n.isGeneratedPassword,fixData:e=>(0,a.fixGeneratedPasswordsTypes)(e),addDefaultValues:e=>e},{key:"securityBreaches",isData:s.isBreach,fixData:e=>(0,a.fixBreachTypesFromTransaction)(e),addDefaultValues:e=>e}];t.fixPersonalDataItemFromExternalSource=function(e,t){const r=function(e,t){return t?{...e,Id:t}:e}(e,t),o=c.find((e=>e.isData(r)));return o?l(o,r):(0,a.fixCommonPropertiesTypes)(r)};const d=["breaches","versionedBreaches"];function l(e,t){return e.addDefaultValues(e.fixData(t))}t.fixPersistedPersonalData=function(e){var t;const r={};c.forEach((t=>{const o=e[t.key];if(!o)return;const n=o.map((e=>l(t,e)));r[t.key]=n}));const n=(null!==(t=r.credentials)&&void 0!==t?t:[]).filter((e=>!!e.Id));return{...(0,o.omit)(d,e),...r,credentials:n}}},77333:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.editPersonalSettings=t.toogleDashlaneOnSite=t.toogleDashlaneOnPage=t.loadStoredPersonalSettings=t.EDIT_PERSONAL_SETTINGS=t.TOGGLE_DASHLANE_ON_SITE=t.TOGGLE_DASHLANE_ON_PAGE=t.LOAD_PERSONAL_SETTINGS_FROM_STORAGE=void 0,t.LOAD_PERSONAL_SETTINGS_FROM_STORAGE="LOAD_PERSONAL_SETTINGS_FROM_STORAGE",t.TOGGLE_DASHLANE_ON_PAGE="TOGGLE_DASHLANE_ON_PAGE",t.TOGGLE_DASHLANE_ON_SITE="TOGGLE_DASHLANE_ON_SITE",t.EDIT_PERSONAL_SETTINGS="EDIT_PERSONAL_SETTINGS";t.loadStoredPersonalSettings=e=>({type:t.LOAD_PERSONAL_SETTINGS_FROM_STORAGE,data:Object.assign({},e)});t.toogleDashlaneOnPage=e=>({type:t.TOGGLE_DASHLANE_ON_PAGE,content:Object.assign({},e)});t.toogleDashlaneOnSite=e=>({type:t.TOGGLE_DASHLANE_ON_SITE,content:Object.assign({},e)});t.editPersonalSettings=e=>({type:t.EDIT_PERSONAL_SETTINGS,content:Object.assign({},e)})},71693:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fixPersonalSettingTypes=void 0;const o=r(28060),n=r(60601),a={GeneratorDefaultAvoidAmbiguousChars:"boolean",GeneratorDefaultDigits:"boolean",GeneratorDefaultLetters:"boolean",GeneratorDefaultMixedCase:"boolean",GeneratorDefaultPronounceable:"boolean",GeneratorDefaultSymbols:"boolean",RecoveryOptIn:"boolean",ProtectPasswords:"boolean",ProtectPayments:"boolean",ProtectIDs:"boolean",SecuredDataShowScreenshots:"yes-no",SecuredDataShowPassword:"yes-no",SecuredDataShowIDs:"yes-no",SecuredDataShowCreditcard:"yes-no",SecuredDataAutofillCreditcard:"yes-no",SyncBackup:"yes-no",SyncBackupPurchase:"yes-no",SyncBackupPersonaldata:"yes-no",SyncBackupPasswords:"yes-no",SyncBackupCreditCardsNumber:"yes-no",SyncBackupCreditCardsCCV:"yes-no"},i={GeneratorDefaultSize:"number",accountCreationDatetime:"number"},s={SpaceAnonIds:"json"},c=(0,o.curry)(n.fixProperties.fromTransaction)(a,i,s),d=(0,o.curry)(n.fixProperties.fromStore)(a,i,s);t.fixPersonalSettingTypes={fromTransaction:c,fromStore:d}},16075:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toggleDashlaneOnSite=t.toggleDashlaneOnPage=t.getWebsiteInfo=t.isBackupSyncOn=t.SYNC_ALWAYS_ON_FEATURE_FLIP=t.makeBasePersonalSettings=t.getEmptyPersonalSettings=t.getUpdatedPersonalSettings=void 0;const o=r(28060),n=r(77333),a=r(1005),i=r(71693),s=r(11814),c=r(8153);function d(){return{DisabledDomainsList:[],DisabledUrlsList:[],DisabledDomainsAutologinList:[],DisabledUrlsAutologinList:[],SyncBackupCreditCardsCCV:null,SyncBackupCreditCardsNumber:null,SyncBackupPasswords:null,SyncBackupPersonaldata:null,SyncBackupPurchase:null,SecuredDataAutofillCreditcard:!0,SecuredDataShowCreditcard:!0,SecuredDataShowIDs:!0,SecuredDataShowPassword:!1,SecuredDataShowScreenshots:!0,ProtectPasswords:!1,ProtectPayments:!0,ProtectIDs:!1,CryptoUserPayload:null,...(0,t.makeBasePersonalSettings)()}}t.default=(e=d(),t)=>{switch(t.type){case n.LOAD_PERSONAL_SETTINGS_FROM_STORAGE:return i.fixPersonalSettingTypes.fromTransaction(Object.assign({},e,t.data));case a.EDIT_PERSONAL_SETTINGS_FROM_TRANSACTION:return i.fixPersonalSettingTypes.fromTransaction(Object.assign({},e,t.content));case n.TOGGLE_DASHLANE_ON_PAGE:return l(e,t.content);case n.TOGGLE_DASHLANE_ON_SITE:return u(e,t.content);case n.EDIT_PERSONAL_SETTINGS:return Object.assign({},e,t.content);default:return e}},t.getUpdatedPersonalSettings=function(e,t){const r=d(),o=Object.keys(r);for(const e of o)t[e]||void 0===t[e]||(t[e]=r[e]);return{...e,...t}},t.getEmptyPersonalSettings=d;function l(e,t){return t.autofill&&t.autologin?(e.DisabledUrlsAutologinList=(0,o.without)([t.url],e.DisabledUrlsAutologinList),e.DisabledUrlsList=(0,o.without)([t.url],e.DisabledUrlsList)):t.autologin?(e.DisabledUrlsAutologinList=(0,o.without)([t.url],e.DisabledUrlsAutologinList),e.DisabledUrlsList=(0,o.uniq)(e.DisabledUrlsList.concat(t.url))):e.DisabledUrlsAutologinList=(0,o.uniq)(e.DisabledUrlsAutologinList.concat(t.url)),e}function u(e,t){const r=s.url.getDomainForUrl(t.url);return t.autofill&&t.autologin?(e.DisabledDomainsAutologinList=(0,o.without)([r],e.DisabledDomainsAutologinList),e.DisabledDomainsList=(0,o.without)([r],e.DisabledDomainsList)):t.autologin?(e.DisabledDomainsAutologinList=(0,o.without)([r],e.DisabledDomainsAutologinList),e.DisabledDomainsList=(0,o.uniq)(e.DisabledDomainsList.concat(r))):e.DisabledDomainsAutologinList=(0,o.uniq)(e.DisabledDomainsAutologinList.concat(r)),e}t.makeBasePersonalSettings=()=>({RealLogin:null,SecurityEmail:null,accountCreationDatetime:null,Format:null,Language:null,AnonymousUserId:null,UsagelogToken:null,SyncBackup:null,SecuredDataAutofillCreditcard:!0,SecuredDataShowCreditcard:!0,SecuredDataShowIDs:!0,SecuredDataShowPassword:!1,SecuredDataShowScreenshots:!0,ProtectPasswords:!1,ProtectPayments:!0,ProtectIDs:!1,kwType:"KWSettingsManagerApp",Id:"SETTINGS_userId",LastBackupTime:null}),t.SYNC_ALWAYS_ON_FEATURE_FLIP="carbonSyncAlwaysOn",t.isBackupSyncOn=function(e,r){const o=r[t.SYNC_ALWAYS_ON_FEATURE_FLIP];return Boolean(o||e.SyncBackup)},t.getWebsiteInfo=function(e,t){const r=s.url.getDomainForUrl(t),n=e.getPersonalSettings(),a=(0,c.spaceDisabledDomainsListSelector)(e.getState());return{disabledAutofillOnDomain:(0,o.contains)(r,n.DisabledDomainsList),disabledAutofillOnPage:(0,o.contains)(t,n.DisabledUrlsList),disabledAutologinOnDomain:(0,o.contains)(r,[...n.DisabledDomainsAutologinList,...a]),disabledAutologinOnPage:(0,o.contains)(t,n.DisabledUrlsAutologinList),disabledFromSpaces:!1}},t.toggleDashlaneOnPage=l,t.toggleDashlaneOnSite=u},66348:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.saveCurrentLocation=t.savePlatformInfo=t.SAVE_CURRENT_LOCATION=t.SAVE_PLATFORM_INFO=void 0,t.SAVE_PLATFORM_INFO="SAVE_PLATFORM_INFO",t.SAVE_CURRENT_LOCATION="SAVE_CURRENT_LOCATION";t.savePlatformInfo=e=>({type:t.SAVE_PLATFORM_INFO,info:e});t.saveCurrentLocation=e=>({type:t.SAVE_CURRENT_LOCATION,location:e})},28616:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyPlatform=t.defaultPlatformInfo=void 0;const o=r(66348);t.default=(e=a(),r)=>{switch(r.type){case o.SAVE_PLATFORM_INFO:return{...e,info:(n=r.info,i=t.defaultPlatformInfo,{anonymousApplicationId:n.anonymousApplicationId||i.anonymousApplicationId,platformName:n.platformName||i.platformName,appVersion:n.appVersion||i.appVersion,browser:n.browser||i.browser,browserVersion:n.browserVersion||i.browserVersion,country:n.country||i.country,os:n.os||i.os,osCountry:n.osCountry||i.osCountry,osVersion:n.osVersion||i.osVersion,lang:n.lang||i.lang})};case o.SAVE_CURRENT_LOCATION:return{...e,location:r.location};default:return e}var n,i};const n={country:null,isEu:!0};function a(){return{info:t.defaultPlatformInfo,location:n}}t.defaultPlatformInfo={anonymousApplicationId:"unknown_anonymous_application_id",platformName:"server_carbon_unknown",appVersion:"unknown_version",browser:"browser_carbon_unknown",browserVersion:"unknown_browser_version",country:"country_carbon_unknown",os:"os_carbon_unknown",osCountry:"os_country_carbon_unknown",osVersion:"unknown_os_version",lang:"lang_carbon_unknown"},t.getEmptyPlatform=a},94722:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetRecoverySessionData=t.saveRecoverySessionData=t.RESET_RECOVERY_SESSION_DATA=t.SAVE_RECOVERY_SESSION_DATA=void 0,t.SAVE_RECOVERY_SESSION_DATA="SAVE_RECOVERY_SESSION_DATA",t.RESET_RECOVERY_SESSION_DATA="RESET_RECOVERY_SESSION_DATA";t.saveRecoverySessionData=e=>({type:t.SAVE_RECOVERY_SESSION_DATA,data:e});t.resetRecoverySessionData=()=>({type:t.RESET_RECOVERY_SESSION_DATA})},33452:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(94722);t.default=(e={recoveryUki:null,publicKey:null,userServerProtectedSymmetricalKey:null,recoveryServerKeyBase64:null,recoveryInProgress:!1,currentPassword:null,verificationMethod:null},t)=>{switch(t.type){case o.SAVE_RECOVERY_SESSION_DATA:return{...e,...t.data};case o.RESET_RECOVERY_SESSION_DATA:return{recoveryUki:null,publicKey:null,userServerProtectedSymmetricalKey:null,recoveryServerKeyBase64:null,recoveryInProgress:!1,currentPassword:null,verificationMethod:null};default:return e}}},46261:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userSessionReducer=t.userSessionRootReducer=void 0;const o=r(89531),n=r(28060),a=r(26065),i=r(78655),s=r(59944),c=r(44320),d=r(50930),l=r(92909),u=r(23471),p=r(38071),S=r(5804),g=r(22632),m=r(6261),y=r(42692),v=r(84636),A=r(16075),E=r(56352),f=r(50200),h=r(80637),_=r(43455),T=r(36588),I=r(78694),C=r(35528),P=r(9084),D=r(68752),O=r(59241),b=r(56753),w=r(98031),N=r(33452),R=r(13173),L=r(39712),U=r(91584),M=r(60557),k=r(1005),F=r(37821),B=r(61356),G=r(24829),K=r(7511),j=r(39600),V=r(10327),H=r(94664),W=r(24239),x=r(5464);t.userSessionRootReducer=(e,t)=>{switch(t.type){case k.CLOSE_SESSION:return;case k.LOCAL_SETTINGS_UPDATED:const r=t.data;return Object.assign({},e,{localSettings:(0,g.default)(e.localSettings,(0,m.loadStoredLocalSettings)(r)),spaceData:(0,h.default)(e.spaceData,(0,T.spacesUpdated)(r.premiumStatus.spaces))});case k.PREMIUM_STATUS_UPDATED:const o=t.premiumStatus;return Object.assign({},e,{localSettings:(0,g.default)(e.localSettings,(0,m.localSettingsPremiumStatusUpdated)(o)),spaceData:(0,h.default)(e.spaceData,(0,T.spacesUpdated)(o.spaces))});default:return e}};const z=(e,t)=>{var r,o,n,a,i,s;switch(t.type){case k.SAVE_GENERATED_PASSWORD:return Object.assign({},e,{personalData:(0,y.default)(e.personalData,{...t,type:F.SAVE_GENERATED_PASSWORD},{spaces:null!==(o=null===(r=e.localSettings.premiumStatus)||void 0===r?void 0:r.spaces)&&void 0!==o?o:[]})});case k.SAVE_PERSONAL_ITEM:return Object.assign({},e,{personalData:(0,y.default)(e.personalData,{...t,type:F.SAVE_PERSONAL_ITEM},{spaces:null!==(a=null===(n=e.localSettings.premiumStatus)||void 0===n?void 0:n.spaces)&&void 0!==a?a:[]})});case k.SAVE_PERSONAL_ITEMS:return Object.assign({},e,{personalData:(0,y.default)(e.personalData,{...t,type:F.SAVE_PERSONAL_ITEMS},{spaces:null!==(s=null===(i=e.localSettings.premiumStatus)||void 0===i?void 0:i.spaces)&&void 0!==s?s:[]})});default:return e}};t.userSessionReducer=(e,r)=>{const m=(0,o.combineReducers)({abTests:a.default,account:s.default,accountContactInfo:R.default,accountCreation:c.default,authTicketInfo:d.default,credentialOTPs:l.credentialOTPs,changeMPData:u.default,darkWeb:p.default,directorySync:S.default,health:C.default,iconsCache:_.default,killswitch:P.default,localSettings:g.default,loginDeviceLimitFlow:L.default,notificationsStatus:B.default,passwordChangerState:j.passwordChangeReducers,paymentsState:i.default,personalData:y.default,personalFeatures:v.default,personalSettings:A.default,sdkAuthentication:G.default,recoveryData:N.default,session:K.default,sharingData:E.default,sharingSync:D.default,spaceData:h.default,ssoSettings:O.default,sync:I.default,teamAdminData:f.default,twoFactorAuthenticationEnableFlow:U.twoFactorAuthenticationEnableFlow,twoFactorAuthenticationDisableFlow:M.twoFactorAuthenticationDisableFlow,userActivity:b.default,userAutofillCorrections:x.default,vaultReport:w.default,vpnData:V.VPNReducers,importPersonalData:H.ImportDataStateReducer,secureFileStorageState:W.SecureFileStorageReducer}),T=(0,n.partialRight)(m,[r]),k=(0,n.partialRight)(z,[r]);return(0,n.pipe)(t.userSessionRootReducer,k,T)(e,r)}},27339:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadAnonymousPartnerId=t.loadSdkAuthentication=t.saveStyxKeys=t.saveAppKeys=t.saveDashlaneServerDeltaTimestamp=t.LOAD_ANONYMOUS_PARTNER_ID=t.LOAD_CLIENT_AUTHENTICATION_DATA=t.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP=t.SAVE_STYX_KEYS=t.SAVE_APP_KEYS=void 0;const o=r(36109);t.SAVE_APP_KEYS="SAVE_APP_KEYS",t.SAVE_STYX_KEYS="SAVE_STYX_KEYS",t.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP="SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP",t.LOAD_CLIENT_AUTHENTICATION_DATA="LOAD_CLIENT_AUTHENTICATION_DATA",t.LOAD_ANONYMOUS_PARTNER_ID="LOAD_ANONYMOUS_PARTNER_ID";t.saveDashlaneServerDeltaTimestamp=e=>({type:t.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP,dashlaneServerDeltaTimestamp:Math.round((0,o.getUnixTimestamp)()-e)});t.saveAppKeys=e=>({type:t.SAVE_APP_KEYS,appKeys:e});t.saveStyxKeys=e=>({type:t.SAVE_STYX_KEYS,styxKeys:e});t.loadSdkAuthentication=e=>({type:t.LOAD_CLIENT_AUTHENTICATION_DATA,data:e});t.loadAnonymousPartnerId=e=>({type:t.LOAD_ANONYMOUS_PARTNER_ID,anonymousPartnerId:e})},24829:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySdkAuthentication=void 0;const o=r(27339);function n(){return{anonymousPartnerId:null,appKeys:null,dashlaneServerDeltaTimestamp:null,styxKeys:null}}t.getEmptySdkAuthentication=n,t.default=(e={anonymousPartnerId:null,appKeys:null,dashlaneServerDeltaTimestamp:null,styxKeys:null},t)=>{switch(t.type){case o.SAVE_APP_KEYS:return{...e,appKeys:t.appKeys};case o.SAVE_STYX_KEYS:return{...e,styxKeys:t.styxKeys};case o.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP:return{...e,dashlaneServerDeltaTimestamp:t.dashlaneServerDeltaTimestamp};case o.LOAD_CLIENT_AUTHENTICATION_DATA:return{...e,...t.data};case o.LOAD_ANONYMOUS_PARTNER_ID:return{...e,...t};default:return e}}},3991:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.secureFileStartCipheringAction=t.secureFileUploadErrorAction=t.secureFileUploadChunkAction=t.secureFileUploadClearAction=t.secureFileUploadDoneAction=t.secureFileStartUploadAction=t.secureFileChunkTransferDoneAction=t.secureFileChunkReadyAction=t.secureFileStartDecipheringAction=t.secureFileDownloadErrorAction=t.secureFileDownloadChunkAction=t.secureFileStartDownloadAction=t.secureFileClearAction=t.secureFileSetStorageInfoAction=t.SECURE_FILE_START_CIPHERING=t.SECURE_FILE_UPLOAD_CHUNK=t.SECURE_FILE_UPLOAD_ERROR=t.SECURE_FILE_UPLOAD_CLEAR=t.SECURE_FILE_UPLOAD_DONE=t.SECURE_FILE_START_UPLOAD=t.SECURE_FILE_START_DECIPHERING=t.SECURE_FILE_DOWNLOAD_CHUNK=t.SECURE_FILE_DOWNLOAD_ERROR=t.SECURE_FILE_CHUNK_TRANSFER_DONE=t.SECURE_FILE_CHUNK_READY=t.SECURE_FILE_START_DOWNLOAD=t.SECURE_FILE_CLEAR=t.SECURE_FILE_SET_STORAGE_INFO=void 0,t.SECURE_FILE_SET_STORAGE_INFO="SECURE_FILE_SET_STORAGE_INFO",t.SECURE_FILE_CLEAR="SECURE_FILE_CLEAR",t.SECURE_FILE_START_DOWNLOAD="SECURE_FILE_START_DOWNLOAD",t.SECURE_FILE_CHUNK_READY="SECURE_FILE_CHUNK_READY",t.SECURE_FILE_CHUNK_TRANSFER_DONE="SECURE_FILE_CHUNK_TRANSFER_DONE",t.SECURE_FILE_DOWNLOAD_ERROR="SECURE_FILE_DOWNLOAD_ERROR",t.SECURE_FILE_DOWNLOAD_CHUNK="SECURE_FILE_DOWNLOAD_CHUNK",t.SECURE_FILE_START_DECIPHERING="SECURE_FILE_START_DECIPHERING",t.SECURE_FILE_START_UPLOAD="SECURE_FILE_START_UPLOAD",t.SECURE_FILE_UPLOAD_DONE="SECURE_FILE_UPLOAD_DONE",t.SECURE_FILE_UPLOAD_CLEAR="SECURE_FILE_UPLOAD_CLEAR",t.SECURE_FILE_UPLOAD_ERROR="SECURE_FILE_UPLOAD_ERROR",t.SECURE_FILE_UPLOAD_CHUNK="SECURE_FILE_UPLOAD_CHUNK",t.SECURE_FILE_START_CIPHERING="SECURE_FILE_START_CIPHERING";t.secureFileSetStorageInfoAction=e=>({type:t.SECURE_FILE_SET_STORAGE_INFO,quota:e});t.secureFileClearAction=e=>({type:t.SECURE_FILE_CLEAR,downloadKey:e});t.secureFileStartDownloadAction=(e,r)=>({type:t.SECURE_FILE_START_DOWNLOAD,downloadKey:e,contentLength:r});t.secureFileDownloadChunkAction=(e,r)=>({type:t.SECURE_FILE_DOWNLOAD_CHUNK,bytesReceived:r,downloadKey:e});t.secureFileDownloadErrorAction=e=>({type:t.SECURE_FILE_DOWNLOAD_ERROR,downloadKey:e});t.secureFileStartDecipheringAction=e=>({type:t.SECURE_FILE_START_DECIPHERING,downloadKey:e});t.secureFileChunkReadyAction=(e,r)=>({type:t.SECURE_FILE_CHUNK_READY,downloadKey:e,chunks:r});t.secureFileChunkTransferDoneAction=e=>({type:t.SECURE_FILE_CHUNK_TRANSFER_DONE,downloadKey:e});t.secureFileStartUploadAction=e=>({type:t.SECURE_FILE_START_UPLOAD,contentLength:e});t.secureFileUploadDoneAction=()=>({type:t.SECURE_FILE_UPLOAD_DONE});t.secureFileUploadClearAction=()=>({type:t.SECURE_FILE_UPLOAD_CLEAR});t.secureFileUploadChunkAction=e=>({type:t.SECURE_FILE_UPLOAD_CHUNK,bytesSent:e});t.secureFileUploadErrorAction=()=>({type:t.SECURE_FILE_UPLOAD_ERROR});t.secureFileStartCipheringAction=()=>({type:t.SECURE_FILE_START_CIPHERING})},8682:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(55786),t),n(r(3991),t)},24239:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySecureFileStorageState=t.SecureFileStorageReducer=void 0;const o=r(4685),n=r(8682),a=r(3991),i=(e,t,r)=>({...e,downloads:{...{[t]:{...r}}}}),s={downloads:{},upload:{status:o.FileUploadStatus.None,bytesSent:0,contentLength:0},quota:{max:0,remaining:0}};t.SecureFileStorageReducer=(e=s,t)=>{switch(t.type){case a.SECURE_FILE_SET_STORAGE_INFO:return{...e,quota:t.quota};case n.SECURE_FILE_CLEAR:{const r=(t.downloadKey?e.downloads[t.downloadKey]:void 0)?{...e.downloads,[t.downloadKey]:void 0}:s.downloads;return{...e,downloads:r,upload:s.upload}}case a.SECURE_FILE_START_DOWNLOAD:return i(e,t.downloadKey,{status:o.FileDownloadStatus.Initial,contentLength:t.contentLength,bytesReceived:0});case a.SECURE_FILE_DOWNLOAD_CHUNK:{const r=e.downloads[t.downloadKey];if(!r)return e;const n=r.status===o.FileDownloadStatus.Downloading?r.bytesReceived:0,a=r.status===o.FileDownloadStatus.Downloading||r.status===o.FileDownloadStatus.Initial?r.contentLength:0;return i(e,t.downloadKey,{status:o.FileDownloadStatus.Downloading,bytesReceived:n+t.bytesReceived,contentLength:a})}case a.SECURE_FILE_START_DECIPHERING:return e.downloads[t.downloadKey]?i(e,t.downloadKey,{status:o.FileDownloadStatus.Deciphering}):e;case a.SECURE_FILE_DOWNLOAD_ERROR:return i(e,t.downloadKey,{status:o.FileDownloadStatus.Error});case n.SECURE_FILE_CHUNK_READY:{const r=e.downloads[t.downloadKey];if(!r)return e;const{chunks:n,currentChunkIndex:a}=(null==r?void 0:r.status)===o.FileDownloadStatus.ChunkReady?{chunks:r.chunks,currentChunkIndex:r.currentChunkIndex+1}:{chunks:t.chunks,currentChunkIndex:0};return i(e,t.downloadKey,a===n.length?{status:o.FileDownloadStatus.TransferComplete}:{status:o.FileDownloadStatus.ChunkReady,currentChunkIndex:a,chunks:n})}case n.SECURE_FILE_CHUNK_TRANSFER_DONE:{const r=e.downloads[t.downloadKey];if(!r)return e;const n=(null==r?void 0:r.status)===o.FileDownloadStatus.ChunkReady?r.chunks:void 0;return i(e,t.downloadKey,{status:o.FileDownloadStatus.ChunkDownloaded,chunks:n})}case a.SECURE_FILE_START_UPLOAD:return{...e,upload:{...e.upload,status:o.FileUploadStatus.Initial,contentLength:t.contentLength,bytesSent:0}};case a.SECURE_FILE_UPLOAD_CHUNK:{const r=e.upload;if(0===r.contentLength)return e;const n=r.bytesSent+t.bytesSent;return{...e,upload:{...e.upload,status:o.FileUploadStatus.Uploading,bytesSent:n<r.contentLength?n:r.bytesSent}}}case a.SECURE_FILE_START_CIPHERING:return{...e,upload:{...e.upload,status:o.FileUploadStatus.Ciphering}};case a.SECURE_FILE_UPLOAD_ERROR:return{...e,upload:{...e.upload,status:o.FileUploadStatus.Error}};case a.SECURE_FILE_UPLOAD_DONE:return 0===e.upload.contentLength?e:{...e,upload:{bytesSent:0,contentLength:0,status:o.FileUploadStatus.Done}};case n.SECURE_FILE_UPLOAD_CLEAR:return{...e,upload:{bytesSent:0,contentLength:0,status:o.FileUploadStatus.None}};default:return e}};t.getEmptySecureFileStorageState=()=>s},55786:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},75897:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateSessionDidOpen=t.pairingSucceeded=t.updatePublicUserId=t.updateDeviceAnalyticsId=t.updateUserAnalyticsId=t.updateAnalyticsIds=t.loadAnalyticsIds=t.updateIsRemoteKeyActivated=t.updateIsLocalKeyMigrationRequired=t.updateIsLocalKeyActivated=t.updateSettingsForMPValidation=t.updateCryptoKwc3FixedSalt=t.updateLastMasterPasswordCheck=t.updateMasterPassword=t.updateServerKey=t.loadSessionKeys=t.updateKeyPair=t.rememberMasterPasswordUpdated=t.UPDATE_SESSION_DID_OPEN=t.PAIRING_SUCCEEDED=t.LOAD_ANALYTICS_IDS=t.UPDATE_PUBLIC_USER_ID=t.UPDATE_DEVICE_ANALYTICS_ID=t.UPDATE_USER_ANALYTICS_ID=t.UPDATE_ANALYTICS_IDS=t.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED=t.UPDATE_IS_REMOTE_KEY_ACTIVATED=t.UPDATE_IS_LOCAL_KEY_ACTIVATED=t.UPDATE_SETTINGS_FOR_MP_VALIDATION=t.USE_NEW_AUTH_API=t.LOAD_SESSION_KEYS=t.UPDATE_CRYPTO_KWC3_FIXED_SALT=t.UPDATE_LAST_MASTER_PASSWORD_CHECK=t.UPDATE_SERVER_KEY=t.UPDATE_MASTER_PASSWORD=t.UPDATE_KEY_PAIR=t.REMEMBER_MASTER_PASSWORD_UPDATED=void 0,t.REMEMBER_MASTER_PASSWORD_UPDATED="REMEMBER_MASTER_PASSWORD_UPDATED",t.UPDATE_KEY_PAIR="UPDATE_KEY_PAIR",t.UPDATE_MASTER_PASSWORD="UPDATE_MASTER_PASSWORD",t.UPDATE_SERVER_KEY="UPDATE_SERVER_KEY",t.UPDATE_LAST_MASTER_PASSWORD_CHECK="UPDATE_LAST_MASTER_PASSWORD_CHECK",t.UPDATE_CRYPTO_KWC3_FIXED_SALT="UPDATE_CRYPTO_KWC3_FIXED_SALT",t.LOAD_SESSION_KEYS="LOAD_SESSION_KEYS",t.USE_NEW_AUTH_API="USE_NEW_AUTH_API",t.UPDATE_SETTINGS_FOR_MP_VALIDATION="UPDATE_SETTINGS_FOR_MP_VALIDATION",t.UPDATE_IS_LOCAL_KEY_ACTIVATED="UPDATE_IS_LOCAL_KEY_ACTIVATED",t.UPDATE_IS_REMOTE_KEY_ACTIVATED="UPDATE_IS_REMOTE_KEY_ACTIVATED",t.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED="UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED",t.UPDATE_ANALYTICS_IDS="UPDATE_ANALYTICS_IDS",t.UPDATE_USER_ANALYTICS_ID="UPDATE_USER_ANALYTICS_ID",t.UPDATE_DEVICE_ANALYTICS_ID="UPDATE_DEVICE_ANALYTICS_ID",t.UPDATE_PUBLIC_USER_ID="UPDATE_PUBLIC_USER_ID",t.LOAD_ANALYTICS_IDS="LOAD_ANALYTICS_IDS",t.PAIRING_SUCCEEDED="PAIRING_SUCCEEDED",t.UPDATE_SESSION_DID_OPEN="UPDATE_SESSION_DID_OPEN";t.rememberMasterPasswordUpdated=e=>({type:t.REMEMBER_MASTER_PASSWORD_UPDATED,rememberMasterPassword:e});t.updateKeyPair=e=>({type:t.UPDATE_KEY_PAIR,keyPair:e});t.loadSessionKeys=e=>({type:t.LOAD_SESSION_KEYS,sessionKeys:e});t.updateServerKey=e=>({type:t.UPDATE_SERVER_KEY,serverKey:e||""});t.updateMasterPassword=e=>({type:t.UPDATE_MASTER_PASSWORD,masterPassword:e});t.updateLastMasterPasswordCheck=()=>({type:t.UPDATE_LAST_MASTER_PASSWORD_CHECK});t.updateCryptoKwc3FixedSalt=e=>({type:t.UPDATE_CRYPTO_KWC3_FIXED_SALT,cryptoKwc3FixedSalt:e});t.updateSettingsForMPValidation=e=>({type:t.UPDATE_SETTINGS_FOR_MP_VALIDATION,settings:e});t.updateIsLocalKeyActivated=e=>({type:t.UPDATE_IS_LOCAL_KEY_ACTIVATED,isLocalKeyActivated:e});t.updateIsLocalKeyMigrationRequired=e=>({type:t.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED,isLocalKeyMigrationRequired:e});t.updateIsRemoteKeyActivated=e=>({type:t.UPDATE_IS_REMOTE_KEY_ACTIVATED,isRemoteKeyActivated:e});t.loadAnalyticsIds=e=>({type:t.LOAD_ANALYTICS_IDS,userAnalyticsId:e.userAnalyticsId,deviceAnalyticsId:e.deviceAnalyticsId});t.updateAnalyticsIds=(e,r)=>({type:t.UPDATE_ANALYTICS_IDS,userAnalyticsId:e,deviceAnalyticsId:r});t.updateUserAnalyticsId=e=>({type:t.UPDATE_USER_ANALYTICS_ID,userAnalyticsId:e});t.updateDeviceAnalyticsId=e=>({type:t.UPDATE_DEVICE_ANALYTICS_ID,deviceAnalyticsId:e});t.updatePublicUserId=e=>({type:t.UPDATE_PUBLIC_USER_ID,publicUserId:e});t.pairingSucceeded=e=>({type:t.PAIRING_SUCCEEDED,pairingId:e});t.updateSessionDidOpen=e=>({type:t.UPDATE_SESSION_DID_OPEN,didOpen:e})},7511:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySession=void 0;const o=r(1997),n=r(1005),a=r(75897),i=r(53667);function s(){return{sessionId:null,rememberMasterPassword:null,masterPassword:null,lastMasterPasswordCheck:0,serverKey:"",keyPair:null,cryptoKwc3FixedSalt:null,sessionKeys:null,settingsForMPValidation:null,isLocalKeyActivated:!1,isRemoteKeyActivated:!1,isLocalKeyMigrationRequired:!1,analyticsIds:{userAnalyticsId:"",deviceAnalyticsId:""},publicUserId:"",pairingId:null,didOpen:!1}}t.getEmptySession=s,t.default=(e={sessionId:null,rememberMasterPassword:null,masterPassword:null,lastMasterPasswordCheck:0,serverKey:"",keyPair:null,cryptoKwc3FixedSalt:null,sessionKeys:null,settingsForMPValidation:null,isLocalKeyActivated:!1,isRemoteKeyActivated:!1,isLocalKeyMigrationRequired:!1,analyticsIds:{userAnalyticsId:"",deviceAnalyticsId:""},publicUserId:"",pairingId:null,didOpen:!1},t)=>{switch(t.type){case n.OPEN_SESSION:return{...e,sessionId:(0,o.default)(),lastMasterPasswordCheck:Date.now()};case a.UPDATE_KEY_PAIR:return{...e,keyPair:t.keyPair};case a.REMEMBER_MASTER_PASSWORD_UPDATED:return{...e,rememberMasterPassword:t.rememberMasterPassword};case a.UPDATE_MASTER_PASSWORD:return{...e,masterPassword:t.masterPassword};case a.LOAD_SESSION_KEYS:return{...e,sessionKeys:t.sessionKeys};case a.UPDATE_SERVER_KEY:return{...e,serverKey:t.serverKey};case a.UPDATE_LAST_MASTER_PASSWORD_CHECK:return{...e,lastMasterPasswordCheck:Date.now()};case a.UPDATE_CRYPTO_KWC3_FIXED_SALT:return{...e,cryptoKwc3FixedSalt:t.cryptoKwc3FixedSalt};case i.CONFIRM_USER_AUTHENTICATION:return{...e,settingsForMPValidation:null};case a.UPDATE_SETTINGS_FOR_MP_VALIDATION:return{...e,settingsForMPValidation:t.settings};case a.UPDATE_IS_LOCAL_KEY_ACTIVATED:return{...e,isLocalKeyActivated:t.isLocalKeyActivated};case a.UPDATE_IS_REMOTE_KEY_ACTIVATED:return{...e,isRemoteKeyActivated:t.isRemoteKeyActivated};case a.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED:return{...e,isLocalKeyMigrationRequired:t.isLocalKeyMigrationRequired};case a.LOAD_ANALYTICS_IDS:case a.UPDATE_ANALYTICS_IDS:return{...e,analyticsIds:{userAnalyticsId:t.userAnalyticsId,deviceAnalyticsId:t.deviceAnalyticsId}};case a.UPDATE_USER_ANALYTICS_ID:return{...e,analyticsIds:{...e.analyticsIds,userAnalyticsId:t.userAnalyticsId}};case a.UPDATE_DEVICE_ANALYTICS_ID:return{...e,analyticsIds:{...e.analyticsIds,deviceAnalyticsId:t.deviceAnalyticsId}};case a.UPDATE_PUBLIC_USER_ID:return{...e,publicUserId:t.publicUserId};case a.PAIRING_SUCCEEDED:return{...e,pairingId:t.pairingId};case a.UPDATE_SESSION_DID_OPEN:return{...e,didOpen:t.didOpen};default:return e}}},33360:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userGroupsUpdated=t.sharingDataUpdated=t.USER_GROUPS_UPDATED=t.SHARING_DATA_ITEMS_UPDATED=void 0,t.SHARING_DATA_ITEMS_UPDATED="SHARING_DATA_ITEMS_UPDATED",t.USER_GROUPS_UPDATED="USER_GROUPS_UPDATED";t.sharingDataUpdated=e=>({type:t.SHARING_DATA_ITEMS_UPDATED,sharingData:e});t.userGroupsUpdated=e=>({type:t.USER_GROUPS_UPDATED,userGroups:e})},56352:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyState=void 0;const o=r(33360);function n(){return{items:[],itemGroups:[],userGroups:[]}}t.default=(e={items:[],itemGroups:[],userGroups:[]},t)=>{switch(t.type){case o.SHARING_DATA_ITEMS_UPDATED:const{sharingData:r}=t;return{...r};case o.USER_GROUPS_UPDATED:const{userGroups:n}=t;return{...e,userGroups:n};default:return e}},t.getEmptyState=n},68752:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySharingSyncState=t.setElementsAsSeenAction=t.SET_ELEMENTS_AS_SEEN=t.setAllPendingAction=t.SET_ALL_PENDING=t.updateAllPendingAction=t.UPDATE_ALL_PENDING=void 0,t.UPDATE_ALL_PENDING="UPDATE_ALL_PENDING";t.updateAllPendingAction=(e,r)=>({type:t.UPDATE_ALL_PENDING,pendingItemGroups:e,pendingUserGroups:r}),t.SET_ALL_PENDING="SET_ALL_PENDING";t.setAllPendingAction=(e,r)=>({type:t.SET_ALL_PENDING,pendingItemGroups:e,pendingUserGroups:r}),t.SET_ELEMENTS_AS_SEEN="SET_ELEMENTS_AS_SEEN";function r(){return{pendingItemGroups:[],pendingUserGroups:[]}}function o(e,t,r){const o=t.map((e=>e[r])),n=e.map((e=>e[r])),a=e.filter((e=>o.includes(e[r])));return[...t.filter((e=>!(e=>n.includes(e[r]))(e))),...a.map((e=>{const o=t.find((t=>t[r]===e[r]));return o?{...o,seen:e.seen}:e}))]}function n(e,t,r){return e.map((e=>t.includes(e[r])?{...e,seen:!0}:e))}t.setElementsAsSeenAction=(e,r)=>({type:t.SET_ELEMENTS_AS_SEEN,pendingItemGroupIds:e,pendingUserGroupIds:r}),t.default=(e={pendingItemGroups:[],pendingUserGroups:[]},r)=>{switch(r.type){case t.SET_ELEMENTS_AS_SEEN:{const{pendingUserGroupIds:t,pendingItemGroupIds:o}=r;return{pendingUserGroups:n(e.pendingUserGroups,t,"groupId"),pendingItemGroups:n(e.pendingItemGroups,o,"itemGroupId")}}case t.UPDATE_ALL_PENDING:{const{pendingUserGroups:t,pendingItemGroups:n}=r,a=o(e.pendingItemGroups,n,"itemGroupId");return{pendingUserGroups:o(e.pendingUserGroups,t,"groupId"),pendingItemGroups:a}}case t.SET_ALL_PENDING:{const{pendingUserGroups:e,pendingItemGroups:t}=r;return{pendingItemGroups:t,pendingUserGroups:e}}default:return e}},t.getEmptySharingSyncState=r},36588:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.spaceDataUpdated=t.spacesUpdated=t.SPACE_DATA_UPDATED=t.SPACES_UPDATED=void 0,t.SPACES_UPDATED="SPACES_UPDATED",t.SPACE_DATA_UPDATED="SPACE_DATA_UPDATED";t.spacesUpdated=e=>({type:t.SPACES_UPDATED,spaces:e});t.spaceDataUpdated=e=>({type:t.SPACE_DATA_UPDATED,spaceData:e})},80637:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySpaceDataState=void 0;const o=r(36588);function n(){return{spaces:[]}}t.default=(e={spaces:[]},t)=>{switch(t.type){case o.SPACES_UPDATED:const r=t;return{...e,spaces:(r.spaces||[]).map((e=>({teamId:e.teamId,details:e})))};case o.SPACE_DATA_UPDATED:return{...t.spaceData};default:return e}},t.getEmptySpaceDataState=n},84335:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetSSOSettings=t.storeSSOSettings=void 0;const o=r(59241);t.storeSSOSettings=e=>({type:o.SET_SSO_SETTINGS,data:e});t.resetSSOSettings=()=>({type:o.SET_SSO_SETTINGS,data:(0,o.getEmptySSOSettings)()})},59241:(e,t)=>{function r(){return{ssoUser:!1,serviceProviderUrl:"",ssoServiceProviderKey:"",migration:void 0,ssoToken:""}}Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySSOSettings=t.SET_SSO_SETTINGS=void 0,t.SET_SSO_SETTINGS="SET_SSO_SETTINGS",t.default=(e=r(),o)=>o.type===t.SET_SSO_SETTINGS?Object.assign({},e,{...o.data}):e,t.getEmptySSOSettings=r},16716:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.syncFailure=t.syncSuccess=t.syncStarted=t.SYNC_FAILURE=t.SYNC_SUCCESS=t.SYNC_STARTED=void 0,t.SYNC_STARTED="SYNC_STARTED",t.SYNC_SUCCESS="SYNC_SUCCESS",t.SYNC_FAILURE="SYNC_FAILURE";t.syncStarted=()=>({type:t.SYNC_STARTED,isInProgress:!0,startTime:Date.now()});t.syncSuccess=e=>({type:t.SYNC_SUCCESS,isInProgress:!1,isUploadEnabled:e});t.syncFailure=()=>({type:t.SYNC_FAILURE,isInProgress:!1})},78694:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySyncState=void 0;const o=r(16716),n=r(1064);function a(){return{isUploadEnabled:!1,syncIntervalTimeMs:3e5,status:n.SyncStatuses.READY}}t.getEmptySyncState=a,t.default=(e=a(),t)=>{switch(t.type){case o.SYNC_STARTED:return{...e,startTime:t.startTime,status:n.SyncStatuses.IN_PROGRESS};case o.SYNC_FAILURE:return{...e,status:n.SyncStatuses.FAILURE};case o.SYNC_SUCCESS:return{...e,status:n.SyncStatuses.SUCCESS,isUploadEnabled:t.isUploadEnabled};default:return e}}},37089:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.specialItemGroupUpdated=t.userGroupAdminItemCreated=t.teamAdminDataUpdated=t.userGroupsDeleted=t.userGroupsCreated=t.userGroupsUpdated=t.SPECIAL_ITEM_GROUP_UPDATED=t.GROUP_ADMIN_ITEM_CREATED=t.TEAM_ADMIN_DATA_UPDATED=t.TEAM_ADMIN_USER_GROUPS_DELETED=t.TEAM_ADMIN_USER_GROUPS_CREATED=t.TEAM_ADMIN_USER_GROUPS_UPDATED=void 0,t.TEAM_ADMIN_USER_GROUPS_UPDATED="TEAM_ADMIN_USER_GROUPS_UPDATED",t.TEAM_ADMIN_USER_GROUPS_CREATED="TEAM_ADMIN_USER_GROUPS_CREATED",t.TEAM_ADMIN_USER_GROUPS_DELETED="TEAM_ADMIN_USER_GROUPS_DELETED",t.TEAM_ADMIN_DATA_UPDATED="TEAM_ADMIN_DATA_UPDATED",t.GROUP_ADMIN_ITEM_CREATED="GROUP_ADMIN_ITEM_CREATED",t.SPECIAL_ITEM_GROUP_UPDATED="SPECIAL_ITEM_GROUP_UPDATED";t.userGroupsUpdated=(e,r)=>({type:t.TEAM_ADMIN_USER_GROUPS_UPDATED,teamId:e,userGroups:r});t.userGroupsCreated=(e,r)=>({type:t.TEAM_ADMIN_USER_GROUPS_CREATED,teamId:e,userGroups:r});t.userGroupsDeleted=(e,r)=>({type:t.TEAM_ADMIN_USER_GROUPS_DELETED,teamId:e,userGroups:r});t.teamAdminDataUpdated=e=>({type:t.TEAM_ADMIN_DATA_UPDATED,teamAdminData:e});t.userGroupAdminItemCreated=(e,r)=>({type:t.GROUP_ADMIN_ITEM_CREATED,teamId:e,userGroupAdminItem:r});t.specialItemGroupUpdated=(e,r)=>({type:t.SPECIAL_ITEM_GROUP_UPDATED,teamId:e,specialItemGroup:r})},50200:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyState=void 0;const o=r(37089);function n(e,t){const r={};return Object.keys(e).forEach((t=>{r[t]=e[t]})),Object.keys(t).forEach((e=>{r[e]=Object.assign({},r[e],t[e])})),r}function a(){return{teams:{}}}t.default=(e={teams:{}},t)=>{switch(t.type){case o.TEAM_ADMIN_DATA_UPDATED:const{teamAdminData:i}=t;return{teams:n(e.teams,i.teams)};case o.TEAM_ADMIN_USER_GROUPS_UPDATED:const s=t;return{teams:n(e.teams,{[s.teamId]:{teamId:s.teamId,userGroups:s.userGroups}})};case o.TEAM_ADMIN_USER_GROUPS_CREATED:const c=t,d=e.teams[c.teamId]?e.teams[c.teamId].userGroups:[];return{teams:n(e.teams,{[c.teamId]:{teamId:c.teamId,userGroups:d.concat(c.userGroups)}})};case o.TEAM_ADMIN_USER_GROUPS_DELETED:const l=t,u=l.userGroups.map((e=>e.groupId)),p=e.teams[l.teamId]?e.teams[l.teamId].userGroups:[];return{teams:n(e.teams,{[l.teamId]:{teamId:l.teamId,userGroups:p.filter((e=>!u.includes(e.groupId)))}})};case o.GROUP_ADMIN_ITEM_CREATED:const S=t,g=(r=e.teams,a=S.teamId,r[a]&&r[a].userGroupAdminItems||[]);return{teams:n(e.teams,{[S.teamId]:{teamId:S.teamId,userGroupAdminItems:g.concat([S.userGroupAdminItem])}})};case o.SPECIAL_ITEM_GROUP_UPDATED:const m=t;return{teams:n(e.teams,{[m.teamId]:{teamId:m.teamId,specialItemGroup:t.specialItemGroup}})};default:return e}var r,a},t.getEmptyState=a},39958:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userActivityLastSentAtUpdated=void 0;const o=r(7158);t.userActivityLastSentAtUpdated=e=>({type:o.LAST_SENT_AT_UPDATED,lastSentAt:e})},56753:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyUserActivityState=void 0;const o=r(7158);function n(){return{lastSentAt:void 0}}t.default=(e=n(),t)=>t.type===o.LAST_SENT_AT_UPDATED?{...e,lastSentAt:t.lastSentAt}:e,t.getEmptyUserActivityState=n},7158:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LAST_SENT_AT_UPDATED=void 0,t.LAST_SENT_AT_UPDATED="LAST_SENT_AT_UPDATED"},4140:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vaultReportLastSentAtUpdated=void 0;const o=r(46753);t.vaultReportLastSentAtUpdated=e=>({type:o.LAST_SENT_AT_UPDATED,lastSentAt:e})},98031:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyVaultReportState=void 0;const o=r(46753);function n(){return{lastSentAt:void 0}}t.default=(e=n(),t)=>t.type===o.LAST_SENT_AT_UPDATED?{...e,lastSentAt:t.lastSentAt}:e,t.getEmptyVaultReportState=n},46753:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LAST_SENT_AT_UPDATED=void 0,t.LAST_SENT_AT_UPDATED="LAST_SENT_AT_UPDATED"},55149:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeFeatureFlippingUsageLogs=t.sendFeatureFlippingUsageLogs=void 0;const o=r(97211),n=r(73442);t.sendFeatureFlippingUsageLogs=async function(e,t){const r=o.UsageLogCode.USAGE_FEATURE_FLIPPING,a=t.map((e=>({code:r,content:e})));return(0,n.sendUsageLog)(e,a)},t.makeFeatureFlippingUsageLogs=function(e,t){const r=Object.keys(e),o=Object.keys(t),n=new Set([...r,...o]);return Array.from(n.values()).filter((r=>Boolean(e[r])!==Boolean(t[r]))).map((e=>({type:e,status:t[e]?"true":"false"})))}},24049:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(9451);t.bootstrap=e=>{e.register(o.config)}},10693:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forceSyncHandler=void 0;const o=r(19935);t.forceSyncHandler=async function({sessionService:e}){await e.getInstance().user.attemptSync(o.Trigger.Manual)}},18496:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setCredentialSearchOrderHandler=void 0;const o=r(6261);t.setCredentialSearchOrderHandler=(e,t)=>(e.storeService.dispatch((0,o.credentialSearchOrderUpdated)(t.order)),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},40653:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0,n(r(1064),t);var a=r(25050);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return a.setupSubscriptions}});var i=r(24049);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return i.bootstrap}})},91033:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getServiceProviderUrl$=t.emitServiceProviderUrl=t.webOnboardingMode$=t.premiumStatus$=t.syncInProgress$=t.syncInfo$=t.didOpen$=void 0;const o=r(18948),n=r(3343),a=r(8153);t.didOpen$=()=>(0,o.pipe)((0,n.map)(a.didOpenSelector),(0,n.distinctUntilChanged)());t.syncInfo$=()=>(0,o.pipe)((0,n.map)(a.syncSelector),(0,n.distinctUntilChanged)());t.syncInProgress$=()=>(0,o.pipe)((0,n.map)(a.syncIsInProgressSelector),(0,n.distinctUntilChanged)());t.premiumStatus$=()=>(0,o.pipe)((0,n.map)(a.premiumStatusSelector),(0,n.distinctUntilChanged)());t.webOnboardingMode$=()=>(0,o.pipe)((0,n.map)(a.webOnboardingModeSelector),(0,n.distinctUntilChanged)());const i=new o.Subject;t.emitServiceProviderUrl=e=>i.next(e);t.getServiceProviderUrl$=()=>i},26553:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updatePremiumChurningDismissDateHandler=t.SendTokenStatus=void 0;var o=r(89593);Object.defineProperty(t,"SendTokenStatus",{enumerable:!0,get:function(){return o.SendTokenStatus}});const n=r(6261);t.updatePremiumChurningDismissDateHandler=e=>{const t=new Date;return e.storeService.dispatch((0,n.premiumChurningDismissDateUpdated)(t.getTime())),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve()}},49914:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetProtectedItemAutofillTimerHandler=t.validateMasterPasswordHandler=t.validateMasterPassword=t.validateToken=t.convertTokenToAuthTicket=t.dashlaneAuthenticatorGetAuthTicket=t.handlePerformValidationError=t.SendTokenStatus=void 0;const o=r(15876);var n=r(89593);Object.defineProperty(t,"SendTokenStatus",{enumerable:!0,get:function(){return n.SendTokenStatus}});const a=r(40914),i=r(1064),s=r(68079),c=r(75897),d=r(21155),l=(e,t)=>({success:!1,error:{code:e,message:t}});function u(e,t,r){if(!(0,o.isApiErrorOfType)(o.BusinessError,e))return l(i.AuthenticationCode.REGISTER_DEVICE_FAILED);const n=e.code;switch(n){case o.VerificationFailed:return l(t?i.AuthenticationCode.OTP_NOT_VALID:r?i.AuthenticationCode.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED:i.AuthenticationCode.TOKEN_NOT_VALID);case o.InvalidOTPBlocked:return l(i.AuthenticationCode.OTP_TOO_MANY_ATTEMPTS);case o.InvalidOTPAlreadyUsed:return l(i.AuthenticationCode.OTP_ALREADY_USED);case o.AccountBlockedContactSupport:return l(i.AuthenticationCode.TOKEN_ACCOUNT_LOCKED);case o.VerificationTimeout:return l(i.AuthenticationCode.TOKEN_EXPIRED);case o.VerificationRequiresRequest:return l(i.AuthenticationCode.TOKEN_TOO_MANY_ATTEMPTS);case o.VerificationMethodDisabled:return l(i.AuthenticationCode.REGISTER_DEVICE_FAILED);case o.InvalidSsoToken:case o.B2bSsoUserNotFound:return l(i.AuthenticationCode.SSO_VERIFICATION_FAILED);case o.UserHasNoActiveAuthenticator:return l(i.AuthenticationCode.NO_ACTIVE_AUTHENTICATOR);case o.FailedToContactAuthenticatorDevice:return l(i.AuthenticationCode.FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE);default:return l(i.AuthenticationCode.BUSINESS_ERROR,`Unexpected business_error: ${n}`)}}t.handlePerformValidationError=u;t.dashlaneAuthenticatorGetAuthTicket=async(e,t)=>{var r,n;const{login:a}=e.getAccountInfo();e.dispatch((0,s.resetAuthTicketInfo)());try{const r=await(0,o.performDashlaneAuthenticatorVerification)(e,{login:a,deviceName:t});if((0,o.isApiError)(r))return u(r,!1,!0);const n=r.authTicket;return e.dispatch((0,s.updateAuthTicketInfo)({login:a,authTicket:n,date:Date.now()})),{success:!0,authTicket:n}}catch(e){if((null===(n=null===(r=e.getAdditionalInfo())||void 0===r?void 0:r.response)||void 0===n?void 0:n.status)===d.HttpStatusCode.GATEWAY_TIMEOUT)return u(o.verificationTimeoutError,!1,!0);throw e}};t.convertTokenToAuthTicket=async(e,t)=>{const{login:r}=e.getAccountInfo();let n,c;switch(e.dispatch((0,s.resetAuthTicketInfo)()),t.type){case"emailToken":if(!(0,o.isEmailTokenValid)(t.value))return l(i.AuthenticationCode.TOKEN_NOT_VALID);if(c=await(0,o.performEmailTokenVerification)(e,{login:r,token:t.value}),(0,o.isApiError)(c))return u(c);n=c.authTicket;break;case"extraDeviceToken":return(0,o.isExtraDeviceTokenValid)(t.value)?{success:!0,authTicket:void 0}:l(i.AuthenticationCode.TOKEN_NOT_VALID);case"sso":if(!t.value)return l(i.AuthenticationCode.TOKEN_NOT_VALID);if(c=await(0,o.performSsoVerification)(e,{login:r,ssoToken:t.value}),(0,o.isApiError)(c))return u(c);n=c.authTicket;break;case"otp":if(!t.value)return l(i.AuthenticationCode.TOKEN_NOT_VALID);if(c=await(0,o.performTotpVerification)(e,{login:r,otp:t.value}),(0,o.isApiError)(c))return u(c,!0);n=c.authTicket;break;default:(0,a.assertUnreachable)(t)}return e.dispatch((0,s.updateAuthTicketInfo)({login:r,authTicket:n,date:Date.now()})),{success:!0,authTicket:n}};t.validateToken=async(e,r)=>{const{storeService:o}=e;return(0,t.convertTokenToAuthTicket)(o,r)};t.validateMasterPassword=async(e,t,r)=>{const o=t.getInstance().isKey(e.getUserSession().serverKey,r);return o&&e.dispatch((0,c.updateLastMasterPasswordCheck)()),o};t.validateMasterPasswordHandler=async(e,r)=>{const{storeService:o,masterPasswordEncryptorService:n}=e;return await(0,t.validateMasterPassword)(o,n,r)};t.resetProtectedItemAutofillTimerHandler=e=>(e.storeService.dispatch((0,c.updateLastMasterPasswordCheck)()),Promise.resolve())},15443:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.recoveryIsOtpSelector=t.recoveryInProgressSelector=t.recoveryDataSelector=t.recoveryUkiSelector=void 0;t.recoveryUkiSelector=e=>e.userSession.recoveryData.recoveryUki;t.recoveryDataSelector=e=>e.userSession.recoveryData;t.recoveryInProgressSelector=e=>e.userSession.recoveryData.recoveryInProgress;t.recoveryIsOtpSelector=e=>{var t,r;const o=null!==(r=null===(t=e.userSession.recoveryData.verificationMethod[0])||void 0===t?void 0:t.type)&&void 0!==r?r:"";return["totp","duo_push","u2f"].includes(o)}},8153:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialSearchOrderSelector=t.analyticsInstallationIdSelector=t.isPaymentFailureChurningDismissedSelector=t.premiumChurningDismissDateSelector=t.lastMasterPasswordCheckSelector=t.didOpenSelector=t.publicUserIdSelector=t.analyticsIdsSelector=t.platformNameSelector=t.appVersionSelector=t.isAuthenticatedSelector=t.protectPasswordsSettingSelector=t.personalSettingsSelector=t.authTicketInfoSelector=t.sharingKeysSelector=t.sharingSyncSelector=t.recoveryKeySelector=t.accountRecoveryOptInSelector=t.userDefaultCryptoSelector=t.anonymousUserIdSelector=t.isLocalKeyMigrationRequiredSelector=t.isRemoteKeyActivatedSelector=t.serverKeySelector=t.spaceDisabledDomainsListSelector=t.isLocalKeyActivatedSelector=t.isOnboardingNotificationShowingSelector=t.webOnboardingModeSelector=t.masterPasswordValidationDataSelector=t.spacesSelector=t.userLoginSelector=t.masterPasswordSelector=t.masterPasswordAndServerKeySelector=t.userIdSelector=t.activeSpacesSelector=t.premiumStatusSelector=t.syncIsInProgressSelector=t.syncSelector=void 0;const o=r(32034),n=r(24555),a=r(66075),i=r(88478),s=r(54516),c=r(14247),d=r(18017),l=r(48157),u=r(1064),p=r(14122);t.syncSelector=e=>e.userSession.sync;t.syncIsInProgressSelector=e=>e.userSession.sync.status===u.SyncStatuses.IN_PROGRESS;t.premiumStatusSelector=e=>e.userSession.localSettings.premiumStatus;t.activeSpacesSelector=e=>{const r=(0,t.premiumStatusSelector)(e);return(r&&r.spaces||[]).filter((e=>"accepted"===e.status))};t.userIdSelector=e=>e.userSession.account.login;t.masterPasswordAndServerKeySelector=e=>{const{userSession:t}=e,{masterPassword:r,serverKey:o}=t.session;return{password:(0,n.utf8ToBase64)(r),serverKey:(0,n.utf8ToBase64)(o)}};t.masterPasswordSelector=e=>e.userSession.session.masterPassword;t.userLoginSelector=e=>e.userSession.account.login;t.spacesSelector=e=>e.userSession.spaceData.spaces;t.masterPasswordValidationDataSelector=e=>e.userSession.session.settingsForMPValidation;t.webOnboardingModeSelector=e=>e.userSession.localSettings.webOnboardingMode;t.isOnboardingNotificationShowingSelector=e=>{const r=(0,t.webOnboardingModeSelector)(e);return(0,a.isOnboardingNotificationShowing)(r)};t.isLocalKeyActivatedSelector=e=>e.userSession.session.isLocalKeyActivated;t.spaceDisabledDomainsListSelector=(0,o.createSelector)(t.spacesSelector,(e=>e.reduce(((e,t)=>{let r=[];return t&&t.details&&t.details.info&&t.details.info.autologinDomainDisabledArray&&(r=t.details.info.autologinDomainDisabledArray),[...e,...r]}),[])));t.serverKeySelector=e=>e.userSession.session.serverKey;t.isRemoteKeyActivatedSelector=e=>e.userSession.session.isRemoteKeyActivated;t.isLocalKeyMigrationRequiredSelector=e=>e.userSession.session.isLocalKeyMigrationRequired;t.anonymousUserIdSelector=e=>e.userSession.personalSettings.AnonymousUserId;t.userDefaultCryptoSelector=e=>e.userSession.personalSettings.CryptoUserPayload;t.accountRecoveryOptInSelector=e=>e.userSession.personalSettings.RecoveryOptIn||!1;t.recoveryKeySelector=e=>e.userSession.personalSettings.RecoveryKey;t.sharingSyncSelector=e=>e.userSession.sharingSync;t.sharingKeysSelector=e=>e.userSession.session.keyPair;t.authTicketInfoSelector=e=>e.userSession.authTicketInfo;t.personalSettingsSelector=e=>e.userSession.personalSettings;t.protectPasswordsSettingSelector=e=>{const t=(0,p.featuresSelector)(e),{SecuredDataShowPassword:r,ProtectPasswords:o}=e.userSession.personalSettings;return t.ptu_web_MPprotect_phase3?o:r};t.isAuthenticatedSelector=e=>e.userSession.account.isAuthenticated;t.appVersionSelector=e=>(0,i.platformInfoSelector)(e).appVersion;t.platformNameSelector=e=>(0,i.platformInfoSelector)(e).platformName;t.analyticsIdsSelector=e=>e.userSession.session.analyticsIds;t.publicUserIdSelector=e=>e.userSession.session.publicUserId;t.didOpenSelector=e=>e.userSession.session.didOpen;t.lastMasterPasswordCheckSelector=e=>e.userSession.session.lastMasterPasswordCheck;t.premiumChurningDismissDateSelector=e=>e.userSession.localSettings.premiumChurningDismissDate;t.isPaymentFailureChurningDismissedSelector=e=>{return t=e.userSession.localSettings.premiumChurningDismissDate,Date.now()-t>864e5;var t};t.analyticsInstallationIdSelector=(0,o.createSelector)(t.userLoginSelector,t.isAuthenticatedSelector,d.applicationBuildTypeSelector,((e,t,r)=>{const o=e&&(0,l.isInternalTestUser)(e)&&t;return r===c.ApplicationBuildType.DEV||r===c.ApplicationBuildType.QA||o?(0,s.getCommonAppSetting)("installationId"):null}));t.getCredentialSearchOrderSelector=e=>{var t;return null!==(t=e.userSession.localSettings.credentialSearchOrder)&&void 0!==t?t:u.CredentialSearchOrder.NAME}},8368:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSSOUserSelector=t.ssoMigrationInfoSelector=t.serviceProviderUrlSelector=t.ssoSettingsSelector=void 0;const o=r(8153),n=r(1064);t.ssoSettingsSelector=e=>e.userSession.ssoSettings;t.serviceProviderUrlSelector=e=>(0,t.ssoSettingsSelector)(e).serviceProviderUrl;t.ssoMigrationInfoSelector=e=>{const{migration:r,serviceProviderUrl:o,ssoToken:a}=(0,t.ssoSettingsSelector)(e);return{migration:a?n.SSOMigrationType.MP_TO_SSO_WITH_INFO:r,serviceProviderUrl:o}};t.isSSOUserSelector=e=>{const t=(0,o.activeSpacesSelector)(e);return t.length>0&&t[0].isSSOUser||!1}},25050:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(32234),n=r(12940),a=r(8153),i=r(88478),s=r(44428),c=r(30836),d=r(1574),l=r(82787),u=r(93267);t.setupSubscriptions=function(e,t){const{storeService:r,wsService:p,sessionService:S}=t;e.sessionOpened.on((()=>{r.dispatch((0,u.resetLoginStepInfo)());const e=r.getState(),t=(0,a.premiumStatusSelector)(e);0===(0,c.getUserMessagesByTypeSelector)(e,l.UserMessageTypes.TRIAL_EXPIRED).length&&(0,s.isTrialExpired)({premiumStatus:t})&&(r.dispatch((0,d.userMessageAdded)((0,s.createTrialExpiredUserMessage)())),S.getInstance().user.persistLocalSettings())})),e.sessionClosed.on((e=>{(0,o.triggerLoginStatusChanged)({loggedIn:!1,login:e.login})})),e.familyMemberLeft.on((async()=>{const e=(0,a.userLoginSelector)(r.getState()),t=(0,i.ukiSelector)(r.getState());await(0,n.refreshPremiumStatus)(r,p,e,t)}))}},1064:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CancelDashlaneAuthenticatorRegistration=t.CredentialSearchOrder=t.PersistData=t.SyncStatuses=t.AuthenticationCode=t.extractExtraDeviceToken=t.makeExtraDeviceToken=t.extractOTP=t.makeSsoToken=t.makeOTP=t.extractEmailToken=t.makeEmailToken=t.SSOMigrationType=void 0,function(e){e[e.MP_TO_SSO=0]="MP_TO_SSO",e[e.MP_TO_SSO_WITH_INFO=1]="MP_TO_SSO_WITH_INFO",e[e.SSO_TO_MP=2]="SSO_TO_MP"}(t.SSOMigrationType||(t.SSOMigrationType={}));t.makeEmailToken=e=>({type:"emailToken",value:e});t.extractEmailToken=e=>e.value;t.makeOTP=e=>({type:"otp",value:e});t.makeSsoToken=e=>({type:"sso",value:e});t.extractOTP=e=>e.value;t.makeExtraDeviceToken=e=>({type:"extraDeviceToken",value:e});t.extractExtraDeviceToken=e=>e.value,function(e){e[e.INVALID_LOGIN=0]="INVALID_LOGIN",e[e.EMPTY_LOGIN=1]="EMPTY_LOGIN",e[e.EMPTY_MASTER_PASSWORD=2]="EMPTY_MASTER_PASSWORD",e[e.EMPTY_ENCRYPTED_KEY=3]="EMPTY_ENCRYPTED_KEY",e[e.INVALID_ENCRYPTED_KEY=4]="INVALID_ENCRYPTED_KEY",e[e.EMPTY_TOKEN=5]="EMPTY_TOKEN",e[e.EMPTY_OTP=6]="EMPTY_OTP",e[e.SEND_TOKEN_FAILED=7]="SEND_TOKEN_FAILED",e[e.UKI_REGISTRATION_FAILED=8]="UKI_REGISTRATION_FAILED",e[e.REGISTER_DEVICE_FAILED=9]="REGISTER_DEVICE_FAILED",e[e.BUSINESS_ERROR=10]="BUSINESS_ERROR",e[e.USER_DOESNT_EXIST=11]="USER_DOESNT_EXIST",e[e.USER_DOESNT_EXIST_UNLIKELY_MX=12]="USER_DOESNT_EXIST_UNLIKELY_MX",e[e.USER_DOESNT_EXIST_INVALID_MX=13]="USER_DOESNT_EXIST_INVALID_MX",e[e.USER_UNAUTHORIZED=14]="USER_UNAUTHORIZED",e[e.WRONG_PASSWORD=15]="WRONG_PASSWORD",e[e.DATA_TAMPERED_ERROR=16]="DATA_TAMPERED_ERROR",e[e.LOGGEDIN=17]="LOGGEDIN",e[e.ASK_TOKEN=18]="ASK_TOKEN",e[e.ASK_OTP=19]="ASK_OTP",e[e.ASK_MASTER_PASSWORD=20]="ASK_MASTER_PASSWORD",e[e.USE_LOCAL_UKI=21]="USE_LOCAL_UKI",e[e.ASK_DASHLANE_AUTHENTICATOR=22]="ASK_DASHLANE_AUTHENTICATOR",e[e.OTP_NOT_VALID=23]="OTP_NOT_VALID",e[e.OTP_TOO_MANY_ATTEMPTS=24]="OTP_TOO_MANY_ATTEMPTS",e[e.OTP_ALREADY_USED=25]="OTP_ALREADY_USED",e[e.BACKUP_CODE_NOT_VALID=26]="BACKUP_CODE_NOT_VALID",e[e.TOKEN_NOT_VALID=27]="TOKEN_NOT_VALID",e[e.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED=28]="DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED",e[e.SERVER_KEY_MISSING=29]="SERVER_KEY_MISSING",e[e.TOKEN_LOCKED=30]="TOKEN_LOCKED",e[e.TOKEN_TOO_MANY_ATTEMPTS=31]="TOKEN_TOO_MANY_ATTEMPTS",e[e.TOKEN_ACCOUNT_LOCKED=32]="TOKEN_ACCOUNT_LOCKED",e[e.TOKEN_EXPIRED=33]="TOKEN_EXPIRED",e[e.NO_ACTIVE_AUTHENTICATOR=34]="NO_ACTIVE_AUTHENTICATOR",e[e.FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE=35]="FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE",e[e.DASHLANE_AUTHENTICATOR_ASKED_FOR_LOCAL_SESSION=36]="DASHLANE_AUTHENTICATOR_ASKED_FOR_LOCAL_SESSION",e[e.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED=37]="DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED",e[e.TOKEN_PROVIDED_FOR_LOCAL_SESSION=38]="TOKEN_PROVIDED_FOR_LOCAL_SESSION",e[e.DEVICE_ALREADY_REGISTERED=39]="DEVICE_ALREADY_REGISTERED",e[e.OTP_PROVIDED_FOR_LOCAL_NON_OTP_SESSION=40]="OTP_PROVIDED_FOR_LOCAL_NON_OTP_SESSION",e[e.DIFFERENT_LOGIN_PROVIDED_WITH_TOKEN_OR_OTP=41]="DIFFERENT_LOGIN_PROVIDED_WITH_TOKEN_OR_OTP",e[e.UNKNOWN_SYNC_ERROR=42]="UNKNOWN_SYNC_ERROR",e[e.INVALID_UKI=43]="INVALID_UKI",e[e.UNKNOWN_UKI=44]="UNKNOWN_UKI",e[e.UNKNOWN_ERROR=45]="UNKNOWN_ERROR",e[e.UNEXPECTED_OTP_TYPE=46]="UNEXPECTED_OTP_TYPE",e[e.UNAUTHORIZED=47]="UNAUTHORIZED",e[e.UNAUTHORIZED_NOT_VALID_CONTENT=48]="UNAUTHORIZED_NOT_VALID_CONTENT",e[e.NETWORK_ERROR=49]="NETWORK_ERROR",e[e.THROTTLED=50]="THROTTLED",e[e.SESSION_ALREADY_OPENED=51]="SESSION_ALREADY_OPENED",e[e.INVALID_SESSION=52]="INVALID_SESSION",e[e.DEVICE_NOT_REGISTERED=53]="DEVICE_NOT_REGISTERED",e[e.MISSING_APP_KEYS=54]="MISSING_APP_KEYS",e[e.PROVIDE_EXTRA_DEVICE_TOKEN=55]="PROVIDE_EXTRA_DEVICE_TOKEN",e[e.PROVIDE_MASTER_PASSWORD_FOR_EXTRA_DEVICE=56]="PROVIDE_MASTER_PASSWORD_FOR_EXTRA_DEVICE",e[e.PROVIDE_MASTER_PASSWORD_AND_SERVER_KEY_FOR_EXTRA_DEVICE=57]="PROVIDE_MASTER_PASSWORD_AND_SERVER_KEY_FOR_EXTRA_DEVICE",e[e.ASK_OTP_FOR_NEW_DEVICE=58]="ASK_OTP_FOR_NEW_DEVICE",e[e.SSO_LOGIN_BYPASS=59]="SSO_LOGIN_BYPASS",e[e.SSO_VERIFICATION_FAILED=60]="SSO_VERIFICATION_FAILED",e[e.SSO_BLOCKED=61]="SSO_BLOCKED",e[e.CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION=62]="CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION"}(t.AuthenticationCode||(t.AuthenticationCode={})),function(e){e.READY="ready",e.IN_PROGRESS="in_progress",e.SUCCESS="success",e.FAILURE="failure"}(t.SyncStatuses||(t.SyncStatuses={})),function(e){e[e.PERSIST_DATA_YES=0]="PERSIST_DATA_YES",e[e.PERSIST_DATA_NO=1]="PERSIST_DATA_NO"}(t.PersistData||(t.PersistData={})),function(e){e.NAME="name",e.DATE="date"}(t.CredentialSearchOrder||(t.CredentialSearchOrder={})),function(e){e.CANCELLED="cancelled",e.COMPLETED="completed"}(t.CancelDashlaneAuthenticatorRegistration||(t.CancelDashlaneAuthenticatorRegistration={}))},21337:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentUserInfo=void 0;const o=r(88478);t.getCurrentUserInfo=function(e){const t=e.getUserSession().keyPair;return{login:e.getUserLogin(),uki:(0,o.ukiSelector)(e.getState()),privateKey:t&&t.privateKey}}},257:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},72942:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.authorizationMiddleware=void 0;t.authorizationMiddleware=e=>async t=>{const r=await t,{config:{allowedPlatforms:o},services:{storeService:n}}=r,{platformName:a}=n.getPlatformInfo();if(o&&!o.includes(a))throw new Error("You are not allowed to connect to this slot");return await e(t)}},26965:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.debugMiddleware=void 0;r(85795),new Map;t.debugMiddleware=e=>async t=>e(t)},49954:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.debugMiddleware=t.authorizationMiddleware=void 0;var o=r(72942);Object.defineProperty(t,"authorizationMiddleware",{enumerable:!0,get:function(){return o.authorizationMiddleware}});var n=r(26965);Object.defineProperty(t,"debugMiddleware",{enumerable:!0,get:function(){return n.debugMiddleware}})},52770:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommandQueryBus=void 0;const o=r(3343),n=r(28354),a=r(64803),i=r(33591),s=r(49954);class c{constructor(e){this.services=(0,a.getCoreServices)(e)}register(e){const{commands:t,queries:r,liveQueries:o}=e;Object.keys(t).forEach((e=>{this._registerCommand(e,t[e])})),Object.keys(r).forEach((e=>{this._registerQuery(e,r[e])})),Object.keys(o).forEach((e=>{this._registerLiveQuery(e,o[e])}))}_registerCommand(e,t){const r=r=>Promise.resolve({messageType:"command",messageName:e,requestId:(0,n.v4)(),services:this.services,arg:r,config:t,logTags:[c.API_LOG_TAG,c.COMMAND_LOG_TAG]}),o=[s.authorizationMiddleware,s.debugMiddleware,()=>e=>e.then((async e=>{const{arg:t,config:r,services:o}=e,{handler:n}=r,a=await n(o,t);return{...e,result:a}}))];this.registerCommand(e,(async e=>(0,i.buildMiddlewarePipeline)(...o)(r(e)).then((e=>e.result))))}_registerQuery(e,t){const r=r=>Promise.resolve({messageType:"query",messageName:e,requestId:(0,n.v4)(),services:this.services,arg:r,config:t,logTags:[c.API_LOG_TAG,c.QUERY_LOG_TAG]}),o=[s.authorizationMiddleware,s.debugMiddleware,()=>e=>e.then((async e=>{const{arg:r,services:o}=e,{selector:n,staticDataHandler:a}=t;if(n){const{storeService:t}=o,a=n(t.getState(),r);return{...e,result:a}}{const t=a(r);return{...e,result:t}}}))];this.registerQuery(e,(async e=>(0,i.buildMiddlewarePipeline)(...o)(r(e)).then((e=>e.result))))}_registerLiveQuery(e,t){this.registerLiveQuery(e,(e=>{const{operator:r,subject:n}=t;if(r){const{storeService:t}=this.services;return t.getState$().pipe(r(e),(0,o.skip)(1))}return n(e)}))}}t.CommandQueryBus=c,c.API_LOG_TAG="API",c.COMMAND_LOG_TAG="Command",c.QUERY_LOG_TAG="Query"},28136:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(72974),t),n(r(52770),t)},72974:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},68099:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventStore=void 0;const o=r(18948),n=r(28354),a=r(3343),i=r(40914),s=r(48119);t.EventStore=class{constructor(){this._operation$=new o.Subject,this.subs=new Set,this.add=async(e,t)=>{const r=(0,n.v4)(),o=new Promise(((e,t)=>{const o=this._operationResults$.subscribe((n=>{n.id===r&&(!0===n.success?e(r):t(n.error),o.unsubscribe(),this.subs.delete(o))}));this.subs.add(o)}));return this.triggerAdd(e,r,t),o},this.remove=async(e,t)=>{const r=new Promise(((e,r)=>{const o=this._operationResults$.subscribe((n=>{n.id===t&&(!0===n.success?e():r(n.error),o.unsubscribe(),this.subs.delete(o))}));this.subs.add(o)}));return this.triggerRemove(e,t),r},this.removeAll=async e=>{const t=(0,n.v4)(),r=new Promise(((e,r)=>{const o=this._operationResults$.subscribe((n=>{n.id===t&&(!0===n.success?e():r(n.error),o.unsubscribe(),this.subs.delete(o))}));this.subs.add(o)}));return this.triggerRemoveAll(e,t),r},this.onAdd=async e=>{const{id:t,event:r,topic:o,type:n}=e,a={id:t,topic:o,type:n};try{const e=await this.retrieve(),n={id:t,event:r},i={...e,[o]:[...e[o]||[],n]};return await this.store(i),{...a,success:!0,event:r}}catch(e){return{...a,success:!1,error:e}}},this.onRemove=async e=>{const{id:t,topic:r,type:o}=e,n={id:t,topic:r,type:o};try{const e=await this.retrieve(),o={...e,[r]:(e[r]||[]).filter((e=>e.id!==t))};return await this.store(o),{...n,success:!0}}catch(e){return{...n,success:!1,error:e}}},this.onRemoveAll=async e=>{const{id:t,topic:r,type:o}=e,n={id:t,topic:r,type:o};try{const e={...await this.retrieve(),[r]:[]};return await this.store(e),{...n,success:!0}}catch(e){return{...n,success:!1,error:e}}},this.onOperation=async e=>{switch(e.type){case s.OperationType.Add:return this.onAdd(e);case s.OperationType.Remove:return this.onRemove(e);case s.OperationType.RemoveAll:return this.onRemoveAll(e);default:return(0,i.assertUnreachable)(e)}},this.setupOperationsHandling=()=>{const e=this._operation$.pipe((0,a.concatMap)(this.onOperation),(0,a.share)()),t=e.subscribe();this.subs.add(t),this._operationResults$=e},this.setupOperationsHandling()}newItems$(e){return this._operationResults$.pipe((0,a.filter)((e=>e.type===s.OperationType.Add&&e.success)),(0,a.filter)((t=>t.topic===e)))}async getItems(e){return(await this.retrieve())[e]}teardown(){this.subs.forEach((e=>e.unsubscribe()))}async triggerAdd(e,t,r){const o={event:r,id:t,topic:e,type:s.OperationType.Add};this._operation$.next(o)}async triggerRemove(e,t){const r={id:t,topic:e,type:s.OperationType.Remove};this._operation$.next(r)}async triggerRemoveAll(e,t){const r={id:t,topic:e,type:s.OperationType.RemoveAll};this._operation$.next(r)}}},48119:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OperationType=void 0,function(e){e.Add="add",e.Remove="remove",e.RemoveAll="removeAll"}(t.OperationType||(t.OperationType={}))},62742:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(28136),t)},33591:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildMiddlewarePipeline=void 0;var o=r(8447);Object.defineProperty(t,"buildMiddlewarePipeline",{enumerable:!0,get:function(){return o.buildMiddlewarePipeline}})},8447:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildMiddlewarePipeline=void 0;t.buildMiddlewarePipeline=(...e)=>t=>e.reduceRight(((e,t)=>t(e)),(e=>e))(t)},42840:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(64210),n=r(46730),a=r(85145),i=r(90965),s=r(31129),c=r(38089),d=r(92152);t.config={commands:{},queries:{getAllSharedItemIds:{selector:n.sortedSharedItemIdsSelector},getGroupRecipients:{selector:o.groupRecipientsSelector},getHasNotifications:{selector:o.hasNotificationsSelector},getIsShared:{selector:o.isSharedSelector},getItemItemGroup:{selector:o.itemItemGroupSelector},getMyAcceptedUserGroups:{selector:o.myAcceptedUserGroupsSelector},getMyAcceptedItemGroupUserMembers:{selector:o.myAcceptedItemGroupUserMembersSelector},getPendingItemGroups:{selector:o.pendingItemGroupsSelector},getPendingUserGroups:{selector:o.pendingUserGroupsSelector},getRecipientsCount:{selector:o.recipientsCountSelector},getUserRecipients:{selector:o.userRecipientsSelector},getSharingCapacity:{selector:a.sharingCapacitySelector},isAllowedToShare:{selector:i.isAllowedToShareSelector},...c.config.queries,...d.config.queries},liveQueries:{liveAllSharedItemIds:{operator:s.allSharedItemIds$},liveGroupRecipients:{operator:s.groupRecipients$},liveHasNotifications:{operator:s.hasNotifications$},liveIsShared:{operator:s.isShared$},liveMyAcceptedItemGroupUserMembers:{operator:s.myAcceptedItemGroupUserMembers$},liveMyAcceptedUserGroups:{operator:s.myAcceptedUserGroups$},livePendingItemGroups:{operator:s.pendingItemGroups$},livePendingUserGroups:{operator:s.pendingUserGroups$},liveRecipientsCount:{operator:s.recipientsCount$},liveUserRecipients:{operator:s.userRecipients$},liveSharingCapacity:{operator:s.sharingCapacity$},...c.config.liveQueries,...d.config.liveQueries}}},55239:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},13658:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemGroupService=t.UPDATE_ITEM_GROUP_MEMBERS=t.SHARING_VERSION=t.REVOKE_ITEM_GROUP_MEMBERS=t.REFUSE_ITEM_GROUP=t.INVITE_ITEM_GROUP_MEMBERS=t.DELETE_ITEM_GROUP=t.CREATE_SPECIAL_ITEM_GROUP=t.CREATE_ITEM_GROUP=t.ACCEPT_ITEM_GROUP=void 0;const o=r(57254),n=r(17539),a=r(66441),i=r(96045),s=r(15933),c=r(93513);function d(e,t,r){const o=r&&r.users&&r.users.find((e=>e.userId===t.login)),n=o&&o.groupKey;return e.asymmetricEncryption.decrypt(t.privateKey,n)}function l(e,t,r,o){return e.itemGroup.deleteGroup(t,r,o).then((({itemGroups:e})=>e)).catch((n=>{if("Conflict"===n.message)return function(e,t,r,o){const n={type:"getSharing",sharingVersion:4,userGroupIds:o};return e.sharing.get(t,r,n).then((({itemGroupErrors:e,itemGroups:t})=>{if(e&&e.length)throw new Error(e[0].message);return t}))}(e,t,r,[o.groupId]).then((n=>{const[{revision:a,teamId:i}]=n;return i?e.itemGroup.deleteGroup(t,r,{...o,revision:a}).then((({itemGroups:e})=>e)):n}));throw n}))}function u(e,r,o,n,a){return{...a?{userGroupId:a}:{},...n&&n.length?{itemsForEmailing:n}:{},acceptSignature:e,groupId:r,revision:o,sharingVersion:t.SHARING_VERSION,type:t.ACCEPT_ITEM_GROUP}}function p(e,r,o,n){const a=n?{userGroupId:n}:{};return{...o&&o.length?{itemsForEmailing:o}:{},...a,groupId:e,revision:r,sharingVersion:t.SHARING_VERSION,type:t.REFUSE_ITEM_GROUP}}function S(e,r,o,n,a){return{...o&&o.length?{groups:o}:{},...a&&a.length?{itemsForEmailing:a}:{},groupId:e,items:n,sharingVersion:t.SHARING_VERSION,type:t.CREATE_ITEM_GROUP,users:r}}function g(e,r,o,n,a){return{...n&&n.length?{groups:n}:{},...o&&o.length?{users:o}:{},...a&&a.length?{itemsForEmailing:a}:{},revision:r,groupId:e,sharingVersion:t.SHARING_VERSION,type:t.INVITE_ITEM_GROUP_MEMBERS}}function m(e,r,o,n){return{...n&&n.length?{groups:n}:{},...o&&o.length?{users:o}:{},groupId:e,revision:r,sharingVersion:t.SHARING_VERSION,type:t.REVOKE_ITEM_GROUP_MEMBERS}}function y(e,r,o,n){return{...n&&n.length?{groups:n}:{},...o&&o.length?{users:o}:{},groupId:e,revision:r,sharingVersion:t.SHARING_VERSION,type:t.UPDATE_ITEM_GROUP_MEMBERS}}async function v(e,t,r){const o=r?await async function(e,t,r){const o=await(0,i.makeCryptoService)(),n=c.encode(e),a=await o.symmetricEncryption.signHmacSHA256(t,n);return{groupKey:await o.asymmetricEncryption.encrypt(r,t),proposeSignature:a}}(e,r.rawItemGroupKey,r.userPublicKey):{};return{...o,permission:t,userId:e}}function A(e,t){return{permission:t,groupId:e}}async function E(e,t,r,o,n){const a=await(0,i.makeCryptoService)(),s=t&&t.login&&t.publicKey,d=s?t.login:e,l=s?{}:{proposeSignatureUsingAlias:!0},u=s?{groupKey:await a.asymmetricEncryption.encrypt(t.publicKey,n)}:{},p=c.encode(d),S=await a.symmetricEncryption.signHmacSHA256(n,p);return{...t.privateKey?{acceptSignature:await h(r,n,t.privateKey)}:{},...l,...u,alias:e,permission:o,proposeSignature:S,userId:d}}async function f(e,t,r,o,n,a){const{groupId:d}=e,l=await(0,i.makeCryptoService)();if(!(e.users||[]).find((e=>e.userId===n)))throw new Error("[ItemGroupService] - makeUserGroupInvite: Trying to share an item to a userGroup that I'm not part of.");const u=await(0,s.getUserGroupPrivateKey)(e,o,n),p=await l.asymmetricEncryption.encrypt(e.publicKey,r),S=c.encode(d);return{groupId:d,permission:t,groupKey:p,proposeSignature:await l.symmetricEncryption.signHmacSHA256(r,S),acceptSignature:await h(a,r,u)}}async function h(e,t,r){const o=await(0,i.makeCryptoService)(),n=c.encode(`${e}-accepted-${t}`);return await o.asymmetricEncryption.sign(r,n)}t.ACCEPT_ITEM_GROUP="acceptItemGroup",t.CREATE_ITEM_GROUP="createItemGroup",t.CREATE_SPECIAL_ITEM_GROUP="createUserGroupsItemGroup",t.DELETE_ITEM_GROUP="deleteItemGroup",t.INVITE_ITEM_GROUP_MEMBERS="inviteItemGroupMembers",t.REFUSE_ITEM_GROUP="refuseItemGroup",t.REVOKE_ITEM_GROUP_MEMBERS="revokeItemGroupMembers",t.SHARING_VERSION=4,t.UPDATE_ITEM_GROUP_MEMBERS="updateItemGroupMembers",t.makeItemGroupService=function(e,r){return{makeCreateSpecialItemGroupEvent:(e,i,s)=>async function(e,r,i,s){const c=(0,o.generateItemUuid)(),[l,u]=await Promise.all([e.symmetricEncryption.generateNewAESKey(),d(e,r,i)]),p=await e.symmetricEncryption.decryptAES256(u,i.privateKey),[S,g,m]=await Promise.all([e.asymmetricEncryption.encrypt(i.publicKey,l),(0,a.generateProposeSignature)(e,l,i.groupId),(0,a.generateAcceptSignature)(e,p,c,l)]),y={type:t.CREATE_SPECIAL_ITEM_GROUP,sharingVersion:t.SHARING_VERSION,groupId:c,teamId:i.teamId,alias:r.login,groups:[{groupId:i.groupId,permission:"admin",groupKey:S,proposeSignature:g,acceptSignature:m}]};return s.length&&(y.items=await(0,n.createItemsForUserGroups)(e,l,s)),y}(r,e,i,s),makeCreateItemGroupEvent:S,makeInviteItemGroupMembers:g,makeUpdateItemGroupMembers:y,makeUserUpdate:v,makeUserGroupUpdate:A,makeUserUpload:E,makeUserGroupInvite:f,createSpecialItemGroup:({login:t,uki:r},o)=>e.itemGroup.createSpecialItemGroup(t,r,o),makeDeleteItemGroupEvent:(e,r)=>async function(e,r){return{type:t.DELETE_ITEM_GROUP,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r}}(e,r),deleteItemGroup:({login:t,uki:r},o)=>l(e,t,r,o),makeAcceptItemGroupEvent:u,makeRefuseItemGroupEvent:p,makeRevokeItemGroupMembers:m}}},20428:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemService=t.SHARING_VERSION=t.UPDATE_ITEM=t.ADD_ITEMS=void 0;const o=r(97211),n=r(96045);async function a(e,t,r){return{itemId:e,itemKey:t,content:r}}function i(e){const t=(0,o.isCredential)(e)?"password":"note";return{type:t,name:e.Title||`Untitled ${t}`}}async function s(e,r,o){return{type:t.ADD_ITEMS,sharingVersion:t.SHARING_VERSION,revision:r,groupId:e,items:o}}async function c(e,r,o){if(!o)throw new Error("Missing payload. See method documentation.");const{item:a,itemId:i,itemContent:s}=o;if(!(a||i&&s))throw new Error("insufficient arguments: item or (itemId and content) must be provided.");if(a&&(i||s))throw new Error("item and (itemId | content) cannot both be provided");const c=(0,n.makeSymmetricEncryption)(),d=null!=s?s:await c.encryptSharingItem(r,a);return{type:t.UPDATE_ITEM,sharingVersion:t.SHARING_VERSION,itemId:null!=i?i:null==a?void 0:a.Id,content:d,timestamp:e}}t.ADD_ITEMS="addItems",t.UPDATE_ITEM="updateItem",t.SHARING_VERSION=4;const d=(e,t,r,o)=>e.itemGroup.updateItem(t,r,o);function l(e,t,r,o){return e.itemGroup.addItems(t,r,o)}t.makeItemService=function(){return{makeItemUpload:a,makeAddItemsEvent:s,makeItemForEmailing:i,addItems:l,makeUpdateItemEvent:c,updateItem:d}}},15933:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingUsersFromItemGroups=t.doesItemGroupExistInSpace=t.findUserGroupItemGroups=t.findUserGroup=t.findMyAcceptedUserGroups=t.findMyAcceptedItemGroupUserMembers=t.getRecipientsCount=t.getUserRecipients=t.getGroupRecipients=t.doesUserReceiveItemGroupViaGroup=t.isUserLastAdmin=t.getDecipheredItemKey=t.isItemWithoutItemGroup=t.isItemGroupAccepted=t.getItemGroupPendingUserMember=t.decryptItemKey=t.getSharingUserPermission=t.getUserGroupPermission=t.getMyItemGroups=t.findItem=t.isUserGroupUserProposeSignatureValid=t.areUserGroupUsersProposeSignaturesValid=t.getDecryptedUserGroupKey=t.isUserGroupPersonalSignatureValid=t.isGroupSignatureValid=t.decryptUserGroupPrivateKey=t.getUserGroupPrivateKey=t.decryptGroupKey=t.getDecryptedItemGroupKeyFromUserGroupMember=t.getDecryptedItemGroupKeyFromUser=t.getItemGroupKey=t.findMyItemGroupUserGroupMember=t.findMyItemGroupUser=t.getItemGroupActiveUserGroupMembers=t.isLastActiveUserInItemGroupAndAdmin=t.userMemberIsAdmin=void 0;const o=r(28060),n=r(66441),a=r(96045),i=r(41147),s=r(1237),c=r(12345),d=r(70876),l=r(93513),u=e=>["accepted","pending"].includes(e.status);function p(e,t){const{users:r}=e;return(r||[]).find((e=>e.userId===t))}function S(e,t,r){const o=(t||[]).filter((e=>(e.users||[]).map((e=>e.userId)).includes(r))).map((e=>e.groupId));return(e.groups||[]).filter((e=>"accepted"===e.status)).find((e=>o.includes(e.groupId)))}async function g(e,t){try{return await y(e.groupKey,t)}catch{return null}}async function m(e,t,r,o){const n=(t||[]).find((t=>t.groupId===e.groupId));if(!n)return null;try{const t=await v(n,r,o);return await y(e.groupKey,t)}catch{return null}}async function y(e,t){return(0,a.makeCryptoService)().asymmetricEncryption.decrypt(t,e)}async function v(e,t,r){const o=e.users.find((e=>e.userId===r)).groupKey,n=await y(o,t);return A(e.privateKey,n)}async function A(e,t){return(0,a.makeCryptoService)().symmetricEncryption.decryptAES256(t,e)}async function E(e,t,r,o){const i=l.encode(`${e}-accepted-${r}`);return(0,n.isAcceptSignatureValid)((0,a.makeCryptoService)(),t,o,i)}async function f(e,t){try{return await(0,a.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,l.encode(e.userId))}catch{return!1}}async function h(e,t){return(0,a.makeCryptoService)().symmetricEncryption.decryptAES256(t,e)}function _(e,t){const{itemGroups:r}=e,o=r.find((e=>(e.items||[]).some((e=>e.itemId===t))));return o?(o.groups||[]).filter((e=>!["revoked","refused"].includes(e.status))):[]}function T(e,t){const{itemGroups:r}=e,o=r.find((e=>(e.items||[]).some((e=>e.itemId===t))));return o?(o.users||[]).filter((e=>!["revoked","refused"].includes(e.status))):[]}function I(e,t,r){var o;return!(null===(o=t.items)||void 0===o?void 0:o.some((t=>{var o;return(null!==(o=(0,s.credentialSelector)(e,t.itemId))&&void 0!==o?o:(0,c.noteSelector)(e,t.itemId)).SpaceId!==r})))}t.userMemberIsAdmin=e=>"admin"===e.permission,t.isLastActiveUserInItemGroupAndAdmin=function(e,r){const{users:o,groups:n}=e,a=!n||0===n.filter(u).length,i=o&&1===o.filter(u).length&&o[0].userId===r&&(0,t.userMemberIsAdmin)(o[0]);return a&&i},t.getItemGroupActiveUserGroupMembers=function(e){return(e.groups||[]).filter(u)},t.findMyItemGroupUser=p,t.findMyItemGroupUserGroupMember=S,t.getItemGroupKey=async function(e,t,r,o){const n=p(e,o),a=S(e,t,o);return n||a?n?await g(n,r):await m(a,t,r,o):null},t.getDecryptedItemGroupKeyFromUser=g,t.getDecryptedItemGroupKeyFromUserGroupMember=m,t.decryptGroupKey=y,t.getUserGroupPrivateKey=v,t.decryptUserGroupPrivateKey=A,t.isGroupSignatureValid=E,t.isUserGroupPersonalSignatureValid=async function(e,t,r,o){try{return await E(e,t,r,o)}catch{return!1}},t.getDecryptedUserGroupKey=async function(e,t){try{return await y(e,t)}catch{return null}},t.areUserGroupUsersProposeSignaturesValid=async function(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>f(e,t)));return(await Promise.all(r)).every(Boolean)},t.isUserGroupUserProposeSignatureValid=f,t.findItem=function(e,t){const{credentials:r,notes:o}=e.getPersonalData(),n=[...r,...o];return(0,i.findDataModelObject)(t,n)},t.getMyItemGroups=function(e,t){const r=e.userGroups.filter((e=>e.users.some((e=>e.userId===t&&"accepted"===e.status)))),o=new Set(r.map((e=>e.groupId)));return e.itemGroups.filter((e=>{const r=e.users&&e.users.some((e=>e.userId===t)),n=e.groups&&e.groups.some((e=>o.has(e.groupId)));return r||n}))},t.getUserGroupPermission=function(e,t){var r;return null===(r=(e.groups||[]).find((e=>e.groupId===t)))||void 0===r?void 0:r.permission},t.getSharingUserPermission=function(e,t){var r;return null===(r=(e.users||[]).find((e=>e.userId===t)))||void 0===r?void 0:r.permission},t.decryptItemKey=h,t.getItemGroupPendingUserMember=function(e,t){return(e.users||[]).find((e=>e.userId===t&&"pending"===e.status))},t.isItemGroupAccepted=function(e,t,r){const o=function(e,t){return(e.users||[]).some((e=>e.userId===t&&"accepted"===e.status&&Boolean(e.acceptSignature)))}(e,r);if(o)return!0;const n=function(e,t,r){const o=(e.groups||[]).filter((e=>"accepted"===e.status&&e.acceptSignature)).map((e=>e.groupId));return t.filter((e=>o.includes(e.groupId))).some((e=>(e.users||[]).some((e=>e.userId===r&&"accepted"===e.status&&Boolean(e.acceptSignature)))))}(e,t,r);return n},t.isItemWithoutItemGroup=function(e,t){return!(0,d.findItemItemGroup)(e,t)},t.getDecipheredItemKey=async function(e,t,r){const o=await y(e,r);try{return await h(t,o)}catch(e){return}},t.isUserLastAdmin=function(e,t){const r=function(e){return(e.users||[]).filter((({permission:e,rsaStatus:t,status:r})=>"admin"===e&&"sharingKeys"===t&&"accepted"===r))}(e),o=function(e){return(e.groups||[]).filter((({permission:e,status:t})=>"admin"===e&&"accepted"===t))}(e),n=r.some((e=>e.userId===t)),a=r.filter((({userId:e})=>t!==e)),i=o.length+a.length>0;return n&&!i},t.doesUserReceiveItemGroupViaGroup=function(e,t,r){const o=t.filter((({users:e})=>(e||[]).some((e=>e.userId===r&&"accepted"===e.status)))).map((({groupId:e})=>e));return(e.groups||[]).some((({groupId:e,status:t})=>o.includes(e)&&"accepted"===t))},t.getGroupRecipients=_,t.getUserRecipients=T,t.getRecipientsCount=function(e,t){return T(e,t).length+_(e,t).length},t.findMyAcceptedItemGroupUserMembers=function(e,t){const r=e.map((e=>e.users||[])),n=(0,o.unnest)(r);return(0,o.uniqBy)((e=>e.userId),n).filter((e=>e.alias!==t))},t.findMyAcceptedUserGroups=function(e,t){return e.filter((e=>"users"===e.type&&(e.users||[]).some((e=>e.userId===t&&"accepted"===e.status))))},t.findUserGroup=function(e,t){return e.find((e=>e.groupId===t))},t.findUserGroupItemGroups=function(e,t){return t.filter((t=>(t.groups||[]).some((t=>t.groupId===e&&"accepted"===t.status))))},t.doesItemGroupExistInSpace=I;t.getSharingUsersFromItemGroups=(e,t,r,o)=>{const n=r.reduce(((r,n)=>{if(null!==o&&!I(e,n,o))return r;return(0,d.getItemGroupActiveUsers)(n).forEach((e=>{if(e.userId!==t)if(r.has(e.userId)){const t=r.get(e.userId);r.set(e.userId,{...e,itemCount:t.itemCount+n.items.length})}else r.set(e.userId,{...e,itemCount:n.items.length})})),r}),new Map);return Array.from(n.values())}},2029:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.prepareOperations=t.revokeRemoteControlledSharedItems=void 0;const o=r(28060),n=r(97211),a=r(19935),i=r(40914),s=r(59125),c=r(54808),d=r(22029),l=r(8153),u=r(4338),p=r(52931),S=r(1404),g=r(75984),m=r(64210),y=r(35054),v=r(15933),A=r(70876),E=r(31891),f=(0,E.withTag)(["Sharing","RemoteControl"]),h=f(E.logError),_=f(E.logInfo),T=f(E.logVerbose),I=e=>t=>t._tag===e,C=e=>{const t=e.filter(I("revoke_all_itemgroup_members")).length,r=e.filter(I("refuse_pending_itemgroup")).length,o=e.filter(I("revoke_my_itemgroup_membership")).length;return{operationsCount:{all:e.length,revokeAllItemGroupMembers:t,refusePendingItemGroup:r,revokeMyItemGroupMembership:o}}};function P(e,t,r,o,n,a){const i=function(e,t,r){return r.reduce(((r,o)=>{const n=(0,v.findMyItemGroupUser)(o,t);if(!n)return r;const a=function(e,t,r){return(0,v.isUserLastAdmin)(r,t.userId)?function(e,t,r){const{groupId:o,revision:n}=r,a=(0,A.getItemGroupActiveUsers)(r).filter((e=>e.userId!==t.userId)).map((e=>e.userId)),i=(0,v.getItemGroupActiveUserGroupMembers)(r).map((e=>e.groupId)),s=e.makeRevokeItemGroupMembers(o,n,a,i),c=[...a.map((e=>({type:"user",alias:e}))),...i.map((e=>({type:"userGroup",groupId:e})))];return{_tag:"revoke_all_itemgroup_members",action:s,recipients:c}}(e,t,r):function(e,t,r){const{groupId:o,revision:n}=r,a=e.makeRefuseItemGroupEvent(o,n,null),i={type:"user",alias:t.alias},s=(0,v.userMemberIsAdmin)(t)?r.items.map((e=>e.itemId)):[];return{_tag:"revoke_my_itemgroup_membership",action:a,recipient:i,itemsToDuplicate:s}}(e,t,r)}(e,n,o);return r.concat(a)}),[])}(e,o,n.map((e=>(0,A.findItemItemGroup)(e,r))).filter(Boolean)),s=function(e,t){return t.filter((t=>t.items.some((t=>{if(!(0,u.isItemForceCategorizable)(t))return!1;const r=e.map((e=>e.details)),o=(0,u.pickBestTeamSpaceForForcedCategorization)(r,t,[]);return Boolean(o)&&o.domainsMatchResult===S.TeamDomainsMatchResult.SomeFieldsMatch}))))}(t,a),c=function(e,t,r,o){return o.reduce(((o,{itemGroupId:n})=>{const a=t.find((e=>e.groupId===n));if(!a)return o;const i=(0,v.findMyItemGroupUser)(a,r);if(!i)return o;const s=function(e,t,r){const{groupId:o,revision:n}=r,a=e.makeRefuseItemGroupEvent(o,n,null),i={type:"user",alias:t.alias};return{_tag:"refuse_pending_itemgroup",action:a,recipient:i}}(e,i,a);return o.concat(s)}),[])}(e,r,o,s);return[...i,...c]}async function D(e,t,r,o){const{action:n,recipient:a}=o,{itemGroups:i}=await e.itemGroup.refuseItemGroup(t,r,n);return(i&&1===i.length?i[0]:null)?[{actionType:"refuseItemGroup",itemGroup:i[0],recipient:a}]:[]}t.revokeRemoteControlledSharedItems=async function(e,t,r,u,S){_({message:"Starting remote control process"});try{const{hiddenItemIds:A}=S,E=t.getState(),f=(0,l.userLoginSelector)(E),h=(0,p.spacesWithForcedCategorizationEnabledSelector)(E),{itemGroups:I}=(0,y.sharingDataSelector)(E),O=P(u,h,I,f,A,(0,m.pendingItemGroupsSelector)(E));T({message:"Remote control operations computed",details:C(O)}),await async function(e,t,r,a){const l=e.getState(),u=(0,d.ukiSelector)(l),p=a.map((o=>async function(e,t,r,o,n){try{switch(n._tag){case"refuse_pending_itemgroup":return await D(t,r,o,n);case"revoke_my_itemgroup_membership":{await D(t,r,o,n);const{itemsToDuplicate:a}=n;for(const t of a)await(0,g.duplicateNoteOrCredential)(e,t);break}case"revoke_all_itemgroup_members":return await async function(e,t,r,o){const{action:n,recipients:a}=o,{itemGroups:i}=await e.itemGroup.revokeItemGroupMembers(t,r,n);if(i&&1===i.length&&i[0])return a.map((e=>({actionType:"revokeItemGroupMembers",itemGroup:i[0],recipient:e})));return[]}(t,r,o,n);default:(0,i.assertUnreachable)(n)}}catch(e){const t=new Error(`[SharingRemoteControl] - sendRequestForOperation: ${e}`);(0,s.sendExceptionLog)({error:t})}}(e,t,r,u,o))),S=(0,o.unnest)(await Promise.all(p));!async function(e,t){const r=t.map((({itemGroup:t,actionType:r,recipient:o})=>{const{groupId:a,items:i,users:s,groups:d}=t,l=(d||[]).length,u=(i||[]).length,p=(s||[]).length;let S={};if(1===u){const t=(0,v.findItem)(e,i[0].itemId);t&&(S=(0,c.getItemParams)(t))}const g=(0,n.isUserRecipient)(o)?{targetUserid:o.alias}:{userGroupId:o.groupId};return{...S,...g,action:r,groupCount:String(l),itemCount:String(u),itemGroupId:a,sender:"internal",userCount:String(p)}}));(0,c.sendSharingUsageLogs)(e,r)}(e,S)}(t,r,f,O),async function(e,{deletedItemIds:t,updatedItemIds:r},o){const n=t.length>0||r.length>0,i=o.length>0;(n||i)&&e.getInstance().user.requestNewSync(a.Trigger.ChangeTeam)}(e,S,O),_({message:"Remote control process done"})}catch(e){const t=new Error(`[SharingRemoteControl] - revokeRemoteControlledSharedItems: ${e}`);(0,s.sendExceptionLog)({error:t}),h({message:"Remote control process failed",details:{error:`${e}`}})}},t.prepareOperations=P},43907:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSingleUserItemGroup=t.resendPublicKeyInvite=t.updateSharingData=t.getPendingItemGroup=t.createOrUpdateItemEffect=t.deleteItemEffect=void 0;const o=r(28060),n=r(97211),a=r(96045),i=r(1005),s=r(31891),c=r(14438),d=r(37821),l=r(32234),u=r(33360),p=r(13658),S=r(69245),g=r(37771),m=r(59125),y=r(85816),v=r(21046),A=r(75984),E=r(14438),f=r(10196),h=r(15933),_=r(41147),T=r(40739),I=r(99436),C=r(88478),P=r(78330),D=r(8962),O=r(49504),b=r(88478),w=r(94343);function N(e,t,r){const n=(0,o.pick)(e,r);return(0,o.mergeRight)(t,n)}t.deleteItemEffect=async function(e,t){let r=null;const o=(0,P.getInstance)(),n=(0,D.getInstance)();try{const{itemToDelete:a}=(0,c.findPersonalDataItemToDelete)(e,t);if(!a)return!0;r=n.lockTopic("healthUpdates");const i={credentialIds:[a.Id],type:"credentialUpdates"};await o.add("healthUpdates",i);const s=(0,d.removePersonalItem)(a.kwType,a.Id,null);return e.dispatch(s),n.releaseTopic("healthUpdates",r),!0}catch(e){return s.default.log(`[SharingSync]: deleteItemEffect: ${e}`),r&&n.releaseTopic("healthUpdates",r),!1}},t.createOrUpdateItemEffect=async function(e,t,r){let o=null,c=null;const d=(0,P.getInstance)(),l=(0,D.getInstance)();try{const s=await(0,a.makeCryptoService)().symmetricEncryption.decryptSharingItem(r,t.content),{Id:u}=s,p=e.getPersonalData(),S=(0,b.platformInfoSelector)(e.getState());if((0,n.isCredential)(s)){o=l.lockTopic("healthUpdates"),c=l.lockTopic("iconsUpdates");const t=u?(0,_.findDataModelObject)(u,p.credentials||[]):null,r=t?N(y.sharedFields,t,s):s,a={credentialIds:[r.Id],type:"credentialUpdates"};await d.add("healthUpdates",a);const g={credentialIds:[r.Id],type:"credentialUpdates"};await d.add("iconsUpdates",g);const m=(0,O.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:p,change:(0,w.makeUpdateChange)(r),userLogin:e.getUserLogin(),platformInfo:S}),v=(0,i.savePersonalDataItem)(r,n.DataModelType.KWAuthentifiant,m);e.dispatch(v),l.releaseTopic("iconsUpdates",c),l.releaseTopic("healthUpdates",o)}else if((0,n.isNote)(s)){const t=u?(0,_.findDataModelObject)(u,p.notes||[]):null,r=t?N(v.sharedFields,t,s):s,o=(0,i.savePersonalDataItem)(r,n.DataModelType.KWSecureNote);e.dispatch(o)}return!0}catch(e){return s.default.log(`[SharingSync] - createOrUpdateItemEffect: ${e}`),o&&l.releaseTopic("healthUpdates",o),c&&l.releaseTopic("iconsUpdates",c),!1}},t.getPendingItemGroup=async function(e,t,r,o,i,s){let c;if(e.content){const r=(0,a.makeCryptoService)().symmetricEncryption;c=await r.decryptSharingItem(t,e.content)}else c=s[e.itemId];const d=(0,n.isCredential)(c),l=(0,n.isNote)(c);if(!d&&!l)throw new Error("item is neither credential nor note");let u=c;return d&&(u=(0,I.fixCredentialWithMissingTitle)(c)),{itemGroupId:r,items:[u],permission:i,referrer:o,seen:!1}},t.updateSharingData=function(e,t){const r=(0,u.sharingDataUpdated)(t);e.dispatch(r),(0,l.reportDataUpdate)(e)},t.resendPublicKeyInvite=async function(e,t,r){const o="[SharingEffectsService] - resendPublicKeyInvite";try{const n=e.getUserLogin(),i=(0,C.ukiSelector)(e.getState()),{groupId:s,revision:c}=r,{privateKey:d}=e.getUserSession().keyPair,l=(0,a.makeCryptoService)(),u=(0,g.makeWSService)(),{findUsersByAliases:y}=(0,f.makeWSUserAlias)(),{makeUserUpdate:v,makeUpdateItemGroupMembers:A}=(0,p.makeItemGroupService)(u,l),{updateItemGroupMembers:E}=(0,S.makeItemGroupWS)(),h=JSON.stringify([t.userId]),_=(await y({login:n,uki:i,aliases:h}))[t.userId];if(!_){const e=`${o}: couldn't find the user by alias, aborting.`;return void(0,m.sendExceptionLog)({message:e})}const I=(r.users||[]).find((e=>e.userId===n));if(!I){const e=`${o}: couldn't find myself in "itemGroup.users", aborting.`;return void(0,m.sendExceptionLog)({message:e})}const P=await l.asymmetricEncryption.decrypt(d,I.groupKey),{publicKey:D}=_,{permission:O,userId:b}=t,w=A(s,c,[await v(b,O,{rawItemGroupKey:P,userPublicKey:D})],null),N=await E(n,i,w);if(N&&N.itemGroups&&1===N.itemGroups.length){const r=N.itemGroups[0];(0,T.sendResendItemGroupInvitesUsageLog)(e,r,t.userId)}}catch(e){const t=new Error(`${o}: ${e}`);(0,m.sendExceptionLog)({error:t})}},t.deleteSingleUserItemGroup=async function({storeService:e,wsService:t,eventLoggerService:r},o){const{login:n}=e.getAccountInfo(),i=(0,C.ukiSelector)(e.getState()),{keyPair:{privateKey:s}}=e.getUserSession(),{groupId:c,revision:d}=o,l="[SharingEffectsService] - deleteSingleUserItemGroup",u=(0,a.makeCryptoService)(),{deleteItemGroup:S,makeDeleteItemGroupEvent:g}=(0,p.makeItemGroupService)(t,u);if(!(0,h.isLastActiveUserInItemGroupAndAdmin)(o,n)){throw new Error(`${l}: ${"I'm not alone in the group, aborting."}`)}if(!o.items||0===o.items.length)return!0;const y=(o.items||[]).map((({itemId:e})=>e)),v={};for(const t of y){const r=await(0,A.duplicateNoteOrCredential)(e,t);v[t]=r}try{const a={login:n,uki:i,privateKey:s},l=await g(c,d);await S(a,l);try{await(0,T.sendDeleteItemGroupUsageLog)(e,o)}catch(e){}return Object.keys(v).filter((e=>v[e])).forEach((o=>{(0,E.deletePersonalDataItem)({storeService:e,wsService:t,eventLoggerService:r},o,{ignoreSharing:!0})})),!0}catch(o){const n=new Error(`${l}: ${o}`);return(0,m.sendExceptionLog)({error:n}),Object.keys(v).map((e=>v[e])).filter(Boolean).forEach((o=>(0,E.deletePersonalDataItem)({storeService:e,wsService:t,eventLoggerService:r},o))),!1}}},87025:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySharing2Summary=t.getEmptySharingData=t.getEmptyGetSharingParams=t.getEmptyOperations=t.initSharingSyncFromStorage=t.putSharingSyncBackInStorage=t.updateSharingDataFromSync=t.applyOperationsToSharingData=t.runOperationsEffects=t.setMissingItemKeys=t.filterOutInvalidOperations=t.getSharing=t.setGetSharingParams=t.tagConfirmableOperations=t.setOperations=t.sanitizeData=t.OperationType=t.syncSharing=void 0;const o=r(97211),n=r(28060),a=r(68752),i=r(60583),s=r(15933),c=r(70876),d=r(43907),l=(r(31891),r(59125)),u=r(40914),p=r(15933),S=r(88478),g=r(17631);function m(e,t){return t}var y;async function v(e){const{sharingData:{items:t,itemGroups:r,userGroups:o},sharing2Summary:{items:n,itemGroups:a,userGroups:i}}=e;return{...e,sharingData:{items:A(t,"sharingData.items"),itemGroups:A(r,"sharingData.itemGroups"),userGroups:A(o,"sharingData.userGroups")},sharing2Summary:{items:A(n,"sharing2Summary.items"),itemGroups:A(a,"sharing2Summary.itemGroups"),userGroups:A(i,"sharing2Summary.userGroups")}}}function A(e,t,r){const o=function(e,t){return r=>{if(e(r))return!0;const o=`[SharingSync] - sanitizeList: found invalid element "${r}" in "${t}", filtering it out.`;return(0,l.sendExceptionLog)({message:o}),!1}}(r||Boolean,t);return(e||[]).filter(o)}async function E(e){const{sharingData:t,personalDataItemIds:r}=e,o=f(t.items,e.sharing2Summary.items,"itemId","timestamp").map((e=>e.type===y.Create&&r.includes(e.id)?{...e,skipPersonalDataItemCreation:!0}:e)),n=f(t.itemGroups,e.sharing2Summary.itemGroups,"groupId","revision"),a=f(t.userGroups,e.sharing2Summary.userGroups,"groupId","revision");return{...e,operations:{items:o,itemGroups:n,userGroups:a}}}function f(e,t,r,o){const{elementsToCreate:n}=function(e,t,r){const o=e.map((e=>e[r])),n=t.map((e=>e.id));return{elementsToCreate:n.filter((e=>!o.includes(e)))}}(e,t,r),{elementsToUpdate:a,elementsToDelete:i}=function(e,t,r,o){const n=t.map((e=>e.id)),a={elementsToUpdate:[],elementsToDelete:[]};return e.reduce(((e,a)=>{const i=n.indexOf(a[r]);if(i<0)return{...e,elementsToDelete:[...e.elementsToDelete,a[r]]};return t[i][o]>a[o]?{...e,elementsToUpdate:[...e.elementsToUpdate,a[r]]}:e}),a)}(e,t,r,o);return[].concat(n.map((e=>({id:e,type:y.Create})))).concat(a.map((e=>({id:e,type:y.Update})))).concat(i.map((e=>({id:e,type:y.Delete}))))}async function h(e,t){const{operations:{items:r},loadedElements:{itemGroups:o,userGroups:a},sharingData:{itemGroups:i,userGroups:c}}=e,d=(0,n.uniqBy)((e=>e.groupId),o.concat(i)),l=(0,n.uniqBy)((e=>e.groupId),a.concat(c)),u=r.map((e=>function(e,t,r,o){if(e.type!==y.Create)return e;const n=(r||[]).find((t=>(t.items||[]).map((e=>e.itemId)).includes(e.id)));if(!n)return e;const a=(0,s.isItemGroupAccepted)(n,o,t),i={..._(n,o,t),itemGroupId:n.groupId};return a?e:{...e,userConfirmationRequired:!0,confirmationItemGroup:i}}(e,t,d,l)));return{...e,operations:{...e.operations,items:u}}}function _(e,t,r){const o=(0,s.findMyItemGroupUser)(e,r),n=(0,s.findMyItemGroupUserGroupMember)(e,t,r);if(!o&&!n)return{referrer:null,permission:null};const{referrer:a,permission:i}=o||n;return{referrer:a,permission:i}}async function T(e){const t=t=>e.operations[t].filter((e=>[y.Create,y.Update].includes(e.type))).map((e=>e.id));return{...e,getSharingParams:{itemIds:t("items"),itemGroupIds:t("itemGroups"),userGroupIds:t("userGroups")}}}async function I(e,t,r,o){const n=Object.assign({},e.getSharingParams,{type:"getSharing",sharingVersion:4});if(!(n.itemIds.length||n.itemGroupIds.length||n.userGroupIds.length))return e;const{itemErrors:a,items:i,itemGroupErrors:s,itemGroups:c,userGroupErrors:d,userGroups:l}=await t.sharing.get(r,o,n);if(a&&a.length)throw new Error(`[SharingSync] - getSharing itemErrors: ${a[0].message}`);if(s&&s.length)throw new Error(`[SharingSync] - getSharing itemGroupErrors: ${s[0].message}`);if(d&&d.length)throw new Error(`[SharingSync] - getSharing userGroupErrors: ${d[0].message}`);return{...e,loadedElements:{items:A(i,"getSharing loaded items"),itemGroups:A(c,"getSharing loaded itemGroups"),userGroups:A(l,"getSharing loaded userGroups")}}}async function C(e,t,r,o){const{sharingData:{userGroups:n},loadedElements:{itemGroups:a,userGroups:s},operations:{itemGroups:c,userGroups:d}}=e,l=await(0,g.asyncFilter)(s,(e=>(0,i.isUserGroupValid)(e,t,r,o))),u=l.map((e=>e.groupId)),p=d.filter((e=>e.type===y.Delete||u.includes(e.id))),S=l.concat(n),{validItemGroups:m,itemKeys:v}=await async function(e,t){const r=await Promise.all(e.map(t)),o=e.filter(((e,t)=>!1!==r[t])),n=e=>Boolean(e),a=r.filter(n).reduce(((e,t)=>({...e,...t})),{});return{validItemGroups:o,itemKeys:a}}(a,(e=>(0,i.isItemGroupValid)(e,function(e,t){const r=(e.groups||[]).map((e=>e.groupId));return t.filter((e=>r.includes(e.groupId)))}(e,S),t,r,o))),A=m.map((e=>e.groupId)),E=c.filter((e=>e.type===y.Delete||A.includes(e.id)));return{...e,itemKeys:v,operations:{...e.operations,userGroups:p,itemGroups:E}}}async function P(e,t,r){const{loadedElements:o,sharingData:{itemGroups:n,userGroups:a},itemKeys:i}=e,d=o.items.filter((e=>(0,s.isItemWithoutItemGroup)(e.itemId,o.itemGroups))).reduce(((e,t)=>{const r=(0,c.findItemItemGroup)(t.itemId,n);return r?{...e,[t.itemId]:{itemGroup:r}}:e}),{}),l=Object.keys(d),u=l.map((e=>{const{itemGroup:o}=d[e];return(0,s.getItemGroupKey)(o,a,t,r).catch((()=>null))})),p=await Promise.all(u),S=l.reduce(((e,t,r)=>({...e,[t]:{...d[t],itemGroupKey:p[r]}})),{}),g=l.map((e=>{const{itemGroupKey:t,itemGroup:r}=S[e];if(!r)return Promise.resolve(null);const o=(r.items||[]).find((t=>t.itemId===e));return o?(0,s.decryptItemKey)(o.itemKey,t).catch((()=>null)):Promise.resolve(null)})),m=await Promise.all(g),y=l.reduce(((e,t,r)=>m[r]?{...e,[t]:m[r]}:e),{});return{...e,itemKeys:{...i,...y}}}async function D(e,{storeService:t,wsService:r,eventLoggerService:o}){const a=await async function(e,t){const{itemKeys:r,loadedElements:o,operations:{items:n}}=t,a=n.map((t=>async function(e,t,r,o){switch(r.type){case y.Delete:return await(0,d.deleteItemEffect)(e,r.id)?r:null;case y.Create:case y.Update:{if(r.skipPersonalDataItemCreation)return r;if(r.userConfirmationRequired)return null;const n=t.items.find((e=>e.itemId===r.id));if(!n)return null;const a=o[n.itemId];if(!a)return null;return await(0,d.createOrUpdateItemEffect)(e,n,a)?r:null}}return(0,u.assertUnreachable)(r.type)}(e,o,t,r)));return(await Promise.all(a)).filter((e=>!!e))}(t,e),i=await async function({storeService:e,wsService:t,eventLoggerService:r},o){const{operations:{itemGroups:a},loadedElements:{itemGroups:i,userGroups:c},sharingData:{userGroups:l}}=o,S=(0,n.uniqBy)((e=>e.groupId),c.concat(l)),g=a.map((o=>async function({storeService:e,wsService:t,eventLoggerService:r},o,n,a){const{type:i,id:c}=a,{login:l}=e.getAccountInfo();switch(i){case y.Delete:return a;case y.Create:case y.Update:{const i=o.find((e=>e.groupId===c));if(!i)return null;if((i.users||[]).filter((e=>"publicKey"===e.rsaStatus)).forEach((t=>(0,d.resendPublicKeyInvite)(e,t,i))),(0,p.isLastActiveUserInItemGroupAndAdmin)(i,l)){return await(0,d.deleteSingleUserItemGroup)({storeService:e,wsService:t,eventLoggerService:r},i)?{...a,type:y.Delete}:null}if(!(0,s.isItemGroupAccepted)(i,n,l)){const t=(i.items||[]).map((async({itemId:t})=>{try{return await(0,d.deleteItemEffect)(e,t)}catch(e){return null}}));return await Promise.all(t),{...a,deleteSharingDataItems:!0}}return a}}return(0,u.assertUnreachable)(i)}({storeService:e,wsService:t,eventLoggerService:r},i,S,o)));return(await Promise.all(g)).filter((e=>!!e))}({storeService:t,wsService:r,eventLoggerService:o},e);return{...e,operations:{...e.operations,items:a,itemGroups:i}}}async function O(e){const{sharingData:{items:t,itemGroups:r,userGroups:o},loadedElements:{items:n,itemGroups:a,userGroups:i},operations:{items:s,itemGroups:c,userGroups:d}}=e,l=b(n,t,s),u=b(a,r,c),p=b(i,o,d),S=c.filter((({deleteSharingDataItems:e})=>e)).reduce(((e,{id:t})=>{const r=a.find((e=>e.groupId===t));if(!r)return e;const o=(r.items||[]).map((({itemId:e})=>e));return[...e,...o]}),[]),g=l.filter((e=>!S.includes(e.itemId)));return{...e,sharingData:{items:g,itemGroups:u,userGroups:p}}}function b(e,t,r){return r.reduce(((t,r)=>function(e,t,r){switch(r.type){case y.Delete:return function(e,{id:t}){return e.filter((e=>w(e)!==t))}(t,r);case y.Create:return function(e,t,{id:r}){const o=e.find((e=>w(e)===r));return o?t.concat(o):t}(e,t,r);case y.Update:return function(e,t,{id:r}){const o=e.find((e=>w(e)===r));return o?t.map((e=>w(e)===r?o:e)):t}(e,t,r)}return(0,u.assertUnreachable)(r.type)}(e,t,r)),t)}function w(e){if("itemId"in e)return e.itemId;if(function(e){return"groupId"in e}(e))return e.groupId}async function N(e,t){const{sharingData:r}=e;return(0,d.updateSharingData)(t,r),e}async function R(e,t,r){const{sharingSync:o}=t.getState().userSession;return r.getInstance().storeSharingSync(o),e}async function L(e,t,r){const o=r.getInstance(),n=await o.doesSharingSyncExist();let i=null;const s=()=>{i={pendingUserGroups:[],pendingItemGroups:[]},o.storeSharingSync(i)};n||s();try{i=await o.getSharingSync()}catch(e){s()}const{pendingItemGroups:c,pendingUserGroups:d}=i,l=(0,a.setAllPendingAction)(c,d);return t.dispatch(l),e}function U(){return{items:[],itemGroups:[],userGroups:[]}}function M(){return{items:[],itemGroups:[],userGroups:[]}}t.syncSharing=async function({storeService:e,wsService:t,localStorageService:r,eventLoggerService:i},c){try{const l=(0,S.ukiSelector)(e.getState()),u=e.getUserLogin(),{privateKey:p,publicKey:g}=e.getUserSession().keyPair,{credentials:y,notes:f}=e.getPersonalData(),_=e.getSharingData(),b=A(y,"PersonalData.credentials",o.isCredential),w=A(f,"PersonalData.notes",o.isNote),U=[...b,...w],M=U.map((e=>e.Id)),k=U.reduce(((e,t)=>(e[t.Id]=t,e)),{}),F={itemKeys:{},loadedElements:{items:[],itemGroups:[],userGroups:[]},sharing2Summary:c,sharingData:_,operations:{items:[],itemGroups:[],userGroups:[]},personalDataItemIds:M,pendingUserGroups:[],pendingItemGroups:[]},B=await Promise.resolve(F).then(m("sanitizeData",v)).then(m("setOperations",E)).then(m("setGetSharingParams",T)).then(m("getSharing",(e=>I(e,t,u,l)))).then(m("filterOutInvalidOperations",(e=>C(e,p,g,u)))).then(m("setMissingItemKeys",(e=>P(e,p,u)))).then(m("tagConfirmableItemOperation",(e=>h(e,u)))).then(m("setPendingItemGroupsList",(e=>async function(e,t,r,o){const{loadedElements:{itemGroups:a,items:i},sharingData:{itemGroups:c,items:l},itemKeys:u}=e,p=(0,n.uniqBy)((e=>e.groupId),a.concat(c)),S=(0,n.uniqBy)((e=>e.itemId),i.concat(l)),g=p.reduce(((e,n)=>{const a=(0,s.getItemGroupPendingUserMember)(n,t);if(!a)return e;const i=async function(e,t,r,o,n,a){const{permission:i,referrer:c,groupKey:l}=t,u=(e.items||[]).map((async t=>{try{const{itemId:u}=t,p=n[u]||await(0,s.getDecipheredItemKey)(l,t.itemKey,r);if(!p)return null;const S=o.find((e=>e.itemId===u));if(!S)return null;return await(0,d.getPendingItemGroup)(S,p,e.groupId,c,i,a)}catch(e){return null}}));return(await Promise.all(u)).filter(Boolean)}(n,a,r,S,u,o);return[i,...e]}),[]),m=(0,n.flatten)(await Promise.all(g));return{...e,pendingItemGroups:m}}(e,u,p,k)))).then(m("runOperationsEffects",(r=>D(r,{storeService:e,wsService:t,eventLoggerService:i})))).then(m("applyOperationsToSharingData",O)).then(m("setPendingUserGroupsList",(t=>async function(e,t,r){const{sharingData:{userGroups:o}}=e,n=t.getSpaceData().spaces.find((e=>"accepted"===e.details.status));if(!n)return{...e,pendingUserGroups:[]};const a=String(n.teamId),i=o.reduce(((e,t)=>{if(!(String(t.teamId)===a))return e;const o=(t.users||[]).find((e=>e.userId===r&&"pending"===e.status));if(!o)return e;const{groupId:n,name:i}=t,{referrer:s,permission:c}=o;return[{groupId:n,name:i,referrer:s,permission:c,seen:!1},...e]}),[]);return{...e,pendingUserGroups:i}}(t,e,u)))).then(m("initSharingSyncFromStorage",(t=>L(t,e,r)))).then(m("updateStoreSharingSync",(t=>async function(e,t){const{pendingItemGroups:r,pendingUserGroups:o}=e,n=(0,a.updateAllPendingAction)(r,o);return t.dispatch(n),e}(t,e)))).then(m("putSharingSyncBackInStorage",(t=>R(t,e,r)))).then(m("updateSharingDataFromSync",(t=>N(t,e))));return B.sharingData}catch(t){const r=new Error(`[SharingSync] - syncSharing failed: ${t}`);return(0,l.sendExceptionLog)({error:r}),e.getSharingData()}},function(e){e[e.Create=0]="Create",e[e.Update=1]="Update",e[e.Delete=2]="Delete"}(y=t.OperationType||(t.OperationType={})),t.sanitizeData=v,t.setOperations=E,t.tagConfirmableOperations=h,t.setGetSharingParams=T,t.getSharing=I,t.filterOutInvalidOperations=C,t.setMissingItemKeys=P,t.runOperationsEffects=D,t.applyOperationsToSharingData=O,t.updateSharingDataFromSync=N,t.putSharingSyncBackInStorage=R,t.initSharingSyncFromStorage=L,t.getEmptyOperations=U,t.getEmptyGetSharingParams=function(){return{itemIds:[],itemGroupIds:[],userGroupIds:[]}},t.getEmptySharingData=M,t.getEmptySharing2Summary=function(){return{items:[],itemGroups:[],userGroups:[]}}},40739:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendRefuseUserGroupUsageLog=t.sendAcceptUserGroupUsageLog=t.sendAcceptItemGroupUsageLog=t.sendRefuseItemGroupUsageLog=t.sendDeleteItemGroupUsageLog=t.sendResendItemGroupInvitesUsageLog=t.sendRevokeItemGroupMembersUsageLog=t.sendNewItemGroupUsageLog=t.sendInviteItemGroupMembersUsageLogs=t.sendUpdateItemGroupMembersUsageLog=void 0;const o=r(97211),n=r(15933),a=r(54808);t.sendUpdateItemGroupMembersUsageLog=async function(e,t,r,i,s){const{groupId:c,items:d}=t,l=(d||[]).length;let u={};if(1===l){const t=(0,n.findItem)(e,d[0].itemId);t&&(u=(0,a.getItemParams)(t))}const p=(0,o.isUserRecipient)(r)?{targetUserid:r.alias}:{userGroupId:r.groupId},S={...u,...p,action:"updateItemGroupMembers",itemCount:String(l),itemGroupId:c,sender:s,subaction:i};(0,a.sendSharingUsageLog)(e,S)},t.sendInviteItemGroupMembersUsageLogs=async function(e,t,r,i){const{groupId:s,items:c,users:d,groups:l}=t,u=(d||[]).length,p=(l||[]).length,S=(c||[]).length;let g={};if(1===S){const t=(0,n.findItem)(e,c[0].itemId);t&&(g=(0,a.getItemParams)(t))}const m={...g,action:"inviteItemGroupMembers",groupCount:String(p),itemCount:String(S),itemGroupId:s,sender:i,userCount:String(u)};r.forEach((t=>{const r=(0,o.isUserRecipient)(t)?{...m,targetUserid:t.alias}:{...m,userGroupId:t.groupId};(0,a.sendSharingUsageLog)(e,r)}))},t.sendNewItemGroupUsageLog=async function(e,t,r,o){const{groupId:n,items:i}=t,s=(0,a.getItemParams)(r),c=(i||[]).length,d={...s,action:"createItemGroup",itemCount:String(c),itemGroupId:n,sender:o};(0,a.sendSharingUsageLog)(e,d)},t.sendRevokeItemGroupMembersUsageLog=async function(e,t,r,i){const{groupId:s,items:c,users:d,groups:l}=t,u=(l||[]).length,p=(c||[]).length,S=(d||[]).length;let g={};if(1===p){const t=(0,n.findItem)(e,c[0].itemId);t&&(g=(0,a.getItemParams)(t))}const m=(0,o.isUserRecipient)(r)?{targetUserid:r.alias}:{userGroupId:r.groupId},y={...g,...m,action:"revokeItemGroupMembers",groupCount:String(u),itemCount:String(p),itemGroupId:s,sender:i,userCount:String(S)};(0,a.sendSharingUsageLog)(e,y)},t.sendResendItemGroupInvitesUsageLog=async function(e,t,r){const{groupId:o,items:i}=t,s=(i||[]).length;let c={};if(1===s){const t=(0,n.findItem)(e,i[0].itemId);t&&(c=(0,a.getItemParams)(t))}const d={...c,action:"resendItemGroupInvites",itemCount:String(s),itemGroupId:o,sender:"internal",targetUserid:r};(0,a.sendSharingUsageLog)(e,d)},t.sendDeleteItemGroupUsageLog=async function(e,t){const{groupId:r,items:o}=t,i=(o||[]).length;let s={};if(1===i){const t=(0,n.findItem)(e,o[0].itemId);t&&(s=(0,a.getItemParams)(t))}const c={...s,action:"deleteItemGroup",itemCount:String(i),itemGroupId:r,sender:"internal"};(0,a.sendSharingUsageLog)(e,c)},t.sendRefuseItemGroupUsageLog=async function(e,t,r,o,n){const{groupId:i,items:s,users:c,groups:d}=t,l=(d||[]).length,u=(s||[]).length,p=(c||[]).length,S={...o||{},action:"refuseItemGroup",groupCount:String(l),itemCount:String(u),itemGroupId:i,sender:n,targetUserid:r,userCount:String(p)};(0,a.sendSharingUsageLog)(e,S)},t.sendAcceptItemGroupUsageLog=async function(e,t,r,n,i){const{groupId:s,items:c,users:d,groups:l}=t,u=(l||[]).length,p=(c||[]).length,S=(d||[]).length,g={...n||{},...(0,o.isUserRecipient)(r)?{targetUserid:r.alias}:{userGroupId:r.groupId},action:"acceptItemGroup",groupCount:String(u),itemCount:String(p),itemGroupId:s,sender:i,userCount:String(S)};(0,a.sendSharingUsageLog)(e,g)},t.sendAcceptUserGroupUsageLog=async function(e,t,r,o){const{groupId:n,users:i}=t,s=(i||[]).length,c={action:"acceptUserGroup",sender:o,targetUserid:r,userCount:String(s),userGroupId:n};(0,a.sendSharingUsageLog)(e,c)},t.sendRefuseUserGroupUsageLog=async function(e,t,r,o){const{groupId:n,users:i}=t,s=(i||[]).length,c={action:"refuseUserGroup",sender:o,targetUserid:r,userCount:String(s),userGroupId:n};(0,a.sendSharingUsageLog)(e,c)}},87972:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handlePendingItemGroupsResponse=t.handlePendingUserGroupsResponse=t.sendPendingExceptionLog=t.updateSharingPermission=t.revokeItemGroupMember=t.isUserItemGroupAdmin=t.shareUnsharedItem=t.shareAlreadySharedItem=void 0;const o=r(28060),n=r(97211),a=r(13658),i=r(39034),s=r(20428),c=r(69245),d=r(51768),l=r(10196),u=r(57254),p=r(96045),S=r(96045),g=r(59125),m=r(37771),y=r(15933),v=r(66441),A=r(40914),E=r(40739),f=r(54808),h=r(88478),{Accept:_,Refuse:T}=n.SharingResponseStatus;function I(e,t,r){const o=`${e.toLowerCase()}Pending${t}`,n=new Error(`[Sharing] - ${o}: ${r}`);(0,g.sendExceptionLog)({error:n})}t.shareAlreadySharedItem=async function(e,t,r,o,i,d){try{const u=e.getUserLogin(),S=(0,h.ukiSelector)(e.getState()),{privateKey:g}=e.getUserSession().keyPair,{userGroups:m}=e.getSharingData(),v=m.filter(Boolean),{groupId:A,revision:_}=r,{credentials:T,notes:I}=e.getPersonalData(),C=[...T,...I],P=await(0,p.makeCryptoService)(),{makeInviteItemGroupMembers:D,makeUserGroupInvite:O,makeUserUpload:b}=(0,a.makeItemGroupService)(t,P),{findUsersByAliases:w}=(0,l.makeWSUserAlias)(),{makeItemForEmailing:N}=(0,s.makeItemService)(),{inviteItemGroupMembers:R}=(0,c.makeItemGroupWS)(),L=await(0,y.getItemGroupKey)(r,v,g,u);if(!L){throw new Error("Couldn't get itemGroupKey, aborting.")}const U=i.filter(n.isUserRecipient).map((({alias:e})=>e)),M=JSON.stringify(U),k=await w({login:u,uki:S,aliases:M}),F=U.map((e=>b(e,k[e],A,o,L))),B=await Promise.all(F),G=(r.items||[]).map((({itemId:e})=>e)),K=C.filter((e=>G.includes(e.Id))),j=K.map(N),V=i.filter(n.isGroupRecipient).map((e=>e.groupId)),H=v.filter((({groupId:e})=>V.includes(e))).map((e=>O(e,o,L,g,u,A))),W=await Promise.all(H),x=D(A,_,B,W,j),z=await R(u,S,x);if(z&&z.itemGroups&&1===z.itemGroups.length){const t=z.itemGroups[0],r=1===(K||[]).length?(0,f.getItemParams)(K[0]):null;(0,E.sendInviteItemGroupMembersUsageLogs)(e,t,i,d),W.forEach((o=>{(0,E.sendAcceptItemGroupUsageLog)(e,t,{type:"userGroup",groupId:o.groupId},r,d)}))}}catch(e){throw e.message=`[SharingUserActionsService] - shareUnsharedItem: ${e.message}`,e}},t.shareUnsharedItem=async function(e,t,r,o,i,d){try{const g=e.getUserLogin(),m=(0,h.ukiSelector)(e.getState()),{privateKey:y,publicKey:v}=e.getUserSession().keyPair,{userGroups:A}=e.getSharingData(),_=await(0,p.makeCryptoService)(),{makeCreateItemGroupEvent:T,makeUserGroupInvite:I,makeUserUpload:C}=(0,a.makeItemGroupService)(t,_),{makeItemUpload:P,makeItemForEmailing:D}=(0,s.makeItemService)(),{createItemGroup:O}=(0,c.makeItemGroupWS)(),{findUsersByAliases:b}=(0,l.makeWSUserAlias)(),w=(0,u.generateItemUuid)(),N=await _.symmetricEncryption.generateNewAESKey(),R=i.filter(n.isUserRecipient).map((({alias:e})=>e)),L=JSON.stringify(R),U=await b({login:g,uki:m,aliases:L}),M=C(g,{login:g,publicKey:v,privateKey:y},w,"admin",N),k=R.map((e=>C(e,U[e],w,o,N))).concat(M),F=await Promise.all(k),B=i.filter(n.isGroupRecipient).map((e=>e.groupId)),G=A.filter((({groupId:e})=>B.includes(e))).map((e=>I(e,o,N,y,g,w))),K=await Promise.all(G),{Id:j}=r,V=(0,S.makeSymmetricEncryption)(),H=await _.symmetricEncryption.generateNewAESKey(),W=await _.symmetricEncryption.encryptAES256(N,H),x=await V.encryptSharingItem(H,r),z=await P(j,W,x),Y=D(r),$=T(w,F,K,[z],[Y]),q=await O(g,m,$);if(q&&q.itemGroups&&1===q.itemGroups.length){const t=q.itemGroups[0],o=(0,f.getItemParams)(r);(0,E.sendNewItemGroupUsageLog)(e,t,r,d),(0,E.sendInviteItemGroupMembersUsageLogs)(e,t,i,d),K.forEach((r=>{(0,E.sendAcceptItemGroupUsageLog)(e,t,{type:"userGroup",groupId:r.groupId},o,d)}))}}catch(e){throw e.message=`[SharingUserActionsService] - shareUnsharedItem: ${e.message}`,e}},t.isUserItemGroupAdmin=function(e,t,r){const o=(e.users||[]).some((({userId:e,permission:t})=>e===r&&"admin"===t)),n=(t||[]).filter((e=>(e.users||[]).map((({userId:e})=>e)).includes(r))),a=n.map((({groupId:e})=>e)),i=(e.groups||[]).filter((({groupId:e})=>a.includes(e))).some((({permission:e})=>"admin"===e));return o||i},t.revokeItemGroupMember=async function(e,t,r,o,n){const i=await(0,p.makeCryptoService)(),{groupId:s,revision:c}=r,d=(0,h.ukiSelector)(e.getState()),l=e.getUserLogin(),{makeRevokeItemGroupMembers:u}=(0,a.makeItemGroupService)(t,i),S=u(s,c,"user"===o.type?[o.alias]:[],"userGroup"===o.type?[o.groupId]:[]),g=await t.itemGroup.revokeItemGroupMembers(l,d,S);if(g&&g.itemGroups&&1===g.itemGroups.length){const t=g.itemGroups[0];(0,E.sendRevokeItemGroupMembersUsageLog)(e,t,o,n)}},t.updateSharingPermission=async function(e,t,r,o,n,i){const s=e.getUserLogin(),c=(0,h.ukiSelector)(e.getState()),d=await(0,p.makeCryptoService)(),{makeUserGroupUpdate:l,makeUserUpdate:u,makeUpdateItemGroupMembers:S}=(0,a.makeItemGroupService)(t,d),{groupId:g,revision:m}=r,y=S(g,m,"user"===o.type?[await u(o.alias,n)]:[],"userGroup"===o.type?[await l(o.groupId,n)]:[]),v=await t.itemGroup.updateItemGroupMembers(s,c,y);if(v&&v.itemGroups&&1===v.itemGroups.length){const t=v.itemGroups[0];(0,E.sendUpdateItemGroupMembersUsageLog)(e,t,o,n,i)}},t.sendPendingExceptionLog=I,t.handlePendingUserGroupsResponse=async function(e,t,r,a){const s=(0,p.makeCryptoService)(),c=(0,m.makeWSService)(),{makeAcceptUserGroupEvent:l,makeRefuseUserGroupEvent:u}=(0,i.makeUserGroupService)(c,s),{accept:S,refuse:g}=(0,d.makeUserGroupWS)(),y=(0,h.ukiSelector)(e.getState()),v=e.getUserLogin(),{keyPair:{privateKey:f}}=e.getUserSession(),{userGroups:C}=e.getSharingData(),P=t.map((async function(t){try{const o=C.find((e=>e.groupId===t));if(!o)throw new Error(`could not find userGroup to ${n.SharingResponseStatus[r]} in sharingData`);switch(r){case _:await async function(t){const r=await l({login:v,uki:y,privateKey:f},t),o=await S(v,y,r);if(o.userGroups&&1===o.userGroups.length){const t=o.userGroups[0];(0,E.sendAcceptUserGroupUsageLog)(e,t,v,a)}return o}(o);break;case T:await async function(t){const{revision:r}=t,o=await u(t.groupId,r),n=await g(v,y,o);if(n.userGroups&&1===n.userGroups.length){const t=n.userGroups[0];(0,E.sendRefuseUserGroupUsageLog)(e,t,v,a)}return n}(o);break;default:(0,A.assertUnreachable)(r)}return{userGroupId:t,success:!0}}catch(e){return{userGroupId:t,success:!1,error:e}}})),D=await Promise.all(P),[O,b]=(0,o.partition)((({success:e})=>Boolean(e)),D);return b.forEach((({error:e})=>I(n.SharingResponseStatus[r],"UserGroup",e))),{successes:O.map((e=>e.userGroupId)),failures:b.map((e=>e.userGroupId))}},t.handlePendingItemGroupsResponse=async function(e,t,r,i){const s=(0,p.makeCryptoService)(),d=(0,m.makeWSService)(),{makeAcceptItemGroupEvent:l,makeRefuseItemGroupEvent:u}=(0,a.makeItemGroupService)(d,s),{acceptItemGroup:S,refuseItemGroup:g}=(0,c.makeItemGroupWS)(),f=(0,h.ukiSelector)(e.getState()),C=e.getUserLogin(),{keyPair:{privateKey:P}}=e.getUserSession(),{itemGroups:D,userGroups:O}=e.getSharingData(),b=t.map((({itemGroupId:t,itemsForEmailing:o,usageLogItemParams:a})=>async function(t,o,a){try{const c=D.find((e=>e.groupId===t));if(!c)throw new Error(`could not find itemGroup to ${n.SharingResponseStatus[r]} in sharingData`);switch(r){case _:await async function(t,r,o){const{groupId:n,revision:a}=t,c=await(0,y.getItemGroupKey)(t,O,P,C),d=await(0,v.generateAcceptSignature)(s,P,n,c),u=l(d,n,a,r),p=await S(C,f,u);if(p&&p.itemGroups&&1===p.itemGroups.length){const t=p.itemGroups[0];(0,E.sendAcceptItemGroupUsageLog)(e,t,{type:"user",alias:C},o,i)}return p}(c,o,a);break;case T:await async function(t,r,o){const{groupId:n,revision:a}=t,s=u(n,a,r),c=await g(C,f,s);if(c&&c.itemGroups&&1===c.itemGroups.length){const t=c.itemGroups[0];(0,E.sendRefuseItemGroupUsageLog)(e,t,C,o,i)}return c}(c,o,a);break;default:(0,A.assertUnreachable)(r)}return{itemGroupId:t,success:!0}}catch(e){return{itemGroupId:t,success:!1,error:e}}}(t,o,a))),w=await Promise.all(b),[N,R]=(0,o.partition)((({success:e})=>Boolean(e)),w);return R.forEach((({error:e})=>I(n.SharingResponseStatus[r],"ItemGroup",e))),{successes:N.map((e=>e.itemGroupId)),failures:R.map((e=>e.itemGroupId))}}},60583:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isUserGroupValid=t.areItemGroupItemKeysValid=t.isItemGroupGroupMemberProposeSignatureValid=t.areItemGroupGroupMembersProposeSignaturesValid=t.isItemGroupUserProposeSignatureValid=t.areItemGroupUsersProposeSignaturesValid=t.isItemGroupUserGroupMemberValid=t.isItemGroupUserValid=t.isItemGroupValid=void 0;const o=r(96045),n=(r(31891),r(15933)),a=r(93513);async function i(e,t,r,a){try{const{status:i,acceptSignature:s,groupKey:c}=t;if("accepted"!==i)return!0;const d=await(0,o.makeCryptoService)().asymmetricEncryption.decrypt(r,c);return await(0,n.isGroupSignatureValid)(e,s,d,a)}catch(e){return!1}}async function s(e,t,r,a,i){try{const{status:s,acceptSignature:c,groupKey:d,groupId:l}=t;if("accepted"!==s)return!0;const u=(r||[]).find((e=>e.groupId===l));if(!u)return!1;const{publicKey:p}=u,S=await(0,n.getUserGroupPrivateKey)(u,a,i);if(!S)return!1;const g=await(0,o.makeCryptoService)().asymmetricEncryption.decrypt(S,d);return await(0,n.isGroupSignatureValid)(e,c,g,p)}catch(e){return!1}}async function c(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>d(e,t)));return(await Promise.all(r)).every(Boolean)}async function d(e,t){try{return await(0,o.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,a.encode(e.userId))}catch(e){return!1}}async function l(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>u(e,t)));return(await Promise.all(r)).every(Boolean)}async function u(e,t){try{return await(0,o.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,a.encode(e.groupId))}catch{return!1}}async function p(e,t){const r=(e||[]).map((e=>async function(e,t){try{const{itemKey:r}=e;return await(0,n.decryptItemKey)(r,t)}catch{return!1}}(e,t))),o=await Promise.all(r);return!!o.every(Boolean)&&o.reduce(((t,r,o)=>({...t,[e[o].itemId]:r})),{})}t.isItemGroupValid=async function(e,t,r,o,a){const d=e.groupId,u=(0,n.findMyItemGroupUser)(e,a),S=(0,n.findMyItemGroupUserGroupMember)(e,t,a);if(!u&&!S)return!1;const g=u?await(0,n.getDecryptedItemGroupKeyFromUser)(u,r):await(0,n.getDecryptedItemGroupKeyFromUserGroupMember)(S,t,r,a);if(!g)return!1;const m=!u||await i(d,u,r,o);if(!m)return!1;const y=!S||await s(d,S,t,r,a);if(!y)return!1;const v=await c(e.users,g);if(!v)return!1;const A=await l(e.groups,g);if(!A)return!1;const E=await p(e.items||[],g);return E||!1},t.isItemGroupUserValid=i,t.isItemGroupUserGroupMemberValid=s,t.areItemGroupUsersProposeSignaturesValid=c,t.isItemGroupUserProposeSignatureValid=d,t.areItemGroupGroupMembersProposeSignaturesValid=l,t.isItemGroupGroupMemberProposeSignatureValid=u,t.areItemGroupItemKeysValid=p,t.isUserGroupValid=async function(e,t,r,o){const{groupId:a}=e,i=(e.users||[]).find((e=>e.userId===o));if(!i)return null;const s=await(0,n.getDecryptedUserGroupKey)(i.groupKey,t);return!!s&&(!(i.acceptSignature&&!await(0,n.isGroupSignatureValid)(a,i.acceptSignature,s,r))&&!!await(0,n.areUserGroupUsersProposeSignaturesValid)(e.users,s))}},39034:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserGroupService=t.checkUsersPublicKey=t.ConvertUserGroupMemberToUserUpdate=t.ConvertUserGroupMemberToUserUpdateWithInvite=t.ConvertUserGroupMemberToUserUpload=t.createUserUploadEvent=t.makeUserGroupAdminItem=t.makeGroupKeyItem=t.decryptGroupKey=t.UPDATE_USER_GROUP_USERS=t.REVOKE_USER_GROUP_USERS=t.INVITE_USER_GROUP_USERS=t.REFUSE_USER_GROUP=t.ACCEPT_USER_GROUP=t.RENAME_USER_GROUP=t.DELETE_USER_GROUP=t.CREATE_TEAM_ADMINS_USER_GROUP=t.CREATE_USER_GROUP=t.SHARING_VERSION=void 0;const o=r(93513),n=r(57254),a=r(24555),i=r(43013),s=r(62380),c=r(66441),d=r(59125);function l(e,t,r,n){return e.asymmetricEncryption.sign(t,o.encode(r+"-accepted-"+n))}function u(e,t,r){if(!(0,a.isBase64Encoded)(r))throw new Error("INVALID_GROUP_KEY");return e.asymmetricEncryption.decrypt(t.privateKey,r)}async function p(e,t,r,n,a){const s=(0,i.getAdminDataFromTeamAdminData)(r,n),c=(0,i.getSpecialItemGroupFromAdminData)(s).revision,d=JSON.stringify(a),[l,u]=await Promise.all([e.symmetricEncryption.generateNewAESKey(),(0,i.getSpecialItemGroupKey)(e,t,s)]),[p,S]=await Promise.all([e.symmetricEncryption.encryptAES256(l,o.encode(d)),e.symmetricEncryption.encryptAES256(u,o.encode(l))]);return{itemId:a.itemId,itemKey:S,content:p,itemGroupRevision:c}}async function S(e,r,a,i,s){const[c,d]=await Promise.all([r.asymmetricEncryption.generateRsaKeyPair(),r.symmetricEncryption.generateNewAESKey()]),l=(0,n.generateItemUuid)(),u=await r.symmetricEncryption.encryptAES256(d,o.encode(c.private));return{groupId:l,name:i.name,publicKey:c.public,privateKey:u,sharingVersion:t.SHARING_VERSION,teamId:i.teamId,type:e,users:await Promise.all(s.map((e=>m(r,e,a,d,l))))}}async function g(e){return{itemId:(0,n.generateItemUuid)(),groupId:(0,n.generateItemUuid)(),groupKey:await e.symmetricEncryption.generateNewAESKey()}}async function m(e,t,r,o,n){const a=await v(e,t,o);return t.Login===r.login&&(a.acceptSignature=await l(e,r.privateKey,n,o)),a}async function y(e,r,o,n,a,i){const s=a.map((async t=>{try{return{success:!0,user:await m(e,t,r,i,o)}}catch(e){const t=new Error(`[UserGroupService] - makeBaseInviteMembersEvent: ${e}`);return(0,d.sendExceptionLog)({error:t}),{success:!1}}})),c=(await Promise.all(s)).filter((e=>e.success)).map((e=>e.user));return{groupId:o,revision:n,sharingVersion:t.SHARING_VERSION,type:t.INVITE_USER_GROUP_USERS,users:c}}async function v(e,t,r){const o=await E(t);if(!t.Login){const n=await(0,c.generateProposeSignature)(e,r,t.Alias);return{...o,userId:t.Alias,alias:t.Alias,proposeSignatureUsingAlias:!0,proposeSignature:n}}const[n,a]=await Promise.all([e.asymmetricEncryption.encrypt(t.PublicKey,r),(0,c.generateProposeSignature)(e,r,t.Login)]);return{...o,alias:t.Alias,groupKey:n,proposeSignatureUsingAlias:!1,proposeSignature:a}}async function A(e,t,r){const o=await E(t),[n,a]=await Promise.all([e.asymmetricEncryption.encrypt(t.PublicKey,r),(0,c.generateProposeSignature)(e,r,t.Login)]);return{...o,groupKey:n,proposeSignature:a}}async function E(e){return{permission:e.Permission,userId:e.Login}}t.SHARING_VERSION=4,t.CREATE_USER_GROUP="createUserGroup",t.CREATE_TEAM_ADMINS_USER_GROUP="createTeamAdminsUserGroup",t.DELETE_USER_GROUP="deleteUserGroup",t.RENAME_USER_GROUP="renameUserGroup",t.ACCEPT_USER_GROUP="acceptUserGroup",t.REFUSE_USER_GROUP="refuseUserGroup",t.INVITE_USER_GROUP_USERS="inviteUserGroupUsers",t.REVOKE_USER_GROUP_USERS="revokeUserGroupUsers",t.UPDATE_USER_GROUP_USERS="updateUserGroupUsers",t.decryptGroupKey=u,t.makeGroupKeyItem=p,t.makeUserGroupAdminItem=g,t.createUserUploadEvent=m,t.ConvertUserGroupMemberToUserUpload=v,t.ConvertUserGroupMemberToUserUpdateWithInvite=A,t.ConvertUserGroupMemberToUserUpdate=E;function f(e,t,r,o){return e(t,r,{type:"getSharing",sharingVersion:4,userGroupIds:o}).then((({userGroupErrors:e,userGroups:t})=>{if(e&&e.length)throw new Error(e[0].message);return t}))}function h({teamId:e}){if(!e)throw new Error("USER_GROUP_DELETED")}t.checkUsersPublicKey=e=>{const t=Object.keys(e).filter((t=>!e[t].publicKey));return t.length>0?Promise.reject(new Error(JSON.stringify({message:"Users missing public Key: "+t,code:"MISSING_PUBLIC_KEY"}))):Promise.resolve(e)};const _=e=>{const t="ITEM_GROUP_UPDATE_CONFLICT";return"getAdditionalInfo"in e&&e.getAdditionalInfo().webServiceSubMessage===t||e.message.includes(t)},T=e=>{const t="Conflict";return!(!("getAdditionalInfo"in e)||!e.getAdditionalInfo().message.startsWith(t))||e.message.startsWith(t)};function I(e,t,r,o,n){return e(r,o,n).catch((a=>{if(_(a))return f(t,r,o,[n.groupId]).then((([t])=>{h(t);const{revision:a}=t;return e(r,o,{...n,revision:a})}));throw a}))}t.makeUserGroupService=function(e,r){return{makeUserGroupAdminItem:()=>g(r),makeCreateUserGroupEvent:(e,n,a,i)=>async function(e,r,n,a,i){const s=await e.asymmetricEncryption.generateRsaKeyPair(),{teamId:c,externalId:d,name:l}=a;return{groupId:i.groupId,name:l,publicKey:s.public,privateKey:await e.symmetricEncryption.encryptAES256(i.groupKey,o.encode(s.private)),sharingVersion:t.SHARING_VERSION,teamId:c,type:"createUserGroup",users:[],groupKeyItem:await p(e,r,n,c.toString(),i),externalId:d}}(r,e,n,a,i),makeCreateUserGroupEventWithMembers:(e,t,o)=>async function(e,t,r,o){return S("createUserGroup",e,t,r,o)}(r,e,t,o),makeCreateSpecialUserGroupEvent:(e,t,o)=>async function(e,t,r,o){return S("createTeamAdminsUserGroup",e,t,r,o)}(r,e,t,o),createUserGroup:({login:t,uki:r},o,n)=>function(e,t,r,o,n){return e.userGroup.create(t,r,n).catch((a=>{if(_(a))return(0,s.loadSpecialItemGroup)(e,t,r,o).then((o=>e.userGroup.create(t,r,{...n,groupKeyItem:{...n.groupKeyItem,itemGroupRevision:o.revision}})));throw a}))}(e,t,r,o,n),makeDeleteUserGroupEvent:(e,r,o,n)=>async function(e,r,o,n){const a={type:t.DELETE_USER_GROUP,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r};return o&&n&&(a.groupKeyItem={itemId:o,itemGroupRevision:n}),a}(e,r,o,n),deleteUserGroup:({login:t,uki:r},o,n)=>function(e,t,r,o,n){return e.userGroup.delete(t,r,n).catch((a=>{if(_(a))return(0,s.loadSpecialItemGroup)(e,t,r,o).then((o=>e.userGroup.delete(t,r,{...n,groupKeyItem:{...n.groupKeyItem,itemGroupRevision:o.revision}})));if(T(a))return f(e.sharing.get,t,r,[n.groupId]).then((o=>{const[{revision:a,teamId:i}]=o;return i?e.userGroup.delete(t,r,{...n,revision:a}):{userGroups:o}}));throw a}))}(e,t,r,o,n),makeRenameUserGroupEvent:(e,r,o)=>async function(e,r,o){return{type:t.RENAME_USER_GROUP,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r,name:o}}(e,r,o),renameUserGroup:({login:t,uki:r},o)=>function(e,t,r,o){const n=e.userGroup.rename;return n(t,r,o).catch((a=>{if(T(a))return f(e.sharing.get,t,r,[o.groupId]).then((e=>{h(e[0]);const[{name:a,revision:i}]=e;return a===o.name?{userGroups:e}:n(t,r,{...o,revision:i})}));throw a}))}(e,t,r,o),makeAcceptUserGroupEvent:(e,o)=>async function(e,r,o){const n=o.users.find((e=>e.userId===r.login)).groupKey,a=await u(e,r,n),i=await l(e,r.privateKey,o.groupId,a);return{type:t.ACCEPT_USER_GROUP,sharingVersion:4,revision:o.revision,groupId:o.groupId,acceptSignature:i}}(r,e,o),acceptUserGroup:({login:t,uki:r},o)=>I(e.userGroup.accept,e.sharing.get,t,r,o),makeRefuseUserGroupEvent:(e,r)=>async function(e,r){return{type:t.REFUSE_USER_GROUP,sharingVersion:4,revision:r,groupId:e}}(e,r),refuseUserGroup:({login:t,uki:r},o)=>I(e.userGroup.refuse,e.sharing.get,t,r,o),makeInviteMembersEventAsAdmin:(e,t,o,n)=>function(e,t,r,o,n){return y(e,o,t.groupId,r,n,t.groupKey)}(r,e,t,o,n),makeInviteMembersEvent:(e,t,o,n,a)=>async function(e,t,r,o,n,a){const i=a.users.find((e=>e.userId===o.login)).groupKey,s=await u(e,o,i);return y(e,o,t,r,n,s)}(r,e,t,o,n,a),inviteUserGroupMembers:({login:t,uki:r},o)=>function(e,t,r,o){return e.userGroup.invite(t,r,o).catch((n=>{if(T(n))return f(e.sharing.get,t,r,[o.groupId]).then((n=>{h(n[0]);const[{revision:a,users:i}]=n,s=o.users.filter((e=>!i.find((t=>t.userId===e.userId&&"accepted"===t.status))));return s.length?e.userGroup.invite(t,r,{...o,revision:a,users:s}):{userGroups:n}}));throw n}))}(e,t,r,o),makeRevokeMembersEvent:(e,r,o)=>async function(e,r,o){return{type:t.REVOKE_USER_GROUP_USERS,sharingVersion:t.SHARING_VERSION,revision:r,groupId:e,users:o}}(e,r,o),revokeUserGroupMembers:({login:t,uki:r},o)=>function(e,t,r,o){return e.userGroup.revoke(t,r,o).catch((n=>{if(T(n))return f(e.sharing.get,t,r,[o.groupId]).then((n=>{h(n[0]);const[{revision:a,users:i}]=n,s=o.users.filter((e=>i.find((t=>t.userId===e&&"accepted"===t.status))));return s.length?e.userGroup.revoke(t,r,{...o,revision:a,users:s}):{userGroups:n}}));throw n}))}(e,t,r,o),makeUpdateMembersEvent:(e,r,o)=>async function(e,r,o){return{type:t.UPDATE_USER_GROUP_USERS,sharingVersion:t.SHARING_VERSION,revision:r,groupId:e,users:await Promise.all(o.map((e=>E(e))))}}(e,r,o),makeUpdateMembersWithInviteEvent:(e,o,n,a)=>async function(e,r,o,n,a){return{type:t.UPDATE_USER_GROUP_USERS,sharingVersion:t.SHARING_VERSION,revision:n,groupId:r,users:await Promise.all(a.map((t=>A(e,t,o))))}}(r,e,o,n,a),updateUserGroupMembers:({login:t,uki:r},o)=>I(e.userGroup.update,e.sharing.get,t,r,o),findExistingUsersByAliases:r=>e.userAlias.findUsersByAliases(r).then(t.checkUsersPublicKey),findUsersByAliases:t=>e.userAlias.findUsersByAliases(t),isCurrentUserProposeSignatureValid:(e,t)=>async function(e,t,r){const o=r.users.find((e=>e.userId===t.login)),n=await u(e,t,o.groupKey);return(0,c.isProposeSignatureValid)(e,o.proposeSignature,o.userId,n)}(r,e,t)}}},89558:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeSharingService=void 0;const o=r(96045),n=r(39034),a=r(13658),i=r(20428);t.makeSharingService=function(e,t){const r=(0,o.makeCryptoService)();return{ws:t,store:e,crypto:r,userGroup:(0,n.makeUserGroupService)(t,r),itemGroup:(0,a.makeItemGroupService)(t,r),item:(0,i.makeItemService)()}}},76105:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isShared=void 0;const o=r(28060),n=r(94417);t.isShared=(0,o.curry)(((e,t)=>(0,n.binaryContains)(e,t.Id)))},70876:(e,t)=>{function r(e,t,r){const o=(t||[]).filter((e=>(e.users||[]).map((e=>e.userId)).includes(r))).map((e=>e.groupId));return(e.groups||[]).filter((e=>o.includes(e.groupId)&&"accepted"===e.status))}function o(e,t){return t.find((t=>(t.items||[]).map((e=>e.itemId)).includes(e)))}function n(e){return(e.users||[]).filter(a)}Object.defineProperty(t,"__esModule",{value:!0}),t.getItemGroupActiveUsers=t.findItemItemGroup=t.getItemUserIds=t.getItemUserGroupIds=t.findMyAcceptedItemGroups=t.findMyAcceptedItemGroupUserGroupMembers=void 0,t.findMyAcceptedItemGroupUserGroupMembers=r,t.findMyAcceptedItemGroups=function(e,t,o){return e.filter((e=>{const n="items"===e.type,a=(e.users||[]).some((e=>e.userId===o&&"accepted"===e.status)),i=r(e,t,o).length>0;return n&&(a||i)}))},t.getItemUserGroupIds=function(e,t){var r;const n=o(t,e);return(null!==(r=null==n?void 0:n.groups)&&void 0!==r?r:[]).filter((e=>"accepted"===e.status)).map((e=>e.groupId))},t.getItemUserIds=function(e,t){const r=o(t,e);return r?n(r).map((e=>e.userId)):[]},t.findItemItemGroup=o,t.getItemGroupActiveUsers=n;const a=e=>["accepted","pending"].includes(e.status)},15448:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLimitedSharedItemIds=void 0;t.getLimitedSharedItemIds=(e,t)=>{const r=e.userGroups.filter((e=>e.users.some((e=>e.userId===t&&"accepted"===e.status)))),o=new Set(r.map((e=>e.groupId)));return e.itemGroups.filter((e=>{const r=e.users&&e.users.some((e=>e.userId===t&&"admin"===e.permission&&"accepted"===e.status)),n=e.groups&&e.groups.some((e=>o.has(e.groupId)&&"admin"===e.permission&&"accepted"===e.status));return!(r||n)})).map((e=>(e.items||[]).map((e=>e.itemId)))).reduce(((e,t)=>e.concat(t)),[]).reduce(((e,t)=>({...e,[t]:!0})),{})}},31129:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingCapacity$=t.myAcceptedItemGroupUserMembers$=t.myAcceptedUserGroups$=t.hasNotifications$=t.pendingUserGroups$=t.pendingItemGroups$=t.allSharedItemIds$=t.userRecipients$=t.groupRecipients$=t.recipientsCount$=t.isShared$=void 0;const o=r(18948),n=r(3343),a=r(64210),i=r(46730),s=r(85145);t.isShared$=e=>{const t=(0,a.getIsSharedSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())};t.recipientsCount$=e=>{const t=(0,a.getRecipientsCountSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())};t.groupRecipients$=e=>{const t=(0,a.getGroupRecipientsSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())};t.userRecipients$=e=>{const t=(0,a.getUserRecipientsSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())};t.allSharedItemIds$=()=>{const e=i.sortedSharedItemIdsSelector;return(0,o.pipe)((0,n.map)(e),(0,n.distinctUntilChanged)())};t.pendingItemGroups$=()=>{const e=a.pendingItemGroupsSelector;return(0,o.pipe)((0,n.map)(e),(0,n.distinctUntilChanged)())};t.pendingUserGroups$=()=>{const e=a.pendingUserGroupsSelector;return(0,o.pipe)((0,n.map)(e),(0,n.distinctUntilChanged)())};t.hasNotifications$=()=>{const e=a.hasNotificationsSelector;return(0,o.pipe)((0,n.map)(e),(0,n.distinctUntilChanged)())};t.myAcceptedUserGroups$=()=>{const e=a.myAcceptedUserGroupsSelector;return(0,o.pipe)((0,n.map)(e),(0,n.distinctUntilChanged)())};t.myAcceptedItemGroupUserMembers$=()=>{const e=a.myAcceptedItemGroupUserMembersSelector;return(0,o.pipe)((0,n.map)(e),(0,n.distinctUntilChanged)())};t.sharingCapacity$=()=>{const e=s.sharingCapacitySelector;return(0,o.pipe)((0,n.map)(e),(0,n.distinctUntilChanged)())}},64210:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserRecipientsSelector=t.getGroupRecipientsSelector=t.getRecipientsCountSelector=t.getIsSharedSelector=t.hasNotificationsSelector=t.myAcceptedItemGroupUserMembersSelector=t.myAcceptedUserGroupsSelector=t.pendingUserGroupsSelector=t.pendingItemGroupsSharedItemContentsSelector=t.pendingItemGroupsSelector=t.itemItemGroupSelector=t.userRecipientsSelector=t.groupRecipientsSelector=t.recipientsCountSelector=t.isSharedSelector=void 0;const o=r(32034),n=r(15933),a=r(70876),i=r(10364),s=r(35054);t.isSharedSelector=(e,t)=>{const{items:r}=(0,s.sharingDataSelector)(e);return r.some((e=>e.itemId===t))};t.recipientsCountSelector=(e,t)=>{const r=(0,s.sharingDataSelector)(e);return(0,n.getRecipientsCount)(r,t)};t.groupRecipientsSelector=(e,t)=>{const r=(0,s.sharingDataSelector)(e);return(0,n.getGroupRecipients)(r,t)};t.userRecipientsSelector=(e,t)=>{const r=(0,s.sharingDataSelector)(e);return(0,n.getUserRecipients)(r,t)};t.itemItemGroupSelector=(e,t)=>{const{itemGroups:r}=(0,s.sharingDataSelector)(e);return(0,a.findItemItemGroup)(t,r)};t.pendingItemGroupsSelector=e=>e.userSession.sharingSync.pendingItemGroups||[];t.pendingItemGroupsSharedItemContentsSelector=e=>e.userSession.sharingSync.pendingItemGroups?e.userSession.sharingSync.pendingItemGroups.reduce(((e,t)=>e.concat(t.items)),[]):[];t.pendingUserGroupsSelector=e=>e.userSession.sharingSync.pendingUserGroups||[],t.myAcceptedUserGroupsSelector=(0,o.createSelector)(i.loginStatusSelector,s.sharingDataSelector,(({login:e},{userGroups:t})=>(0,n.findMyAcceptedUserGroups)(t,e))),t.myAcceptedItemGroupUserMembersSelector=(0,o.createSelector)(i.loginStatusSelector,s.sharingDataSelector,(({login:e},{itemGroups:t})=>(0,n.findMyAcceptedItemGroupUserMembers)(t,e))),t.hasNotificationsSelector=(0,o.createSelector)(t.pendingItemGroupsSelector,t.pendingUserGroupsSelector,((e,t)=>[...e,...t].some((e=>!e.seen))));t.getIsSharedSelector=e=>(0,o.createSelector)(s.sharingDataSelector,(({items:t})=>t.some((t=>t.itemId===e))));t.getRecipientsCountSelector=e=>(0,o.createSelector)(s.sharingDataSelector,(t=>(0,n.getRecipientsCount)(t,e)));t.getGroupRecipientsSelector=e=>(0,o.createSelector)(s.sharingDataSelector,(t=>(0,n.getGroupRecipients)(t,e)));t.getUserRecipientsSelector=e=>(0,o.createSelector)(s.sharingDataSelector,(t=>(0,n.getUserRecipients)(t,e)))},61867:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.acceptedItemGroupsSelector=void 0;const o=r(32034),n=r(8153),a=r(70876),i=r(35054);t.acceptedItemGroupsSelector=(0,o.createSelector)(i.sharingDataSelector,n.userIdSelector,(({itemGroups:e,userGroups:t},r)=>(0,a.findMyAcceptedItemGroups)(e,t,r)))},90965:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isAllowedToShareSelector=void 0;const o=r(32034),n=r(85145);t.isAllowedToShareSelector=(0,o.createSelector)(n.sharingCapacitySelector,(e=>"unlimited"===e.type||e.remains>0))},30590:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.limitedSharingItemsSelector=void 0;const o=r(32034),n=r(15448),a=r(8153),i=r(35054);t.limitedSharingItemsSelector=(0,o.createSelector)(i.sharingDataSelector,a.userIdSelector,n.getLimitedSharedItemIds)},44571:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharedCredentialsCountSelector=void 0;const o=r(32034),n=r(46730),a=r(36519),i=r(76105);t.sharedCredentialsCountSelector=(0,o.createSelector)(n.sortedSharedItemIdsSelector,a.credentialsSelector,((e,t)=>{const r=(0,i.isShared)(e);return t.filter(r).length}))},78570:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharedItemsCountSelector=void 0;const o=r(32034),n=r(44571),a=r(47057);t.sharedItemsCountSelector=(0,o.createSelector)(n.sharedCredentialsCountSelector,a.sharedNotesCountSelector,((e,t)=>e+t))},47057:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharedNotesCountSelector=void 0;const o=r(32034),n=r(46730),a=r(73046),i=r(76105);t.sharedNotesCountSelector=(0,o.createSelector)(n.sortedSharedItemIdsSelector,a.notesSelector,((e,t)=>{const r=(0,i.isShared)(e);return t.filter(r).length}))},85145:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingCapacitySelector=void 0;const o=r(32034),n=r(8153),a=r(75640),i=r(78570);t.sharingCapacitySelector=(0,o.createSelector)(i.sharedItemsCountSelector,n.premiumStatusSelector,a.getSharingCapacity)},35054:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingDataSelector=void 0;t.sharingDataSelector=e=>e.userSession.sharingData},46730:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sortedSharedItemIdsSelector=void 0;const o=r(32034),n=r(35054);t.sortedSharedItemIdsSelector=(0,o.createSelector)(n.sharingDataSelector,(({items:e})=>e.map((e=>e.itemId)).sort()))},75640:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingCapacity=void 0;t.getSharingCapacity=(e,t)=>{var r,o,n,a;const i=null!==(a=null===(n=null===(o=null===(r=null==t?void 0:t.capabilities)||void 0===r?void 0:r.sharingLimit)||void 0===o?void 0:o.info)||void 0===n?void 0:n.limit)&&void 0!==a?a:1/0;return i===1/0?{type:"unlimited"}:{type:"limited",remains:Math.max(0,i-e)}}},66441:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isProposeSignatureValid=t.generateProposeSignature=t.isAcceptSignatureValid=t.generateAcceptSignature=void 0;const o=r(93513);function n(e,t,r){return new Promise(((n,a)=>{e.symmetricEncryption.signHmacSHA256(t,o.encode(r)).then(n,a)}))}t.generateAcceptSignature=function(e,t,r,n){return new Promise(((a,i)=>{e.asymmetricEncryption.sign(t,o.encode(r+"-accepted-"+n)).then(a,i)}))},t.isAcceptSignatureValid=function(e,t,r,o){return new Promise(((n,a)=>{e.asymmetricEncryption.verify(r,t,o).then(n,a)}))},t.generateProposeSignature=n,t.isProposeSignatureValid=function(e,t,r,o){return n(e,o,r).then((e=>t===e))}},70910:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingStatusDetail=t.getSharingStatusItem=t.getNotShared=void 0;const o=r(28060),n=r(94417),a=r(15933),i=r(70876);t.getNotShared=()=>({isShared:!1});const s=(e,t)=>e[t]?"limited":"admin";t.getSharingStatusItem=(0,o.curry)(((e,r,o)=>(0,n.binaryContains)(e,o)?{isShared:!0,permission:s(r,o)}:(0,t.getNotShared)())),t.getSharingStatusDetail=(0,o.curry)(((e,r,o,n)=>{const{itemGroups:c,userGroups:d}=r,l=(0,i.findItemItemGroup)(n,c);if(!l)return(0,t.getNotShared)();const u=(0,a.getRecipientsCount)(r,n);return{groupSharing:(0,a.doesUserReceiveItemGroupViaGroup)(l,d,o),isShared:!0,lastAdmin:(0,a.isUserLastAdmin)(l,o),permission:s(e,n),recipientsCount:u}}))},86635:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.doesUserReceiveItemViaGroup=t.isUserLastAdminOnItem=t.setPendingElementsAsSeen=t.handleSharingResponse=t.handleUpdateSharingPermission=t.handleRevokeSharing=t.handleShareItemRequest=t.emptySessionResponse=t.getFreshUserGroups=t.updateUserGroupMembers=t.getSharedData=t.computeUserGroupMember=t.extractAliasesFromMembers=t.revokeUserGroupMembers=t.inviteUserGroupMembers=t.renameUserGroup=t.deleteUserGroup=t.deleteItemGroup=t.createSpecialItemGroup=t.createSpecialUserGroup=t.createUserGroup=t.buildSharingData=t.mergeSharingData=t.getCleanSharingData=t.getOutdatedSharingParams=void 0;const o=r(28060),n=r(97211),a=r(19935),i=r(68752),s=r(59125),c=r(31891),d=r(84146),l=r(43013),u=r(87972),p=r(41147),S=r(38029),g=r(15933),m=r(70876),y=r(90965);function v(e,{groupId:t,revision:r}){if(!e.privateKey)throw new Error("PRIVATE_KEY_MISSING");if(!t)throw new Error("GROUP_ID_MISSING");if(!r)throw new Error("GROUP_REVISION_MISSING")}function A(e,t){return{itemIds:e.items.filter((({id:e,timestamp:r})=>!t.items.find((t=>t.itemId===e&&t.timestamp>=r)))).map((e=>e.id)),itemGroupIds:e.itemGroups.filter((({id:e,revision:r})=>!t.itemGroups.find((t=>t.groupId===e&&t.revision===r)))).map((e=>e.id)),userGroupIds:e.userGroups.filter((({id:e,revision:r})=>!t.userGroups.find((t=>t.groupId===e&&t.revision===r)))).map((e=>e.id))}}function E(e,t){const{items:r,itemGroups:o,userGroups:n}=e;return{items:t.items.filter((e=>r.find((t=>t.id===e.itemId)))),itemGroups:t.itemGroups.filter((e=>o.find((t=>t.id===e.groupId)))),userGroups:t.userGroups.filter((e=>n.find((t=>t.id===e.groupId))))}}function f(e,t){const r=(e,t,r)=>{const o=t.filter((t=>!e.find((e=>r(e)===r(t)))));return e.map((e=>t.find((t=>r(t)===r(e)))||e)).concat(o)};return{items:r(e.items,t.items,o.prop("itemId")),itemGroups:r(e.itemGroups,t.itemGroups,o.prop("groupId")),userGroups:r(e.userGroups,t.userGroups,o.prop("groupId"))}}function h(e,t,r){return(0,s.sendExceptionLog)({error:t}),c.Debugger.log(e,t),Promise.resolve({userGroups:[],error:{message:t.message,action:r}})}function _(e){return JSON.stringify(e.map((e=>e.Alias)))}function T(e,t){return e.map((e=>{if(!t[e.Alias])throw new Error(`User details not found for alias: ${e.Alias}`);return{Alias:e.Alias,Login:t[e.Alias].login,PublicKey:t[e.Alias].publicKey,Permission:e.Permission}}))}async function I(e,t,r,o){if(!(o.itemIds||o.itemGroupIds||o.userGroupIds))throw new Error("MISSING_PARAMETERS");const n={...o,type:"getSharing",sharingVersion:4},{itemErrors:a,items:i,itemGroupErrors:s,itemGroups:c,userGroupErrors:d,userGroups:l}=await e.sharing.get(t,r,n);if(a&&a.length)throw new Error(a[0].message);if(s&&s.length)throw new Error(s[0].message);if(d&&d.length)throw new Error(d[0].message);return{items:i,itemGroups:c,userGroups:l}}t.getOutdatedSharingParams=A,t.getCleanSharingData=E,t.mergeSharingData=f,t.buildSharingData=async function(e,t,r,n,a){const i=E(n,a),s=A(n,i),c=o.unnest(o.values(s));return o.compose(o.equals(0),o.length)(c)?i:f(i,await I(e,t,r,s))},t.createUserGroup=function(e,t,r,o,a){return Promise.resolve().then((()=>{const i=r.spaces.find((e=>Number(e.teamId)===a.teamId));if(!i)throw new Error("TEAM_NOT_FOUND");if(!i.details.isTeamAdmin&&i.details.status!==n.SpaceStatus.Accepted)throw new Error("USER_IS_NOT_ADMIN_OF_THE_TEAM");if(!t.privateKey)throw new Error("PRIVATE_KEY_MISSING");return e.userGroup.makeUserGroupAdminItem().then((r=>Promise.all([e.userGroup.makeCreateUserGroupEvent(t,o,a,r),Promise.resolve(r)])))})).then((([r,n])=>e.userGroup.createUserGroup(t,o.teams[a.teamId],r).then((({userGroups:e,itemGroups:t})=>({userGroups:e,userGroupAdminItem:n,itemGroups:t}))))).then((({userGroups:t,userGroupAdminItem:r,itemGroups:o})=>(t.forEach((t=>(0,d.sendUsageLog)(e.store,{code:n.UsageLogCode.USAGE_GROUP_SHARING,content:{action:"createUserGroup",userGroupId:t.groupId}}))),{userGroups:t,userGroupAdminItem:r,itemGroups:o}))).catch((e=>h("Error while creating userGroup ",e,a)))},t.createSpecialUserGroup=function(e,t,r,o){const a={teamId:o,name:"_team_admin_user_group"};return Promise.resolve().then((()=>{const a=r.spaces.find((e=>Number(e.teamId)===o));if(!a)throw new Error("TEAM_NOT_FOUND");if(!a.details.isTeamAdmin&&a.details.status!==n.SpaceStatus.Accepted)throw new Error("USER_IS_NOT_ADMIN_OF_THE_TEAM");if(!t.privateKey)throw new Error("PRIVATE_KEY_MISSING");const i=a.details.teamAdmins.map((e=>({Alias:e.login,Login:e.login,Permission:"admin",Status:e.login===t.login?n.SpaceStatus.Accepted:n.SpaceStatus.Pending}))),s=_(i);return e.userGroup.findExistingUsersByAliases({login:t.login,uki:t.uki,aliases:s}).then((e=>({findUserServiceResponse:e,members:i})))})).then((({findUserServiceResponse:r,members:o})=>{const n=T(o,r);return e.userGroup.makeCreateSpecialUserGroupEvent(t,a,n)})).then((r=>e.userGroup.createUserGroup(t,{teamId:String(o)},r))).then((({userGroups:e})=>e&&e.length&&e[0]))},t.createSpecialItemGroup=function(e,t,r,o,a){return Promise.resolve().then((()=>{const i=r.spaces.find((e=>Number(e.teamId)===o.teamId));if(!i)throw new Error("TEAM_NOT_FOUND");if(!i.details.isTeamAdmin&&i.details.status!==n.SpaceStatus.Accepted)throw new Error("USER_IS_NOT_ADMIN_OF_THE_TEAM");if(!t.privateKey)throw new Error("PRIVATE_KEY_MISSING");return e.itemGroup.makeCreateSpecialItemGroupEvent(t,o,a)})).then((r=>e.itemGroup.createSpecialItemGroup(t,r)))},t.deleteItemGroup=function(e,t,{groupId:r,revision:o}){return Promise.resolve().then((()=>(v(t,{groupId:r,revision:o}),e.itemGroup.makeDeleteItemGroupEvent(r,o).then((r=>e.itemGroup.deleteItemGroup(t,r)))))).catch((e=>(h("Error while deleting itemGroup ",e,{groupId:r,revision:o}),[])))},t.deleteUserGroup=function(e,t,r,o){const a=(0,l.findTeamForGroup)(r,o.groupId);return Promise.resolve().then((()=>{v(t,o);const{groupId:r,revision:n}=o,i=(a&&a.userGroupAdminItems||[]).find((e=>e.groupId===o.groupId)),s=a.specialItemGroup&&a.specialItemGroup.revision;return e.userGroup.makeDeleteUserGroupEvent(r,n,i.itemId,s)})).then((r=>e.userGroup.deleteUserGroup(t,a,r))).then((({userGroups:t,itemGroups:r})=>(t.forEach((t=>(0,d.sendUsageLog)(e.store,{code:n.UsageLogCode.USAGE_GROUP_SHARING,content:{action:"deleteUserGroup",userGroupId:t.groupId}}))),{userGroups:t,itemGroups:r}))).catch((e=>h("Error while deleting userGroup ",e,o)))},t.renameUserGroup=function(e,t,r){return Promise.resolve().then((()=>{v(t,r);const{groupId:o,revision:a,name:i}=r;return e.userGroup.makeRenameUserGroupEvent(o,a,i).then((r=>e.userGroup.renameUserGroup(t,r))).then((({userGroups:t})=>(t.forEach((t=>(0,d.sendUsageLog)(e.store,{code:n.UsageLogCode.USAGE_GROUP_SHARING,content:{action:"renameUserGroup",userGroupId:t.groupId}}))),{userGroups:t})))})).catch((e=>h("Error while renaming userGroup ",e,r)))},t.inviteUserGroupMembers=function(e,t,r,o,a,i){return Promise.resolve().then((()=>{if(v(t,o),0===o.users.length)throw new Error("USERS_NOT_SUPPLIED");const{login:s,uki:c}=t,u=JSON.stringify(o.users.map((e=>e.alias)));return e.userGroup.findUsersByAliases({login:s,uki:c,aliases:u}).then((n=>{const i=o.users.map((e=>{const t={Alias:e.alias,Permission:e.permission},r=n[e.alias];if(!r)return t;const{login:o,publicKey:a}=r;return o&&a?{...t,Login:o,PublicKey:a}:t})),{revision:s}=o,c=(0,l.getUserGroupAdminItem)(r,a.teamId.toString(),a.groupId);if(!c)throw new Error("USER_GROUP_ADMIN_ITEM_NOT_AVAILABLE");return e.userGroup.makeInviteMembersEventAsAdmin(c,s,t,i)})).then((r=>e.userGroup.inviteUserGroupMembers(t,r))).then((({userGroups:t})=>{const r=t.find((e=>e.groupId===a.groupId)),s=r.users.length;return o.users.forEach((t=>{const o=r.users.find((e=>e.alias===t.alias));o&&(0,d.sendUsageLog)(e.store,{code:n.UsageLogCode.USAGE_GROUP_SHARING,content:{action:"inviteUserGroupUsers",userGroupId:r.groupId,targetUserid:o.userId,itemCount:0,userCount:s,subaction:String(i.newlyInvitedUsersCount)}})})),{userGroups:t}}))})).catch((e=>h("Error while inviteUserGroupMembers",new Error(`[SharingController] - inviteUserGroupMembers: ${e}`),o))).then((e=>Object.assign({refusedMembers:{}},e)))},t.revokeUserGroupMembers=async function(e,t,r,o){try{if(v(t,r),0===r.users.length)throw new Error("USERS_NOT_SUPPLIED");const{groupId:a,revision:i,users:s}=r,c=await e.userGroup.makeRevokeMembersEvent(a,i,s),{userGroups:l}=await e.userGroup.revokeUserGroupMembers(t,c),u=l.find((e=>e.groupId===r.groupId)),p=u.users.length;return r.users.forEach((t=>{const r=o.users.find((e=>e.alias===t));r&&(0,d.sendUsageLog)(e.store,{code:n.UsageLogCode.USAGE_GROUP_SHARING,content:{action:"revokeUserGroupUsers",userGroupId:u.groupId,targetUserid:r.userId,itemCount:0,userCount:p}})})),{userGroups:l}}catch(e){return h("Error while revokeUserGroupMembers",e,r)}},t.extractAliasesFromMembers=_,t.computeUserGroupMember=T,t.getSharedData=I,t.updateUserGroupMembers=async function(e,t,r){if(v(t,r),0===r.users.length)throw new Error("USERS_NOT_SUPPLIED");const{login:o,uki:n}=t,{groupId:a,revision:i,users:s}=r,c=JSON.stringify(s.map((e=>e.alias))),d=await e.userGroup.findExistingUsersByAliases({login:o,uki:n,aliases:c}),l=s.map((e=>({Alias:e.alias,Login:d[e.alias].login,PublicKey:d[e.alias].publicKey,Permission:e.permission}))),u=await e.userGroup.makeUpdateMembersEvent(a,i,l),{userGroups:p}=await e.userGroup.updateUserGroupMembers(t,u);return{userGroups:p}},t.getFreshUserGroups=function(e,t,r){const{login:o,uki:n}=t;return I(e,o,n,{itemIds:[],itemGroupIds:[],userGroupIds:r.map((e=>e.groupId))}).then((e=>e.userGroups))},t.emptySessionResponse=function(e){return Promise.reject({error:{message:"SESSION_EMPTY",action:e}})},t.handleShareItemRequest=async function e(t,r,o,i,d,l,S,g=!0){const{ITEM_DOESNT_EXIST:m,LIMIT_EXCEEDED:v,ITEM_HAS_ATTACHMENTS:A,SHARING_FAILED:E}=n.ShareItemFailureReason,f=t.getPersonalData(),h=(0,p.findDataModelObject)(i,f.credentials),_=f.notes.find((e=>e.Id===i)),T=h||_;if(!T)return{success:!1,reason:m};const I=t.getSharingData().itemGroups.find((e=>e&&e.items&&!!e.items.find((e=>e.itemId===i)))),P=t.getState();if(!(0,y.isAllowedToShareSelector)(P))return{success:!1,reason:v};if(T.Attachments&&T.Attachments.length>0)return{success:!1,reason:A};try{I?await(0,u.shareAlreadySharedItem)(t,o,I,d,l,S):await(0,u.shareUnsharedItem)(t,o,T,d,l,S)}catch(n){if(!g||!C(n)){const e=new Error(`[SharingController] - handleShareItemRequest: ${n}`);return c.Debugger.log("ERROR",e),(0,s.sendExceptionLog)({error:e}),{success:!1,reason:E,message:`${e}`}}try{return await r.getInstance().user.requestNewSync(a.Trigger.Sharing),e(t,r,o,i,d,l,S,!1)}catch(e){const t=new Error(`[SharingController] - handleShareItemRequest: ${e}`);return c.Debugger.log("ERROR",t),(0,s.sendExceptionLog)({error:t}),{success:!1,reason:E,message:`${t}`}}}return r.getInstance().user.requestNewSync(a.Trigger.Sharing),{success:!0}};const C=e=>{const t="INVALID_ITEM_GROUP_REVISION";return"getAdditionalInfo"in e&&e.getAdditionalInfo().webServiceSubMessage===t||e.message.includes(t)};t.handleRevokeSharing=async function e(t,r,o,i,c,d,l=!0){const{NOT_FOUND:p,FORBIDDEN:S,REVOKE_FAILED:g}=n.RevokeSharingFailureReason,{itemGroups:m,userGroups:y}=t.getSharingData(),v=m.find((e=>e&&e.groupId===i));if(!v)return{success:!1,reason:p,message:"This itemGroup couldn't be found."};const A=t.getUserLogin();if(!(0,u.isUserItemGroupAdmin)(v,y,A))return{success:!1,reason:S,message:"Only an admin can perform this operation."};try{await(0,u.revokeItemGroupMember)(t,o,v,c,d)}catch(n){if(l&&C(n))try{return await r.getInstance().user.requestNewSync(a.Trigger.Sharing),e(t,r,o,i,c,d,!1)}catch(e){}const u=new Error(`[SharingController] - handleRevokeSharing: ${n}`);return(0,s.sendExceptionLog)({error:u}),{success:!1,reason:g,message:`${u}`}}return r.getInstance().user.requestNewSync(a.Trigger.Sharing),{success:!0}},t.handleUpdateSharingPermission=async function e(t,r,o,i,c,d,l,p=!0){const{NOT_FOUND:S,FORBIDDEN:g,UPDATE_FAILED:m}=n.UpdateSharingPermissionFailureReason,{itemGroups:y,userGroups:v}=t.getSharingData(),A=y.find((e=>e&&e.groupId===i));if(!A)return{success:!1,reason:S,message:"This itemGroup couldn't be found."};const E=t.getUserLogin();if(!(0,u.isUserItemGroupAdmin)(A,v,E))return{success:!1,reason:g,message:"Only an admin can perform this operation."};try{await(0,u.updateSharingPermission)(t,o,A,c,d,l)}catch(n){if(p&&C(n))try{return await r.getInstance().user.requestNewSync(a.Trigger.Sharing),e(t,r,o,i,c,d,l,!1)}catch(e){}const u=new Error(`[SharingController] - handleUpdateSharingPermission: ${n}`);return(0,s.sendExceptionLog)({error:u}),{success:!1,reason:m,message:`${u}`}}return r.getInstance().user.requestNewSync(a.Trigger.Sharing),{success:!0}},t.handleSharingResponse=async function(e,t,r){const{itemGroups:o,sharingSender:n,status:i,userGroups:s}=r,c={successes:[],failures:[]},d=s.length>0?await(0,u.handlePendingUserGroupsResponse)(e,s,i,n):c,l=o.length>0?await(0,u.handlePendingItemGroupsResponse)(e,o,i,n):c;(0,S.default)().sendSharingResponseResult({status:i,itemGroups:l,userGroups:d}),t.getInstance().user.requestNewSync(a.Trigger.Sharing)},t.setPendingElementsAsSeen=function(e,t,r){const o=(0,i.setElementsAsSeenAction)(r.pendingItemGroupIds,r.pendingUserGroupIds);e.dispatch(o);const{sharingSync:n}=e.getState().userSession;t.getInstance().storeSharingSync(n)},t.isUserLastAdminOnItem=function(e,t){const r=e.getUserLogin(),{itemGroups:o}=e.getSharingData(),n=(0,m.findItemItemGroup)(t,o);return!!n&&(0,g.isUserLastAdmin)(n,r)},t.doesUserReceiveItemViaGroup=function(e,t){const r=e.getUserLogin(),{itemGroups:o,userGroups:n}=e.getSharingData(),a=(0,m.findItemItemGroup)(t,o);return!!a&&(0,g.doesUserReceiveItemGroupViaGroup)(a,n,r)}},92152:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(38591),n=r(19229);t.config={commands:{},queries:{getSharingUsers:{selector:o.viewedSharingUsersSelector},getSharingUserPermissionLevel:{selector:o.sharingUserPermissionLevelSelector}},liveQueries:{liveSharingUsers:{operator:n.sharingUsers$},liveSharingUserPermissionLevel:{operator:n.sharingUserPermissionLevel$}}}},79904:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(34676),t)},19229:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingUserPermissionLevel$=t.sharingUsers$=void 0;const o=r(18948),n=r(3343),a=r(38591),i=r(6045),s=r(28807);t.sharingUsers$=e=>{const t=(0,i.parseToken)(e),r=(0,a.createLiveSharingUsersSelector)(t.spaceId)(t.dataQuery);return(0,o.pipe)((0,n.map)(r),(0,n.distinctUntilChanged)(((e,t)=>(0,s.sameBatch)(e.items,t.items)&&e.matchingCount===t.matchingCount)))};t.sharingUserPermissionLevel$=e=>{const t=(0,a.getSharingUserPermissionLevelSelector)((0,i.parseToken)(e));return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},16548:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingUserMappers=void 0;t.getSharingUserMappers=()=>({id:e=>e.userId,itemCount:e=>e.itemCount})},76167:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingUserMatch=t.searchGetters=void 0;const o=r(57748),n=r(37047);t.searchGetters=[(0,o.stringProp)("userId")],t.sharingUserMatch=(0,n.match)(t.searchGetters)},38591:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingUserPermissionLevelSelector=t.sharingUserPermissionLevelSelector=t.createLiveSharingUsersSelector=t.viewedSharingUsersSelector=t.sharingUserMappersSelector=void 0;const o=r(28060),n=r(32034),a=r(80398),i=r(3259),s=r(66771),c=r(8153),d=r(16548),l=r(26680),u=r(76167),p=r(15933),S=r(61867),g=r(64210),m=e=>(0,n.createSelector)(S.acceptedItemGroupsSelector,c.userIdSelector,(e=>e),((t,r,o)=>(0,p.getSharingUsersFromItemGroups)(o,r,t,e)));t.sharingUserMappersSelector=()=>(0,d.getSharingUserMappers)();const y=()=>u.sharingUserMatch;t.viewedSharingUsersSelector=(e,r)=>{const n=(e=>{const r=m(e);return(0,i.getQuerySelector)(r,y,t.sharingUserMappersSelector)})(r.spaceId);return(0,o.compose)((0,a.viewListResults)(l.listView),n)(e,r.dataQuery)};t.createLiveSharingUsersSelector=e=>{const r=m(e);return(0,s.makeLiveSelectorGetter)(r,(()=>l.listView),y,t.sharingUserMappersSelector)};t.sharingUserPermissionLevelSelector=(e,{itemId:t,userId:r})=>{const o=(0,g.itemItemGroupSelector)(e,t);if(o)return(0,p.getSharingUserPermission)(o,r)};t.getSharingUserPermissionLevelSelector=({itemId:e,userId:r})=>o=>(0,t.sharingUserPermissionLevelSelector)(o,{itemId:e,userId:r})},34676:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},26680:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const o=(0,r(28060).defaultTo)("");t.detailView=e=>({id:o(e.userId),itemCount:e.itemCount});t.listView=e=>e.map(t.detailView)},38089:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(15964),n=r(77457),a=r(2137);t.config={commands:{},queries:{getUserGroups:{selector:o.viewedUserGroupsSelector},getUserGroup:{selector:o.viewedUserGroupSelector},getUserGroupPermissionLevel:{selector:o.userGroupPermissionLevelSelector},getUserGroupMembers:{selector:a.viewedUserGroupMembersSelector}},liveQueries:{liveUserGroups:{operator:n.userGroups$},liveUserGroupPermissionLevel:{operator:n.userGroupPermissionLevel$}}}},17698:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(97443),t)},77313:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserDownloadMappers=void 0;t.getUserDownloadMappers=()=>({id:e=>e.userId})},81292:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userDownloadMatch=t.searchGetters=void 0;const o=r(57748),n=r(37047);t.searchGetters=[(0,o.stringProp)("userId")],t.userDownloadMatch=(0,n.match)(t.searchGetters)},2137:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewedUserGroupMembersSelector=t.userDownloadMappersSelector=t.getUserGroupSelector=t.activeUserGroupsSelector=void 0;const o=r(32034),n=r(28060),a=r(3259),i=r(77313),s=r(81292),c=r(80398),d=r(82895),l=r(35054),u=r(8153),p=r(15933);t.activeUserGroupsSelector=(0,o.createSelector)(l.sharingDataSelector,u.userIdSelector,((e,t)=>{const{userGroups:r}=e;return(0,p.findMyAcceptedUserGroups)(r,t)}));t.getUserGroupSelector=e=>(0,o.createSelector)(t.activeUserGroupsSelector,(t=>(0,p.findUserGroup)(t,e)));t.userDownloadMappersSelector=()=>(0,i.getUserDownloadMappers)();const S=()=>s.userDownloadMatch,g=e=>{const r=(e=>{const r=(0,t.getUserGroupSelector)(e);return(0,o.createSelector)(r,(e=>(null==e?void 0:e.users)||[]))})(e);return(0,a.getQuerySelector)(r,S,t.userDownloadMappersSelector)};t.viewedUserGroupMembersSelector=(e,t)=>{const r=g(t.groupId);return(0,n.compose)((0,c.viewListResults)(d.listView),r)(e,t.dataQuery)}},82895:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const o=(0,r(28060).defaultTo)("");t.detailView=e=>({id:o(e.userId),permission:e.permission});t.listView=e=>e.map(t.detailView)},77457:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userGroupPermissionLevel$=t.userGroups$=void 0;const o=r(18948),n=r(3343),a=r(6045),i=r(15964),s=r(28807);t.userGroups$=e=>{const t=(0,a.parseToken)(e),r=(0,i.createLiveUserGroupsSelector)(t.spaceId)(t.dataQuery);return(0,o.pipe)((0,n.map)(r),(0,n.distinctUntilChanged)(((e,t)=>(0,s.sameBatch)(e.items,t.items)&&e.matchingCount===t.matchingCount)))};t.userGroupPermissionLevel$=e=>{const t=(0,i.getUserGroupPermissionLevelSelector)((0,a.parseToken)(e));return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},64996:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupMappers=void 0;t.getUserGroupMappers=()=>({name:e=>e.name,id:e=>e.groupId,itemCount:e=>e.itemCount})},65115:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userGroupMatch=t.searchGetters=void 0;const o=r(57748),n=r(37047);t.searchGetters=[(0,o.stringProp)("name")],t.userGroupMatch=(0,n.match)(t.searchGetters)},15964:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupPermissionLevelSelector=t.userGroupPermissionLevelSelector=t.viewedUserGroupSelector=t.createLiveUserGroupsSelector=t.viewedUserGroupsSelector=t.userGroupMappersSelector=t.createActiveUserGroupsSelector=void 0;const o=r(28060),n=r(32034),a=r(80398),i=r(3259),s=r(66771),c=r(8153),d=r(65115),l=r(64996),u=r(68352),p=r(35054),S=r(15933),g=r(64210);t.createActiveUserGroupsSelector=e=>(0,n.createSelector)(p.sharingDataSelector,c.userIdSelector,(e=>e),((t,r,o)=>{const{userGroups:n,itemGroups:a}=t;return(0,S.findMyAcceptedUserGroups)(n,r).map((t=>{const r=(0,S.findUserGroupItemGroups)(t.groupId,a).reduce(((t,r)=>null===e||(0,S.doesItemGroupExistInSpace)(o,r,e)?t+r.items.length:t),0);return{...t,itemCount:r}}))}));t.userGroupMappersSelector=()=>(0,l.getUserGroupMappers)();const m=()=>d.userGroupMatch;t.viewedUserGroupsSelector=(e,r)=>{const n=(e=>{const r=(0,t.createActiveUserGroupsSelector)(e);return(0,i.getQuerySelector)(r,m,t.userGroupMappersSelector)})(r.spaceId);return(0,o.compose)((0,a.viewListResults)(u.listView),n)(e,r.dataQuery)};t.createLiveUserGroupsSelector=e=>{const r=(0,t.createActiveUserGroupsSelector)(e);return(0,s.makeLiveSelectorGetter)(r,(()=>u.listView),m,t.userGroupMappersSelector)};t.viewedUserGroupSelector=(e,r)=>{const{itemGroups:o}=(0,p.sharingDataSelector)(e),n=(0,t.createActiveUserGroupsSelector)(null)(e),a=(0,S.findUserGroup)(n,r),i=(0,S.findUserGroupItemGroups)(a.groupId,o).length;if(a)return(0,u.detailView)({...a,itemCount:i})};t.userGroupPermissionLevelSelector=(e,{itemId:t,groupId:r})=>{const o=(0,g.itemItemGroupSelector)(e,t);return(0,S.getUserGroupPermission)(o,r)};t.getUserGroupPermissionLevelSelector=({itemId:e,groupId:r})=>o=>(0,t.userGroupPermissionLevelSelector)(o,{itemId:e,groupId:r})},97443:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},68352:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const o=r(28060),n=r(82895),a=(0,o.defaultTo)("");t.detailView=e=>({name:a(e.name),id:a(e.groupId),users:(0,n.listView)(e.users||[]),itemCount:e.itemCount});t.listView=e=>e.map(t.detailView)},11988:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(42840);t.bootstrap=e=>{e.register(o.config)}},23757:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0;const o=r(5037);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return o.setupSubscriptions}});var n=r(11988);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},5037:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(96045),n=r(13658),a=r(2029);t.setupSubscriptions=async function(e,t){const{sessionService:r,storeService:i,wsService:s}=t,c=(0,o.makeCryptoService)(),d=(0,n.makeItemGroupService)(s,c);e.teamSpaceContentControlDone.on((e=>{(0,a.revokeRemoteControlledSharedItems)(r,i,s,d,e)}))}},9786:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(42824),n=r(26118),a=r(14538);t.config={commands:{},queries:{getBanks:{staticDataHandler:o.getBanks},getAllBanks:{staticDataHandler:o.getAllBanks},getAllCallingCodes:{staticDataHandler:n.getAllCallingCodes},getSecureDocumentsExtensionsList:{staticDataHandler:a.getSecureDocumentsAllowedExtensions}},liveQueries:{}}},10942:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},27493:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.banks=void 0;const o=r(97211);t.banks={[o.Country.AR]:[{localizedString:"Banco Credicoop",code:"BANCOCREDICOOP"},{localizedString:"Banco de la Nación Argentina",code:"BANCODELANACIONARGEN"},{localizedString:"Banco Hipotecario",code:"BANCOHIPOTECARIO"},{localizedString:"Banco Itaú Argentina",code:"BANCOITAUARGENTINA"},{localizedString:"Banco Macro",code:"BANCOMACRO"},{localizedString:"Banco Patagonia",code:"BANCOPATAGONIA"},{localizedString:"Banco Santander Río",code:"BANCOSANTANDERRIO"},{localizedString:"Bank of the City of Buenos Aires",code:"BANKOFTHECITYOFBUENO"},{localizedString:"Bank of the Province of Buenos Aires",code:"BANKOFTHEPROVINCEOFB"},{localizedString:"BBVA Banco Francés",code:"BBVABANCOFRANCES"},{localizedString:"Central Bank of Argentina",code:"CENTRALBANKOFARGENTI"},{localizedString:"Citibank Argentina",code:"CITIBANKARGENTINA"},{localizedString:"Grupo Financiero Galicia",code:"GRUPOFINANCIEROGALIC"},{localizedString:"HSBC Bank Argentina",code:"HSBCBANKARGENTINA"},{localizedString:"Municipal Bank of Rosario",code:"MUNICIPALBANKOFROSAR"},{localizedString:"New Bank of Santa Fe",code:"NEWBANKOFSANTAFE"},{localizedString:"Other",code:"NO_TYPE"}],[o.Country.AT]:[{localizedString:"Adria Bank",code:"ADRIABANK"},{localizedString:"Allianz Investmentbank",code:"ALLIANZINVESTMENTBAN"},{localizedString:"Alpenbank",code:"ALPENBANK"},{localizedString:"American Express Bank Ltd",code:"AMERICANEXPRESSBANKL"},{localizedString:"Anglo Irish Bank",code:"ANGLOIRISHBANK"},{localizedString:"Austria Wirtschaftsservice Gesellschaft",code:"AUSTRIAWIRTSCHAFTSSE"},{localizedString:"Banco do Brasil",code:"BANCODOBRASIL"},{localizedString:"Bank Austria Creditanstalt",code:"BANKAUSTRIACREDITANS"},{localizedString:"Bank für Ärzte und Freie Berufe",code:"BANKFURARZTEUNDFREIE"},{localizedString:"Bank für Tirol und Vorarlberg",code:"BANKFURTIROLUNDVORAR"},{localizedString:"Bank Gutmann",code:"BANKGUTMANN"},{localizedString:"Bankhaus Carl Spängler & Co",code:"BANKHAUSCARLSPANGLER"},{localizedString:"Bankhaus Krentschker & Co",code:"BANKHAUSKRENTSCHKERC"},{localizedString:"Bankhaus Schelhammer & Schattera",code:"BANKHAUSSCHELHAMMERS"},{localizedString:"Bank Sal.Oppenheim jr. & Cie",code:"BANKSALOPPENHEIMJRCI"},{localizedString:"Bank Vontobel Österreich",code:"BANKVONTOBELOSTERREI"},{localizedString:"Bank Winter & Co",code:"BANKWINTERCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Raiffeisen Bank",code:"RAIFFEISENBANK"}],[o.Country.AU]:[{localizedString:"AMP Bank Limited",code:"AMPBANKLIMITED"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Auswide Bank",code:"AUSWIDEBANK"},{localizedString:"Bank Australia",code:"BANKAUSTRALIA"},{localizedString:"Bank of Melbourne",code:"BANKOFMELBOURNE"},{localizedString:"Bank of Queensland Limited",code:"BANKOFQUEENSLANDLIMI"},{localizedString:"Bank of Sydney",code:"BANKOFSYDNEY"},{localizedString:"Bank of Western Australia",code:"BANKOFWESTERNAUSTRAL"},{localizedString:"Bank SA",code:"BANKSA"},{localizedString:"BankVic",code:"BANKVIC"},{localizedString:"Bendigo and Adelaide Bank Limited",code:"BENDIGOANDADELAIDEBA"},{localizedString:"Beyond Bank Australia",code:"BEYONDBANKAUSTRALIA"},{localizedString:"Commonwealth Bank of Australia",code:"COMMONWEALTHBANKOFAU"},{localizedString:"Corporation (Australia) Limited",code:"CORPORATIONAUSTRALIA"},{localizedString:"Defence Bank",code:"DEFENCEBANK"},{localizedString:"Delphi Bank",code:"DELPHIBANK"},{localizedString:"G&C Mutual Bank",code:"GCMUTUALBANK"},{localizedString:"Heritage Bank",code:"HERITAGEBANK"},{localizedString:"Hume Bank",code:"HUMEBANK"},{localizedString:"IMB Bank",code:"IMBBANK"},{localizedString:"Macquarie Bank Limited",code:"MACQUARIEBANKLIMITED"},{localizedString:"Members Equity Bank Pty Limited",code:"MEMBERSEQUITYBANKPTY"},{localizedString:"MyState Bank",code:"MYSTATEBANK"},{localizedString:"National Australia Bank Limited",code:"NATIONALAUSTRALIABAN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"P&N Bank",code:"PNBANK"},{localizedString:"Police Bank",code:"POLICEBANK"},{localizedString:"Queensland Teachers Mutual Bank (QTMB)",code:"QUEENSLANDTEACHERSMU"},{localizedString:"Rural Bank Limited",code:"RURALBANKLIMITED"},{localizedString:"St. George Bank Limited,",code:"STGEORGEBANKLIMITED"},{localizedString:"Suncorp-Metway Limited",code:"SUNCORPMETWAYLIMITED"},{localizedString:"Teachers Mutual Bank Limited",code:"TEACHERSMUTUALBANKLI"},{localizedString:"UBank, a division of National Australia Bank",code:"UBANKADIVISIONOFNATI"},{localizedString:"Victoria Teachers Mutual Bank",code:"VICTORIATEACHERSMUTU"},{localizedString:"Westpac Banking Corporation",code:"WESTPACBANKINGCORPOR"}],[o.Country.BE]:[{localizedString:"Argenta",code:"ARGENTA"},{localizedString:"Attijariwafa Bank Europe Belgium",code:"ATTIJARIWAFABANKEURO"},{localizedString:"AXA Bank",code:"AXABANK"},{localizedString:"Banca Monte Paschi Belgio",code:"BANCAMONTEPASCHIBELG"},{localizedString:"BBVA Bélgica",code:"BBVABELGICA"},{localizedString:"Belfius Banque",code:"BELFIUSBANQUE"},{localizedString:"Beobank",code:"BEOBANK"},{localizedString:"BKCP Banque",code:"BKCPBANQUE"},{localizedString:"BNP Paribas Fortis",code:"BNPPARIBASFORTIS"},{localizedString:"bpost bank",code:"BPOSTBANK"},{localizedString:"Crelan",code:"CRELAN"},{localizedString:"Europabank",code:"EUROPABANK"},{localizedString:"Hello Bank!",code:"HELLOBANK"},{localizedString:"ING Belgium",code:"INGBELGIUM"},{localizedString:"KBC Bank",code:"KBCBANK"},{localizedString:"Keytrade Bank",code:"KEYTRADEBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank.be",code:"RABOBANKBE"},{localizedString:"Record Bank",code:"RECORDBANK"},{localizedString:"Santander Consumer Finance",code:"SANTANDERCONSUMERFIN"},{localizedString:"Triodos Bank Banque Triodos",code:"TRIODOSBANKBANQUETRI"},{localizedString:"VDK Spaarbank NV",code:"VDKSPAARBANKNV"}],[o.Country.BR]:[{localizedString:"Banco Bradesco Financiamentos",code:"BANCOBRADESCOFINANCI"},{localizedString:"Banco do Brasil",code:"BANCODOBRASIL"},{localizedString:"Banco do Estado do Rio Grande do Sul S/A",code:"BANCODOESTADODORIOGR"},{localizedString:"Banco Itaú",code:"BANCOITAU"},{localizedString:"Banco J Safra S/A",code:"BANCOJSAFRASA"},{localizedString:"Banco PanAmericano S/A",code:"BANCOPANAMERICANOSA"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"Caixa Econômica Federal",code:"CAIXAECONOMICAFEDERA"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Other",code:"NO_TYPE"}],[o.Country.CA]:[{localizedString:"B2B Bank",code:"B2BBANK"},{localizedString:"Bank of Montreal",code:"BANKOFMONTREAL"},{localizedString:"Bank of Nova Scotia",code:"BANKOFNOVASCOTIA"},{localizedString:"Bridgewater Bank",code:"BRIDGEWATERBANK"},{localizedString:"Canadian Imperial Bank of Commerce",code:"CANADIANIMPERIALBANK"},{localizedString:"Canadian Tire Bank",code:"CANADIANTIREBANK"},{localizedString:"Canadian Western Bank",code:"CANADIANWESTERNBANK"},{localizedString:"CFF Bank",code:"CFFBANK"},{localizedString:"Citizens Bank of Canada",code:"CITIZENSBANKOFCANADA"},{localizedString:"Continental Bank of Canada",code:"CONTINENTALBANKOFCAN"},{localizedString:"CS Alterna Bank",code:"CSALTERNABANK"},{localizedString:"DirectCash Bank",code:"DIRECTCASHBANK"},{localizedString:"Equitable Bank",code:"EQUITABLEBANK"},{localizedString:"First Nations Bank of Canada",code:"FIRSTNATIONSBANKOFCA"},{localizedString:"General Bank of Canada",code:"GENERALBANKOFCANADA"},{localizedString:"Hollis Canadian Bank",code:"HOLLISCANADIANBANK"},{localizedString:"HomEquity Bank",code:"HOMEQUITYBANK"},{localizedString:"Laurentian Bank of Canada",code:"LAURENTIANBANKOFCANA"},{localizedString:"Manulife Bank of Canada",code:"MANULIFEBANKOFCANADA"},{localizedString:"National Bank of Canada",code:"NATIONALBANKOFCANADA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pacific & Western Bank of Canada",code:"PACIFICWESTERNBANKOF"},{localizedString:"President's Choice Bank",code:"PRESIDENTSCHOICEBANK"},{localizedString:"RedBrick Bank",code:"REDBRICKBANK"},{localizedString:"Rogers Bank",code:"ROGERSBANK"},{localizedString:"Royal Bank of Canada",code:"ROYALBANKOFCANADA"},{localizedString:"Tangerine Bank",code:"TANGERINEBANK"},{localizedString:"Toronto-Dominion Bank",code:"TORONTODOMINIONBANK"},{localizedString:"Wealth One Bank of Canada",code:"WEALTHONEBANKOFCANAD"},{localizedString:"Zag Bank",code:"ZAGBANK"}],[o.Country.CH]:[{localizedString:"AIG Private Bank",code:"AIGPRIVATEBANK"},{localizedString:"Amtsersparniskasse Thun",code:"AMTSERSPARNISKASSETH"},{localizedString:"Anker Bank",code:"ANKERBANK"},{localizedString:"Arab Bank Switzerland",code:"ARABBANKSWITZERLAND"},{localizedString:"Banca dello Stato del Cantone Ticino",code:"BANCADELLOSTATODELCA"},{localizedString:"Bank Ehinger",code:"BANKEHINGER"},{localizedString:"Bank for International Settlements (BIS)",code:"BANKFORINTERNATIONAL"},{localizedString:"Bank Leu",code:"BANKLEU"},{localizedString:"Bankredit - Banca di Credito e Commercio",code:"BANKREDITBANCADICRED"},{localizedString:"Bank von Ernst",code:"BANKVONERNST"},{localizedString:"Banque Cantonale Vaudoise (BCV)",code:"BANQUECANTONALEVAUDO"},{localizedString:"Banque Diamantaire Anversoise",code:"BANQUEDIAMANTAIREANV"},{localizedString:"Banque Edouard Constant",code:"BANQUEEDOUARDCONSTAN"},{localizedString:"Banque Nationale Suisse - Banca Nazionale Svizzera",code:"BANQUENATIONALESUISS"},{localizedString:"Banque Piguet & Cie S.A.",code:"BANQUEPIGUETCIESA"},{localizedString:"Banque SCS Alliance",code:"BANQUESCSALLIANCE"},{localizedString:"BEKBnet/BCBE",code:"BEKBNETBCBE"},{localizedString:"BHE - Bank für Handel & Effekten",code:"BHEBANKFURHANDELEFFE"},{localizedString:"BNP - Banque Nationale de Paris",code:"BNPBANQUENATIONALEDE"},{localizedString:"BSI - Banca della Svizzera Italiana",code:"BSIBANCADELLASVIZZER"},{localizedString:"Clariden Bank",code:"CLARIDENBANK"},{localizedString:"Crédit Lyonnais Suisse",code:"CREDITLYONNAISSUISSE"},{localizedString:"Credit Suisse",code:"CREDITSUISSE"},{localizedString:"Discount Bank Group (DBTC/DBSA)",code:"DISCOUNTBANKGROUPDBT"},{localizedString:"Habib Bank AG Zürich",code:"HABIBBANKAGZURICH"},{localizedString:"Hottinger & Cie",code:"HOTTINGERCIE"},{localizedString:"Maerki, Baumann & Co. AG, Privatbank",code:"MAERKIBAUMANNCOAGPRI"},{localizedString:"Migrosbank",code:"MIGROSBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pictet & Cie",code:"PICTETCIE"},{localizedString:"Raiffeisen Internet",code:"RAIFFEISENINTERNET"},{localizedString:"Royal Bank of Canada",code:"ROYALBANKOFCANADA"},{localizedString:"SBC Warburg Dillon Read (WDR)",code:"SBCWARBURGDILLONREAD"},{localizedString:"Schwyzer Kantonalbank",code:"SCHWYZERKANTONALBANK"},{localizedString:"Skandia Bank",code:"SKANDIABANK"},{localizedString:"Solothurner Bank SoBa",code:"SOLOTHURNERBANKSOBA"},{localizedString:"Sparkassa Berneck",code:"SPARKASSABERNECK"},{localizedString:"St. Gallische Kantonalbank",code:"STGALLISCHEKANTONALB"},{localizedString:"Swiss Bank Corporation",code:"SWISSBANKCORPORATION"},{localizedString:"Thurgauer Kantonalbank",code:"THURGAUERKANTONALBAN"},{localizedString:"Union Bank of Switzerland",code:"UNIONBANKOFSWITZERLA"},{localizedString:"Wegelin & Co. Privatbankiers",code:"WEGELINCOPRIVATBANKI"},{localizedString:"Zuger Kantonalbank",code:"ZUGERKANTONALBANK"},{localizedString:"Zürcher Kantonalbank",code:"ZURCHERKANTONALBANK"}],[o.Country.CL]:[{localizedString:"Banco BICE",code:"BANCOBICE"},{localizedString:"Banco Bilbao Vizcaya Argentaria (BBVA)",code:"BANCOBILBAOVIZCAYAAR"},{localizedString:"Banco Consorcio",code:"BANCOCONSORCIO"},{localizedString:"Banco de Chile",code:"BANCODECHILE"},{localizedString:"Banco de Crédito e Inversiones",code:"BANCODECREDITOEINVER"},{localizedString:"Banco del Desarrollo",code:"BANCODELDESARROLLO"},{localizedString:"Banco del Estado de Chile",code:"BANCODELESTADODECHIL"},{localizedString:"Banco Edwards-Citi",code:"BANCOEDWARDSCITI"},{localizedString:"Banco Falabella",code:"BANCOFALABELLA"},{localizedString:"Banco Internacional",code:"BANCOINTERNACIONAL"},{localizedString:"Banco Itaú-Chile",code:"BANCOITAUCHILE"},{localizedString:"Banco Paris",code:"BANCOPARIS"},{localizedString:"Banco Penta",code:"BANCOPENTA"},{localizedString:"Banco Ripley",code:"BANCORIPLEY"},{localizedString:"Banco Santander Chile",code:"BANCOSANTANDERCHILE"},{localizedString:"Banco Security",code:"BANCOSECURITY"},{localizedString:"Central Bank of Chile",code:"CENTRALBANKOFCHILE"},{localizedString:"Corpbanca",code:"CORPBANCA"},{localizedString:"Deutsche Bank Chile",code:"DEUTSCHEBANKCHILE"},{localizedString:"HSBC Bank Chile",code:"HSBCBANKCHILE"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank",code:"RABOBANK"},{localizedString:"Scotiabank Sud Americano",code:"SCOTIABANKSUDAMERICA"}],[o.Country.CO]:[{localizedString:"AVVillas",code:"AVVILLAS"},{localizedString:"Banagrario",code:"BANAGRARIO"},{localizedString:"Bancamía",code:"BANCAMIA"},{localizedString:"Banco de Bogotá",code:"BANCODEBOGOTA"},{localizedString:"Banco de la República",code:"BANCODELAREPUBLICA"},{localizedString:"Banco de Occidente",code:"BANCODEOCCIDENTE"},{localizedString:"Bancolombia",code:"BANCOLOMBIA"},{localizedString:"Banco Popular",code:"BANCOPOPULAR"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"BBVA Colombia",code:"BBVACOLOMBIA"},{localizedString:"Caja Social",code:"CAJASOCIAL"},{localizedString:"Citibank Colombia",code:"CITIBANKCOLOMBIA"},{localizedString:"Colmena",code:"COLMENA"},{localizedString:"Colpatria",code:"COLPATRIA"},{localizedString:"Davivienda",code:"DAVIVIENDA"},{localizedString:"GBN Sudameris",code:"GBNSUDAMERIS"},{localizedString:"Helm",code:"HELM"},{localizedString:"HSBC Colombia",code:"HSBCCOLOMBIA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Procredit",code:"PROCREDIT"},{localizedString:"RBS Colombia",code:"RBSCOLOMBIA"}],[o.Country.DE]:[{localizedString:"BayernLB",code:"BAYERNLB"},{localizedString:"Commerzbank",code:"COMMERZBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"DZ Bank",code:"DZBANK"},{localizedString:"Eurohypo AG",code:"EUROHYPOAG"},{localizedString:"HSH Nordbank",code:"HSHNORDBANK"},{localizedString:"HVB Group (HypoVereinsbank)",code:"HVBGROUPHYPOVEREINSB"},{localizedString:"Hypo Real Estate Group (HRE Group)",code:"HYPOREALESTATEGROUPH"},{localizedString:"Kfw Bankgruppe",code:"KFWBANKGRUPPE"},{localizedString:"Landesbank Baden-Württemberg",code:"LANDESBANKBADENWURTT"},{localizedString:"Landesbank Berlin (LBB)",code:"LANDESBANKBERLINLBB"},{localizedString:"Landesbank Hessen-Thüringen (Helaba)",code:"LANDESBANKHESSENTHUR"},{localizedString:"Nord/LB (Norddeutsche Landesbank)",code:"NORDLBNORDDEUTSCHELA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"N26",code:"NUMBERTWENTYSIX"},{localizedString:"Postbank AG",code:"POSTBANKAG"},{localizedString:"Sparkasse",code:"SPARKASSE"},{localizedString:"WGZ Bank (Westdeutsche Genossenschafts-Zentralbank)",code:"WGZBANKWESTDEUTSCHEG"}],[o.Country.DK]:[{localizedString:"Alm Brand Bank",code:"ALMBRANDBANK"},{localizedString:"Arbejernes Landsbank",code:"ARBEJERNESLANDSBANK"},{localizedString:"Danske Bank",code:"DANSKEBANK"},{localizedString:"FIH Erhversbank",code:"FIHERHVERSBANK"},{localizedString:"Jyske Bank",code:"JYSKEBANK"},{localizedString:"Nordea",code:"NORDEA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Nykredit Bank",code:"NYKREDITBANK"},{localizedString:"Spar Nord Bank",code:"SPARNORDBANK"},{localizedString:"Syd Bank",code:"SYDBANK"},{localizedString:"Vestjysk Bank",code:"VESTJYSKBANK"}],[o.Country.EC]:[{localizedString:"Banco Amazonas",code:"BANCOAMAZONAS"},{localizedString:"Banco Bolivariano",code:"BANCOBOLIVARIANO"},{localizedString:"Banco Capital",code:"BANCOCAPITAL"},{localizedString:"Banco Cofiec",code:"BANCOCOFIEC"},{localizedString:"Banco Comercial de Manabí",code:"BANCOCOMERCIALDEMANA"},{localizedString:"Banco Coopnacional",code:"BANCOCOOPNACIONAL"},{localizedString:"Banco de Guayaquil",code:"BANCODEGUAYAQUIL"},{localizedString:"Banco del Austro",code:"BANCODELAUSTRO"},{localizedString:"Banco Delbank",code:"BANCODELBANK"},{localizedString:"Banco del Litoral",code:"BANCODELLITORAL"},{localizedString:"Banco de Loja",code:"BANCODELOJA"},{localizedString:"Banco del Pacífico",code:"BANCODELPACIFICO"},{localizedString:"Banco de Machala",code:"BANCODEMACHALA"},{localizedString:"Banco D-Miro",code:"BANCODMIRO"},{localizedString:"Banco Finca",code:"BANCOFINCA"},{localizedString:"Banco General Rumiñahui",code:"BANCOGENERALRUMINAHU"},{localizedString:"Banco Internacional",code:"BANCOINTERNACIONAL"},{localizedString:"Banco Pichincha",code:"BANCOPICHINCHA"},{localizedString:"Banco Promérica",code:"BANCOPROMERICA"},{localizedString:"Banco Solidario",code:"BANCOSOLIDARIO"},{localizedString:"Banco Sudamericano",code:"BANCOSUDAMERICANO"},{localizedString:"Citibank Ecuador",code:"CITIBANKECUADOR"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"ProCredit Bank",code:"PROCREDITBANK"},{localizedString:"Produbanco",code:"PRODUBANCO"}],[o.Country.ES]:[{localizedString:"Banca March",code:"BANCAMARCH"},{localizedString:"Banco Esfinge",code:"BANCOESFINGE"},{localizedString:"Banco Espíritu Santo",code:"BANCOESPIRITUSANTO"},{localizedString:"Banco Fimestic",code:"BANCOFIMESTIC"},{localizedString:"Banco Inversión",code:"BANCOINVERSION"},{localizedString:"Banco Popular Español",code:"BANCOPOPULARESPANOL"},{localizedString:"Banco Sabadell",code:"BANCOSABADELL"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"Bankia",code:"BANKIA"},{localizedString:"Bankinter",code:"BANKINTER"},{localizedString:"Bankpyme",code:"BANKPYME"},{localizedString:"Barclays Bank",code:"BARCLAYSBANK"},{localizedString:"BBVA",code:"BBVA"},{localizedString:"BCH Broker",code:"BCHBROKER"},{localizedString:"CaixaBank",code:"CAIXABANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"E-Cortal",code:"ECORTAL"},{localizedString:"Fiare Banca Ètica página web de Fiare",code:"FIAREBANCAETICAPAGIN"},{localizedString:"Fibanc",code:"FIBANC"},{localizedString:"Fibane",code:"FIBANE"},{localizedString:"Ibercaja",code:"IBERCAJA"},{localizedString:"ING Direct",code:"INGDIRECT"},{localizedString:"InterCaja Social .ES",code:"INTERCAJASOCIALES"},{localizedString:"Merrill Lynch",code:"MERRILLLYNCH"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Openbank",code:"OPENBANK"},{localizedString:"Salomon Smith Barney",code:"SALOMONSMITHBARNEY"},{localizedString:"Schroders",code:"SCHRODERS"},{localizedString:"Triodos Bank",code:"TRIODOSBANK"},{localizedString:"UNO-e",code:"UNOE"}],[o.Country.FI]:[{localizedString:"Aktia Savings Bank",code:"AKTIASAVINGSBANK"},{localizedString:"Bank of Åland",code:"BANKOFALAND"},{localizedString:"eQ Bank",code:"EQBANK"},{localizedString:"Evli Bank",code:"EVLIBANK"},{localizedString:"Helsinki OP Bank",code:"HELSINKIOPBANK"},{localizedString:"Kaupthing Bank",code:"KAUPTHINGBANK"},{localizedString:"Nordea Bank Finland",code:"NORDEABANKFINLAND"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OP-Kotipankki",code:"OPKOTIPANKKI"},{localizedString:"Pohjola Bank",code:"POHJOLABANK"},{localizedString:"Sampo Bank",code:"SAMPOBANK"},{localizedString:"S-Bank",code:"SBANK"},{localizedString:"SEB Gyllenberg Private Bank",code:"SEBGYLLENBERGPRIVATE"},{localizedString:"Suomen AsuntoHypoPankki",code:"SUOMENASUNTOHYPOPANK"},{localizedString:"Tapiola Bank",code:"TAPIOLABANK"}],[o.Country.FR]:[{localizedString:"Axa Banque",code:"AXA"},{localizedString:"Banque Populaire",code:"BANQPOPUL"},{localizedString:"La Banque Postale",code:"BANQPOSTA"},{localizedString:"Banque Casino",code:"BANQUECASINO"},{localizedString:"Banque de France",code:"BANQUEDEFRANCE"},{localizedString:"Barclays",code:"BARCLAYS"},{localizedString:"BforBank",code:"BFORBANK"},{localizedString:"BNP Paribas",code:"BNP"},{localizedString:"Boursorama Banque",code:"BOURSORAMA"},{localizedString:"BRED",code:"BRED"},{localizedString:"Caisse d'Épargne",code:"CAISSEEPAR"},{localizedString:"Carrefour-Banque",code:"CARREFOURBANQUE"},{localizedString:"CIC",code:"CIC"},{localizedString:"Crédit Mutuel de Bretagne",code:"CMB"},{localizedString:"Crédit Mutuel Nord Europe",code:"CMNE"},{localizedString:"Crédit Agricole",code:"CREDAGRIC"},{localizedString:"Crédit Coopératif",code:"CREDCOOPE"},{localizedString:"Crédit Foncier",code:"CREDFONCI"},{localizedString:"Crédit Mutuel",code:"CREDMUTUEL"},{localizedString:"Crédit du Nord",code:"CREDNORD"},{localizedString:"Fortuneo Banque",code:"FORTUNEOBANQUE"},{localizedString:"Groupama Banque",code:"GROUPAMA"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"ING Direct",code:"INGDIRECT"},{localizedString:"LCL",code:"LCL"},{localizedString:"Autre",code:"NO_TYPE"},{localizedString:"Société Générale",code:"SOGE"}],[o.Country.GB]:[{localizedString:"Barclays Bank",code:"BARCLAYS"},{localizedString:"Coutts",code:"COUTTS"},{localizedString:"HBOS",code:"HBOS"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Lloyds Banking Group",code:"LLOYDS"},{localizedString:"NatWest",code:"NATWEST"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Royal Bank of Scotland (RBS)",code:"RBS"},{localizedString:"Santander",code:"SANTANDER"},{localizedString:"Standard Chartered",code:"STANDCHAR"},{localizedString:"Virgin Money",code:"VIRGINMONEY"},{localizedString:"Yorkshire Bank",code:"YORKSHIRE"},{localizedString:"Yorkshire Building Society",code:"YORKSHIREBS"}],[o.Country.GT]:[{localizedString:"Agromercantil",code:"AGROMERCANTIL"},{localizedString:"Azteca Bank",code:"AZTECABANK"},{localizedString:"BAC Bank",code:"BACBANK"},{localizedString:"Bank of Antigua",code:"BANKOFANTIGUA"},{localizedString:"Bantrab Bank",code:"BANTRABBANK"},{localizedString:"Citi Bank",code:"CITIBANK"},{localizedString:"Credito Hipotecario Bank",code:"CREDITOHIPOTECARIOBA"},{localizedString:"De Credito Bank",code:"DECREDITOBANK"},{localizedString:"Ficohsa Bank",code:"FICOHSABANK"},{localizedString:"G&T Continental Bank",code:"GTCONTINENTALBANK"},{localizedString:"Industrial bank",code:"INDUSTRIALBANK"},{localizedString:"Inmobiliario Bank",code:"INMOBILIARIOBANK"},{localizedString:"Internacional Bank",code:"INTERNACIONALBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Reformador Bank",code:"REFORMADORBANK"},{localizedString:"Vivibanco Bank",code:"VIVIBANCOBANK"}],[o.Country.HK]:[{localizedString:"Bank of China",code:"BANKOFCHINA"},{localizedString:"Bank of East Asia, The",code:"BANKOFEASTASIATHE"},{localizedString:"China CITIC Bank International",code:"CHINACITICBANKINTERN"},{localizedString:"China Construction Bank",code:"CHINACONSTRUCTIONBAN"},{localizedString:"Chiyu Banking Corporation",code:"CHIYUBANKINGCORPORAT"},{localizedString:"Chong Hing Bank",code:"CHONGHINGBANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Dah Sing Bank",code:"DAHSINGBANK"},{localizedString:"DBS Bank",code:"DBSBANK"},{localizedString:"Fubon Bank",code:"FUBONBANK"},{localizedString:"Hang Seng Bank",code:"HANGSENGBANK"},{localizedString:"Hongkong and Shanghai Banking Corporation, The",code:"HONGKONGANDSHANGHAIB"},{localizedString:"Industrial and Commercial Bank of China",code:"INDUSTRIALANDCOMMERC"},{localizedString:"Nanyang Commercial Bank",code:"NANYANGCOMMERCIALBAN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OCBC Wing Hang Bank",code:"OCBCWINGHANGBANK"},{localizedString:"Public Bank",code:"PUBLICBANK"},{localizedString:"Shanghai Commercial Bank",code:"SHANGHAICOMMERCIALBA"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"Tai Sang Bank",code:"TAISANGBANK"},{localizedString:"Tai Yau Bank",code:"TAIYAUBANK"},{localizedString:"Wing Lung Bank",code:"WINGLUNGBANK"}],[o.Country.IE]:[{localizedString:"ACC Bank",code:"ACCBANK"},{localizedString:"Allied Irish Banks",code:"ALLIEDIRISHBANKS"},{localizedString:"Anglo Irish Bank",code:"ANGLOIRISHBANK"},{localizedString:"Bank of Ireland",code:"BANKOFIRELAND"},{localizedString:"Barclays Bank Ireland",code:"BARCLAYSBANKIRELAND"},{localizedString:"Bear Stearns Bank",code:"BEARSTEARNSBANK"},{localizedString:"Capmark Bank Europe",code:"CAPMARKBANKEUROPE"},{localizedString:"Citibank Europe",code:"CITIBANKEUROPE"},{localizedString:"Fortis Prime Fund Solutions Bank",code:"FORTISPRIMEFUNDSOLUT"},{localizedString:"Goldman Sachs Bank",code:"GOLDMANSACHSBANK"},{localizedString:"Goldman Sachs Private Bank",code:"GOLDMANSACHSPRIVATEB"},{localizedString:"Helaba Dublin Landesbank Hessen-Thüringen International",code:"HELABADUBLINLANDESBA"},{localizedString:"Hewlett-Packard International Bank",code:"HEWLETTPACKARDINTERN"},{localizedString:"Hypo Public Finance Bank",code:"HYPOPUBLICFINANCEBAN"},{localizedString:"Intesa Sanpaolo Bank Ireland",code:"INTESASANPAOLOBANKIR"},{localizedString:"Irish Life & Permanent",code:"IRISHLIFEPERMANENT"},{localizedString:"JP Morgan Bank",code:"JPMORGANBANK"},{localizedString:"KBC Bank Ireland",code:"KBCBANKIRELAND"},{localizedString:"LGT Bank",code:"LGTBANK"},{localizedString:"Merrill Lynch International Bank",code:"MERRILLLYNCHINTERNAT"},{localizedString:"Naspa Dublin",code:"NASPADUBLIN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pfizer International Bank Europe",code:"PFIZERINTERNATIONALB"},{localizedString:"PFPC Bank",code:"PFPCBANK"}],[o.Country.IN]:[{localizedString:"ABN AMRO India",code:"ABNAMROINDIA"},{localizedString:"Abu Dhabi Commercial Bank India",code:"ABUDHABICOMMERCIALBA"},{localizedString:"Allahabad Bank",code:"ALLAHABADBANK"},{localizedString:"Andhra Bank",code:"ANDHRABANK"},{localizedString:"Axis Bank Limited",code:"AXISBANKLIMITED"},{localizedString:"Canara Bank",code:"CANARABANK"},{localizedString:"Central Bank of India",code:"CENTRALBANKOFINDIA"},{localizedString:"Centurion Bank of Punjab",code:"CENTURIONBANKOFPUNJA"},{localizedString:"Citibank India",code:"CITIBANKINDIA"},{localizedString:"Corporation Bank",code:"CORPORATIONBANK"},{localizedString:"DCB (Development Credit Bank Ltd)",code:"DCBDEVELOPMENTCREDIT"},{localizedString:"Dena Bank",code:"DENABANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"Guardian Souharda Sahakari Bank Niyamita",code:"GUARDIANSOUHARDASAHA"},{localizedString:"HDFC Bank",code:"HDFCBANK"},{localizedString:"IDBI Bank",code:"IDBIBANK"},{localizedString:"Indian Bank",code:"INDIANBANK"},{localizedString:"Indian Overseas Bank",code:"INDIANOVERSEASBANK"},{localizedString:"IndusInd Bank Ltd",code:"INDUSINDBANKLTD"},{localizedString:"ING Vysya Bank",code:"INGVYSYABANK"},{localizedString:"Maharshtra Bank",code:"MAHARSHTRABANK"},{localizedString:"Mandvi Bank",code:"MANDVIBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Oriental Bank of Commerce",code:"ORIENTALBANKOFCOMMER"},{localizedString:"Saraswat Bank",code:"SARASWATBANK"},{localizedString:"South Indian Bank",code:"SOUTHINDIANBANK"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"State Bank of Hyderabad",code:"STATEBANKOFHYDERABAD"},{localizedString:"State Bank of Saurashtra",code:"STATEBANKOFSAURASHTR"},{localizedString:"Syndicate Bank",code:"SYNDICATEBANK"},{localizedString:"The Federal Bank Ltd",code:"THEFEDERALBANKLTD"},{localizedString:"UCO Bank",code:"UCOBANK"},{localizedString:"Union Bank of India",code:"UNIONBANKOFINDIA"}],[o.Country.IT]:[{localizedString:"Banca Carige",code:"BANCACARIGE"},{localizedString:"Banca Pop. Milano",code:"BANCAPOPMILANO"},{localizedString:"Banco Popolare",code:"BANCOPOPOLARE"},{localizedString:"B Monte Paschi Siena",code:"BMONTEPASCHISIENA"},{localizedString:"Credito Emiliano",code:"CREDITOEMILIANO"},{localizedString:"Intesa Sanpaolo",code:"INTESASANPAOLO"},{localizedString:"Mediobanca",code:"MEDIOBANCA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Ubi Banca",code:"UBIBANCA"},{localizedString:"Unicredit - Capitalia",code:"UNICREDITCAPITALIA"}],[o.Country.JP]:[{localizedString:"Chiba Kōgyō Bank",code:"CHIBAKOGYOBANK"},{localizedString:"Mitsubishi UFJ Financial Group",code:"MITSUBISHIUFJFINANCI"},{localizedString:"Mitsubishi UFJ Trust and Banking Corporation",code:"MITSUBISHIUFJTRUSTAN"},{localizedString:"Mizuho Bank",code:"MIZUHOBANK"},{localizedString:"Mizuho Corporate Bank",code:"MIZUHOCORPORATEBANK"},{localizedString:"Mizuho Financial Group",code:"MIZUHOFINANCIALGROUP"},{localizedString:"Mizuho Trust & Banking Co.",code:"MIZUHOTRUSTBANKINGCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Sumitomo Mitsui Banking Corporation",code:"SUMITOMOMITSUIBANKIN"},{localizedString:"Sumitomo Mitsui Financial Group",code:"SUMITOMOMITSUIFINANC"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Master Trust Bank of Japan",code:"THEMASTERTRUSTBANKOF"},{localizedString:"The Senshū Bank",code:"THESENSHUBANK"},{localizedString:"Trust & Custody Services Bank",code:"TRUSTCUSTODYSERVICES"}],[o.Country.LU]:[{localizedString:"Banque et Caisse d'Epargne de l'Etat, Luxembourg (BCEE)",code:"BANQUEETCAISSEDEPARG"},{localizedString:"Banque Générale du Luxembourg",code:"BANQUEGENERALEDULUXE"},{localizedString:"Banque IPPA et Associes Luxembourg",code:"BANQUEIPPAETASSOCIES"},{localizedString:"Banque UCL",code:"BANQUEUCL"},{localizedString:"Die Sparkasse Bremen",code:"DIESPARKASSEBREMEN"},{localizedString:"KBL",code:"KBL"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Robeco Bank",code:"ROBECOBANK"},{localizedString:"SGZ-Bank International",code:"SGZBANKINTERNATIONAL"},{localizedString:"WestLB International",code:"WESTLBINTERNATIONAL"}],[o.Country.MX]:[{localizedString:"Banamex",code:"BANAMEX"},{localizedString:"Banca Afirme",code:"BANCAAFIRME"},{localizedString:"Banco Azteca",code:"BANCOAZTECA"},{localizedString:"Banco del Bajio",code:"BANCODELBAJIO"},{localizedString:"Banco J.P. Morgan",code:"BANCOJPMORGAN"},{localizedString:"Bank of America Mexico",code:"BANKOFAMERICAMEXICO"},{localizedString:"Banorte",code:"BANORTE"},{localizedString:"BanRegio",code:"BANREGIO"},{localizedString:"BBVA Bancomer",code:"BBVABANCOMER"},{localizedString:"Deutsche Bank Mexico",code:"DEUTSCHEBANKMEXICO"},{localizedString:"HSBC Mexico",code:"HSBCMEXICO"},{localizedString:"Inbursa",code:"INBURSA"},{localizedString:"ING Bank Mexico",code:"INGBANKMEXICO"},{localizedString:"Interacciones",code:"INTERACCIONES"},{localizedString:"Invex Controladora",code:"INVEXCONTROLADORA"},{localizedString:"Ixe Banco",code:"IXEBANCO"},{localizedString:"Mifel",code:"MIFEL"},{localizedString:"Monex",code:"MONEX"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Santander Mexico",code:"SANTANDERMEXICO"},{localizedString:"Scotiabank Inverlat",code:"SCOTIABANKINVERLAT"}],[o.Country.NL]:[{localizedString:"ABN Amro",code:"ABNAMRO"},{localizedString:"Amsterdam Trade Bank",code:"AMSTERDAMTRADEBANK"},{localizedString:"ASN Bank",code:"ASNBANK"},{localizedString:"Bank Mendes Gans",code:"BANKMENDESGANS"},{localizedString:"Bank Nederlandse Gemeenten",code:"BANKNEDERLANDSEGEMEE"},{localizedString:"BinckBank",code:"BINCKBANK"},{localizedString:"Credit Europe Bank",code:"CREDITEUROPEBANK"},{localizedString:"Demir Halk Bank",code:"DEMIRHALKBANK"},{localizedString:"Friesland Bank",code:"FRIESLANDBANK"},{localizedString:"GE Artesia Bank",code:"GEARTESIABANK"},{localizedString:"ING Group",code:"INGGROUP"},{localizedString:"Kempen & Co",code:"KEMPENCO"},{localizedString:"Nederlandse Waterschapsbank",code:"NEDERLANDSEWATERSCHA"},{localizedString:"Netherlands Development Finance Company",code:"NETHERLANDSDEVELOPME"},{localizedString:"NIBC Bank",code:"NIBCBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank",code:"RABOBANK"},{localizedString:"SNS Bank",code:"SNSBANK"},{localizedString:"Triodos Bank",code:"TRIODOSBANK"},{localizedString:"Van Lanschot",code:"VANLANSCHOT"}],[o.Country.NO]:[{localizedString:"Bolig- og Næringsbanken",code:"BOLIGOGNAERINGSBANKE"},{localizedString:"Cresco",code:"CRESCO"},{localizedString:"DnB NOR Bank",code:"DNBNORBANK"},{localizedString:"Fokus Bank",code:"FOKUSBANK"},{localizedString:"Landkreditt Bank",code:"LANDKREDITTBANK"},{localizedString:"Netfonds Bank",code:"NETFONDSBANK"},{localizedString:"Nordea Bank Norge",code:"NORDEABANKNORGE"},{localizedString:"Nordlandsbanken",code:"NORDLANDSBANKEN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pareto Bank",code:"PARETOBANK"},{localizedString:"Santander Consumer Bank",code:"SANTANDERCONSUMERBAN"},{localizedString:"SEB Privatbanken",code:"SEBPRIVATBANKEN"},{localizedString:"Storebrand Bank",code:"STOREBRANDBANK"},{localizedString:"Verdibanken",code:"VERDIBANKEN"},{localizedString:"Voss Veksel- og Landmandsbank",code:"VOSSVEKSELOGLANDMAND"},{localizedString:"yA Bank",code:"YABANK"}],[o.Country.NZ]:[{localizedString:"ANZ Bank of New Zealand Limited",code:"ANZBANKOFNEWZEALANDL"},{localizedString:"ASB Bank Limited",code:"ASBBANKLIMITED"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Bank of Baroda (New Zealand) Limited",code:"BANKOFBARODANEWZEALA"},{localizedString:"Bank of China (New Zealand) Limited",code:"BANKOFCHINANEWZEALAN"},{localizedString:"Bank of India (New Zealand) Limited",code:"BANKOFINDIANEWZEALAN"},{localizedString:"Bank of New Zealand",code:"BANKOFNEWZEALAND"},{localizedString:"China Construction Bank",code:"CHINACONSTRUCTIONBAN"},{localizedString:"Citibank N.A.",code:"CITIBANKNA"},{localizedString:"Commonwealth Bank of Australia",code:"COMMONWEALTHBANKOFAU"},{localizedString:"Deutsche Bank AG",code:"DEUTSCHEBANKAG"},{localizedString:"Heartland Bank Limited",code:"HEARTLANDBANKLIMITED"},{localizedString:"ICBC",code:"ICBC"},{localizedString:"JPMorgan Chase Bank N.A.",code:"JPMORGANCHASEBANKNA"},{localizedString:"Kiwibank Limited",code:"KIWIBANKLIMITED"},{localizedString:"Kookmin Bank",code:"KOOKMINBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank Nederland",code:"RABOBANKNEDERLAND"},{localizedString:"Rabobank New Zealand Limited",code:"RABOBANKNEWZEALANDLI"},{localizedString:"Southland Building Society",code:"SOUTHLANDBUILDINGSOC"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Co-operative Bank Limited",code:"THECOOPERATIVEBANKLI"},{localizedString:"The Hongkong and Shanghai Banking Corp",code:"THEHONGKONGANDSHANGH"},{localizedString:"TSB Bank Limited",code:"TSBBANKLIMITED"},{localizedString:"Westpac Banking Corporation",code:"WESTPACBANKINGCORPOR"},{localizedString:"Westpac New Zealand Limited",code:"WESTPACNEWZEALANDLIM"}],[o.Country.PE]:[{localizedString:"Agrobanco",code:"AGROBANCO"},{localizedString:"Banco Azteca",code:"BANCOAZTECA"},{localizedString:"Banco Central de Reserva del Perú",code:"BANCOCENTRALDERESERV"},{localizedString:"Banco de Comercio",code:"BANCODECOMERCIO"},{localizedString:"Banco del Trabajo",code:"BANCODELTRABAJO"},{localizedString:"Banco de Materiales",code:"BANCODEMATERIALES"},{localizedString:"Banco Falabella",code:"BANCOFALABELLA"},{localizedString:"Banco Financiero",code:"BANCOFINANCIERO"},{localizedString:"Banco Interamericano de Finanzas",code:"BANCOINTERAMERICANOD"},{localizedString:"Banco Ripley",code:"BANCORIPLEY"},{localizedString:"BBVA",code:"BBVA"},{localizedString:"BCP",code:"BCP"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Interbank",code:"INTERBANK"},{localizedString:"Mibanco",code:"MIBANCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Santander",code:"SANTANDER"},{localizedString:"Scotiabank",code:"SCOTIABANK"},{localizedString:"Standard Chartered",code:"STANDARDCHARTERED"}],[o.Country.PH]:[{localizedString:"Al-Amanah Islamic Investment Bank of the Philippines",code:"ALAMANAHISLAMICINVES"},{localizedString:"Asia United Bank",code:"ASIAUNITEDBANK"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Bangkok Bank",code:"BANGKOKBANK"},{localizedString:"Bank of America, N.A.",code:"BANKOFAMERICANA"},{localizedString:"Bank of China",code:"BANKOFCHINA"},{localizedString:"Bank of Commerce",code:"BANKOFCOMMERCE"},{localizedString:"Bank of the Philippine Islands",code:"BANKOFTHEPHILIPPINEI"},{localizedString:"BDO Private Bank",code:"BDOPRIVATEBANK"},{localizedString:"BDO Unibank",code:"BDOUNIBANK"},{localizedString:"Chinabank",code:"CHINABANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"CTBC Bank",code:"CTBCBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"Development Bank of the Philippines",code:"DEVELOPMENTBANKOFTHE"},{localizedString:"EastWest Bank",code:"EASTWESTBANK"},{localizedString:"ING Group",code:"INGGROUP"},{localizedString:"JPMorgan Chase",code:"JPMORGANCHASE"},{localizedString:"Land Bank of the Philippines",code:"LANDBANKOFTHEPHILIPP"},{localizedString:"Maybank Philippines, Inc.",code:"MAYBANKPHILIPPINESIN"},{localizedString:"Mega International Commercial Bank",code:"MEGAINTERNATIONALCOM"},{localizedString:"Metropolitan Bank and Trust Company",code:"METROPOLITANBANKANDT"},{localizedString:"Mizuho Bank, Ltd.",code:"MIZUHOBANKLTD"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Philippine Bank of Communications",code:"PHILIPPINEBANKOFCOMM"},{localizedString:"Philippine National Bank",code:"PHILIPPINENATIONALBA"},{localizedString:"Philippine Veterans Bank",code:"PHILIPPINEVETERANSBA"},{localizedString:"Philtrust Bank",code:"PHILTRUSTBANK"},{localizedString:"Rizal Commercial Banking Corporation",code:"RIZALCOMMERCIALBANKI"},{localizedString:"Robinsons Bank",code:"ROBINSONSBANK"},{localizedString:"Security Bank",code:"SECURITYBANK"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ, Ltd.",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Hongkong and Shanghai Banking Corporation",code:"THEHONGKONGANDSHANGH"},{localizedString:"Union Bank of the Philippines",code:"UNIONBANKOFTHEPHILIP"},{localizedString:"United Coconut Planters Bank",code:"UNITEDCOCONUTPLANTER"}],[o.Country.PT]:[{localizedString:"Atlantico - Banco Português do Atlântico",code:"ATLANTICOBANCOPORTUG"},{localizedString:"Banco 7",code:"BANCO7"},{localizedString:"Banco BPI",code:"BANCOBPI"},{localizedString:"Banco Comercial Português",code:"BANCOCOMERCIALPORTUG"},{localizedString:"Banco de Portugal",code:"BANCODEPORTUGAL"},{localizedString:"Banco Espirito Santo",code:"BANCOESPIRITOSANTO"},{localizedString:"Banco Internacional de Crédito, S.A.",code:"BANCOINTERNACIONALDE"},{localizedString:"Banco Mello",code:"BANCOMELLO"},{localizedString:"Banif - Banco Internacional do Funchal",code:"BANIFBANCOINTERNACIO"},{localizedString:"Barclays Netbanking Portugal",code:"BARCLAYSNETBANKINGPO"},{localizedString:"Caixa Geral de Depósitos",code:"CAIXAGERALDEDEPOSITO"},{localizedString:"Cisf - Banco de Investimento, S.A.",code:"CISFBANCODEINVESTIME"},{localizedString:"Other",code:"NO_TYPE"}],[o.Country.SE]:[{localizedString:"ABN AMRO Bank Sweden",code:"ABNAMROBANKSWEDEN"},{localizedString:"First Baltic Savings",code:"FIRSTBALTICSAVINGS"},{localizedString:"FöreningsSparbanken (Swedbank)",code:"FORENINGSSPARBANKENS"},{localizedString:"JP Bank",code:"JPBANK"},{localizedString:"Nordbanken",code:"NORDBANKEN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Östgöta Enskilda Bank",code:"OSTGOTAENSKILDABANK"},{localizedString:"Skandia Banken",code:"SKANDIABANKEN"},{localizedString:"Skandinaviska Enskilda Banken",code:"SKANDINAVISKAENSKILD"},{localizedString:"Sparbanken Sverige - Swedbank",code:"SPARBANKENSVERIGESWE"},{localizedString:"Stadshypotek",code:"STADSHYPOTEK"},{localizedString:"Svenska Handelsbanken-SHB",code:"SVENSKAHANDELSBANKEN"},{localizedString:"Sveriges Riksbank",code:"SVERIGESRIKSBANK"},{localizedString:"Trygg Hansa",code:"TRYGGHANSA"},{localizedString:"Westra Wermlands Sparbank",code:"WESTRAWERMLANDSSPARB"}],[o.Country.SG]:[{localizedString:"Bank of America",code:"BANKOFAMERICA"},{localizedString:"Barclays bank",code:"BARCLAYSBANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Developmental Bank of Singapore",code:"DEVELOPMENTALBANKOFS"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OCBC Bank",code:"OCBCBANK"},{localizedString:"Post Office Savings Bank",code:"POSTOFFICESAVINGSBAN"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"State Bank of India",code:"STATEBANKOFINDIA"},{localizedString:"United Overseas Bank",code:"UNITEDOVERSEASBANK"}],[o.Country.US]:[{localizedString:"Ally Bank",code:"ALLY"},{localizedString:"American Express",code:"AMERICANEXPRESS"},{localizedString:"Associated Bank",code:"ASSOCIATED"},{localizedString:"Bank of the West",code:"BANKWEST"},{localizedString:"Barclays Bank",code:"BARCLAYS"},{localizedString:"BMO Harris Bank",code:"BMO"},{localizedString:"Bank of America",code:"BOA"},{localizedString:"Branch Banking and Trust Company",code:"BRANCH"},{localizedString:"Capital One",code:"CAPITALONE"},{localizedString:"Charles Schwab Bank",code:"CHARSCHWA"},{localizedString:"Chase Bank USA",code:"CHASE"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Citizens Bank of Pennsylvania",code:"CITIZENS"},{localizedString:"City National Bank",code:"CITYNATIONAL"},{localizedString:"Compass Bank",code:"COMPASS"},{localizedString:"CU Hawaii",code:"CUHAWAII"},{localizedString:"Discover Bank",code:"DISCOVER"},{localizedString:"E-Trade Bank",code:"ETRADE"},{localizedString:"Fifth Third Bank",code:"FIFTHTHIRD"},{localizedString:"First-Citizens Bank and Trust Company",code:"FIRSTCITIZENS"},{localizedString:"Fortune Bank",code:"FORTUNEBANK"},{localizedString:"Harris National Association",code:"HARRIS"},{localizedString:"HSBC Bank USA",code:"HSBC"},{localizedString:"Hudson City Savings Bank",code:"HUDSONCITY"},{localizedString:"The Huntington National Bank",code:"HUNTINGTON"},{localizedString:"ING Bank, fsb",code:"INGBANK"},{localizedString:"JPMorgan Chase Bank",code:"JPMORGAN"},{localizedString:"Keybank",code:"KEYBANK"},{localizedString:"Manufacturers and Traders Trust Company",code:"MANUFACTUR"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"New York Community Bank",code:"NYCOMMUNITY"},{localizedString:"The Bank of New York Mellon",code:"NYMELLON"},{localizedString:"PNC Bank",code:"PNC"},{localizedString:"Banco Popular de Puerto Rico",code:"PUERTORICO"},{localizedString:"RBC Bank",code:"RBC"},{localizedString:"RBS Citizens",code:"RBS"},{localizedString:"Regions Bank",code:"REGIONS"},{localizedString:"Sovereign Bank",code:"SOVEREIGN"},{localizedString:"State Street Bank and Trust Co.",code:"STATESTREET"},{localizedString:"SunTrust Bank",code:"SUNTRUST"},{localizedString:"Silicon Valley Bank",code:"SVB"},{localizedString:"Synovus Bank",code:"SYNOVUS"},{localizedString:"TD Bank",code:"TDBANK"},{localizedString:"UBS Bank",code:"UBS"},{localizedString:"Union Bank",code:"UNION"},{localizedString:"USAA Federal Savings Bank",code:"USAAFEDERAL"},{localizedString:"U.S. Bank",code:"USBANK"},{localizedString:"Wells Fargo",code:"WELLSFARGO"}],[o.Country.VE]:[{localizedString:"100% Banco",code:"100BANCO"},{localizedString:"Bancaribe",code:"BANCARIBE"},{localizedString:"Banco Bicentenario",code:"BANCOBICENTENARIO"},{localizedString:"Banco de Venezuela",code:"BANCODEVENEZUELA"},{localizedString:"Banco Industrial de Venezuela",code:"BANCOINDUSTRIALDEVEN"},{localizedString:"Banco Mercantil",code:"BANCOMERCANTIL"},{localizedString:"Banco Nacional de Crédito",code:"BANCONACIONALDECREDI"},{localizedString:"Banco Occidental de Descuento",code:"BANCOOCCIDENTALDEDES"},{localizedString:"Banco Venezolano de Crédito",code:"BANCOVENEZOLANODECRE"},{localizedString:"Bandes",code:"BANDES"},{localizedString:"Banesco",code:"BANESCO"},{localizedString:"BBVA Provincial",code:"BBVAPROVINCIAL"},{localizedString:"Central Bank of Venezuela",code:"CENTRALBANKOFVENEZUE"},{localizedString:"Fondo Común",code:"FONDOCOMUN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Sofitasa",code:"SOFITASA"},{localizedString:"Women's Development Bank",code:"WOMENSDEVELOPMENTBAN"}],[o.Country.ZA]:[{localizedString:"Absa",code:"ABSA"},{localizedString:"Capitec Banking Group",code:"CAPITECBANKINGGROUP"},{localizedString:"FNB",code:"FNB"},{localizedString:"Investec Bank",code:"INVESTECBANK"},{localizedString:"Nedbank",code:"NEDBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Standard Bank",code:"STANDARDBANK"}]}},42824:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAllBanks=t.getBanks=void 0;const o=r(27493);t.getBanks=function(e){return{banks:o.banks[e.country]}},t.getAllBanks=function(){return o.banks}},37662:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(97211);t.default={[o.Country.AF]:93,[o.Country.AX]:358,[o.Country.AL]:355,[o.Country.DZ]:213,[o.Country.AS]:1684,[o.Country.AD]:376,[o.Country.AO]:244,[o.Country.AI]:1264,[o.Country.AQ]:672,[o.Country.AG]:1268,[o.Country.AR]:54,[o.Country.AM]:374,[o.Country.AW]:297,[o.Country.AU]:61,[o.Country.AT]:43,[o.Country.AZ]:994,[o.Country.BS]:1242,[o.Country.BH]:973,[o.Country.BD]:880,[o.Country.BB]:1246,[o.Country.BY]:375,[o.Country.BE]:32,[o.Country.BZ]:501,[o.Country.BJ]:229,[o.Country.BM]:1441,[o.Country.BT]:975,[o.Country.BO]:591,[o.Country.BA]:387,[o.Country.BW]:267,[o.Country.BR]:55,[o.Country.IO]:246,[o.Country.BN]:673,[o.Country.BG]:359,[o.Country.BF]:226,[o.Country.BI]:257,[o.Country.KH]:855,[o.Country.CM]:237,[o.Country.CA]:1,[o.Country.CV]:238,[o.Country.KY]:345,[o.Country.CF]:236,[o.Country.TD]:235,[o.Country.CL]:56,[o.Country.CN]:86,[o.Country.CX]:61,[o.Country.CC]:61,[o.Country.CO]:57,[o.Country.KM]:269,[o.Country.CG]:242,[o.Country.CD]:243,[o.Country.CK]:682,[o.Country.CR]:506,[o.Country.CI]:225,[o.Country.HR]:385,[o.Country.CU]:53,[o.Country.CY]:357,[o.Country.CZ]:420,[o.Country.DK]:45,[o.Country.DJ]:253,[o.Country.DM]:1767,[o.Country.DO]:1849,[o.Country.EC]:593,[o.Country.EG]:20,[o.Country.SV]:503,[o.Country.GQ]:240,[o.Country.ER]:291,[o.Country.EE]:372,[o.Country.ET]:251,[o.Country.FK]:500,[o.Country.FO]:298,[o.Country.FJ]:679,[o.Country.FI]:358,[o.Country.FR]:33,[o.Country.GF]:594,[o.Country.PF]:689,[o.Country.GA]:241,[o.Country.GM]:220,[o.Country.GE]:995,[o.Country.DE]:49,[o.Country.GH]:233,[o.Country.GI]:350,[o.Country.GR]:30,[o.Country.GL]:299,[o.Country.GD]:1473,[o.Country.GP]:590,[o.Country.GU]:1671,[o.Country.GT]:502,[o.Country.GG]:44,[o.Country.GN]:224,[o.Country.GW]:245,[o.Country.GY]:595,[o.Country.HT]:509,[o.Country.VA]:379,[o.Country.HN]:504,[o.Country.HK]:852,[o.Country.HU]:36,[o.Country.IS]:354,[o.Country.IN]:91,[o.Country.ID]:62,[o.Country.IR]:98,[o.Country.IQ]:964,[o.Country.IE]:353,[o.Country.IM]:44,[o.Country.IL]:972,[o.Country.IT]:39,[o.Country.JM]:1876,[o.Country.JP]:81,[o.Country.JE]:44,[o.Country.JO]:962,[o.Country.KZ]:77,[o.Country.KE]:254,[o.Country.KI]:686,[o.Country.KP]:850,[o.Country.KR]:82,[o.Country.KW]:965,[o.Country.KG]:996,[o.Country.LA]:856,[o.Country.LV]:371,[o.Country.LB]:961,[o.Country.LS]:266,[o.Country.LR]:231,[o.Country.LY]:218,[o.Country.LI]:423,[o.Country.LT]:370,[o.Country.LU]:352,[o.Country.MO]:853,[o.Country.MK]:389,[o.Country.MG]:261,[o.Country.MW]:265,[o.Country.MY]:60,[o.Country.MV]:960,[o.Country.ML]:223,[o.Country.MT]:356,[o.Country.MH]:692,[o.Country.MQ]:596,[o.Country.MR]:222,[o.Country.MU]:230,[o.Country.YT]:262,[o.Country.MX]:52,[o.Country.FM]:691,[o.Country.MD]:373,[o.Country.MC]:377,[o.Country.MN]:976,[o.Country.ME]:382,[o.Country.MS]:1664,[o.Country.MA]:212,[o.Country.MZ]:258,[o.Country.MM]:95,[o.Country.NA]:264,[o.Country.NR]:674,[o.Country.NP]:977,[o.Country.NL]:31,[o.Country.NC]:687,[o.Country.NZ]:64,[o.Country.NI]:505,[o.Country.NE]:227,[o.Country.NG]:234,[o.Country.NU]:683,[o.Country.NF]:672,[o.Country.MP]:1670,[o.Country.NO]:47,[o.Country.OM]:968,[o.Country.PK]:92,[o.Country.PW]:680,[o.Country.PS]:970,[o.Country.PA]:507,[o.Country.PG]:675,[o.Country.PY]:595,[o.Country.PE]:51,[o.Country.PH]:63,[o.Country.PN]:872,[o.Country.PL]:48,[o.Country.PT]:351,[o.Country.PR]:1939,[o.Country.QA]:974,[o.Country.RO]:40,[o.Country.RU]:7,[o.Country.RW]:250,[o.Country.RE]:262,[o.Country.BL]:590,[o.Country.SH]:290,[o.Country.KN]:1869,[o.Country.LC]:1758,[o.Country.MF]:590,[o.Country.PM]:508,[o.Country.VC]:1784,[o.Country.WS]:685,[o.Country.SM]:378,[o.Country.ST]:239,[o.Country.SA]:966,[o.Country.SN]:221,[o.Country.RS]:381,[o.Country.SC]:248,[o.Country.SL]:232,[o.Country.SG]:65,[o.Country.SK]:421,[o.Country.SI]:386,[o.Country.SB]:677,[o.Country.SO]:252,[o.Country.ZA]:27,[o.Country.GS]:500,[o.Country.ES]:34,[o.Country.LK]:94,[o.Country.SD]:249,[o.Country.SR]:597,[o.Country.SJ]:47,[o.Country.SZ]:268,[o.Country.SE]:46,[o.Country.CH]:41,[o.Country.SY]:963,[o.Country.TW]:886,[o.Country.TJ]:992,[o.Country.TZ]:255,[o.Country.TH]:66,[o.Country.TL]:670,[o.Country.TG]:228,[o.Country.TK]:690,[o.Country.TO]:676,[o.Country.TT]:1868,[o.Country.TN]:216,[o.Country.TR]:90,[o.Country.TM]:993,[o.Country.TC]:1649,[o.Country.TV]:688,[o.Country.UG]:256,[o.Country.UA]:380,[o.Country.AE]:971,[o.Country.GB]:44,[o.Country.US]:1,[o.Country.UY]:598,[o.Country.UZ]:998,[o.Country.VU]:678,[o.Country.VE]:58,[o.Country.VN]:84,[o.Country.VG]:1284,[o.Country.VI]:1340,[o.Country.WF]:681,[o.Country.YE]:967,[o.Country.ZM]:260,[o.Country.ZW]:263}},26118:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAllCallingCodes=t.processQuery=void 0;const o=r(97211),n=r(37662);t.processQuery=function(){return{type:o.StaticDataQueryType.CALLING_CODES,collection:n.default}},t.getAllCallingCodes=function(){return n.default}},42713:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeographicStatesLevel1=t.GeographicStatesLevel0=void 0;const o=r(97211);t.GeographicStatesLevel0={[o.Country.FR]:{"FR-0-42":{code:"42",name:"Alsace"},"FR-0-72":{code:"72",name:"Aquitaine"},"FR-0-83":{code:"83",name:"Auvergne"},"FR-0-25":{code:"25",name:"Basse-Normandie"},"FR-0-26":{code:"26",name:"Bourgogne"},"FR-0-53":{code:"53",name:"Bretagne"},"FR-0-24":{code:"24",name:"Centre"},"FR-0-21":{code:"21",name:"Champagne-Ardenne"},"FR-0-94":{code:"94",name:"Corse"},"FR-0-43":{code:"43",name:"Franche-Comte"},"FR-0-01":{code:"01",name:"Guadeloupe"},"FR-0-03":{code:"03",name:"Guyane"},"FR-0-23":{code:"23",name:"Haute-Normandie"},"FR-0-11":{code:"11",name:"Ile-de-France"},"FR-0-04":{code:"04",name:"La Reunion"},"FR-0-91":{code:"91",name:"Languedoc-Roussillon"},"FR-0-74":{code:"74",name:"Limousin"},"FR-0-41":{code:"41",name:"Lorraine"},"FR-0-02":{code:"02",name:"Martinique"},"FR-0-73":{code:"73",name:"Midi-Pyrenees"},"FR-0-31":{code:"31",name:"Nord-Pas-de-Calais"},"FR-0-52":{code:"52",name:"Pays de la Loire"},"FR-0-22":{code:"22",name:"Picardie"},"FR-0-54":{code:"54",name:"Poitou-Charentes"},"FR-0-93":{code:"93",name:"Provence-Alpes-Cote d'Azur"},"FR-0-82":{code:"82",name:"Rhone-Alpes"}},[o.Country.GB]:{"GB-0-67":{code:"67",name:"Aberdeenshire"},"GB-0-68":{code:"68",name:"Angus"},"GB-0-69":{code:"69",name:"Antrim"},"GB-0-70":{code:"70",name:"Ards"},"GB-0-71":{code:"71",name:"Argyll"},"GB-0-72":{code:"72",name:"Armagh"},"GB-0-01":{code:"01",name:"Avon"},"GB-0-73":{code:"73",name:"Ayrshire"},"GB-0-74":{code:"74",name:"Ballymena"},"GB-0-75":{code:"75",name:"Ballymoney"},"GB-0-76":{code:"76",name:"Banbridge"},"GB-0-77":{code:"77",name:"Banffshire"},"GB-0-78":{code:"78",name:"Bath & NthEstSomerset"},"GB-0-02":{code:"02",name:"Bedfordshire"},"GB-0-79":{code:"79",name:"Belfast"},"GB-0-03":{code:"03",name:"Berkshire"},"GB-0-80":{code:"80",name:"Berwickshire"},"GB-0-81":{code:"81",name:"Blackburn"},"GB-0-82":{code:"82",name:"Blackpool"},"GB-0-04":{code:"04",name:"Borders"},"GB-0-83":{code:"83",name:"Bournemouth"},"GB-0-84":{code:"84",name:"Bracknell Forest"},"GB-0-85":{code:"85",name:"Brighton & Hove"},"GB-0-86":{code:"86",name:"Bristol"},"GB-0-05":{code:"05",name:"Buckinghamshire"},"GB-0-87":{code:"87",name:"Caithness"},"GB-0-06":{code:"06",name:"Cambridgeshire"},"GB-0-88":{code:"88",name:"Carrickfergus"},"GB-0-89":{code:"89",name:"Castlereagh"},"GB-0-07":{code:"07",name:"Central"},"GB-0-08":{code:"08",name:"Cheshire"},"GB-0-91":{code:"91",name:"Clackmannanshire"},"GB-0-12":{code:"12",name:"Cleveland"},"GB-0-09":{code:"09",name:"Clwyd"},"GB-0-92":{code:"92",name:"Coleraine"},"GB-0-93":{code:"93",name:"Cookstown"},"GB-0-10":{code:"10",name:"Cornwall"},"GB-0-94":{code:"94",name:"Craigavon"},"GB-0-11":{code:"11",name:"Cumbria"},"GB-0-95":{code:"95",name:"Darlington"},"GB-0-13":{code:"13",name:"Derbyshire"},"GB-0-16":{code:"16",name:"Devon"},"GB-0-14":{code:"14",name:"Dorset"},"GB-0-96":{code:"96",name:"Down"},"GB-0-97":{code:"97",name:"Dumfries a. Galloway"},"GB-0-98":{code:"98",name:"Dumfriesshire"},"GB-0-99":{code:"99",name:"Dunbartonshire"},"GB-0-100":{code:"100",name:"Dungannon"},"GB-0-15":{code:"15",name:"Durham"},"GB-0-17":{code:"17",name:"Dyfed"},"GB-0-101":{code:"101",name:"East Lothian"},"GB-0-102":{code:"102",name:"East Riding"},"GB-0-103":{code:"103",name:"East Sussex"},"GB-0-18":{code:"18",name:"Essex"},"GB-0-104":{code:"104",name:"Fermanagh"},"GB-0-19":{code:"19",name:"Fife"},"GB-0-20":{code:"20",name:"Gloucestershire"},"GB-0-22":{code:"22",name:"Grampian"},"GB-0-36":{code:"36",name:"Greater London"},"GB-0-21":{code:"21",name:"Greater Manchester"},"GB-0-23":{code:"23",name:"Gwent"},"GB-0-24":{code:"24",name:"Gwynedd"},"GB-0-105":{code:"105",name:"Halton"},"GB-0-25":{code:"25",name:"Hampshire"},"GB-0-106":{code:"106",name:"Hartlepool"},"GB-0-29":{code:"29",name:"Hereford and Worcs."},"GB-0-107":{code:"107",name:"Herefordshire"},"GB-0-27":{code:"27",name:"Hertfordshire"},"GB-0-108":{code:"108",name:"Highland"},"GB-0-28":{code:"28",name:"Humberside"},"GB-0-109":{code:"109",name:"Inverness-Shire"},"GB-0-110":{code:"110",name:"Isle Of Arran"},"GB-0-111":{code:"111",name:"Isle Of Barra"},"GB-0-112":{code:"112",name:"Isle Of Benbecula"},"GB-0-113":{code:"113",name:"Isle Of Bute"},"GB-0-114":{code:"114",name:"Isle Of Canna"},"GB-0-115":{code:"115",name:"Isle Of Coll"},"GB-0-116":{code:"116",name:"Isle Of Colonsay"},"GB-0-117":{code:"117",name:"Isle Of Cumbrae"},"GB-0-118":{code:"118",name:"Isle Of Eigg"},"GB-0-119":{code:"119",name:"Isle Of Gigha"},"GB-0-120":{code:"120",name:"Isle Of Harris"},"GB-0-121":{code:"121",name:"Isle Of Iona"},"GB-0-122":{code:"122",name:"Isle Of Islay"},"GB-0-123":{code:"123",name:"Isle Of Jura"},"GB-0-124":{code:"124",name:"Isle Of Lewis"},"GB-0-126":{code:"126",name:"Isle Of Mull"},"GB-0-127":{code:"127",name:"Isle Of North Uist"},"GB-0-128":{code:"128",name:"Isle Of Rum"},"GB-0-129":{code:"129",name:"Isle Of Scalpay"},"GB-0-131":{code:"131",name:"Isle Of Skye"},"GB-0-132":{code:"132",name:"Isle Of South Uist"},"GB-0-133":{code:"133",name:"Isle Of Tiree"},"GB-0-31":{code:"31",name:"Isle of Wight"},"GB-0-130":{code:"130",name:"Isles Of Scilly"},"GB-0-32":{code:"32",name:"Kent"},"GB-0-134":{code:"134",name:"Kincardineshire"},"GB-0-135":{code:"135",name:"Kingston-Upon-Hull"},"GB-0-136":{code:"136",name:"Kirkcudbrightshire"},"GB-0-137":{code:"137",name:"Lanarkshire"},"GB-0-33":{code:"33",name:"Lancashire"},"GB-0-138":{code:"138",name:"Larne"},"GB-0-139":{code:"139",name:"Leicester City"},"GB-0-34":{code:"34",name:"Leicestershire"},"GB-0-140":{code:"140",name:"Limavady"},"GB-0-35":{code:"35",name:"Lincolnshire"},"GB-0-141":{code:"141",name:"Lisburn"},"GB-0-142":{code:"142",name:"London"},"GB-0-143":{code:"143",name:"Londonderry"},"GB-0-37":{code:"37",name:"Lothian"},"GB-0-144":{code:"144",name:"Luton"},"GB-0-145":{code:"145",name:"Magherafelt"},"GB-0-39":{code:"39",name:"Merseyside"},"GB-0-38":{code:"38",name:"Mid Glamorgan"},"GB-0-146":{code:"146",name:"Middlesbrough"},"GB-0-65":{code:"65",name:"Middlesex"},"GB-0-147":{code:"147",name:"Midlothian"},"GB-0-148":{code:"148",name:"Milton Keynes"},"GB-0-149":{code:"149",name:"Morayshire"},"GB-0-150":{code:"150",name:"Moyle"},"GB-0-151":{code:"151",name:"Nairn"},"GB-0-152":{code:"152",name:"Newbury"},"GB-0-153":{code:"153",name:"Newry and Mourne"},"GB-0-154":{code:"154",name:"Newtownabbey"},"GB-0-41":{code:"41",name:"Norfolk"},"GB-0-155":{code:"155",name:"North Down"},"GB-0-156":{code:"156",name:"North Humberside"},"GB-0-157":{code:"157",name:"North Lincolnshire"},"GB-0-158":{code:"158",name:"North Somerset"},"GB-0-62":{code:"62",name:"North Yorkshire"},"GB-0-40":{code:"40",name:"Northamptonshire"},"GB-0-43":{code:"43",name:"Northumberland"},"GB-0-159":{code:"159",name:"Nottingham City"},"GB-0-42":{code:"42",name:"Nottinghamshire"},"GB-0-160":{code:"160",name:"NthEast Lincolnshire"},"GB-0-161":{code:"161",name:"Omagh"},"GB-0-162":{code:"162",name:"Orkney"},"GB-0-44":{code:"44",name:"Oxfordshire"},"GB-0-163":{code:"163",name:"Peeblesshire"},"GB-0-164":{code:"164",name:"Perthshire"},"GB-0-165":{code:"165",name:"Peterborough"},"GB-0-166":{code:"166",name:"Plymouth"},"GB-0-167":{code:"167",name:"Poole"},"GB-0-168":{code:"168",name:"Portsmouth"},"GB-0-45":{code:"45",name:"Powys"},"GB-0-169":{code:"169",name:"Reading"},"GB-0-170":{code:"170",name:"Redcar and Cleveland"},"GB-0-171":{code:"171",name:"Renfrewshire"},"GB-0-172":{code:"172",name:"Rochester Up. Medway"},"GB-0-173":{code:"173",name:"Ross-Shire"},"GB-0-175":{code:"175",name:"Roxburghshire"},"GB-0-176":{code:"176",name:"Rutland"},"GB-0-26":{code:"26",name:"Scotland"},"GB-0-177":{code:"177",name:"Shetland"},"GB-0-48":{code:"48",name:"Shropshire"},"GB-0-178":{code:"178",name:"Slough"},"GB-0-50":{code:"50",name:"Somerset"},"GB-0-47":{code:"47",name:"South Glamorgan"},"GB-0-179":{code:"179",name:"South Humberside"},"GB-0-63":{code:"63",name:"South Yorkshire"},"GB-0-180":{code:"180",name:"Southampton"},"GB-0-181":{code:"181",name:"Southend"},"GB-0-51":{code:"51",name:"Staffordshire"},"GB-0-182":{code:"182",name:"Sth. Gloucestershire"},"GB-0-183":{code:"183",name:"Stirlingshire"},"GB-0-184":{code:"184",name:"Stockton-on-Tees"},"GB-0-185":{code:"185",name:"Strabane"},"GB-0-46":{code:"46",name:"Strathclyde"},"GB-0-49":{code:"49",name:"Suffolk"},"GB-0-53":{code:"53",name:"Surrey"},"GB-0-52":{code:"52",name:"Sussex"},"GB-0-186":{code:"186",name:"Sutherland"},"GB-0-54":{code:"54",name:"Tayside"},"GB-0-187":{code:"187",name:"Thamesdown"},"GB-0-188":{code:"188",name:"Thurrock"},"GB-0-189":{code:"189",name:"Torbay"},"GB-0-55":{code:"55",name:"Tyne and Wear"},"GB-0-190":{code:"190",name:"Tyrone"},"GB-0-191":{code:"191",name:"Warrington"},"GB-0-56":{code:"56",name:"Warwickshire"},"GB-0-57":{code:"57",name:"West Glamorgan"},"GB-0-192":{code:"192",name:"West Lothian"},"GB-0-59":{code:"59",name:"West Midlands"},"GB-0-193":{code:"193",name:"West Sussex"},"GB-0-64":{code:"64",name:"West Yorkshire"},"GB-0-194":{code:"194",name:"Western Isles"},"GB-0-195":{code:"195",name:"Wigtownshire"},"GB-0-58":{code:"58",name:"Wiltshire"},"GB-0-196":{code:"196",name:"Windsor & Maidenhead"},"GB-0-197":{code:"197",name:"Wokingham"},"GB-0-60":{code:"60",name:"Worcestershire"},"GB-0-198":{code:"198",name:"Wrekin"},"GB-0-199":{code:"199",name:"York"},"GB-0-61":{code:"61",name:"Yorkshire"},"GB-0-1001":{code:"1001",name:"Blaenau Gwent"},"GB-0-1002":{code:"1002",name:"Bridgend"},"GB-0-1003":{code:"1003",name:"Caerphilly"},"GB-0-1004":{code:"1004",name:"Cardiff"},"GB-0-1005":{code:"1005",name:"Carmarthenshire"},"GB-0-1006":{code:"1006",name:"Ceredigion"},"GB-0-1007":{code:"1007",name:"Channel Islands"},"GB-0-1008":{code:"1008",name:"Conwy"},"GB-0-1009":{code:"1009",name:"Denbighshire"},"GB-0-1010":{code:"1010",name:"East Ayrshire"},"GB-0-1011":{code:"1011",name:"East Dunbartonshire"},"GB-0-1012":{code:"1012",name:"East Renfrewshire"},"GB-0-1013":{code:"1013",name:"Edinburgh City"},"GB-0-1014":{code:"1014",name:"Falkirk"},"GB-0-1015":{code:"1015",name:"Flintshire"},"GB-0-1016":{code:"1016",name:"Glasgow"},"GB-0-1017":{code:"1017",name:"Inverclyde"},"GB-0-1018":{code:"1018",name:"Isle of Anglesey"},"GB-0-1019":{code:"1019",name:"Isle of Man"},"GB-0-1020":{code:"1020",name:"Merthyr Tydfil"},"GB-0-1021":{code:"1021",name:"Monmouthshire"},"GB-0-1022":{code:"1022",name:"Moray"},"GB-0-1023":{code:"1023",name:"Neath Port Talbot"},"GB-0-1024":{code:"1024",name:"Newport"},"GB-0-1025":{code:"1025",name:"North Ayrshire"},"GB-0-1026":{code:"1026",name:"North Lanarkshire"},"GB-0-1027":{code:"1027",name:"Pembrokeshire"},"GB-0-1028":{code:"1028",name:"Rhondda Cynon Taff"},"GB-0-1029":{code:"1029",name:"South Ayrshire"},"GB-0-1030":{code:"1030",name:"South Lanarkshire"},"GB-0-1031":{code:"1031",name:"Stirling"},"GB-0-1032":{code:"1032",name:"Swansea"},"GB-0-1033":{code:"1033",name:"The Vale of Glamorgan"},"GB-0-1034":{code:"1034",name:"Torfaen"},"GB-0-1035":{code:"1035",name:"West Dunbartonshire"},"GB-0-1036":{code:"1036",name:"Wrexham"}},[o.Country.US]:{"US-0-AL":{code:"AL",name:"Alabama"},"US-0-AK":{code:"AK",name:"Alaska"},"US-0-AS":{code:"AS",name:"American Samoa"},"US-0-AZ":{code:"AZ",name:"Arizona"},"US-0-AR":{code:"AR",name:"Arkansas"},"US-0-AA":{code:"AA",name:"Armed Forces America"},"US-0-AE":{code:"AE",name:"Armed Forces Europe"},"US-0-AP":{code:"AP",name:"Armed Forces Pacific"},"US-0-CA":{code:"CA",name:"California"},"US-0-CEI":{code:"CEI",name:"Canton & Enderbury Islands"},"US-0-CO":{code:"CO",name:"Colorado"},"US-0-CT":{code:"CT",name:"Connecticut"},"US-0-DC":{code:"DC",name:"District of Columbia"},"US-0-DE":{code:"DE",name:"Delaware"},"US-0-FL":{code:"FL",name:"Florida"},"US-0-GA":{code:"GA",name:"Georgia"},"US-0-GU":{code:"GU",name:"Guam"},"US-0-HI":{code:"HI",name:"Hawaii"},"US-0-IA":{code:"IA",name:"Iowa"},"US-0-ID":{code:"ID",name:"Idaho"},"US-0-IL":{code:"IL",name:"Illinois"},"US-0-IN":{code:"IN",name:"Indiana"},"US-0-KS":{code:"KS",name:"Kansas"},"US-0-KY":{code:"KY",name:"Kentucky"},"US-0-LA":{code:"LA",name:"Louisiana"},"US-0-MA":{code:"MA",name:"Massachusetts"},"US-0-MD":{code:"MD",name:"Maryland"},"US-0-ME":{code:"ME",name:"Maine"},"US-0-MP":{code:"MP",name:"Mariana Islands"},"US-0-MI":{code:"MI",name:"Michigan"},"US-0-MN":{code:"MN",name:"Minnesota"},"US-0-MS":{code:"MS",name:"Mississippi"},"US-0-MO":{code:"MO",name:"Missouri"},"US-0-MT":{code:"MT",name:"Montana"},"US-0-NE":{code:"NE",name:"Nebraska"},"US-0-NV":{code:"NV",name:"Nevada"},"US-0-NH":{code:"NH",name:"New Hampshire"},"US-0-NJ":{code:"NJ",name:"New Jersey"},"US-0-NM":{code:"NM",name:"New Mexico"},"US-0-NY":{code:"NY",name:"New York"},"US-0-NC":{code:"NC",name:"North Carolina"},"US-0-ND":{code:"ND",name:"North Dakota"},"US-0-NMI":{code:"NMI",name:"North Mariana Islands"},"US-0-OH":{code:"OH",name:"Ohio"},"US-0-OK":{code:"OK",name:"Oklahoma"},"US-0-OR":{code:"OR",name:"Oregon"},"US-0-PW":{code:"PW",name:"Palau"},"US-0-PA":{code:"PA",name:"Pennsylvania"},"US-0-PR":{code:"PR",name:"Puerto Rico"},"US-0-RI":{code:"RI",name:"Rhode Island"},"US-0-SC":{code:"SC",name:"South Carolina"},"US-0-SD":{code:"SD",name:"South Dakota"},"US-0-TN":{code:"TN",name:"Tennessee"},"US-0-TX":{code:"TX",name:"Texas"},"US-0-UT":{code:"UT",name:"Utah"},"US-0-VT":{code:"VT",name:"Vermont"},"US-0-VI":{code:"VI",name:"Virgin Islands, US"},"US-0-VA":{code:"VA",name:"Virginia"},"US-0-WA":{code:"WA",name:"Washington"},"US-0-WV":{code:"WV",name:"West Virginia"},"US-0-WI":{code:"WI",name:"Wisconsin"},"US-0-WY":{code:"WY",name:"Wyoming"}},[o.Country.CA]:{"CA-0-AB":{code:"AB",name:"Alberta"},"CA-0-BC":{code:"BC",name:"British Columbia"},"CA-0-MB":{code:"MB",name:"Manitoba"},"CA-0-NB":{code:"NB",name:"New Brunswick"},"CA-0-NL":{code:"NL",name:"Newfoundland and Labrador"},"CA-0-NS":{code:"NS",name:"Nova Scotia"},"CA-0-NT":{code:"NT",name:"Northwest Territories"},"CA-0-NU":{code:"NU",name:"Nunavut"},"CA-0-ON":{code:"ON",name:"Ontario"},"CA-0-PE":{code:"PE",name:"Prince Edward Island"},"CA-0-QC":{code:"QC",name:"Québec"},"CA-0-SK":{code:"SK",name:"Saskatchewan"},"CA-0-YT":{code:"YT",name:"Yukon"}},[o.Country.AU]:{"AU-0-SA":{code:"SA",name:"South Australia"},"AU-0-WA":{code:"WA",name:"Western Australia"},"AU-0-NSW":{code:"NSW",name:"New South Wales"},"AU-0-QLD":{code:"QLD",name:"Queensland"},"AU-0-TAS":{code:"TAS",name:"Tasmania"},"AU-0-VIC":{code:"VIC",name:"Victoria"},"AU-0-ACT":{code:"ACT",name:"Australian Capital Territory"},"AU-0-JBT":{code:"JBT",name:"Jervis Bay Territory"},"AU-0-NT":{code:"NT",name:"Northern Territory"}},[o.Country.IE]:{"IE-0-05":{code:"05",name:"Carlow"},"IE-0-04":{code:"04",name:"Clare"},"IE-0-03":{code:"03",name:"Cork"},"IE-0-07":{code:"07",name:"Donegal"},"IE-0-06":{code:"06",name:"Dublin"},"IE-0-10":{code:"10",name:"Galway"},"IE-0-13":{code:"13",name:"Cavan"},"IE-0-14":{code:"14",name:"Kerry"},"IE-0-11":{code:"11",name:"Kildare"},"IE-0-12":{code:"12",name:"Kilkenny"},"IE-0-19":{code:"19",name:"Laois"},"IE-0-18":{code:"18",name:"Leitrim"},"IE-0-17":{code:"17",name:"Limerick"},"IE-0-16":{code:"16",name:"Longford"},"IE-0-20":{code:"20",name:"Louth"},"IE-0-23":{code:"23",name:"Mayo"},"IE-0-22":{code:"22",name:"Meath"},"IE-0-21":{code:"21",name:"Monaghan"},"IE-0-24":{code:"24",name:"Offaly"},"IE-0-25":{code:"25",name:"Roscommon"},"IE-0-26":{code:"26",name:"Sligo"},"IE-0-27":{code:"27",name:"Tipperary"},"IE-0-29":{code:"29",name:"Waterford"},"IE-0-31":{code:"31",name:"Westmeath"},"IE-0-32":{code:"32",name:"Wexford"},"IE-0-30":{code:"30",name:"Wicklow"}},[o.Country.ES]:{"ES-0-AN":{code:"AN",name:"Andalucia"},"ES-0-AR":{code:"AR",name:"Aragón"},"ES-0-AS":{code:"AS",name:"Asturias, Principado de"},"ES-0-CN":{code:"CN",name:"Canarias"},"ES-0-CB":{code:"CB",name:"Cantabria"},"ES-0-CM":{code:"CM",name:"Castilla-La Mancha"},"ES-0-CL":{code:"CL",name:"Castilla y León"},"ES-0-CT":{code:"CT",name:"Cataluña"},"ES-0-EX":{code:"EX",name:"Extremadura"},"ES-0-GA":{code:"GA",name:"Galicia"},"ES-0-IB":{code:"IB",name:"Illes Balears"},"ES-0-RI":{code:"RI",name:"La Rioja"},"ES-0-MD":{code:"MD",name:"Madrid, Comunidad de"},"ES-0-MC":{code:"MC",name:"Murcia, Región de"},"ES-0-NC":{code:"NC",name:"Navarra, Comunidad Foral de"},"ES-0-PV":{code:"PV",name:"País Vasco"},"ES-0-VC":{code:"VC",name:"Valenciana, Comunitat"},"ES-0-CE":{code:"CE",name:"Ceuta"},"ES-0-ML":{code:"ML",name:"Melilla"}},[o.Country.MX]:{"MX-0-DIF":{code:"DIF",name:"Distrito Federal"},"MX-0-AGU":{code:"AGU",name:"Aguascalientes"},"MX-0-BCN":{code:"BCN",name:"Baja California"},"MX-0-BCS":{code:"BCS",name:"Baja California Sur"},"MX-0-CAM":{code:"CAM",name:"Campeche"},"MX-0-COA":{code:"COA",name:"Coahuila"},"MX-0-COL":{code:"COL",name:"Colima"},"MX-0-CHP":{code:"CHP",name:"Chiapas"},"MX-0-CHH":{code:"CHH",name:"Chihuahua"},"MX-0-DUR":{code:"DUR",name:"Durango"},"MX-0-GUA":{code:"GUA",name:"Guanajuato"},"MX-0-GRO":{code:"GRO",name:"Guerrero"},"MX-0-HID":{code:"HID",name:"Hidalgo"},"MX-0-JAL":{code:"JAL",name:"Jalisco"},"MX-0-MEX":{code:"MEX",name:"México"},"MX-0-MIC":{code:"MIC",name:"Michoacán"},"MX-0-MOR":{code:"MOR",name:"Morelos"},"MX-0-NAY":{code:"NAY",name:"Nayarit"},"MX-0-NLE":{code:"NLE",name:"Nuevo León"},"MX-0-OAX":{code:"OAX",name:"Oaxaca"},"MX-0-PUE":{code:"PUE",name:"Puebla"},"MX-0-QUE":{code:"QUE",name:"Querétaro"},"MX-0-ROO":{code:"ROO",name:"Quintana Roo"},"MX-0-SLP":{code:"SLP",name:"San Luis Potosí"},"MX-0-SIN":{code:"SIN",name:"Sinaloa"},"MX-0-SON":{code:"SON",name:"Sonora"},"MX-0-TAB":{code:"TAB",name:"Tabasco"},"MX-0-TAM":{code:"TAM",name:"Tamaulipas"},"MX-0-TLA":{code:"TLA",name:"Tlaxcala"},"MX-0-VER":{code:"VER",name:"Veracruz"},"MX-0-YUC":{code:"YUC",name:"Yucatán"},"MX-0-ZAC":{code:"ZAC",name:"Zacatecas"}},[o.Country.CO]:{"CO-0-DC":{code:"DC",name:"Distrito Capital de Bogotá"},"CO-0-AMA":{code:"AMA",name:"Amazonas"},"CO-0-ANT":{code:"ANT",name:"Antioquia"},"CO-0-ARA":{code:"ARA",name:"Arauca"},"CO-0-ATL":{code:"ATL",name:"Atlántico"},"CO-0-BOL":{code:"BOL",name:"Bolívar"},"CO-0-BOY":{code:"BOY",name:"Boyacá"},"CO-0-CAL":{code:"CAL",name:"Caldas"},"CO-0-CAQ":{code:"CAQ",name:"Caquetá"},"CO-0-CAS":{code:"CAS",name:"Casanare"},"CO-0-CAU":{code:"CAU",name:"Cauca"},"CO-0-CES":{code:"CES",name:"Cesar"},"CO-0-COR":{code:"COR",name:"Córdoba"},"CO-0-CUN":{code:"CUN",name:"Cundinamarca"},"CO-0-CHO":{code:"CHO",name:"Chocó"},"CO-0-GUA":{code:"GUA",name:"Guainía"},"CO-0-GUV":{code:"GUV",name:"Guaviare"},"CO-0-HUI":{code:"HUI",name:"Huila"},"CO-0-LAG":{code:"LAG",name:"La Guajira"},"CO-0-MAG":{code:"MAG",name:"Magdalena"},"CO-0-MET":{code:"MET",name:"Meta"},"CO-0-NAR":{code:"NAR",name:"Nariño"},"CO-0-NSA":{code:"NSA",name:"Norte de Santander"},"CO-0-PUT":{code:"PUT",name:"Putumayo"},"CO-0-QUI":{code:"QUI",name:"Quindío"},"CO-0-RIS":{code:"RIS",name:"Risaralda"},"CO-0-SAP":{code:"SAP",name:"San Andrés, Providencia y Santa Catalina"},"CO-0-SAN":{code:"SAN",name:"Santander"},"CO-0-SUC":{code:"SUC",name:"Sucre"},"CO-0-TOL":{code:"TOL",name:"Tolima"},"CO-0-VAC":{code:"VAC",name:"Valle del Cauca"},"CO-0-VAU":{code:"VAU",name:"Vaupés"},"CO-0-VID":{code:"VID",name:"Vichada"}},[o.Country.PE]:{"PE-0-CAL":{code:"CAL",name:"El Callao"},"PE-0-LMA":{code:"LMA",name:"Municipalidad Metropolitana de Lima"},"PE-0-AMA":{code:"AMA",name:"Amazonas"},"PE-0-ANC":{code:"ANC",name:"Ancash"},"PE-0-APU":{code:"APU",name:"Apurímac"},"PE-0-ARE":{code:"ARE",name:"Arequipa"},"PE-0-AYA":{code:"AYA",name:"Ayacucho"},"PE-0-CAJ":{code:"CAJ",name:"Cajamarca"},"PE-0-CUS":{code:"CUS",name:"Cusco"},"PE-0-HUV":{code:"HUV",name:"Huancavelica"},"PE-0-HUC":{code:"HUC",name:"Huánuco"},"PE-0-ICA":{code:"ICA",name:"Ica"},"PE-0-JUN":{code:"JUN",name:"Junín"},"PE-0-LAL":{code:"LAL",name:"La Libertad"},"PE-0-LAM":{code:"LAM",name:"Lambayeque"},"PE-0-LIM":{code:"LIM",name:"Lima"},"PE-0-LOR":{code:"LOR",name:"Loreto"},"PE-0-MDD":{code:"MDD",name:"Madre de Dios"},"PE-0-MOQ":{code:"MOQ",name:"Moquegua"},"PE-0-PAS":{code:"PAS",name:"Pasco"},"PE-0-PIU":{code:"PIU",name:"Piura"},"PE-0-PUN":{code:"PUN",name:"Puno"},"PE-0-SAM":{code:"SAM",name:"San Martín"},"PE-0-TAC":{code:"TAC",name:"Tacna"},"PE-0-TUM":{code:"TUM",name:"Tumbes"},"PE-0-UCA":{code:"UCA",name:"Ucayali"}},[o.Country.CL]:{"CL-0-AI":{code:"AI",name:"Aisén del General Carlos Ibañez del Campo"},"CL-0-AN":{code:"AN",name:"Antofagasta"},"CL-0-AR":{code:"AR",name:"Araucanía"},"CL-0-AP":{code:"AP",name:"Arica y Parinacota"},"CL-0-AT":{code:"AT",name:"Atacama"},"CL-0-BI":{code:"BI",name:"Biobío"},"CL-0-CO":{code:"CO",name:"Coquimbo"},"CL-0-LI":{code:"LI",name:"Libertador General Bernardo O'Higgins"},"CL-0-LL":{code:"LL",name:"Los Lagos"},"CL-0-LR":{code:"LR",name:"Los Ríos"},"CL-0-MA":{code:"MA",name:"Magallanes y la Antártica Chilena"},"CL-0-ML":{code:"ML",name:"Maule"},"CL-0-RM":{code:"RM",name:"Metropolitana de Santiago"},"CL-0-TA":{code:"TA",name:"Tarapacá"},"CL-0-VS":{code:"VS",name:"Valparaíso"}},[o.Country.DE]:{"DE-0-BW":{code:"BW",name:"Baden-Württemberg"},"DE-0-BY":{code:"BY",name:"Bayern"},"DE-0-BE":{code:"BE",name:"Berlin"},"DE-0-BB":{code:"BB",name:"Brandenburg"},"DE-0-HB":{code:"HB",name:"Bremen"},"DE-0-HH":{code:"HH",name:"Hamburg"},"DE-0-HE":{code:"HE",name:"Hessen"},"DE-0-MV":{code:"MV",name:"Mecklenburg-Vorpommern"},"DE-0-NI":{code:"NI",name:"Niedersachsen"},"DE-0-NW":{code:"NW",name:"Nordrhein-Westfalen"},"DE-0-RP":{code:"RP",name:"Rheinland-Pfalz"},"DE-0-SL":{code:"SL",name:"Saarland"},"DE-0-SN":{code:"SN",name:"Sachsen"},"DE-0-ST":{code:"ST",name:"Sachsen-Anhalt"},"DE-0-SH":{code:"SH",name:"Schleswig-Holstein"},"DE-0-TH":{code:"TH",name:"Thüringen"}},[o.Country.IT]:{"IT-0-65":{code:"65",name:"Abruzzo"},"IT-0-77":{code:"77",name:"Basilicata"},"IT-0-78":{code:"78",name:"Calabria"},"IT-0-72":{code:"72",name:"Campania"},"IT-0-45":{code:"45",name:"Emilia-Romagna"},"IT-0-36":{code:"36",name:"Friuli-Venezia Giulia"},"IT-0-62":{code:"62",name:"Lazio"},"IT-0-42":{code:"42",name:"Liguria"},"IT-0-25":{code:"25",name:"Lombardia"},"IT-0-57":{code:"57",name:"Marche"},"IT-0-67":{code:"67",name:"Molise"},"IT-0-21":{code:"21",name:"Piemonte"},"IT-0-75":{code:"75",name:"Puglia"},"IT-0-88":{code:"88",name:"Sardegna"},"IT-0-82":{code:"82",name:"Sicilia"},"IT-0-52":{code:"52",name:"Toscana"},"IT-0-32":{code:"32",name:"Trentino Alto Adige"},"IT-0-55":{code:"55",name:"Umbria"},"IT-0-23":{code:"23",name:"Valle d'Aosta"},"IT-0-34":{code:"34",name:"Veneto"}},[o.Country.CH]:{"CH-0-AG":{code:"AG",name:"Aargau"},"CH-0-AR":{code:"AR",name:"Appenzell Ausserrhoden"},"CH-0-AI":{code:"AI",name:"Appenzell Innerrhoden"},"CH-0-BL":{code:"BL",name:"Basel-Landschaft"},"CH-0-BS":{code:"BS",name:"Basel-Stadt"},"CH-0-BE":{code:"BE",name:"Berne"},"CH-0-FR":{code:"FR",name:"Fribourg"},"CH-0-GE":{code:"GE",name:"Genève"},"CH-0-GL":{code:"GL",name:"Glarus"},"CH-0-GR":{code:"GR",name:"Graubünden"},"CH-0-JU":{code:"JU",name:"Jura"},"CH-0-LU":{code:"LU",name:"Luzern"},"CH-0-NE":{code:"NE",name:"Neuchâtel"},"CH-0-NW":{code:"NW",name:"Nidwalden"},"CH-0-OW":{code:"OW",name:"Obwalden"},"CH-0-SG":{code:"SG",name:"Sankt Gallen"},"CH-0-SH":{code:"SH",name:"Schaffhausen"},"CH-0-SZ":{code:"SZ",name:"Schwyz"},"CH-0-SO":{code:"SO",name:"Solothurn"},"CH-0-TG":{code:"TG",name:"Thurgau"},"CH-0-TI":{code:"TI",name:"Ticino"},"CH-0-UR":{code:"UR",name:"Uri"},"CH-0-VS":{code:"VS",name:"Valais"},"CH-0-VD":{code:"VD",name:"Vaud"},"CH-0-ZG":{code:"ZG",name:"Zug"},"CH-0-ZH":{code:"ZH",name:"Zürich"}},[o.Country.BE]:{"BE-0-BRU":{code:"BRU",name:"Bruxelles-Capitale, Région de"},"BE-0-VLG":{code:"VLG",name:"Vlaamse Gewest"},"BE-0-WAL":{code:"WAL",name:"Région wallonne"}},[o.Country.SE]:{"SE-0-K":{code:"K",name:"Blekinge län"},"SE-0-W":{code:"W",name:"Dalarnas län"},"SE-0-I":{code:"I",name:"Gotlands län"},"SE-0-X":{code:"X",name:"Gävleborgs län"},"SE-0-N":{code:"N",name:"Hallands län"},"SE-0-Z":{code:"Z",name:"Jämtlands län"},"SE-0-F":{code:"F",name:"Jönköpings län"},"SE-0-H":{code:"H",name:"Kalmar län"},"SE-0-G":{code:"G",name:"Kronobergs län"},"SE-0-BD":{code:"BD",name:"Norrbottens län"},"SE-0-M":{code:"M",name:"Skåne län"},"SE-0-AB":{code:"AB",name:"Stockholms län"},"SE-0-D":{code:"D",name:"Södermanlands län"},"SE-0-C":{code:"C",name:"Uppsala län"},"SE-0-S":{code:"S",name:"Värmlands län"},"SE-0-AC":{code:"AC",name:"Västerbottens län"},"SE-0-Y":{code:"Y",name:"Västernorrlands län"},"SE-0-U":{code:"U",name:"Västmanlands län"},"SE-0-O":{code:"O",name:"Västra Götalands län"},"SE-0-T":{code:"T",name:"Örebro län"},"SE-0-E":{code:"E",name:"Östergötlands län"}},[o.Country.NO]:{"NO-0-2":{code:"2",name:"Akershus"},"NO-0-9":{code:"9",name:"Aust-Agder"},"NO-0-6":{code:"6",name:"Buskerud"},"NO-0-20":{code:"20",name:"Finnmark"},"NO-0-4":{code:"4",name:"Hedmark"},"NO-0-12":{code:"12",name:"Hordaland"},"NO-0-15":{code:"15",name:"Møre og Romsdal"},"NO-0-18":{code:"18",name:"Nordland"},"NO-0-17":{code:"17",name:"Nord-Trøndelag"},"NO-0-5":{code:"5",name:"Oppland"},"NO-0-3":{code:"3",name:"Oslo"},"NO-0-11":{code:"11",name:"Rogaland"},"NO-0-14":{code:"14",name:"Sogn og Fjordane"},"NO-0-16":{code:"16",name:"Sør-Trøndelag"},"NO-0-8":{code:"8",name:"Telemark"},"NO-0-19":{code:"19",name:"Troms"},"NO-0-10":{code:"10",name:"Vest-Agder"},"NO-0-7":{code:"7",name:"Vestfold"},"NO-0-1":{code:"1",name:"Østfold"},"NO-0-22":{code:"22",name:"Jan Mayen"},"NO-0-21":{code:"21",name:"Svalbard"}},[o.Country.NL]:{"NL-0-DR":{code:"DR",name:"Drenthe"},"NL-0-FL":{code:"FL",name:"Flevoland"},"NL-0-FR":{code:"FR",name:"Fryslân"},"NL-0-GE":{code:"GE",name:"Gelderland"},"NL-0-GR":{code:"GR",name:"Groningen"},"NL-0-LI":{code:"LI",name:"Limburg"},"NL-0-NB":{code:"NB",name:"Noord-Brabant"},"NL-0-NH":{code:"NH",name:"Noord-Holland"},"NL-0-OV":{code:"OV",name:"Overijssel"},"NL-0-UT":{code:"UT",name:"Utrecht"},"NL-0-ZE":{code:"ZE",name:"Zeeland"},"NL-0-ZH":{code:"ZH",name:"Zuid-Holland"}},[o.Country.PT]:{"PT-0-1":{code:"1",name:"Aveiro"},"PT-0-2":{code:"2",name:"Beja"},"PT-0-3":{code:"3",name:"Braga"},"PT-0-4":{code:"4",name:"Bragança"},"PT-0-5":{code:"5",name:"Castelo Branco"},"PT-0-6":{code:"6",name:"Coimbra"},"PT-0-7":{code:"7",name:"Évora"},"PT-0-8":{code:"8",name:"Faro"},"PT-0-9":{code:"9",name:"Guarda"},"PT-0-10":{code:"10",name:"Leiria"},"PT-0-11":{code:"11",name:"Lisboa"},"PT-0-12":{code:"12",name:"Portalegre"},"PT-0-13":{code:"13",name:"Porto"},"PT-0-14":{code:"14",name:"Santarém"},"PT-0-15":{code:"15",name:"Setúbal"},"PT-0-16":{code:"16",name:"Viana do Castelo"},"PT-0-17":{code:"17",name:"Vila Real"},"PT-0-18":{code:"18",name:"Viseu"},"PT-0-20":{code:"20",name:"Região Autónoma dos Açores"},"PT-0-30":{code:"30",name:"Região Autónoma da Madeira"}}},t.GeographicStatesLevel1={[o.Country.AR]:{"AR-1-C":{code:"C",name:"Ciudad Autónoma de Buenos Aires"},"AR-1-B":{code:"B",name:"Buenos Aires"},"AR-1-K":{code:"K",name:"Catamarca"},"AR-1-H":{code:"H",name:"Chaco"},"AR-1-U":{code:"U",name:"Chubut"},"AR-1-X":{code:"X",name:"Córdoba"},"AR-1-W":{code:"W",name:"Corrientes"},"AR-1-E":{code:"E",name:"Entre Ríos"},"AR-1-P":{code:"P",name:"Formosa"},"AR-1-Y":{code:"Y",name:"Jujuy"},"AR-1-L":{code:"L",name:"La Pampa"},"AR-1-F":{code:"F",name:"La Rioja"},"AR-1-M":{code:"M",name:"Mendoza"},"AR-1-N":{code:"N",name:"Misiones"},"AR-1-Q":{code:"Q",name:"Neuquén"},"AR-1-R":{code:"R",name:"Río Negro"},"AR-1-A":{code:"A",name:"Salta"},"AR-1-J":{code:"J",name:"San Juan"},"AR-1-D":{code:"D",name:"San Luis"},"AR-1-Z":{code:"Z",name:"Santa Cruz"},"AR-1-S":{code:"S",name:"Santa Fe"},"AR-1-G":{code:"G",name:"Santiago del Estero"},"AR-1-V":{code:"V",name:"Tierra del Fuego"},"AR-1-T":{code:"T",name:"Tucumán"}},[o.Country.FR]:{"FR-1-01":{code:"01",name:"Ain"},"FR-1-02":{code:"02",name:"Aisne"},"FR-1-03":{code:"03",name:"Allier"},"FR-1-04":{code:"04",name:"Alpes (Hte-Provence)"},"FR-1-05":{code:"05",name:"Hautes Alpes"},"FR-1-06":{code:"06",name:"Alpes-Maritimes"},"FR-1-07":{code:"07",name:"Ardeche"},"FR-1-08":{code:"08",name:"Ardennes"},"FR-1-09":{code:"09",name:"Ariege"},"FR-1-10":{code:"10",name:"Aube"},"FR-1-11":{code:"11",name:"Aude"},"FR-1-12":{code:"12",name:"Aveyron"},"FR-1-67":{code:"67",name:"Bas-Rhin"},"FR-1-13":{code:"13",name:"Bouches-du-Rhone"},"FR-1-14":{code:"14",name:"Calvados"},"FR-1-15":{code:"15",name:"Cantal"},"FR-1-16":{code:"16",name:"Charente"},"FR-1-17":{code:"17",name:"Charente-Maritime"},"FR-1-18":{code:"18",name:"Cher"},"FR-1-19":{code:"19",name:"Correze"},"FR-1-97":{code:"97",name:"Corse-du-Nord"},"FR-1-20":{code:"20",name:"Corse-du-Sud"},"FR-1-21":{code:"21",name:"Cote-d'Or"},"FR-1-22":{code:"22",name:"Cotes-d'Armor"},"FR-1-23":{code:"23",name:"Creuse"},"FR-1-96":{code:"96",name:"D.O.M. T.O.M"},"FR-1-24":{code:"24",name:"Dordogne"},"FR-1-25":{code:"25",name:"Doubs"},"FR-1-26":{code:"26",name:"Drome"},"FR-1-91":{code:"91",name:"Essonne"},"FR-1-27":{code:"27",name:"Eure"},"FR-1-28":{code:"28",name:"Eure-et-Loir"},"FR-1-29":{code:"29",name:"Finistère"},"FR-1-30":{code:"30",name:"Gard"},"FR-1-31":{code:"31",name:"Haute Garonne"},"FR-1-32":{code:"32",name:"Gers"},"FR-1-33":{code:"33",name:"Gironde"},"FR-1-99":{code:"99",name:"Guyane"},"FR-1-100":{code:"100",name:"Haute-Corse"},"FR-1-68":{code:"68",name:"Haut-Rhin"},"FR-1-92":{code:"92",name:"Hauts-de-Seine"},"FR-1-34":{code:"34",name:"Herault"},"FR-1-35":{code:"35",name:"Ille-et-Vilaine"},"FR-1-36":{code:"36",name:"Indre"},"FR-1-37":{code:"37",name:"Indre-et-Loire"},"FR-1-38":{code:"38",name:"Isere"},"FR-1-39":{code:"39",name:"Jura"},"FR-1-40":{code:"40",name:"Landes"},"FR-1-41":{code:"41",name:"Loir-et-Cher"},"FR-1-42":{code:"42",name:"Loire"},"FR-1-43":{code:"43",name:"Haute Loire"},"FR-1-44":{code:"44",name:"Loire-Atlantique"},"FR-1-45":{code:"45",name:"Loiret"},"FR-1-46":{code:"46",name:"Lot"},"FR-1-47":{code:"47",name:"Lot-et-Garonne"},"FR-1-48":{code:"48",name:"Lozere"},"FR-1-49":{code:"49",name:"Maine-et-Loire"},"FR-1-50":{code:"50",name:"Manche"},"FR-1-51":{code:"51",name:"Marne"},"FR-1-52":{code:"52",name:"Haute Marne"},"FR-1-53":{code:"53",name:"Mayenne"},"FR-1-54":{code:"54",name:"Meurthe-et-Moselle"},"FR-1-55":{code:"55",name:"Meuse"},"FR-1-56":{code:"56",name:"Morbihan"},"FR-1-57":{code:"57",name:"Moselle"},"FR-1-58":{code:"58",name:"Nievre"},"FR-1-59":{code:"59",name:"Nord"},"FR-1-60":{code:"60",name:"Oise"},"FR-1-61":{code:"61",name:"Orne"},"FR-1-75":{code:"75",name:"Paris"},"FR-1-62":{code:"62",name:"Pas-de-Calais"},"FR-1-63":{code:"63",name:"Puy-de-Dôme"},"FR-1-65":{code:"65",name:"Hautes Pyrenees"},"FR-1-64":{code:"64",name:"Pyrenees-Atlantiques"},"FR-1-66":{code:"66",name:"Pyrenees-Orientales"},"FR-1-69":{code:"69",name:"Rhone"},"FR-1-103":{code:"103",name:"Réunion"},"FR-1-70":{code:"70",name:"Haute Saone"},"FR-1-71":{code:"71",name:"Saone-et-Loire"},"FR-1-72":{code:"72",name:"Sarthe"},"FR-1-73":{code:"73",name:"Savoie"},"FR-1-74":{code:"74",name:"Haute Savoie"},"FR-1-76":{code:"76",name:"Seine-Maritime"},"FR-1-93":{code:"93",name:"Seine-Saint-Denis"},"FR-1-77":{code:"77",name:"Seine-et-Marne"},"FR-1-79":{code:"79",name:"Deux Sevres"},"FR-1-80":{code:"80",name:"Somme"},"FR-1-81":{code:"81",name:"Tarn"},"FR-1-82":{code:"82",name:"Tarn-et-Garonne"},"FR-1-90":{code:"90",name:"Territoire-de-Belfort"},"FR-1-95":{code:"95",name:"Val-d'Oise"},"FR-1-94":{code:"94",name:"Val-de-Marne"},"FR-1-83":{code:"83",name:"Var"},"FR-1-84":{code:"84",name:"Vaucluse"},"FR-1-85":{code:"85",name:"Vendee"},"FR-1-86":{code:"86",name:"Vienne"},"FR-1-87":{code:"87",name:"Haute Vienne"},"FR-1-88":{code:"88",name:"Vosges"},"FR-1-89":{code:"89",name:"Yonne"},"FR-1-78":{code:"78",name:"Yvelines"}},[o.Country.ES]:{"ES-1-C":{code:"C",name:"A Coruña"},"ES-1-VI":{code:"VI",name:"Álava"},"ES-1-AB":{code:"AB",name:"Albacete"},"ES-1-A":{code:"A",name:"Alicante"},"ES-1-AL":{code:"AL",name:"Almería"},"ES-1-O":{code:"O",name:"Asturias"},"ES-1-AV":{code:"AV",name:"Ávila"},"ES-1-BA":{code:"BA",name:"Badajoz"},"ES-1-PM":{code:"PM",name:"Illes Balears"},"ES-1-B":{code:"B",name:"Barcelona"},"ES-1-BU":{code:"BU",name:"Burgos"},"ES-1-CC":{code:"CC",name:"Cáceres"},"ES-1-CA":{code:"CA",name:"Cádiz"},"ES-1-S":{code:"S",name:"Cantabria"},"ES-1-CS":{code:"CS",name:"Castellón"},"ES-1-CR":{code:"CR",name:"Ciudad Real"},"ES-1-CO":{code:"CO",name:"Córdoba"},"ES-1-CU":{code:"CU",name:"Cuenca"},"ES-1-GI":{code:"GI",name:"Girona"},"ES-1-GR":{code:"GR",name:"Granada"},"ES-1-GU":{code:"GU",name:"Guadalajara"},"ES-1-SS":{code:"SS",name:"Gipuzkoa"},"ES-1-H":{code:"H",name:"Huelva"},"ES-1-HU":{code:"HU",name:"Huesca"},"ES-1-J":{code:"J",name:"Jaén"},"ES-1-LO":{code:"LO",name:"La Rioja"},"ES-1-GC":{code:"GC",name:"Las Palmas"},"ES-1-LE":{code:"LE",name:"León"},"ES-1-L":{code:"L",name:"Lleida"},"ES-1-LU":{code:"LU",name:"Lugo"},"ES-1-M":{code:"M",name:"Madrid"},"ES-1-MA":{code:"MA",name:"Málaga"},"ES-1-MU":{code:"MU",name:"Murcia"},"ES-1-NA":{code:"NA",name:"Navarra"},"ES-1-OR":{code:"OR",name:"Ourense"},"ES-1-P":{code:"P",name:"Palencia"},"ES-1-PO":{code:"PO",name:"Pontevedra"},"ES-1-SA":{code:"SA",name:"Salamanca"},"ES-1-TF":{code:"TF",name:"Santa Cruz de Tenerife"},"ES-1-SG":{code:"SG",name:"Segovia"},"ES-1-SE":{code:"SE",name:"Sevilla"},"ES-1-SO":{code:"SO",name:"Soria"},"ES-1-T":{code:"T",name:"Tarragona"},"ES-1-TE":{code:"TE",name:"Teruel"},"ES-1-TO":{code:"TO",name:"Toledo"},"ES-1-V":{code:"V",name:"Valencia"},"ES-1-VA":{code:"VA",name:"Valladolid"},"ES-1-BI":{code:"BI",name:"Bizkaia"},"ES-1-ZA":{code:"ZA",name:"Zamora"},"ES-1-Z":{code:"Z",name:"Zaragoza"}},[o.Country.IT]:{"IT-1-AG":{code:"AG",name:"Agrigento"},"IT-1-AL":{code:"AL",name:"Alessandria"},"IT-1-AN":{code:"AN",name:"Ancona"},"IT-1-AO":{code:"AO",name:"Aosta"},"IT-1-AR":{code:"AR",name:"Arezzo"},"IT-1-AP":{code:"AP",name:"Ascoli Piceno"},"IT-1-AT":{code:"AT",name:"Asti"},"IT-1-AV":{code:"AV",name:"Avellino"},"IT-1-BA":{code:"BA",name:"Bari"},"IT-1-BT":{code:"BT",name:"Barletta-Andria-Trani"},"IT-1-BL":{code:"BL",name:"Belluno"},"IT-1-BN":{code:"BN",name:"Benevento"},"IT-1-BG":{code:"BG",name:"Bergamo"},"IT-1-BI":{code:"BI",name:"Biella"},"IT-1-BO":{code:"BO",name:"Bologna"},"IT-1-BZ":{code:"BZ",name:"Bolzano"},"IT-1-BS":{code:"BS",name:"Brescia"},"IT-1-BR":{code:"BR",name:"Brindisi"},"IT-1-CA":{code:"CA",name:"Cagliari"},"IT-1-CL":{code:"CL",name:"Caltanissetta"},"IT-1-CB":{code:"CB",name:"Campobasso"},"IT-1-CI":{code:"CI",name:"Carbonia-Iglesias"},"IT-1-CE":{code:"CE",name:"Caserta"},"IT-1-CT":{code:"CT",name:"Catania"},"IT-1-CZ":{code:"CZ",name:"Catanzaro"},"IT-1-CH":{code:"CH",name:"Chieti"},"IT-1-CO":{code:"CO",name:"Como"},"IT-1-CS":{code:"CS",name:"Cosenza"},"IT-1-CR":{code:"CR",name:"Cremona"},"IT-1-KR":{code:"KR",name:"Crotone"},"IT-1-CN":{code:"CN",name:"Cuneo"},"IT-1-EN":{code:"EN",name:"Enna"},"IT-1-FM":{code:"FM",name:"Fermo"},"IT-1-FE":{code:"FE",name:"Ferrara"},"IT-1-FI":{code:"FI",name:"Firenze"},"IT-1-FG":{code:"FG",name:"Foggia"},"IT-1-FC":{code:"FC",name:"Forlì-Cesena"},"IT-1-FR":{code:"FR",name:"Frosinone"},"IT-1-GE":{code:"GE",name:"Genova"},"IT-1-GO":{code:"GO",name:"Gorizia"},"IT-1-GR":{code:"GR",name:"Grosseto"},"IT-1-IM":{code:"IM",name:"Imperia"},"IT-1-IS":{code:"IS",name:"Isernia"},"IT-1-SP":{code:"SP",name:"La Spezia"},"IT-1-AQ":{code:"AQ",name:"L'Aquila"},"IT-1-LT":{code:"LT",name:"Latina"},"IT-1-LE":{code:"LE",name:"Lecce"},"IT-1-LC":{code:"LC",name:"Lecco"},"IT-1-LI":{code:"LI",name:"Livorno"},"IT-1-LO":{code:"LO",name:"Lodi"},"IT-1-LU":{code:"LU",name:"Lucca"},"IT-1-MC":{code:"MC",name:"Macerata"},"IT-1-MN":{code:"MN",name:"Mantova"},"IT-1-MS":{code:"MS",name:"Massa-Carrara"},"IT-1-MT":{code:"MT",name:"Matera"},"IT-1-VS":{code:"VS",name:"Medio Campidano"},"IT-1-ME":{code:"ME",name:"Messina"},"IT-1-MI":{code:"MI",name:"Milano"},"IT-1-MO":{code:"MO",name:"Modena"},"IT-1-MB":{code:"MB",name:"Monza e Brianza"},"IT-1-NA":{code:"NA",name:"Napoli"},"IT-1-NO":{code:"NO",name:"Novara"},"IT-1-NU":{code:"NU",name:"Nuoro"},"IT-1-OG":{code:"OG",name:"Ogliastra"},"IT-1-OT":{code:"OT",name:"Olbia-Tempio"},"IT-1-OR":{code:"OR",name:"Oristano"},"IT-1-PD":{code:"PD",name:"Padova"},"IT-1-PA":{code:"PA",name:"Palermo"},"IT-1-PR":{code:"PR",name:"Parma"},"IT-1-PV":{code:"PV",name:"Pavia"},"IT-1-PG":{code:"PG",name:"Perugia"},"IT-1-PU":{code:"PU",name:"Pesaro e Urbino"},"IT-1-PE":{code:"PE",name:"Pescara"},"IT-1-PC":{code:"PC",name:"Piacenza"},"IT-1-PI":{code:"PI",name:"Pisa"},"IT-1-PT":{code:"PT",name:"Pistoia"},"IT-1-PN":{code:"PN",name:"Pordenone"},"IT-1-PZ":{code:"PZ",name:"Potenza"},"IT-1-PO":{code:"PO",name:"Prato"},"IT-1-RG":{code:"RG",name:"Ragusa"},"IT-1-RA":{code:"RA",name:"Ravenna"},"IT-1-RC":{code:"RC",name:"Reggio Calabria"},"IT-1-RE":{code:"RE",name:"Reggio Emilia"},"IT-1-RI":{code:"RI",name:"Rieti"},"IT-1-RN":{code:"RN",name:"Rimini"},"IT-1-RM":{code:"RM",name:"Roma"},"IT-1-RO":{code:"RO",name:"Rovigo"},"IT-1-SA":{code:"SA",name:"Salerno"},"IT-1-SS":{code:"SS",name:"Sassari"},"IT-1-SV":{code:"SV",name:"Savona"},"IT-1-SI":{code:"SI",name:"Siena"},"IT-1-SR":{code:"SR",name:"Siracusa"},"IT-1-SO":{code:"SO",name:"Sondrio"},"IT-1-TA":{code:"TA",name:"Taranto"},"IT-1-TE":{code:"TE",name:"Teramo"},"IT-1-TR":{code:"TR",name:"Terni"},"IT-1-TO":{code:"TO",name:"Torino"},"IT-1-TP":{code:"TP",name:"Trapani"},"IT-1-TN":{code:"TN",name:"Trento"},"IT-1-TV":{code:"TV",name:"Treviso"},"IT-1-TS":{code:"TS",name:"Trieste"},"IT-1-UD":{code:"UD",name:"Udine"},"IT-1-VA":{code:"VA",name:"Varese"},"IT-1-VE":{code:"VE",name:"Venezia"},"IT-1-VB":{code:"VB",name:"Verbano-Cusio-Ossola"},"IT-1-VC":{code:"VC",name:"Vercelli"},"IT-1-VR":{code:"VR",name:"Verona"},"IT-1-VV":{code:"VV",name:"Vibo Valentia"},"IT-1-VI":{code:"VI",name:"Vicenza"},"IT-1-VT":{code:"VT",name:"Viterbo"}},[o.Country.BE]:{"BE-1-VAN":{code:"VAN",name:"Antwerpen"},"BE-1-WBR":{code:"WBR",name:"Brabant wallon"},"BE-1-WHT":{code:"WHT",name:"Hainaut"},"BE-1-WLG":{code:"WLG",name:"Liège"},"BE-1-VLI":{code:"VLI",name:"Limburg"},"BE-1-WLX":{code:"WLX",name:"Luxembourg"},"BE-1-WNA":{code:"WNA",name:"Namur"},"BE-1-VOV":{code:"VOV",name:"Oost-Vlaanderen"},"BE-1-VBR":{code:"VBR",name:"Vlaams-Brabant"},"BE-1-VWV":{code:"VWV",name:"West-Vlaanderen"}}}},68624:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.processQuery=void 0;const o=r(97211),n=r(23864);t.processQuery=function(e){return{type:o.StaticDataQueryType.GEOGRAPHIC_STATES,collection:(0,n.getStatesForLocaleFormats)(e.level,e.localeFormats)}}},23864:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getStatesForLocaleFormats=t.isStateValid=void 0;const o=r(97211),n=r(42713);t.isStateValid=function(e,t){return t in function(e){return{...n.GeographicStatesLevel0[e]||{},...n.GeographicStatesLevel1[e]||{}}}(e)},t.getStatesForLocaleFormats=function(e,t){const r=e===o.GeographicStateLevel.LEVEL_0?n.GeographicStatesLevel0:n.GeographicStatesLevel1;return t?t.filter((e=>!!r[e])).reduce(((e,t)=>Object.assign({},e,{[t]:r[t]})),{}):r}},30313:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.allowedExtensions=void 0,t.allowedExtensions=[".docx",".doc",".xlsx",".xls",".ppt",".pptx",".pdf",".txt",".zip",".key",".png",".jpg",".jpeg",".gif",".tiff",".bmp",".heif",".heic",".odt",".avi",".ogg",".m4a",".mov",".mp3",".mp4",".mpg",".wav",".ods",".rar",".7z",".mkv",".raw",".db",".aac",".3gp",".webm",".flac",".csv",".wmv",".tar",".odp",".odg",".gzip"]},14538:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSecureDocumentsAllowedMimeTypes=t.getSecureDocumentsAllowedExtensions=void 0;const o=r(30313),n=r(44999);t.getSecureDocumentsAllowedExtensions=function(){return o.allowedExtensions},t.getSecureDocumentsAllowedMimeTypes=function(){return n.allowedMimeTypes}},44999:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.allowedMimeTypes=void 0,t.allowedMimeTypes=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/pdf","text/plain","application/zip","application/x-zip-compressed","multipart/x-zip","application/pkcs8","application/x-iwork-keynote-sffkey","image/png","image/jpeg","image/gif","image/tiff","image/bmp","image/heic","image/heif","image/heic-sequence","image/heif-sequence","application/vnd.oasis.opendocument.text","video/avi","video/msvideo","video/x-msvideo","audio/ogg","video/ogg","video/quicktime","audio/mpeg","audio/mp4","video/mp4","video/mpeg","audio/wav","audio/x-wav","video/x-ms-wmv","application/vnd.oasis.opendocument.spreadsheet","application/x-rar-compressed","application/x-rar","application/vnd.rar","application/x-7z-compressed","video/x-matroska","video/raw","application/x-sqlite3","application/x-ole-storage","audio/aac","audio/x-aac","video/3gpp","audio/webm","video/webm","audio/flac","application/gzip","application/tar","application/x-tar","application/tar+gzip","application/x-compressed-tar","application/x-gzip","application/octet-stream","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.graphics"]},34688:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeStaticDataController=void 0;const o=r(97211),n=r(26118),a=r(68624);t.makeStaticDataController=()=>({query:s});class i extends Error{constructor(e){super(`Unexpected StaticDataQuery type (${e})`)}}function s(e){try{return{results:(t=e.queries,t.map((e=>{switch(e.type){case o.StaticDataQueryType.CALLING_CODES:return(0,n.processQuery)();case o.StaticDataQueryType.GEOGRAPHIC_STATES:return(0,a.processQuery)(e);default:throw new i(e)}}))),error:null}}catch(e){return{results:[],error:e}}var t}},17905:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(9786);t.bootstrap=e=>{e.register(o.config)}},94707:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(17905);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},24387:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertDeviceKeysToUki=t.convertUkiToDeviceKeys=void 0;t.convertUkiToDeviceKeys=e=>{if(e){const t=e.split("-");if(t.length>0){const[r]=t;return{accessKey:r,secretKey:e}}}return null};t.convertDeviceKeysToUki=e=>`${e.accessKey}-${e.secretKey}`},97055:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isTeamAdminInCurrentSpace=t.isBillingAdminInCurrentSpace=t.getCurrentTeamId=t.getCurrentSpaceId=t.getCurrentSpace=void 0;t.getCurrentSpace=e=>e.spaces.find((e=>"accepted"===e.details.status));t.getCurrentSpaceId=e=>{const r=(0,t.getCurrentSpace)(e);return r?Number(r.teamId):void 0},t.getCurrentTeamId=t.getCurrentSpaceId;t.isBillingAdminInCurrentSpace=e=>{const r=(0,t.getCurrentSpace)(e);return!!r&&r.details.isBillingAdmin};t.isTeamAdminInCurrentSpace=e=>{const r=(0,t.getCurrentSpace)(e);return!!r&&r.details.isTeamAdmin}},47193:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeStoreService=void 0;const o=r(18948),n=r(68473);t.makeStoreService=e=>{const t=e&&e.store||(0,n.createStore)(),r=()=>t.getState(),a=new o.BehaviorSubject(r());return t.subscribe((()=>a.next(r()))),{dispatch:e=>t.dispatch(e),getABTesting:()=>r().device.abtesting,getAccountInfo:()=>r().userSession.account,getAccountCreation:()=>r().userSession.accountCreation,getLocation:()=>r().device.platform.location,getSdkAuthentication:()=>r().userSession.sdkAuthentication,getLocalSettings:()=>r().userSession.localSettings,getPersonalData:()=>r().userSession.personalData,getPersonalSettings:()=>r().userSession.personalSettings,getPersonalFeatures:()=>r().userSession.personalFeatures,getNotificationStatus:()=>r().userSession.notificationsStatus,getPlatform:()=>r().device.platform,getPlatformInfo:()=>r().device.platform.info,getIconsCache:()=>r().userSession.iconsCache,getSharingData:()=>r().userSession.sharingData,getSpaceData:()=>r().userSession.spaceData,getState$:()=>a,getState:()=>r(),getStore:()=>t,getSubscriptionCode:()=>r().userSession.account.subscriptionCode,getSyncStatus:()=>r().userSession.sync,getTeamAdminData:()=>r().userSession.teamAdminData,getUserLogin:()=>r().userSession.account.login,getUserSession:()=>r().userSession.session,isAuthenticated:()=>Boolean(r().userSession.session.sessionId&&r().userSession.account.isAuthenticated),isFeatureActivated:e=>!!t.getState().userSession.personalFeatures.features&&Boolean(t.getState().userSession.personalFeatures.features[e]),hasSessionId:()=>Boolean(r().userSession.session.sessionId)}}},68473:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createStore=t.globalReducer=void 0;const o=r(89531),n=r(49258),a=r(28616),i=r(23210),s=r(65805),c=r(37959),d=r(10701),l=r(67244),u=r(92905),p=(0,o.combineReducers)({platform:a.default,abtesting:i.default,application:s.applicationReducer,remoteFile:l.remoteFileReducer,globalExtensionSettings:u.globalExtensionSettingsReducer});t.globalReducer=(e,t)=>{const r=e?e.device:void 0,o=e?e.authentication:void 0,a=e?e.userSession:void 0,i=e?e.inMemoryInterSessionUnsynced:void 0;return{device:p(r,t),authentication:(0,c.authenticationReducer)(o,t),userSession:(0,d.userSessionReducer)(a,t),inMemoryInterSessionUnsynced:(0,n.inMemoryInterSessionUnsyncedSliceReducer)(i,t)}},t.createStore=function(){return(0,o.createStore)(t.globalReducer)}},39801:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(66288),n=r(52667);t.config={commands:{getTeamInfo:{handler:n.getTeamInfo}},queries:{getIsRecoveryEnabled:{selector:o.isRecoveryEnabledSelector},getIsSharingEnabled:{selector:o.isSharingEnabledSelector}},liveQueries:{}}},59975:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},52667:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamInfo=void 0;const o=r(15876),n=r(8153),a=r(1064);t.getTeamInfo=async function(e){const{storeService:t}=e,r=(0,n.userLoginSelector)(t.getState()),a=await(0,o.teamStatus)(t,r);if((0,o.isApiError)(a))return i(a);const{info:s,planTier:c,capabilities:d}=a;return{success:!0,data:{teamInfo:s,planTier:c,capabilities:d}}};const i=e=>e.code===o.NotAdmin?s(a.AuthenticationCode.UNAUTHORIZED,e.message):s(a.AuthenticationCode.UNKNOWN_ERROR,e.message),s=(e,t)=>({success:!1,reason:e,message:t})},46168:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setTeamSettings=t.makeSettingsController=void 0;const o=r(28060),n=r(21337),a=r(16165);t.makeSettingsController=(e,t)=>({setTeamSettings:r=>c(e,t,(0,n.getCurrentUserInfo)(e),r)});const i=e=>e.replace(/([A-Z])/g,((e,t)=>`_${t.toLowerCase()}`)),s=(e,t)=>null!==t?{type:`set_${i(e)}`,value:t}:{type:`unset_${i(e)}`};function c(e,t,{login:r,uki:n},{teamId:i,settings:c}){const d=(0,o.zipWith)(s,(0,o.keys)(c),(0,o.values)(c));return t.settings.setTeamSettings({login:r,uki:n,teamId:i,operations:d}).then((()=>((0,a.updateCurrentSpaceWith)(e,(e=>Object.assign({},e,{details:Object.assign({},e.details,{info:Object.assign({},e.details.info,c)})}))),{}))).catch((e=>({error:e})))}t.setTeamSettings=c},66800:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(39801);t.bootstrap=e=>{e.register(o.config)}},68374:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(66800);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},66288:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSharingEnabledSelector=t.isRecoveryEnabledSelector=void 0;const o=r(8153);t.isRecoveryEnabledSelector=e=>{var t,r;const n=(0,o.activeSpacesSelector)(e)[0];return null!==(r=null===(t=null==n?void 0:n.info)||void 0===t?void 0:t.recoveryEnabled)&&void 0!==r&&r};t.isSharingEnabledSelector=e=>{var t;const r=(0,o.activeSpacesSelector)(e)[0];return!(null===(t=null==r?void 0:r.info)||void 0===t?void 0:t.sharingDisabled)}},58105:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(8811),n=r(91551),a=r(87169),i=r(2175),s=r(22695),c=r(1750),d=r(98443),l=r(72873),u=r(56502),p=r(55422),S=r(29662),g=r(9429),m=r(9),y=r(2179),v=r(98416),A=r(44480),E=r(9792);t.config={commands:{completeTeamDomainRegistration:{handler:a.completeTeamDomainRegistration},deactivateTeamDomain:{handler:i.deactivateTeamDomain},getTeamDomains:{handler:c.getTeamDomains},getTeamDevice:{handler:d.getTeamDevice},registerTeamDomain:{handler:s.registerTeamDomain},registerTeamDevice:{handler:l.registerTeamDevice},getEncryptionServiceConfig:{handler:g.getEncryptionServiceConfig},generateAndSaveEncryptionServiceConfig:{handler:m.generateAndSaveEncryptionServiceConfig},getTeamDeviceEncryptedConfig:{handler:v.getTeamDeviceEncryptedConfig},updateTeamDeviceEncryptedConfig:{handler:A.updateTeamDeviceEncryptedConfig},createSSOConnectorConfig:{handler:u.createSSOConnectorConfig},generateSSOConnectorKey:{handler:p.generateSSOConnectorKey},getReport:{handler:S.getReport},getTeamInfoLogs:{handler:y.getTeamInfoLogs},getAuditLogs:{handler:E.getAuditLogs}},queries:{getAdministrableUserGroup:{selector:o.administrableUserGroupSelector},getAdministrableUserGroups:{selector:o.administrableUserGroupsSelector},isGroupNameAvailable:{selector:o.isGroupNameAvailableSelector}},liveQueries:{liveAdministrableUserGroup:{operator:n.administrableUserGroup$},liveAdministrableUserGroups:{operator:n.administrableUserGroups$}}}},96254:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(87778),t),n(r(18210),t),n(r(95378),t),n(r(26634),t),n(r(57421),t)},90842:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeDirectorySyncController=void 0;const o=r(41179),n=r(21337);t.makeDirectorySyncController=e=>{const{storeService:t,localStorageService:r,wsService:a,sessionService:i,sharingService:s}=e;return{directorySyncForAllTeams:()=>o.directorySyncForAllTeams(t,a,i),keyValidatedByTacAdmin:(e,c)=>function(e,t,r,a,i,s,c){const d=t.getTeamAdminData().teams[s],l=(0,n.getCurrentUserInfo)(t),u=()=>o.directorySyncForTeam(t,a,i,s);return o.saveDirectorySyncKey(e,t,r,l,d,s,c).then(u).catch((()=>{}))}(s,t,r,a,i,e,c),keyRejectedByTacAdmin:(e,r)=>o.keyRejectedByTacAdmin(t,a,e,r)}}},9792:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAuditLogs=void 0;const o=r(45082),n=r(15876),a=r(8153),i=e=>{switch(e.code){case n.GetAuditLogsNotAdminErrorCode:return o.GetAuditLogsErrorCode.NotAdmin;case n.GetAuditLogsInternalErrorCode:return o.GetAuditLogsErrorCode.InternalError;default:return o.GetAuditLogsErrorCode.UnknownError}};t.getAuditLogs=async function(e,t){var r;const{storeService:o}=e,s=(0,a.userLoginSelector)(o.getState()),c=await(0,n.getAuditLogs)(o,s,t);return(0,n.isApiError)(c)?{success:!1,error:{code:i(c)}}:{success:!0,auditLogs:(null===(r=c.auditLogs)||void 0===r?void 0:r.length)?c.auditLogs.map((e=>JSON.parse(e))):[]}}},2179:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamInfoLogs=void 0;const o=r(88478),n=r(12150),a=r(59125),i=r(8153);t.getTeamInfoLogs=async function(e,t){const{storeService:r,wsService:s}=e,c=r.getState(),d=(0,i.userLoginSelector)(c),l=(0,o.ukiSelector)(c),u=(0,i.activeSpacesSelector)(c)[0],p=Number(null==u?void 0:u.teamId);try{return{auditLogs:(await s.teamPlans.getTeamInfoLog({login:d,uki:l,teamId:p,limit:t.limit,offset:t.offset})).content}}catch(e){(0,a.sendExceptionLog)({error:e});const t=void 0!==e.errorCode&&e.errorCode in n.HttpErrorCode?e.errorCode:void 0;return{error:{message:e.message,code:t},auditLogs:[]}}}},57421:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetAuditLogsErrorCode=void 0,function(e){e.NotAdmin="NotAdmin",e.InternalError="InternalError",e.UnknownError="UnknownError"}(t.GetAuditLogsErrorCode||(t.GetAuditLogsErrorCode={}))},26110:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTeamDeviceAccount=void 0;const o=r(15876),n=r(8153);t.createTeamDeviceAccount=async(e,t)=>{const{storeService:r}=e,a=r.getState(),i=(0,n.userLoginSelector)(a);if(!i)throw new Error("\n            [createTeamDeviceAccount] - Session not opened!\n        ");const s=await(0,o.createTeamDeviceAccount)(r,i,t);return(0,o.isApiError)(s)?{success:!1,error:{code:(0,o.getCode)(s.code,o.createTeamDeviceAccountErrors)}}:{success:!0,data:{login:s.login}}}},60226:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTeamDevice=void 0;const o=r(15876),n=r(8153);t.deactivateTeamDevice=async function(e,{teamDeviceAccessKey:t}){const{storeService:r}=e,a=r.getState(),i=(0,n.userLoginSelector)(a);if(!i)throw new Error("\n            [registerTeamDeviceRequest] - Session not opened!\n        ");const s=await(0,o.deactivateTeamDevice)(r,i,{teamDeviceAccessKey:t});return(0,o.isApiError)(s)?{success:!1,error:{code:(0,o.getCode)(s.code,o.deactivateTeamDeviceErrors)}}:{success:!0,data:{}}}},98443:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDevice=void 0;const o=r(15876),n=r(8153);t.getTeamDevice=async function(e,t){const{storeService:r}=e,{teamDeviceAccessKey:a}=t,i=r.getState(),s=(0,n.userLoginSelector)(i);if(!s)throw new Error("\n            [registerTeamDeviceRequest] - Session not opened!\n        ");const c=await(0,o.getTeamDevice)(r,s,{teamDeviceAccessKey:a});return(0,o.isApiError)(c)?{success:!1,error:{code:(0,o.getCode)(c.code,o.getTeamDeviceErrors)}}:{success:!0,data:{teamDevice:c.teamDevice}}}},72873:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registerTeamDevice=void 0;const o=r(15876),n=r(8153);t.registerTeamDevice=async function(e,t){const{storeService:r}=e,{deviceName:a,platform:i}=t,s=r.getState(),c=(0,n.userLoginSelector)(s);if(!c)throw new Error("\n            [registerTeamDeviceRequest] - Session not opened!\n        ");const d=await(0,o.registerTeamDevice)(r,c,{platform:i,deviceName:a});return(0,o.isApiError)(d)?{success:!1,error:{code:(0,o.getCode)(d.code,o.registerTeamDeviceErrors)}}:{success:!0,data:{teamUuid:d.teamUuid,deviceAccessKey:d.deviceAccessKey,deviceSecretKey:d.deviceSecretKey}}}},18210:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TeamDevicePlatform=void 0;const o=r(54296);Object.defineProperty(t,"TeamDevicePlatform",{enumerable:!0,get:function(){return o.TeamDevicePlatform}})},41179:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isDirectorySyncActivated=t.keyRejectedByTacAdmin=t.isSignatureValid=t.buildVerifiedSyncResponseData=t.keyToXMLB64=t.chainOperations=t.batchOperations=t.directorySyncForTeam=t.directorySyncForAllTeams=t.saveDirectorySyncKey=void 0;const o=r(37089),n=r(50412),a=r(5804),i=r(61020),s=r(96045),c=r(31891),d=r(59125),l=r(43013),u=r(57254),p=r(38029),S=r(62380),g=r(88478),m=r(69774),y=r(93513);t.saveDirectorySyncKey=async function(e,t,r,n,a,i,s){return c().catch((function(t){if("Bad Request (ITEM_GROUP_UPDATE_CONFLICT)"===t.message)return function(){const{login:t,uki:r}=n;return(0,S.loadSpecialItemGroup)(e.ws,t,r,a).then(p).then(c).then((()=>{}))}();throw t}));function c(){return async function(){const t=await async function(){const{specialItemGroup:t}=a,{crypto:r}=e,o=await r.symmetricEncryption.generateNewAESKey(),i=await(0,l.getSpecialItemGroupKey)(r,n,a),c={publicKey:s},d=y.encode(JSON.stringify(c)),p=await r.symmetricEncryption.encryptAES256(o,d),S=await r.symmetricEncryption.encryptAES256(i,y.encode(o)),g=(0,u.generateItemUuid)(),m=await e.item.makeItemUpload(g,S,p);return await e.item.makeAddItemsEvent(t.groupId,t.revision,[m])}();return e.item.addItems(e.ws,n.login,n.uki,t)}().then(d)}async function d(o){return(0,m.updateAdminDataAfterItemAddedOrUpdated)(t,r,e.ws,n,i,o).then((()=>{}))}function p(e){const r=(0,o.specialItemGroupUpdated)(i,e);return t.dispatch(r),Promise.resolve()}},t.directorySyncForAllTeams=function(e,t,r){const o=e.getTeamAdminData();return Object.keys(o.teams).map((o=>f(e,t,r,o)))};class v extends Error{constructor(e=""){super(e),this.name="NoRequestError"}}class A extends Error{constructor(e=""){super(e),this.name="NewPublicKeyError"}}class E extends Error{constructor(e="",t){super(e),this.name="InvalidSignatureError",this.syncResponse=t}}function f(e,t,r,o){const s=(0,i.makeTeamAdminController)(e,t);return function(){const t=e.getState().userSession.directorySync;return(0,a.isTeamDirectorySyncInProgress)(t,o)}()?(c.default.log(`[Directory Sync] Skipping: sync already in progress for team ${o}`),Promise.resolve()):(e.dispatch((0,n.teamDirectorySyncInProgress)(o)),function(){const r=e.getUserLogin(),n=(0,g.ukiSelector)(e.getState()),a={teamId:Number(o),login:r,uki:n};return t.teamPlans.getDirectorySyncRequest(a)}().then((async function(e){if(!e.content)throw new v;return e})).then((async function(t){const{publicKey:r,id:n}=t.content,a=e.getTeamAdminData().teams[o].directorySyncKey,i=a&&a.publicKey,s=T(r);if(s!==i){const e={teamId:o,publicKey:s,requestId:n};(0,p.default)().checkDirectorySyncKeyRequest(e);const r=`[Directory Sync] in sync request ${t.content.id} for team ${o}: new public key detected for syncRequest.`;throw c.default.log(r),new A}return t})).then((async function(e){if(!await C(e,o)){const t=`[Directory Sync] in sync request ${e.content.id} for team ${o}: invalid signature.`;c.default.log(t);throw new E(t,e)}return e})).then((async function(t){const n=e.getTeamAdminData().teams[o].userGroups||[],a=t.content.userGroups||[],i=function(e,t){const r=t.map((e=>e.groupId));return e.filter((e=>!!e.externalId)).filter((e=>!r.includes(e.externalId)))}(n,a),c=function(e,t){const r=e.filter((e=>!!e.externalId)).map((e=>e.externalId));return t.filter((e=>!r.includes(e.groupId)))}(n,a),l=function(e,t){const r=e.filter((e=>!!e.externalId)).map((e=>e.externalId));return t.filter((e=>r.includes(e.groupId)))}(n,a),u=i.map((e=>function(e){const t=function(e){const{groupId:t,revision:r}=e;return{groupId:t,revision:r}}(e);return()=>s.deleteUserGroupAction(t)}(e))),p=c.map((e=>function(e){const t=function(e){const t=e.groupName,r=e.groupId;return{teamId:Number(o),externalId:r,name:t}}(e);return()=>s.createUserGroupAction(r,t).then((t=>function(e,t){if(e.userGroups.length>0){return m(e.userGroups[0],t)}return Promise.resolve()}(t,e)))}(e))),S=l.map((e=>function(e,t){const r=t.find((t=>t.externalId===e.groupId));if(!r)return[];const o=[];if(e.groupName!==r.name){const t=()=>function(e,t){const r=function(e,t){return{groupId:e.groupId,name:t.groupName,revision:e.revision}}(e,t);return s.renameUserGroupAction(r)}(r,e);o.push(t)}if(function(e,t){const r=e.users.map((e=>e.alias));return t.memberLogins.some((e=>!r.includes(e)))}(r,e)){const t=()=>m(r,e);o.push(t)}if(function(e,t){return e.users.map((e=>e.alias)).some((e=>!t.memberLogins.includes(e)))}(r,e)){const t=()=>function(e,t){const r=e.users.map((e=>e.alias)).filter((e=>!t.memberLogins.includes(e))),o={groupId:e.groupId,revision:e.revision,users:r};return s.revokeUserGroupMembersAction(o)}(r,e);o.push(t)}return o}(e,n))).reduce(((e,t)=>e.concat(t)),[]),g=[...u,...p],y=S,v=await _(g),A=await h(y);return[...v,...A].filter((e=>e.error)).map((e=>e.error)).forEach((e=>{const r=`[Directory Sync] in sync request ${t.content.id} for team ${o}: an operation on groups failed: ${e}`,n=new Error(r);(0,d.sendExceptionLog)({error:n})})),t})).then((async function(e){return l(),u(e).then((()=>{}))})).catch((async function(e){switch(l(),e.name){case"NoRequestError":case"NewPublicKeyError":break;case"InvalidSignatureError":{const t=e,{syncResponse:r}=t;u(r,"invalid_signature").then((()=>{}));break}default:{const t=new Error(`[Directory Sync] unexpected error for team ${o}: ${e}`);(0,d.sendExceptionLog)({error:t})}}})));function l(){e.dispatch((0,n.teamDirectorySyncNotInProgress)(o))}function u(r,n){const{content:{id:a}}=r,i=e.getUserLogin(),s=(0,g.ukiSelector)(e.getState()),c={teamId:Number(o),login:i,uki:s,requestId:a},d=Object.assign({},c,n?{syncError:n}:{});return t.teamPlans.updateDirectorySyncRequestStatus(d)}function S(e){return{alias:e,permission:"limited"}}function m(e,t){const r=e.users.map((e=>e.alias)),n=t.memberLogins.filter((e=>!r.includes(e))),a={groupId:e.groupId,revision:e.revision,users:n.map(S),teamId:Number(o)};return s.inviteUserGroupMembersAction(a)}}function h(e){const t=e.map((e=>e().then((e=>({success:!0,result:e}))).catch((e=>({success:!1,error:e})))));return Promise.all(t)}async function _(e,t=[]){const[r,...o]=e;if(!r)return t;let n;try{n={success:!0,result:await r()}}catch(e){n={success:!1,error:e}}return _(o,[...t,n])}function T({modulus:e,exponent:t}){const r=`<RSAKeyValue><Modulus>${e}</Modulus><Exponent>${t}</Exponent></RSAKeyValue>`;return y.encode(r)}function I(e,t){return e+t.sort((function(e,t){return e.groupId<t.groupId?-1:e.groupId>t.groupId?1:0})).map((function(e){const t=e.memberLogins.sort();return e.groupId+e.groupName+t.join("")})).join("")}async function C(e,t){const{content:{signature:r,userGroups:o,publicKey:n}}=e,a=I(t,o),i=y.encode(a);return(0,s.makeAsymmetricEncryption)().verifyJwk(n,r,i)}t.directorySyncForTeam=f,t.batchOperations=h,t.chainOperations=_,t.keyToXMLB64=T,t.buildVerifiedSyncResponseData=I,t.isSignatureValid=C,t.keyRejectedByTacAdmin=function(e,t,r,o){const n=e.getUserLogin(),a=(0,g.ukiSelector)(e.getState()),i={teamId:Number(r),login:n,uki:a,requestId:o,syncError:"key_rejected"};return t.teamPlans.updateDirectorySyncRequestStatus(i).then((()=>{}))},t.isDirectorySyncActivated=function(e){const t=e.spaces.find((e=>e.details&&e.details.info&&"accepted"===e.details.status));if(!t)return!1;const r=t.details.info.activeDirectorySyncType;return["full","provision-only"].includes(r)}},87169:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeTeamDomainRegistration=void 0;const o=r(15876),n=r(8153);t.completeTeamDomainRegistration=async function(e){const{storeService:t}=e,r=(0,n.userLoginSelector)(t.getState()),a=await(0,o.completeDomainRegistration)(t,r);return(0,o.isApiError)(a)?{success:!1,error:{code:(0,o.getCode)(a.code,o.completeDomainRegistrationErrors)}}:{success:!0,domains:a.domain.map((e=>({id:e.id,name:e.domain,status:e.status,previousStatus:e.previousStatus,dnsToken:e.dnsToken})))}}},2175:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTeamDomain=void 0;const o=r(15876),n=r(8153);t.deactivateTeamDomain=async function(e,t){const{storeService:r}=e,a=(0,n.userLoginSelector)(r.getState()),i=await(0,o.deactivateDomain)(r,a,t);return(0,o.isApiError)(i)?{success:!1,error:{code:(0,o.getCode)(i.code,o.deactivateDomainErrors)}}:{success:!0}}},1750:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDomains=void 0;const o=r(15876),n=r(8153);t.getTeamDomains=async function(e){const{storeService:t}=e,r=(0,n.userLoginSelector)(t.getState()),a=await(0,o.listDomains)(t,r);return(0,o.isApiError)(a)?{success:!1,error:{code:(0,o.getCode)(a.code,o.listDomainErrors)}}:{success:!0,domains:a.domains.map((e=>({id:e.id,name:e.domain,status:e.status,previousStatus:e.previousStatus,dnsToken:e.dnsToken})))}}},22695:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registerTeamDomain=void 0;const o=r(15876),n=r(8153);t.registerTeamDomain=async function(e,t){const{storeService:r}=e,a=(0,n.userLoginSelector)(r.getState()),i=await(0,o.requestDomainRegistration)(r,a,t);return(0,o.isApiError)(i)?{success:!1,error:{code:(0,o.getCode)(i.code,o.requestDomainRegistrationErrors)}}:{success:!0,data:{computedToken:i.computedToken,challengeDomain:i.challengeDomain}}}},87778:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DomainStatus=void 0;const o=r(15256);t.DomainStatus=o.DomainStatusResponse},88806:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createAzureEncryptionServiceConfig=t.createAwsLinuxEncryptionServiceConfig=void 0;t.createAwsLinuxEncryptionServiceConfig=({configEncryptionKey:e,deviceSecretKey:t,deviceAccessKey:r,teamUuid:o})=>`DASHLANE_SSO_TEAM_DEVICE_ACCESS_KEY=${r}\nDASHLANE_SSO_TEAM_DEVICE_SECRET_KEY=${t}\nDASHLANE_SSO_TEAM_UUID=${o}\nDASHLANE_CONFIG_ENCRYPTION_KEY=${e}\n`;t.createAzureEncryptionServiceConfig=({configEncryptionKey:e,deviceSecretKey:t,deviceAccessKey:r,teamUuid:o,encryptionServiceEndpoint:n})=>{const{host:a}=new URL(n);return`{\n      "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",\n      "contentVersion": "1.0.0.0",\n      "parameters": {\n        "siteName": {\n          "value": "${a.split(".").slice(0,-2).join(".")}"\n        },\n        "servicePlanSku": {\n          "value": "B1"\n        },\n        "servicePlanCapacity": {\n          "value": 1\n        },\n        "location": {\n          "value": "[resourceGroup().location]"\n        },\n        "DASHLANE_CONFIG_ENCRYPTION_KEY": {\n          "value": "${e}"\n        },\n        "DASHLANE_SSO_TEAM_DEVICE_ACCESS_KEY": {\n          "value": "${r}"\n        },\n        "DASHLANE_SSO_TEAM_DEVICE_SECRET_KEY": {\n          "value": "${t}"\n        },\n        "DASHLANE_SSO_TEAM_UUID": {\n          "value": "${o}"\n        }\n      }\n    }\n    `}},9:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateAndSaveEncryptionServiceConfig=void 0;const o=r(24555),n=r(41751),a=r(15876),i=r(89558),s=r(3082),c=r(74454),d=r(88806),l=r(9429),u=r(35981),p=r(25602),S=r(28354),g=r(44480),m=r(25424),y=async(e,t,r,a)=>{const{storeService:s,wsService:l}=e,{deviceSecretKey:y,deviceAccessKey:v,teamUuid:A}=await(0,p.reregisterTeamDevice)(e,a),{crypto:E}=(0,i.makeSharingService)(s,l),f=await E.asymmetricEncryption.generateRsaKeyPair(),h=f.private.replace(c.PRIVATE_KEY_HEADER,"").replace(c.PRIVATE_KEY_FOOTER,"").replace(/[\r\n ]/gm,""),_=f.public.replace(c.PUBLIC_KEY_HEADER,"").replace(c.PUBLIC_KEY_FOOTER,"").replace(/[\r\n ]/gm,""),T=await(0,p.reregisterTeamDeviceAccount)(e,{deviceAccessKey:v,devicePublicKey:_});if(!T.success)return{success:!1,error:T.error};const{encryptionKeyUuid:I,key:C}=await(async()=>{const e=await(0,n.generate64BytesKey)(),t=(0,o.bufferToBase64)(e);return{encryptionKeyUuid:(0,S.v4)().toLowerCase(),key:t}})(),P={config:("Microsoft Azure"===t?d.createAzureEncryptionServiceConfig:d.createAwsLinuxEncryptionServiceConfig)({deviceSecretKey:y,deviceAccessKey:v,teamUuid:A,configEncryptionKey:`${I}|${C}`,encryptionServiceEndpoint:r}),configEncryptionKey:C,teamUuid:A,deviceAccessKey:v,deviceSecretKey:y,encryptionKeyUuid:I,deploymentLocation:t,devicePublicKey:_,devicePrivateKey:h,lastGeneratedTimeStamp:(0,m.getUnixTime)(Date.now())},D=await(0,g.updateTeamDeviceEncryptedConfig)(e,{teamDeviceUrl:r},P);if(!1===D.success)return{success:!1,error:D.error};const O=await(0,u.persistEncryptionServiceConfig)(e,P);return!1===O.success?{success:!1,error:O.error}:{success:!0,data:{basicConfig:{...P},encryptionServiceReloadingStatus:D.data.encryptionServiceReloadingStatus}}},v=["AWS","Microsoft Azure"];t.generateAndSaveEncryptionServiceConfig=async function(e,{deploymentLocation:t,encryptionServiceEndpoint:r}){const{storeService:o}=e;if((0,s.requireAdmin)(o),!v.includes(t))return{success:!1,error:{code:a.InvalidRequestError}};const n=await(0,l.getEncryptionServiceConfig)(e);let i;return i=n.success?await y(e,t,r,n.data):await y(e,t,r),i}},9429:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEncryptionServiceConfig=void 0;const o=r(15876),n=r(8811),a=r(3082);t.getEncryptionServiceConfig=({storeService:e})=>{var t,r;(0,a.requireAdmin)(e);try{const a=(0,n.currentTeamIdSelector)(e.getState()),i=(0,n.adminDataForTeamSelector)(e.getState(),a);return(null===(r=null===(t=null==i?void 0:i.encryptionServiceData)||void 0===t?void 0:t.basicConfigs)||void 0===r?void 0:r[0])?Promise.resolve({success:!0,data:i.encryptionServiceData.basicConfigs[0]}):Promise.resolve({success:!1,error:{code:o.BasicConfigNotFound}})}catch{return Promise.resolve({success:!1,error:{code:o.UnknownError}})}}},35981:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.persistEncryptionServiceConfig=t.saveOrUpdateEncryptionServiceConfig=void 0;const o=r(15876),n=r(21337),a=r(89558),i=r(89852),s=r(43013),c=r(8811),d=r(69774),l=r(79918),u=r(3082),p=/[\dA-F]{8}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{12}/i;t.saveOrUpdateEncryptionServiceConfig=async(e,t)=>{var r,o;if((({teamUuid:e,encryptionKeyUuid:t,deviceAccessKey:r,deviceSecretKey:o})=>{const n={teamUuid:Boolean(e&&!e.match(p)),encryptionKeyUuid:Boolean(t&&!t.match(p)),deviceAccessKey:Boolean(r&&16!==r.length),deviceSecretKey:Boolean(o&&64!==o.length)},a=Object.entries(n).reduce(((e,[t,r])=>r?{[t]:!0,...e}:e),{});return Object.keys(a).length>0?a:null})(t))return null;const{storeService:u,wsService:S}=e,g=(0,a.makeSharingService)(u,S),m=(0,n.getCurrentUserInfo)(u),y=(0,c.currentTeamIdSelector)(u.getState()),v=(0,c.adminDataForTeamSelector)(u.getState(),y);if(!v)throw new Error("Cannot find adminData");const A=null===(o=null===(r=null==v?void 0:v.encryptionServiceData)||void 0===r?void 0:r.basicConfigs)||void 0===o?void 0:o[0];return A?await(async(e,t,r,o,n,a)=>{var i;const{storeService:u,localStorageService:p}=e,{crypto:S,item:g,ws:m}=t,{specialItemGroup:y}=o;if(!y)throw new Error("Cannot find specialItemGroup in adminData");const{specialItemGroup:{items:v},encryptionServiceData:A}=o,{itemId:E}=A,f=u.getSharingData(),{timestamp:h}=(null!==(i=f.items)&&void 0!==i?i:[]).find((({itemId:e})=>e===E));if(!h)throw new Error("trying to update config before it was created.");const _={...a,...n},T={basicConfigs:[_]},I=await(0,s.getSpecialItemGroupKey)(S,r,o),{itemKey:C}=v.find((({itemId:e})=>e===E)),P=await S.symmetricEncryption.decryptAES256(I,C),D=await S.symmetricEncryption.encryptAES256(P,btoa(JSON.stringify(T))),O=await g.makeUpdateItemEvent(h,C,{itemId:E,itemContent:D}),b=await g.updateItem(m,r.login,r.uki,O);if(!b.items.length)throw new Error("unable to update encryption service special item");const w=(0,c.currentTeamIdSelector)(u.getState());return await(0,d.updateAdminDataAfterItemAddedOrUpdated)(u,p,t.ws,r,`${w}`,{items:b.items,itemGroups:f.itemGroups}),await(0,l.updateSharingDataAfterItemAddedOrUpdated)(u,p,b.items[0]),_})(e,g,m,v,t,A):await(async(e,t,r)=>{const o={basicConfigs:[r]};return(await(0,i.createSpecialItem)(e,t,o)).basicConfigs[0]})(e,g,t)};t.persistEncryptionServiceConfig=async(e,r)=>{(0,u.requireAdmin)(e.storeService);const n=await(0,t.saveOrUpdateEncryptionServiceConfig)(e,r);return n?{success:!0,data:n}:{success:!1,error:{code:o.UnknownError}}}},25602:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reregisterTeamDeviceAccount=t.reregisterTeamDevice=void 0;const o=r(54296),n=r(15876),a=r(89558),i=r(66441),s=r(21337),c=r(43013),d=r(8811),l=r(72873),u=r(60226),p=r(26110),S=r(62380),g=r(74454);t.reregisterTeamDevice=async(e,t)=>{(null==t?void 0:t.deviceAccessKey)&&await(0,u.deactivateTeamDevice)(e,{teamDeviceAccessKey:t.deviceAccessKey});const r=await(0,l.registerTeamDevice)(e,{platform:o.TeamDevicePlatform.ENCRYPTION_SERVICE,deviceName:g.ENCRYPTION_SERVICE_HUMAN_DEVICE_NAME});if(r.success)return r.data;throw new Error(n.DeviceNotFound)};t.reregisterTeamDeviceAccount=async(e,{deviceAccessKey:t,devicePublicKey:r})=>{const{storeService:l,wsService:u}=e,{crypto:m}=(0,a.makeSharingService)(l,u),y=(0,s.getCurrentUserInfo)(l),v=(0,d.currentTeamIdSelector)(l.getState()),A=(0,d.adminDataForTeamSelector)(l.getState(),v),{revision:E}=await(0,S.loadSpecialUserGroup)(u,y.login,y.uki,A),f=await(0,c.getSpecialUserGroupKey)(m,y,A),h=`${g.PUBLIC_KEY_HEADER}\n${r}\n${g.PUBLIC_KEY_FOOTER}`,_=await m.asymmetricEncryption.encrypt(h,f),T=`special-admin-${v}-${Math.floor(4294967296*Math.random()).toString(16)}@teamdevice.dashlane.com`;const I=await(0,i.generateProposeSignature)(m,f,T),C=await(0,p.createTeamDeviceAccount)(e,{teamDeviceAccessKey:t,publicKey:r,proposeSignature:I,userGroupRevision:E,groupKey:_,teamDeviceLogin:T});return!1===C.success?{success:!1,error:{code:(0,n.getCode)(C.error.code,o.createTeamDeviceAccountErrors)}}:{success:!0,data:{login:C.data.login}}}},86319:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapTeamDeviceEncryptedConfig=t.generateTeamDeviceEncryptedConfig=void 0;const r={scimSignatureKey:{defaultValue:"",configMapping:"DASHLANE_SCIM_SIGNATURE_KEY"},scimAuthToken:{defaultValue:"",configMapping:"DASHLANE_SCIM_AUTHENTICATION_TOKEN"},scimEnabled:{defaultValue:!1,configMapping:"DASHLANE_SCIM_ENABLED"},teamDevicePublicKey:{defaultValue:"",configMapping:"DASHLANE_SCIM_TEAMDEVICE_PUBLIC_KEY"},teamDevicePrivateKey:{defaultValue:"",configMapping:"DASHLANE_SCIM_TEAMDEVICE_PRIVATE_KEY"},connectorEndpoint:{defaultValue:"",configMapping:"DASHLANE_SSO_CONNECTOR_ENDPOINT"},connectorKey:{defaultValue:"",configMapping:"DASHLANE_SSO_CONNECTOR_KEY"},samlIdpCertificate:{defaultValue:"",configMapping:"DASHLANE_SSO_SAML_IDP_CERTIFICATE"},samlIdpEntryPoint:{defaultValue:"",configMapping:"DASHLANE_SSO_SAML_IDP_ENTRYPOINT"}};t.generateTeamDeviceEncryptedConfig=e=>Object.entries(r).map((([t,r])=>{return`${r.configMapping}=${o=r.defaultValue,n=e[t],"boolean"==typeof n||"boolean"==typeof o?(null!=n?n:o)?"true":"false":`${null!=n?n:o}`}`;var o,n})).join("\n");t.mapTeamDeviceEncryptedConfig=e=>{const t=e.split("\n").reduce(((e,t)=>{const r=t.indexOf("="),[o,n]=[t.slice(0,r),t.slice(r+1)];return{...e,[o]:n}}),{}),o=Object.entries(r).reduce(((e,[r,{configMapping:o,defaultValue:n}])=>{return{...e,[r]:(a=n,i=t[o],i?i.length>0&&"boolean"==typeof a?"true"===i:"boolean"==typeof a?a:null!=i?i:a:a)};var a,i}),{});if((e=>Object.keys(r).every((t=>t in e)))(o))return o;throw new Error("incomplete data when creating object from config string")}},98416:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDeviceEncryptedConfig=t.getParsedTeamDeviceEncryptedConfig=void 0;const o=r(53494),n=r(15876),a=r(33792),i=r(8153),s=r(1064),c=r(3082),d=r(9429),l=r(86319);t.getParsedTeamDeviceEncryptedConfig=async(e,{configEncryptionKey:t,encryptedConfig:r})=>{if(!r||!t)throw new Error("missing config or encryption key");const{teamDeviceEncryptedConfigEncryptorService:n}=e,i=(0,a.getNoDerivationCryptoConfig)();n.setInstance({raw:atob(t)},"",i);const s=await n.getInstance().decrypt(r),c=(0,o.deflatedUtf8ToUtf16)(s,{skipInflate:!0});return(0,l.mapTeamDeviceEncryptedConfig)(c)},t.getTeamDeviceEncryptedConfig=async function(e,{draft:r}){const{storeService:o}=e;(0,c.requireAdmin)(o);const a=(0,i.userLoginSelector)(o.getState());if(!a)throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const l=await(0,d.getEncryptionServiceConfig)(e);if(!1===l.success)return{success:!1,error:{code:l.error.code===n.BasicConfigNotFound?n.TeamDeviceEncryptedConfigNotFound:n.UnknownError}};const{data:{deviceAccessKey:u,configEncryptionKey:p}}=l,S={configurationVersion:0,deviceAccessKey:u,draft:r};try{const r=await(0,n.getTeamDeviceEncryptedConfig)(o,a,S);if((0,n.isApiError)(r))return{success:!1,error:{code:(0,n.getCode)(r.code,n.getTeamDeviceEncryptedConfigErrors)}};const i=await(0,t.getParsedTeamDeviceEncryptedConfig)(e,{encryptedConfig:r.encryptedConfiguration,configEncryptionKey:p});return{success:!0,data:{config:r.encryptedConfiguration,configurationVersion:r.configurationVersion,deviceAccessKey:u,encryptionKeyUuid:r.encryptionKeyUuid,configProperties:i}}}catch(e){return{success:!1,error:{code:n.TeamDeviceEncryptedConfigNotFound}}}}},44480:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamDeviceEncryptedConfig=void 0;const o=r(15876),n=r(53494),a=r(33792),i=r(89558),s=r(21337),c=r(8153),d=r(46168),l=r(8811),u=r(9429),p=r(5220),S=r(55422),g=r(2886),m=r(50443),y=r(3082),v=r(98416),A=r(86319),E=r(54628),f=r(52667);t.updateTeamDeviceEncryptedConfig=async(e,t={},r)=>{var h,_,T,I,C,P,D,O,b,w,N;const{storeService:R,teamDeviceEncryptedConfigEncryptorService:L,wsService:U}=e;(0,y.requireAdmin)(R);const M=(0,c.userLoginSelector)(R.getState());if(!M)throw new Error("missing login");const k={ssoEnabled:!1,ssoIdpMetaData:"",ssoEndpoint:""},F=await(0,f.getTeamInfo)(e);F.success&&(k.ssoEnabled=F.data.teamInfo.ssoEnabled,k.ssoIdpMetaData=F.data.teamInfo.ssoIdpMetadata,k.ssoEndpoint=F.data.teamInfo.ssoServiceProviderUrl);const B=parseInt((0,l.currentTeamIdSelector)(R.getState()),10);let G=null,K=null;if(k.ssoIdpMetaData&&({samlIdpCertificate:G,samlIdpEntryPoint:K}=await(0,p.parseMetadataFields)(k.ssoIdpMetaData)),"string"==typeof t.ssoIdpMetadata){const{ssoIdpMetadata:e}=t,r=e.replace(/[\n\t]/g,"").trim();if(r)try{({samlIdpCertificate:G,samlIdpEntryPoint:K}=await(0,p.parseMetadataFields)(r))}catch(e){return{success:!1,error:{code:e.message}}}if((await(0,d.setTeamSettings)(R,U,(0,s.getCurrentUserInfo)(R),{teamId:B,settings:{ssoIdpMetadata:r||null,ssoIdpEntrypoint:K}})).error)return{success:!1,error:{code:o.UnknownError}}}const j=await(0,u.getEncryptionServiceConfig)(e);if(!(r||j.success&&j.data.deviceAccessKey&&j.data.configEncryptionKey&&j.data.encryptionKeyUuid&&j.data.devicePrivateKey&&j.data.devicePublicKey))return{success:!1,error:{code:o.DeviceKeyNotFound}};const{data:{deviceAccessKey:V,encryptionKeyUuid:H,configEncryptionKey:W,devicePrivateKey:x,devicePublicKey:z}}=j.success?j:{data:r},Y=H.toLowerCase(),$=await(0,v.getTeamDeviceEncryptedConfig)(e,{draft:!1,deviceAccessKey:V});let q={},Q=0;if(!1===$.success&&$.error.code!==o.TeamDeviceEncryptedConfigNotFound)return{success:!1,error:{code:o.UnknownError}};if(!0===$.success){const{data:t}=$;q=await(0,v.getParsedTeamDeviceEncryptedConfig)(e,{encryptedConfig:t.config,configEncryptionKey:W}),Q=t.configurationVersion}const X=(0,i.makeSharingService)(R,U),J=(0,l.currentTeamIdSelector)(R.getState()),Z=(0,l.adminDataForTeamSelector)(R.getState(),J);let ee=null===(h=null==Z?void 0:Z.ssoConnectorKey)||void 0===h?void 0:h.ssoConnectorKey;if(!ee){const t=await(0,S.generateSSOConnectorKey)();ee=await(0,g.persistSSOConnectorKey)(e,X,t)}let te=null===(_=null==Z?void 0:Z.scimSignatureKey)||void 0===_?void 0:_.scimSignatureKey;if(!te){const t=await(0,E.generateSCIMSignatureKey)();te=await(0,m.persistSCIMSignatureKey)(e,X,t)}const re={scimAuthToken:null!==(I=null!==(T=null==t?void 0:t.scimAuthToken)&&void 0!==T?T:null==q?void 0:q.scimAuthToken)&&void 0!==I?I:"",scimEnabled:null!==(P=null!==(C=null==t?void 0:t.scimEnabled)&&void 0!==C?C:null==q?void 0:q.scimEnabled)&&void 0!==P&&P,connectorEndpoint:null!==(b=null!==(O=null!==(D=null==t?void 0:t.connectorEndpoint)&&void 0!==D?D:null==q?void 0:q.connectorEndpoint)&&void 0!==O?O:k.ssoEndpoint)&&void 0!==b?b:"",samlIdpEntryPoint:null!==(w=null!=K?K:null==q?void 0:q.samlIdpEntryPoint)&&void 0!==w?w:"",samlIdpCertificate:null!==(N=null!=G?G:null==q?void 0:q.samlIdpCertificate)&&void 0!==N?N:""},oe=Boolean(t.ssoEnabled||q.connectorKey||k.ssoEnabled),ne={...re,teamDevicePrivateKey:x,teamDevicePublicKey:z,connectorKey:oe?ee:"",scimSignatureKey:re.scimEnabled?te:""},ae=(0,A.generateTeamDeviceEncryptedConfig)(ne),ie=(0,n.utf16ToDeflatedUtf8)(ae,{skipUtf8Encoding:!0,skipDeflate:!0}),se=(0,a.getNoDerivationCryptoConfig)();L.setInstance({raw:atob(W)},"",se);const ce=L.getInstance(),de=await ce.encrypt(ie),le={configurationVersion:Q,deviceAccessKey:V,ssoServiceEnabled:oe,scimServiceEnabled:ne.scimEnabled,encryptionKeyUuid:Y,draft:!1,encryptedConfiguration:de,teamDeviceUrl:t.teamDeviceUrl},ue=await(0,o.updateTeamDeviceEncryptedConfig)(R,M,le);return(0,o.isApiError)(ue)?{success:!1,error:{code:(0,o.getCode)(ue.code,o.updateTeamDeviceEncryptedConfigErrors)}}:{success:!0,data:{configurationVersion:ue.configurationVersion,encryptionServiceReloadingStatus:ue.encryptionServiceReloadingStatus}}}},74454:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PUBLIC_KEY_FOOTER=t.PUBLIC_KEY_HEADER=t.PRIVATE_KEY_FOOTER=t.PRIVATE_KEY_HEADER=t.ENCRYPTION_SERVICE_HUMAN_DEVICE_NAME=void 0,t.ENCRYPTION_SERVICE_HUMAN_DEVICE_NAME="Encryption Service",t.PRIVATE_KEY_HEADER="-----BEGIN RSA PRIVATE KEY-----",t.PRIVATE_KEY_FOOTER="-----END RSA PRIVATE KEY-----",t.PUBLIC_KEY_HEADER="-----BEGIN RSA PUBLIC KEY-----",t.PUBLIC_KEY_FOOTER="-----END RSA PUBLIC KEY-----"},3082:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requireAdmin=void 0;const o=r(1064),n=r(97055);t.requireAdmin=e=>{const t=e.getSpaceData(),r=(0,n.isBillingAdminInCurrentSpace)(t),a=(0,n.isTeamAdminInCurrentSpace)(t);if(!(r||a))throw new Error(o.AuthenticationCode[o.AuthenticationCode.USER_UNAUTHORIZED])}},54628:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateSCIMSignatureKey=void 0;const o=r(24555),n=r(77176);t.generateSCIMSignatureKey=async()=>{const e=await(0,n.getRandomValues)(32);return(0,o.bufferToBase64)(e)}},50443:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.persistSCIMSignatureKey=void 0;const o=r(89852);t.persistSCIMSignatureKey=async(e,t,r)=>(await(0,o.createSpecialItem)(e,t,{scimSignatureKey:r})).scimSignatureKey},2886:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.persistSSOConnectorKey=void 0;const o=r(89852);t.persistSSOConnectorKey=async(e,t,r)=>(await(0,o.createSpecialItem)(e,t,{ssoConnectorKey:r})).ssoConnectorKey},26634:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptionServiceRestartStatusCodes=void 0,function(e){e.OK="OK",e.ES_UNREACHABLE="ES_UNREACHABLE",e.ES_CONFIG_RELOAD_FAILURE="ES_CONFIG_RELOAD_FAILURE",e.ES_INTERNAL_NETWORK_ERROR="ES_INTERNAL_NETWORK_ERROR"}(t.EncryptionServiceRestartStatusCodes||(t.EncryptionServiceRestartStatusCodes={}))},29662:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getReport=void 0;const o=r(31891),n=r(15876),a=r(25884),i=r(8153);t.getReport=async function(e,t){const{storeService:r}=e,s=(0,i.userLoginSelector)(r.getState()),c=await(0,n.report)(r,s,t);return(0,n.isApiError)(c)?(o.Debugger.error(`[TeamAdmin] getReport - Failed: ${c.code}`),{success:!1,error:{code:a.UnexpectedError}}):{success:!0,response:c}}},54522:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createConfigString=void 0;t.createConfigString=(e,t,r,o,n,a,i)=>`\nDASHLANE_SSO_CONNECTOR_ENDPOINT=${t}\nDASHLANE_SSO_SAML_IDP_CERTIFICATE=${a}\nDASHLANE_SSO_SAML_IDP_ENTRYPOINT=${i}\nDASHLANE_SSO_CONNECTOR_KEY=${e}\nDASHLANE_SSO_TEAM_DEVICE_ACCESS_KEY=${o}\nDASHLANE_SSO_TEAM_DEVICE_SECRET_KEY=${r}\nDASHLANE_SSO_TEAM_UUID=${n}\n`},56502:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSSOConnectorConfig=void 0;const o=r(54296),n=r(72873),a=r(54522),i=r(5220),s=r(46168),c=r(21337),d=r(8811);t.createSSOConnectorConfig=async function(e,t){const{connectorUrl:r,connectorKey:l,idpMetadata:u}=t;if(!r||!u)throw new Error(`[createConfig] : Missing request information -\n                Received connectorUrl : ${!!r} or\n                Received idpMetadata: ${!!u}\n            `);const p=await(0,n.registerTeamDevice)(e,{platform:o.TeamDevicePlatform.SSO_CONNECTOR,deviceName:"SSO Connector"});if(!1===p.success)return{success:!1,error:{code:p.error.code}};const S=p.data.deviceSecretKey,g=p.data.deviceAccessKey,m=p.data.teamUuid;let y,v,A;try{const t=u.replace(/(\r\n|\n|\r)/gm,"");y=await(0,i.parseMetaData)(t),v=(0,i.getIDPCertificate)(y),A=(0,i.getIDPEntrypoint)(y);const{storeService:r,wsService:o}=e,n=(0,d.currentTeamIdSelector)(r.getState()),a=parseInt(n,10);if(isNaN(a))throw new Error("[createSSOConnectorConfig] : Unable to retrieve teamId from [parseInt(currentTeamIdString, 10)]");await(0,s.setTeamSettings)(r,o,(0,c.getCurrentUserInfo)(r),{teamId:a,settings:{ssoIdpEntrypoint:A}})}catch(e){return{success:!1,error:{code:e.message}}}return{success:!0,config:(0,a.createConfigString)(l||"",r.toLowerCase(),S,g,m,v,A)}}},55422:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateSSOConnectorKey=void 0;const o=r(24555),n=r(41751),a=r(28354);t.generateSSOConnectorKey=async function(){const e=await(0,n.generate64BytesKey)(),t=(0,o.bufferToBase64)(e);return`${(0,a.v4)()}|${t}`}},95378:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateConfigGeneralErrors=void 0,function(e){e.XML_PARSE_FAILED="xml_parse_failed",e.KEY_GENERATION_FAILED="key_generation_failed"}(t.CreateConfigGeneralErrors||(t.CreateConfigGeneralErrors={}))},5220:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseMetadataFields=t.getIDPEntrypoint=t.getIDPCertificate=t.getIDPSSODescriptor=t.parseMetaData=t.SamlTags=void 0;const o=r(44015),n=r(89422),a=r(95378),i=r(46718);var s;function c(e){return new Promise(((t,r)=>{(0,o.parseXml)(((e,n)=>{e?r(new Error(a.CreateConfigGeneralErrors.XML_PARSE_FAILED)):(0,o.isKWXMLElement)(n)?t(n):r(new Error(a.CreateConfigGeneralErrors.XML_PARSE_FAILED))}),e)}))}function d(e){const t=(0,n.findAllKWXMLElementsOfType)(e,s.IDP_SSO_DESCRIPTOR,[]);if(1!==t.length)throw new Error(i.IDPMetadataParseErrors.INVALID_IDP_SSO_DESCRIPTOR);return t[0]}function l(e){const t=(0,n.findAllKWXMLElementsOfType)(d(e),s.KEY_DESCRIPTOR,[]).find((e=>{var t,r;return!(null===(t=e.__attributes__)||void 0===t?void 0:t.use)||"signing"===(null===(r=e.__attributes__)||void 0===r?void 0:r.use)}));if(!t)throw new Error(i.IDPMetadataParseErrors.KEY_DESCRIPTOR_NOT_FOUND);const r=(0,n.findAllKWXMLElementsOfType)(t,s.CERTIFICATE,[]);if(1!==r.length)throw new Error(i.IDPMetadataParseErrors.INVALID_CERTIFICATE);return r[0].__value__}function u(e){const t=d(e).__children__.filter((e=>{if((0,o.isKWXMLElement)(e))return(0,n.removeNamespace)(e.__type__)===s.SINGLE_SIGN_ON_SERVICE})).find((e=>{if((0,o.isKWXMLElement)(e)){const t=e.__attributes__.Binding;if("string"==typeof t)return t.includes("HTTP-POST")}}));if(!t)throw new Error(i.IDPMetadataParseErrors.IDP_ENTRYPOINT_NOT_FOUND);if((0,o.isKWXMLElement)(t)){const e=t.__attributes__.Location;if("string"==typeof e)return e;throw new Error(i.IDPMetadataParseErrors.INVALID_ENTRYPOINT)}throw new Error(i.IDPMetadataParseErrors.INVALID_ENTRYPOINT)}!function(e){e.IDP_SSO_DESCRIPTOR="IDPSSODescriptor",e.KEY_DESCRIPTOR="KeyDescriptor",e.SINGLE_SIGN_ON_SERVICE="SingleSignOnService",e.CERTIFICATE="X509Certificate"}(s=t.SamlTags||(t.SamlTags={})),t.parseMetaData=c,t.getIDPSSODescriptor=d,t.getIDPCertificate=l,t.getIDPEntrypoint=u;t.parseMetadataFields=async e=>{const t=e.replace(/(\r\n|\n|\r)/gm,""),r=await c(t);return{samlIdpCertificate:l(r),samlIdpEntryPoint:u(r)}}},46718:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDPMetadataParseErrors=void 0,function(e){e.KEY_DESCRIPTOR_NOT_FOUND="key_descriptor_not_found",e.IDP_ENTRYPOINT_NOT_FOUND="idp_entrypoint_not_found",e.INVALID_IDP_SSO_DESCRIPTOR="invalid_idp_sso_descriptor",e.INVALID_CERTIFICATE="invalid_certificate",e.INVALID_ENTRYPOINT="invalid_entrypoint"}(t.IDPMetadataParseErrors||(t.IDPMetadataParseErrors={}))},37003:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeTeamAdmin=t.addTeamAdmin=t.proposeMembers=t.getMembers=void 0;const o=r(28060),n=r(21337),a=r(96045),i=r(43013),s=r(62380),c=(e,t)=>(0,o.isEmpty)(t)?[]:(0,o.prepend)((0,o.take)(e,t),c(e,(0,o.drop)(e,t))),d=e=>{const t=e.nbrPasswords&&"removed"!==e.status;return e.securityIndex=t&&e.securityIndex,e.nbrPasswords=t&&e.nbrPasswords,"pending"===e.status&&e.lastUpdateDateUnix&&delete e.lastUpdateDateUnix,e};t.getMembers=function(e,{login:t,uki:r},{teamId:n}){return e.teamPlans.getMembers({login:t,uki:r,teamId:n,limit:0,orderBy:"login"}).then((e=>e.content&&e.content.members||[])).then((n=>{const a=n.map(d),i=c(500,a);return Promise.all(i.map((o=>e.userAlias.findUsersByAliases({login:t,uki:r,aliases:JSON.stringify(o.map((e=>e.login)))}).then((e=>o.map((t=>({...t,hasPublicKey:Boolean(e[t.login]&&e[t.login].publicKey)})))))))).then((e=>(0,o.unnest)(e)))})).then((e=>({members:e}))).catch((e=>({error:e,members:null})))},t.proposeMembers=async function(e,{login:t,uki:r},{proposedMemberLogins:o,teamId:n,origin:a}){const{content:i}=await e.teamPlans.proposeMembers({login:t,uki:r,teamId:n,proposedMemberLogins:o,force:!0,origin:a});return i},t.addTeamAdmin=async function(e,{teamId:t,memberLogin:r}){const{ws:o,store:c}=e,d=(0,n.getCurrentUserInfo)(c),l=c.getTeamAdminData(),u=(0,i.getAdminDataFromTeamAdminData)(l,String(t)),{revision:p}=await(0,s.loadSpecialUserGroup)(o,d.login,d.uki,u),{groupKey:S,proposeSignature:g}=await(0,i.makeInviteToSpecialUserGroup)(e,(0,a.makeCryptoService)(),d,l,{teamId:t,memberLogin:r});return await e.ws.teamPlans.addTeamAdmin({login:d.login,uki:d.uki,teamId:t,memberLogin:r,memberAlias:r,groupKey:S,proposeSignature:g,userGroupRevision:p}),{}},t.removeTeamAdmin=async function(e,{teamId:t,memberLogin:r}){const{ws:o,store:a}=e,c=(0,n.getCurrentUserInfo)(a),d=a.getTeamAdminData(),l=(0,i.getAdminDataFromTeamAdminData)(d,String(t)),{revision:u}=await(0,s.loadSpecialUserGroup)(o,c.login,c.uki,l);return await o.teamPlans.removeTeamAdmin({login:c.login,uki:c.uki,teamId:t,memberLogin:r,userGroupRevision:u}),{}}},19813:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupKey=t.syncUserGroupManagementForAllTeams=void 0;const o=r(88630),n=r(62380),a=r(97529),i=r(32830),s=r(44508);t.syncUserGroupManagementForAllTeams=function(e,t,r,c,d,l){return(0,n.syncAdministrableTeamList)(d,c).then((d=>Promise.all(Object.keys(d.teams).map((u=>{const p=d.teams[u];return function(e,t,r,c,d,l){return Promise.resolve(d).then((e=>(0,n.syncAdminData)(t,r,e,l))).then((t=>(0,o.setupUserGroupManagement)(e,r,c,t))).then((t=>t.status===a.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA?t:(0,i.filterOutInvalidUserGroupUsers)(e.crypto,t.adminData).then((t=>(0,s.sendUserGroupInvitesToNewUsers)(e,r,t))).then((e=>({status:a.SyncUserGroupManagementStatus.COMPLETE,adminData:e})))))}(e,t,r,c,p,l)}))).then((e=>{const t={};e.map((e=>e.adminData)).forEach((e=>{t[e.teamId]=e}));return{status:e.some((e=>e.status===a.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA))?a.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA:a.SyncUserGroupManagementStatus.COMPLETE,teamAdminData:{teams:t}}}))))},t.getUserGroupKey=function(e,t){if(!e)return null;const r=e.find((e=>e.groupId===t));return r?r.groupKey:null}},17539:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupAdminItemsFromMigration=t.createItemsForUserGroups=void 0;const o=r(57254),n=r(93513);async function a(e,t,r){const o=r.users.find((e=>e.userId===t.login));if(!o)throw new Error("Couldnt find self in user group");return await e.asymmetricEncryption.decrypt(t.privateKey,o.groupKey)}t.createItemsForUserGroups=async function(e,t,r){return await Promise.all(r.map((r=>async function(e,t,r){const o=await e.symmetricEncryption.generateNewAESKey(),[a,i]=await Promise.all([e.symmetricEncryption.encryptAES256(o,n.encode(JSON.stringify(r))),e.symmetricEncryption.encryptAES256(t,n.encode(o))]);return{itemId:r.itemId,itemKey:i,content:a}}(e,t,r))))},t.getUserGroupAdminItemsFromMigration=async function(e,t,r){return await Promise.all((r.userGroups||[]).map((r=>async function(e,t,r){return{itemId:(0,o.generateItemUuid)(),groupId:r.groupId,groupKey:await a(e,t,r)}}(e,t,r))))}},44508:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendUserGroupInvitesToNewUsers=void 0;const o=r(59125),n=r(31891),a=r(19813);function i(e){return e.users.filter((e=>"publicKey"===e.rsaStatus))}t.sendUserGroupInvitesToNewUsers=function(e,t,r){return Promise.resolve().then((()=>function(e){if(!e.userGroups)return[];return e.userGroups.reduce(((e,t)=>e.concat(i(t))),[])}(r))).then((s=>s.length?function(e,t,r){const{login:o,uki:n}=t,a=JSON.stringify(r.map((e=>e.alias)));return e.userGroup.findUsersByAliases({login:o,uki:n,aliases:a})}(e,t,s).then((s=>{const c=r.userGroups.map((c=>{const d=i(c);if(!d.length)return Promise.resolve(c);const l=function(e,t){return t.map((t=>({Alias:t.alias,Login:e[t.alias].login,PublicKey:e[t.alias].publicKey,Permission:t.permission})))}(s,d),u=(0,a.getUserGroupKey)(r.userGroupAdminItems,c.groupId);return e.userGroup.makeUpdateMembersWithInviteEvent(c.groupId,u,c.revision,l).then((r=>e.userGroup.updateUserGroupMembers(t,r))).then((e=>e[0])).catch((e=>{const t=`[sendUserGroupInvitesToNewUsers] - Cannot send update event for one user group - groupId: ${c.groupId} - error: ${e}`,r=new Error(t);return n.default.error(r),(0,o.sendExceptionLog)({error:r}),c}))}));return Promise.all(c).then((e=>({...r,userGroups:e})))})):r))}},88630:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSpecialGroups=t.setupUserGroupManagement=void 0;const o=r(31891),n=r(86635),a=r(43013),i=r(17539),s=r(97529);function c(e,t,r,a){return o.Debugger.log("setting up group sharing for team: "+a.teamId),Promise.resolve(a).then((o=>o.specialUserGroup?o:(0,n.createSpecialUserGroup)(e,t,r,Number(o.teamId)).then((e=>Object.assign({},o,{specialUserGroup:e}))))).then((o=>o.specialItemGroup?o:(0,i.getUserGroupAdminItemsFromMigration)(e.crypto,t,a).then((a=>(0,n.createSpecialItemGroup)(e,t,r,o.specialUserGroup,a).then((e=>Object.assign({},o,{specialItemGroup:e,userGroupAdminItems:a})))))))}t.setupUserGroupManagement=function(e,t,r,o){const n=o.specialUserGroup,i=o.specialItemGroup;if(!n)return i?Promise.reject(new Error("UserGroupManagementSetupService - no special user group, but a special item group is present")):c(e,t,r,o).then((e=>({status:s.SyncUserGroupManagementStatus.COMPLETE,adminData:e})));const d=(0,a.getUserInUserGroup)(t.login,n);return d?"pending"===d.status?i?Promise.reject(new Error("UserGroupManagementSetupService - special user group is not accepted, but a special item group is present")):Promise.resolve().then((()=>e.userGroup.isCurrentUserProposeSignatureValid(t,n))).then((e=>{if(!e)throw new Error("UserGroupManagementSetupService - INVALID_PROPOSE_SIGNATURE")})).then((()=>e.userGroup.makeAcceptUserGroupEvent(t,n))).then((r=>e.userGroup.acceptUserGroup(t,r))).then((({userGroups:e})=>{if(1!==e.length)throw new Error(`UserGroupManagementSetupService - Invalid response from UserGroupService.acceptUserGroup - ${e}`);return e[0]})).then((e=>Object.assign({},o,{specialUserGroup:e}))).then((e=>({status:s.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA,adminData:e}))):"accepted"===d.status?i?Promise.resolve({status:s.SyncUserGroupManagementStatus.COMPLETE,adminData:o}):c(e,t,r,o).then((e=>({status:s.SyncUserGroupManagementStatus.COMPLETE,adminData:e}))):Promise.reject(new Error("UserGroupManagementSetupService - current user status in special user group is neither accepted or pending")):Promise.reject(new Error("UserGroupManagementSetupService - Current user us missing from special user group"))},t.createSpecialGroups=c},62380:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadSpecialUserGroup=t.loadSpecialItemGroup=t.syncAdminDataFromSharingData=t.createUserGroupAdminItemInState=t.deleteAdministrableUserGroups=t.updateAdministrableUserGroupList=t.updateTeamAdminData=t.filterTeamAdminData=t.syncAdminData=t.syncAdministrableTeamList=t.getUserGroupDescriptionsForTeam=void 0;const o=r(86635),n=r(37089),a=r(32234),i=r(43013),s=r(96045);function c(e,t,r,o){return e.teamPlans.findUserGroups({login:t,uki:r,teamId:o}).then((e=>e.content.userGroups))}function d(e){const t={};return Object.keys(e.teams).forEach((r=>{const o=e.teams[r];t[r]=o?{teamId:r,userGroups:o.userGroups||[],notifications:o.notifications||{accountRecoveryRequests:[]}}:{teamId:r}})),{teams:t}}t.getUserGroupDescriptionsForTeam=c,t.syncAdministrableTeamList=function(e,t){return Promise.resolve().then((()=>{const r={},o=t.spaces.filter((e=>e.details.isTeamAdmin)).filter((e=>"accepted"===e.details.status)).map((e=>e.teamId));return Object.keys(e.teams).filter((e=>Boolean(e))).filter((e=>o.includes(e))).forEach((t=>{r[t]=e.teams[t]})),o.forEach((e=>{r[e]||(r[e]={teamId:e})})),{teams:r}}))},t.syncAdminData=async function(e,t,r,n){const a=await u(t,r,n);return a.specialUserGroup&&!(0,i.hasUserAcceptedUserGroup)(t.login,a.specialUserGroup)?a:async function(e,t,r,n){const a={items:[],itemGroups:[],userGroups:(await c(e,t,r,Number(n.teamId))).map((e=>({id:e.groupId,revision:e.revision})))},i={items:[],itemGroups:[],userGroups:(n.userGroups||[]).filter((e=>Boolean(e)))},s=await(0,o.buildSharingData)(e,t,r,a,i);return{...n,userGroups:s.userGroups}}(e,t.login,t.uki,a)},t.filterTeamAdminData=d,t.updateTeamAdminData=function(e,t){e.dispatch((0,n.teamAdminDataUpdated)(t)),(0,a.sendTeamAdminDataUpdate)(d(t))},t.updateAdministrableUserGroupList=function(e,t,r){e.dispatch((0,n.userGroupsUpdated)(t,r)),(0,a.sendTeamAdminDataUpdate)(d(e.getTeamAdminData()))},t.deleteAdministrableUserGroups=function(e,t,r){e.dispatch((0,n.userGroupsDeleted)(t,r)),(0,a.sendTeamAdminDataUpdate)(d(e.getTeamAdminData()))},t.createUserGroupAdminItemInState=function(e,t,r){e.dispatch((0,n.userGroupAdminItemCreated)(t,r))};const l=e=>e.reduce(((e,t)=>((0,i.isUserGroupAdminItem)(t)?e.userGroupAdminItems.push(t):(0,i.isDirectorySyncKey)(t)?e.directorySyncKey=t:(0,i.isEsBasicConfigsData)(t)?e.encryptionServiceData=t:(0,i.isSSOConnectorKey)(t)?e.ssoConnectorKey=t:(0,i.isSCIMSignatureKey)(t)&&(e.scimSignatureKey=t),e)),{userGroupAdminItems:[],directorySyncKey:null,encryptionServiceData:null,ssoConnectorKey:null,scimSignatureKey:null});async function u(e,t,r){const o=function(e,t){const r=t.itemGroups.find((t=>"userGroupKeys"===t.type&&t.teamId===Number(e.teamId))),o=t.userGroups.find((t=>"teamAdmins"===t.type&&t.teamId===Number(e.teamId)));return{...e,specialItemGroup:r,specialUserGroup:o}}(t,r);return async function(e,t,r){const o=(0,s.makeCryptoService)(),n=t.specialItemGroup&&t.specialItemGroup.items||[],a=e=>({itemId:t})=>t===e,c=await Promise.all(r.items.filter((e=>n.find(a(e.itemId)))).map((r=>{var s;const c=null===(s=n.find(a(r.itemId)))||void 0===s?void 0:s.itemKey;if(!c)throw new Error("Unexpected error: missing itemKey");return(0,i.decryptAdminItem)(o,e,t,r,c)}))),{userGroupAdminItems:d,directorySyncKey:u,encryptionServiceData:p,ssoConnectorKey:S,scimSignatureKey:g}=l(c);return{...t,userGroupAdminItems:d,directorySyncKey:u,encryptionServiceData:p,ssoConnectorKey:S,scimSignatureKey:g}}(e,o,r)}t.syncAdminDataFromSharingData=u,t.loadSpecialItemGroup=async function(e,t,r,n){if(!n.specialItemGroup||!n.specialItemGroup.groupId)throw new Error("specialItemGroup is missing from adminData");const{itemGroups:a}=await(0,o.getSharedData)(e,t,r,{itemIds:[],itemGroupIds:[n.specialItemGroup.groupId],userGroupIds:[]});if(a&&1===a.length)return a[0];throw new Error("could not fetch specialItemGroup")},t.loadSpecialUserGroup=async function(e,t,r,n){var a;const{userGroups:i}=await(0,o.getSharedData)(e,t,r,{itemIds:[],itemGroupIds:[],userGroupIds:(null===(a=n.specialUserGroup)||void 0===a?void 0:a.groupId)?[n.specialUserGroup.groupId]:[]});if(i&&1===i.length)return i[0];throw new Error("Could not fetch specialUserGroup")}},97529:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncUserGroupManagementStatus=void 0,function(e){e[e.NEEDS_FRESH_SHARING_DATA=0]="NEEDS_FRESH_SHARING_DATA",e[e.COMPLETE=1]="COMPLETE"}(t.SyncUserGroupManagementStatus||(t.SyncUserGroupManagementStatus={}))},32830:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.filterOutInvalidUserGroupUsers=void 0;const o=r(66441),n=r(19813);t.filterOutInvalidUserGroupUsers=function(e,t){if(!t.userGroups)return Promise.resolve(t);const r=t.userGroups.map((r=>{const a=(0,n.getUserGroupKey)(t.userGroupAdminItems,r.groupId);return function(e,t,r){const n=r.map((r=>{if("refused"===r.status||"revoked"===r.status)return Promise.resolve(!0);if(!r.proposeSignature)return Promise.resolve(!1);const n=r.proposeSignatureUsingAlias?r.alias:r.userId;return(0,o.isProposeSignatureValid)(e,r.proposeSignature,n,t)}));return Promise.all(n).then((e=>r.filter(((t,r)=>e[r]))))}(e,a,r.users).then((e=>({...r,users:e})))}));return Promise.all(r).then((e=>({...t,userGroups:e})))}},43013:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findTeamForGroup=t.syncUserGroupManagement=t.isSCIMSignatureKey=t.isSSOConnectorKey=t.isEsBasicConfigsData=t.isDirectorySyncKey=t.isUserGroupAdminItem=t.decryptAdminItem=t.getUserGroup=t.getUserGroupAdminItem=t.getSpecialItemGroupKey=t.getSpecialItemGroupFromAdminData=t.getAdminDataFromTeamAdminData=t.makeInviteToSpecialUserGroup=t.getPublicKeyForUser=t.encryptGroupKeyForUser=t.getSpecialUserGroupPrivateKey=t.getSpecialUserGroupKey=t.hasUserAcceptedUserGroup=t.getUserInUserGroup=t.getSpecialUserGroup=void 0;const o=r(86635),n=r(21337),a=r(66441),i=r(39034),s=r(19813),c=r(62380),d=r(89558);function l(e){return e.specialUserGroup}function u(e,t,r){const o=l(r);if(!o)throw new Error("specialUserGroup is not available in adminData");const n=o.users.find((e=>e.userId===t.login));if(!n)throw new Error("couldnt find self in specialUserGroup users");return(0,i.decryptGroupKey)(e,t,n.groupKey)}async function p(e,t,r){const o=await u(e,t,r),n=l(r);return await e.symmetricEncryption.decryptAES256(o,n.privateKey)}function S(e,t,r){return e.asymmetricEncryption.encrypt(t,r)}function g(e,t,r){return e.userGroup.findExistingUsersByAliases({login:t.login,uki:t.uki,aliases:(0,o.extractAliasesFromMembers)([{Alias:r}])}).then((e=>e[r].publicKey))}function m(e,t){return e.teams[t]}function y(e){return e.specialItemGroup}async function v(e,t,r){const o=y(r);if(!o)throw new Error("specialItemGroup is not available in adminData");const n=await p(e,t,r),a=l(r).groupId,i=o.groups.find((e=>e.groupId===a));if(!i)throw new Error("couldnt find specialUserGroup in specialItemGroup groups");return e.asymmetricEncryption.decrypt(n,i.groupKey)}t.getSpecialUserGroup=l,t.getUserInUserGroup=function(e,t){return t.users.find((t=>t.userId===e))},t.hasUserAcceptedUserGroup=function(e,t){return t.users.some((t=>t.userId===e&&"accepted"===t.status))},t.getSpecialUserGroupKey=u,t.getSpecialUserGroupPrivateKey=p,t.encryptGroupKeyForUser=S,t.getPublicKeyForUser=g,t.makeInviteToSpecialUserGroup=function(e,t,r,o,{teamId:n,memberLogin:i,publicKey:s}){const c=m(o,String(n)),d=s?Promise.resolve(s):g(e,r,i);return Promise.all([u(t,r,c),d]).then((([e,r])=>Promise.all([S(t,r,e),(0,a.generateProposeSignature)(t,e,i)]))).then((([e,t])=>({groupKey:e,proposeSignature:t,userGroupRevision:l(c).revision})))},t.getAdminDataFromTeamAdminData=m,t.getSpecialItemGroupFromAdminData=y,t.getSpecialItemGroupKey=v,t.getUserGroupAdminItem=function(e,t,r){return(m(e,t).userGroupAdminItems||[]).find((e=>e.groupId===r))},t.getUserGroup=function(e,t){return Object.keys(e.teams).map((t=>e.teams[t]&&e.teams[t].userGroups)).reduce(((e,t)=>t.concat(e)),[]).find((e=>e.groupId===t))},t.decryptAdminItem=async function(e,t,r,o,n){const a=await v(e,t,r),i=await e.symmetricEncryption.decryptAES256(a,n),s=await e.symmetricEncryption.decryptAES256(i,o.content);return{...JSON.parse(s),itemId:o.itemId}},t.isUserGroupAdminItem=function(e){return"groupId"in e},t.isDirectorySyncKey=function(e){return"publicKey"in e};t.isEsBasicConfigsData=e=>"basicConfigs"in e;t.isSSOConnectorKey=e=>"ssoConnectorKey"in e;t.isSCIMSignatureKey=e=>"scimSignatureKey"in e,t.syncUserGroupManagement=function(e,t,r){const o=e.getSpaceData(),a=e.getTeamAdminData(),i=(0,n.getCurrentUserInfo)(e),l=(0,d.makeSharingService)(e,t);return i.privateKey?(0,s.syncUserGroupManagementForAllTeams)(l,t,(0,n.getCurrentUserInfo)(e),o,a,r).then((t=>((0,c.updateTeamAdminData)(e,t.teamAdminData),t.status))):Promise.reject(new Error("PRIVATE_KEY_MISSING"))},t.findTeamForGroup=function(e,t){const r=Object.keys(e.teams).find((r=>e.teams[r].userGroups.some((e=>e.groupId===t))));return r&&e&&e.teams&&e.teams[r]}},91551:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.administrableUserGroup$=t.administrableUserGroups$=void 0;const o=r(18948),n=r(3343),a=r(8811);t.administrableUserGroups$=function(){const e=a.administrableUserGroupsSelector;return(0,o.pipe)((0,n.map)(e),(0,n.distinctUntilChanged)())},t.administrableUserGroup$=function(e){const t=(0,a.getAdministrableUserGroupSelector)(e);return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},8811:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAdministrableUserGroupSelector=t.isGroupNameAvailableSelector=t.administrableUserGroupSelector=t.administrableUserGroupsSelector=t.currentSpaceInfoSelector=t.currentTeamIdSelector=t.adminDataForTeamSelector=void 0;const o=r(32034);t.adminDataForTeamSelector=(e,t)=>{const r=(e=>e.userSession.teamAdminData)(e);return r.teams?r.teams[t]:void 0};t.currentTeamIdSelector=e=>{const t=e.userSession.spaceData.spaces.find((e=>"accepted"===e.details.status));if(t)return t.teamId};t.currentSpaceInfoSelector=e=>{const t=e.userSession.spaceData.spaces.find((e=>"accepted"===e.details.status));if(t)return t.info};t.administrableUserGroupsSelector=e=>{const r=(0,t.currentTeamIdSelector)(e);if(!r)return[];const o=(0,t.adminDataForTeamSelector)(e,r);return o&&o.userGroups||[]};t.administrableUserGroupSelector=(e,r)=>(0,t.administrableUserGroupsSelector)(e).find((e=>e.groupId===r));t.isGroupNameAvailableSelector=(e,r)=>!(0,t.administrableUserGroupsSelector)(e).some((e=>e.name===r));t.getAdministrableUserGroupSelector=e=>(0,o.createSelector)(t.administrableUserGroupsSelector,(t=>t.find((t=>t.groupId===e))))},61020:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeTeamAdminController=void 0;const o=r(89558),n=r(21337),a=r(37003),i=r(62380),s=r(86635),c=r(43013),d=r(16165),l=r(37089);function u(e,t,r){return a.proposeMembers(t,(0,n.getCurrentUserInfo)(e),r)}function p(e,t){return(0,c.getUserGroup)(e.getTeamAdminData(),t)}t.makeTeamAdminController=(e,t)=>({getMembers:r=>function(e,t,r){return a.getMembers(t,(0,n.getCurrentUserInfo)(e),r)}(e,t,r),proposeMembers:r=>u(e,t,r),addTeamAdmin:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const n=(0,o.makeSharingService)(e,t);return a.addTeamAdmin(n,r).catch((e=>({error:e})))}(e,t,r),removeTeamAdmin:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const n=(0,o.makeSharingService)(e,t);return a.removeTeamAdmin(n,r).catch((e=>({error:e})))}(e,t,r),createUserGroupAction:(r,a)=>function(e,t,r,a){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(a);const c=(0,o.makeSharingService)(e,r),d=(0,n.getCurrentUserInfo)(e),u=e.getSpaceData(),p=e.getTeamAdminData();return(0,s.createUserGroup)(c,d,u,p,a).then((r=>{if(Array.isArray(r.itemGroups)&&r.itemGroups.length>0){const t=r.itemGroups[0],o=String(t.teamId),n=(0,l.specialItemGroupUpdated)(o,t);e.dispatch(n)}const o=a.teamId,n=e.getTeamAdminData().teams[o]&&e.getTeamAdminData().teams[o].userGroups||[];return(0,i.updateAdministrableUserGroupList)(e,o.toString(),n.concat(r.userGroups)),r.userGroupAdminItem&&((0,i.createUserGroupAdminItemInState)(e,o.toString(),r.userGroupAdminItem),t.getInstance().user.persistTeamAdminData().then((()=>r))),r})).then((e=>({userGroups:e.userGroups,error:e.error})))}(e,r,t,a),deleteUserGroupAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const a=(0,o.makeSharingService)(e,t),c=(0,n.getCurrentUserInfo)(e),d=p(e,r.groupId);return(0,s.deleteUserGroup)(a,c,e.getTeamAdminData(),r).then((({userGroups:t,itemGroups:r})=>{const o=r[0],n=String(o.teamId),a=(0,l.specialItemGroupUpdated)(n,o);return e.dispatch(a),(0,i.deleteAdministrableUserGroups)(e,String(d.teamId),t),{userGroups:t}}))}(e,t,r),renameUserGroupAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const a=(0,o.makeSharingService)(e,t),c=(0,n.getCurrentUserInfo)(e);return(0,s.renameUserGroup)(a,c,r).then((({userGroups:t})=>{if(t&&1===t.length){const o=String(t[0].teamId),n=(e.getTeamAdminData().teams[o]&&e.getTeamAdminData().teams[o].userGroups||[]).map((e=>e.groupId===r.groupId&&t[0]||e));(0,i.updateAdministrableUserGroupList)(e,o,n)}return{userGroups:t}}))}(e,t,r),inviteUserGroupMembersAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const a=(0,o.makeSharingService)(e,t),c=(0,n.getCurrentUserInfo)(e),d=e.getTeamAdminData(),l=p(e,r.groupId),S={};r.users.forEach((e=>S[e.alias]=e));const g={proposedMemberLogins:Object.keys(S),teamId:r.teamId,origin:"teamInviteUserGroupUsers"};return u(e,t,g).then((t=>{const o=Object.keys(t.proposedMembers).map((e=>S[e]));t.accountCreationRequiredMembers.forEach((e=>o.push(S[e])));const n={};if(Object.keys(t.refusedMembers).forEach((e=>{const r=t.refusedMembers[e];"already_member"!==r?n[e]=r:o.push(S[e])})),0===o.length){return{userGroups:[l],refusedMembers:n}}const u=Object.keys(t.proposedMembers).length,p={...r,users:o};return(0,s.inviteUserGroupMembers)(a,c,d,p,l,{newlyInvitedUsersCount:u}).then((t=>{if(t.error)return t;const o=String(t.userGroups[0].teamId),a=(e.getTeamAdminData().teams[o]&&e.getTeamAdminData().teams[o].userGroups||[]).map((e=>e.groupId===r.groupId&&t.userGroups&&t.userGroups[0]||e));return(0,i.updateAdministrableUserGroupList)(e,String(l.teamId),a),{...t,refusedMembers:n}}))}))}(e,t,r),revokeUserGroupMembersAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const a=(0,o.makeSharingService)(e,t),c=(0,n.getCurrentUserInfo)(e),d=p(e,r.groupId);return(0,s.revokeUserGroupMembers)(a,c,r,d).then((t=>{if(t&&t.userGroups&&1===t.userGroups.length){const o=t.userGroups[0],n=(e.getTeamAdminData().teams[o.teamId]&&e.getTeamAdminData().teams[o.teamId].userGroups||[]).map((e=>e.groupId===r.groupId&&t.userGroups&&t.userGroups[0]||e));(0,i.updateAdministrableUserGroupList)(e,String(o.teamId),n)}return t}))}(e,t,r),updateUserGroupMembersAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const a=(0,o.makeSharingService)(e,t),i=(0,n.getCurrentUserInfo)(e);return(0,s.updateUserGroupMembers)(a,i,r)}(e,t,r),teamUpdateHandler:t=>function(e,t){return Promise.resolve().then((()=>{if(!e.isAuthenticated())return[new Error("no session set")];const r=()=>{const r=e.getSpaceData().spaces.map((e=>{if(e.details.teamId!==t.teamId.toString())return e;const r=function(e,t){const{teamAdmins:r}=e.details;switch(t.action){case"adminPromoted":return r.concat(t.users.map((e=>({login:e}))));case"adminDemoted":return r.filter((e=>!t.users.includes(e.login)));default:return r}}(e,t);return Object.assign({},e,{details:Object.assign({},e.details,{teamAdmins:r})})}));(0,d.updateSpaceData)(e,r)};if(["adminPromoted","adminDemoted"].includes(t.action)&&r(),"memberRevoked"===t.action){const r=e.getTeamAdminData().teams[t.teamId],o=(r.userGroups||[]).map((e=>Object.assign({},e,{users:e.users.filter((e=>!t.users.includes(e.alias)))})));(0,i.updateAdministrableUserGroupList)(e,r.teamId,o)}return null}))}(e,t),confirmFreeTrial:e=>function(e,t){return e.teamPlans.confirmFreeTrial({token:t})}(t,e),getPremiumStatus:e=>function(e,t){return e.premium.status(t)}(t,e),getTeamTokens:()=>function(e,t){const r=e.getUserLogin();return t.qa.tokens({login:r})}(e,t),registerFreeTrial:e=>function(e,t){return e.teamPlans.registerFreeTrial(t)}(t,e),acceptTeamInvite:e=>function(e,t){const{token:r}=t;return e.teamPlans.acceptTeam({token:r})}(t,e)})},64942:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(58105);t.bootstrap=e=>{e.register(o.config)}},89852:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSpecialItem=void 0;const o=r(57254),n=r(21337),a=r(3082),i=r(43013),s=r(8811),c=r(69774),d=r(79918);t.createSpecialItem=async(e,t,r)=>{var l;const{storeService:u,localStorageService:p}=e;(0,a.requireAdmin)(u);const S=(0,s.currentTeamIdSelector)(u.getState()),g=(0,s.adminDataForTeamSelector)(u.getState(),S),m=(0,n.getCurrentUserInfo)(u);if(g[Object.keys(r)[0]])throw new Error("data already exists and cannot be re-created!");const{crypto:y,item:v,ws:A}=t,{specialItemGroup:E}=g;if(!E)throw new Error("Cannot find specialItemGroup in adminData");const f=await(0,i.getSpecialItemGroupKey)(y,m,g),h=await y.symmetricEncryption.generateNewAESKey(),_=await y.symmetricEncryption.encryptAES256(f,btoa(h)),T=await y.symmetricEncryption.encryptAES256(h,btoa(JSON.stringify(r))),I=(0,o.generateItemUuid)(),C=await v.makeItemUpload(I,_,T),P=await v.makeAddItemsEvent(E.groupId,E.revision,[C]),D=await v.addItems(A,m.login,m.uki,P),O=null===(l=null==D?void 0:D.items)||void 0===l?void 0:l.find((({itemId:e})=>e===I));if(!O)throw new Error("unable to persist");return await(0,c.updateAdminDataAfterItemAddedOrUpdated)(u,p,t.ws,m,S,D),await(0,d.updateSharingDataAfterItemAddedOrUpdated)(e.storeService,e.localStorageService,O),r}},63150:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0;var o=r(35380);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return o.setupSubscriptions}});var n=r(64942);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},35380:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(89558),n=r(41179),a=r(90842);t.setupSubscriptions=async function(e,t){const{sessionService:r,storeService:i,localStorageService:s,wsService:c}=t,d=(0,o.makeSharingService)(i,c),l=(0,a.makeDirectorySyncController)({sessionService:r,sharingService:d,storeService:i,localStorageService:s,wsService:c});e.syncSuccess.on((()=>{const e=i.isFeatureActivated("teamAdminConsoleDirectorySync"),t=i.getSpaceData(),r=(0,n.isDirectorySyncActivated)(t);e&&r&&l.directorySyncForAllTeams()}))}},69774:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateAdminDataAfterItemAddedOrUpdated=void 0;const o=r(37089),n=r(62380),a=(e,t,r)=>t?e.filter((({[r]:e})=>e!==t[r])).concat([t]):e;t.updateAdminDataAfterItemAddedOrUpdated=async(e,t,r,i,s,c)=>{const{itemGroups:d,items:l}=c,{items:u,itemGroups:p,userGroups:S,...g}=e.getSharingData(),m=e.getTeamAdminData().teams[s],[y]=d,[v]=l,{specialUserGroup:A}=m,E={...g,items:a(u,v,"itemId"),itemGroups:a(p,y,"groupId"),userGroups:a(S,A,"groupId")},f=await(0,n.syncAdminData)(r,i,m,E),h={teams:{[s]:f}},_=(0,o.teamAdminDataUpdated)(h),T=e.dispatch(_),I=t.getInstance();return await I.storeTeamAdminData(T.teamAdminData),f}},79918:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateSharingDataAfterItemAddedOrUpdated=void 0;const o=r(33360);t.updateSharingDataAfterItemAddedOrUpdated=async(e,t,r)=>{const n=t.getInstance(),{items:a,...i}=await n.getSharingData(),s={...i,items:a.filter((({itemId:e})=>e!==r.itemId)).concat([r])};e.dispatch((0,o.sharingDataUpdated)(s)),await n.storeSharingData(s)}},52267:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeSessionService=void 0;const o=r(61666),n=r(78271),a=r(38193);t.makeSessionService=e=>{let t=null,r=null,i=null;return{setInstance:(s,c)=>{t=(0,o.makeUserSessionService)(e,s,c),r=(0,n.makeUserDeviceService)(e.storeService,e.wsService),i=(0,a.makeUserPaymentService)(e.storeService,e.wsService)},close:()=>(t?t.closeSession():Promise.resolve()).then((()=>{t=null,r=null,i=null})),getInstance:()=>{if(!t)throw new Error("makeSessionService: You must call setInstance(login: string, password: string) before getting the instance");return{user:t,device:r,payment:i}}}}},78271:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserDeviceService=void 0;const o=r(6261),n=r(32234),a=r(59125),i=r(22029);t.makeUserDeviceService=(e,t)=>({fetchDevicesList:()=>s(e,t),fetchTemporaryToken:()=>c(e,t),deactivateDevice:r=>d(e,t,r),changeDeviceName:(r,o)=>l(e,t,r,o)});const s=async(e,t)=>{const r=e.getAccountInfo().login,n=(0,i.ukiSelector)(e.getState()),a=(0,i.deviceKeysSelector)(e.getState()),s=(await t.devices.list({login:r,uki:n})).map((e=>({...e,isCurrentDevice:a&&e.deviceId===a.accessKey}))),c=s.find((e=>e.isCurrentDevice));return c&&e.getStore().dispatch((0,o.registerDeviceName)(c.deviceName)),s},c=(e,t)=>{const r=e.getAccountInfo().login,o=(0,i.ukiSelector)(e.getState());return t.authentication.getTemporaryToken({login:r,uki:o})},d=(e,t,r)=>{const o=e.getAccountInfo().login,c=(0,i.ukiSelector)(e.getState());return t.devices.deactivate({login:o,uki:c,deviceId:r}).then((o=>s(e,t).then((e=>{const t={devicesList:e,deviceId:r,success:"success"===o.status,reason:"success"!==o.status?`Deactivate Device Error - ${o.content}`:null};n.deactivateDeviceResult(t),t.success||(0,a.sendExceptionLog)({message:t.reason})}))))},l=(e,t,r,o)=>{const c=e.getAccountInfo().login,d=(0,i.ukiSelector)(e.getState());return t.devices.changeName({login:c,uki:d,deviceId:r,updatedDeviceName:o}).then((i=>s(e,t).then((e=>{const t={devicesList:e,deviceId:r,success:"success"===i.status,updatedName:o,reason:"success"!==i.status?`Change Device Name Error - ${i.content}`:null};n.changeDeviceNameResult(t),t.success||(0,a.sendExceptionLog)({message:t.reason})}))))}},38193:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserPaymentService=void 0;const o=r(22029),n=r(38387),a=r(15876);t.makeUserPaymentService=(e,t)=>({fetchInvoices:()=>i(e),updatePaymentCard:(r,o)=>s(e,t,r,o),cancelPremiumSubscription:()=>c(e,t)});const i=async e=>{const t=e.getAccountInfo().login,r=await(0,n.listInvoices)(e,t);return(0,a.isApiError)(r)?[]:r.invoices},s=(e,t,r,n)=>{const a=e.getAccountInfo().login,i=(0,o.ukiSelector)(e.getState());return t.premium.updateCardToken({login:a,uki:i,tokenId:r,stripeAccount:n}).then((e=>({success:e.success&&!e.error,reason:e.error?e.error.message:null})))},c=(e,t)=>{const r=e.getAccountInfo().login,n=(0,o.ukiSelector)(e.getState());return t.premium.setAutoRenewal({login:r,uki:n,enabled:!1}).then((()=>{}))}},61666:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateRsaKeys=t.treatKeysResult=t.isSyncInProgress=t.storeSync=t.hasTreatProblems=t.makeUserSessionService=t.ON_USER_SESSION_CLOSED=void 0;const o=r(19935),n=r(97211),a=r(53494),i=r(32234),s=r(1064),c=r(1005),d=r(93267),l=r(31891),u=r(37821),p=r(77333),S=r(92533),g=r(33360),m=r(17210),y=r(74078),v=r(60087),A=r(16716),E=r(6261),f=r(87025),h=r(97529),_=r(96045),T=r(1064),I=r(59125),C=r(15528),P=r(75897),D=r(43728),O=r(37089),b=r(43013),w=r(11406),N=r(73442),R=r(27339),L=r(84146),U=r(97373),M=r(53667),k=r(56758),F=r(28080),B=r(18233),G=r(79747),K=r(73418),j=r(61630),V=r(33722),H=r(88478),W=r(41094),x=r(13031),z=r(44904),Y=r(54580),$=r(14384),q=r(8153),Q=r(14122),X=r(1619),J=r(97869),Z=r(55149),ee=r(82526),te=r(62602),re=r(76190),oe=r(59146),ne=r(61837),ae=r(78330),ie=r(8962),se=r(39958),ce=r(4140),de=r(12642),le=r(92847),ue=r(29278),pe=r(89284),Se=r(62282),ge=r(15876),me=r(72879),ye=r(61663),ve=r(12940),Ae=r(75159),Ee=r(33792),fe=r(45082),he=r(38652),_e=r(99355),Te=r(11502);t.ON_USER_SESSION_CLOSED="OnUserSessionClosed";t.makeUserSessionService=(e,t,r)=>{if(!t)throw new Error(s.AuthenticationCode[s.AuthenticationCode.EMPTY_LOGIN]);const n=t.toLowerCase();if(!(0,D.isValidLogin)(n))throw new Error(s.AuthenticationCode[s.AuthenticationCode.INVALID_LOGIN]);if(!r&&""===r)throw new Error(s.AuthenticationCode[s.AuthenticationCode.EMPTY_MASTER_PASSWORD]);e.storeService.dispatch((0,P.updateMasterPassword)(r)),e.storeService.dispatch((0,P.updateServerKey)(""));const a=(0,Ee.getNoDerivationCryptoConfig)();e.teamDeviceEncryptedConfigEncryptorService.setInstance({raw:e.storeService.getUserSession().masterPassword},e.storeService.getUserSession().serverKey,a),e.masterPasswordEncryptorService.setInstance({raw:e.storeService.getUserSession().masterPassword},e.storeService.getUserSession().serverKey),e.localDataEncryptorService.setInstance({raw:e.storeService.getUserSession().masterPassword},e.storeService.getUserSession().serverKey),e.remoteDataEncryptorService.setInstance({raw:e.storeService.getUserSession().masterPassword},e.storeService.getUserSession().serverKey),e.localStorageService.setInstance(n),e.storeService.dispatch((0,c.openSession)(n));const i=e.cryptoService||(0,_.makeCryptoService)(),d=new ne.LocalStorageEventStore(e.localStorageService);(0,ae.setInstance)(d),(0,ie.setInstance)(d),(0,oe.setInstance)(e.localStorageService,e.storeService),(0,ue.setInstance)(e.storeService,e.localStorageService,e.wsService);let u=null;function p(){clearInterval(u)}let S=null;const g=()=>{clearInterval(S)};function y(){w.stopTimedTrigger(null)}return(()=>{let t=e.storeService.getUserSession();e.storeService.getStore().subscribe((()=>{const r=e.storeService.getUserSession();r!==t&&(t.masterPassword===r.masterPassword&&t.serverKey===r.serverKey||""===r.masterPassword||(l.Debugger.log("Master Password || Server Key updated"),r.masterPassword||r.serverKey?e.masterPasswordEncryptorService.setInstance({raw:r.masterPassword},r.serverKey):e.masterPasswordEncryptorService.close(),t=r))}))})(),{loadSessionData:()=>Re(e.localStorageService,e.storeService),accountExistsLocally:()=>async function(e){const t=await(0,V.getLocalAccounts)(e.storeService,e.storageLayer),r=e.storeService.getUserLogin(),o=e.localStorageService.getInstance(),n=t.some((({login:e})=>r===e));if(n){const e=await o.doesPersonalDataExist();return Boolean(r&&n&&e)}const a=await o.doesLocalDataExist();return Boolean(r&&a)}(e),refreshSessionData:()=>async function(e,t){const{localStorageService:r,storeService:o,wsService:n}=e,a=(0,ye.requestPairing)(o,t),i=(async(e,t,r,o)=>{try{const n=t.getState(),a=(0,H.ukiSelector)(n),i=(0,Q.featuresSelector)(n);await(0,m.getFeatures)(t,r,o,a);const s=t.getState(),c=(0,Q.featuresSelector)(s),d=(0,Z.makeFeatureFlippingUsageLogs)(i,c);d.length&&(0,Z.sendFeatureFlippingUsageLogs)(t,d),(0,m.persistFeatures)(e.getInstance(),t.getAccountInfo(),t.getPersonalFeatures()),(0,m.sendFeaturesUpdateEvent)(t)}catch(e){const t=new Error(`[UserSessionService] - refreshFeatures: ${e}`);(0,I.sendExceptionLog)({error:t,code:C.ExceptionCriticality.WARNING})}})(r,o,n,t),s=(0,re.refreshUserABTest)(o,r.getInstance(),t),c=(0,H.ukiSelector)(o.getState()),d=(0,ve.refreshPremiumStatus)(o,n,t,c);await Promise.all([d,a,i,s])}(e,t),getSyncArgs:()=>we(e.storeService,e.masterPasswordEncryptorService,e.wsService),sync:t=>Me(e,i,p,y,g,t),attemptSync:t=>Ce(e,i,p,y,g,t),requestNewSync:t=>be(e,i,p,y,g,t),startPeriodicSyncUsageLog:()=>{w.startTimedTrigger(e.storeService)},startPeriodicSync:()=>function(){if(null===u){const{syncIntervalTimeMs:t}=e.storeService.getSyncStatus();u=setInterval((()=>{Ce(e,i,p,y,g,o.Trigger.Periodic)}),t)}}(),stopPeriodicSync:()=>p(),startPeriodic2FAInfoRefresh:()=>(()=>{if(null!==S)return;const{storeService:t,wsService:r}=e;S=setInterval((()=>{(0,_e.refreshTwoFactorAuthenticationInfoService)(t,r)}),he.ENFORCE_2FA_POLICY_REFRESH_TIMER_INTERVAL)})(),stopPeriodic2FAInfoRefresh:()=>g(),fetchContactInfo:()=>Ve(e.storeService,e.wsService),fetchSubscriptionCode:()=>function(e,t){const r=e.getAccountInfo().login,o=(0,H.ukiSelector)(e.getState()),n=e.getSubscriptionCode();if(n)return Promise.resolve(n);return t.premium.getSubscriptionCode({login:r,uki:o}).then((t=>{const r=t&&t.content&&t.content.subscriptionCode;return e.dispatch((0,M.saveSubscriptionCode)(r)),r}))}(e.storeService,e.wsService),persistLocalSettings:()=>Fe(e.localStorageService,e.storeService),persistPersonalData:()=>Be(e.localStorageService,e.storeService),persistPersonalSettings:()=>Ge(e.localStorageService,e.storeService),persistAllData:()=>je(e.localStorageService,e.storeService),persistTeamAdminData:()=>Ke(e.localStorageService,e.storeService),persistLocalKey:t=>e.localStorageService.getInstance().storeLocalKey(t),closeSession:()=>Ie(e,p,y,g),fetchAccountInfo:()=>function(e,t){const r=e.getUserSession(),o=r.analyticsIds,n=r.publicUserId;if(o.userAnalyticsId&&o.deviceAnalyticsId&&n)return Promise.resolve({userAnalyticsId:o.userAnalyticsId,deviceAnalyticsId:o.deviceAnalyticsId,publicUserId:n});return(0,Se.accountInfo)(e,t).then((t=>{if((0,ge.isApiError)(t)||"success"!==t.code)throw new Error("Unable to fetch updated account info");return e.dispatch((0,P.updateAnalyticsIds)(t.userAnalyticsId,t.deviceAnalyticsId)),e.dispatch((0,P.updatePublicUserId)(t.publicUserId)),{userAnalyticsId:t.userAnalyticsId,deviceAnalyticsId:t.deviceAnalyticsId,publicUserId:t.publicUserId}}))}(e.storeService,e.storeService.getUserLogin())}};const Ie=async(e,t,r,o)=>{const{storageLayer:a,storeService:i,eventBusService:s}=e;if(i.isAuthenticated()){r();const e=Date.now()-i.getAccountInfo().sessionStartTime;(0,N.sendUsageLog)(i,{code:n.UsageLogCode.USAGE_USER_LOGOUT,content:{sender:"FROM_APP",duration:Math.floor(e/1e3)}}),t(),o(),await(0,me.cleanRememberMeStorageData)(i,a),s.sessionClosed({login:null})}(0,de.clearInstance)(),(0,ie.clearInstance)(),(0,ae.clearInstance)(),(0,oe.clearInstance)(),(0,ue.clearInstance)();const{anonymousPartnerId:l,dashlaneServerDeltaTimestamp:u,appKeys:p,styxKeys:S}=i.getSdkAuthentication();i.dispatch((0,d.resetLoginStepInfo)()),i.dispatch((0,P.updateSessionDidOpen)(!1)),i.dispatch((0,c.closeSession)()),i.dispatch((0,R.loadSdkAuthentication)({anonymousPartnerId:l,dashlaneServerDeltaTimestamp:u,appKeys:p,styxKeys:S})),(0,Ae.resetDefaultHttpClientImplementationLibrary)()},Ce=async(e,t,r,o,n,a)=>{try{return await Me(e,t,r,o,n,a)}catch(e){const t=new Error(`Sync failed: ${e}`);(0,I.sendExceptionLog)({error:t,code:C.ExceptionCriticality.WARNING})}};let Pe=!1,De=()=>{},Oe=Promise.resolve();const be=async(e,t,r,o,n,a)=>{if(!Pe)return Pe=!0,await Oe,Pe=!1,Ce(e,t,r,o,n,a)};const we=(e,t,r,n,a)=>{const i=e.getLocalSettings(),s=e.getAccountInfo().login,c=a===o.Trigger.InitialLogin?0:i.lastSync,d=a===o.Trigger.InitialLogin?y.SyncType.FIRST_SYNC:y.SyncType.LIGHT_SYNC;return{dataEncryptorService:t,storeService:e,login:s,uki:(0,H.ukiSelector)(e.getState()),lastSyncTimestamp:c,syncType:d,personalData:e.getPersonalData(),needsKeys:!e.getUserSession().keyPair,ws:r,announce:n||(e=>{})}},Ne=(e,t,r)=>{const o=we(e,t,r);return Object.assign(o,{lastSyncTimestamp:v.MAX_SYNC_TIMESTAMP})},Re=async(e,t)=>{const r=e=>t=>(0,I.sendExceptionLog)({message:`[Crypto] unable to ${e}. ErrorMessage: ${t}`}),o=e.getInstance().getPersonalData().then((e=>(l.Debugger.log("Personal data has been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>r("loadPersonalData")(e)}))),n=e.getInstance().getLocalSettings().then((e=>(l.Debugger.log("Local settings have been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>r("loadLocalSettings")(e)}))),a=e.getInstance().getPersonalSettings().then((e=>(l.Debugger.log("Personal settings have been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>r("loadPersonalSettings")(e)}))),d=e.getInstance().getPersonalFeatures().then((e=>(l.Debugger.log("Personal features have been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>r("loadPersonalFeatures")(e)}))),y=e.getInstance().doesNotificationStatusExist().then((o=>{o&&e.getInstance().getNotificationStatus().then((e=>(l.Debugger.log("Notifications status have been deciphered successfully"),t.dispatch((0,te.loadNotificationsStatus)(e)),e))).catch((e=>({error:!0,logError:()=>r("loadNotificationsStatus")(e)})))})),v=e.getInstance().getUserABTests().then((e=>(l.Debugger.log("User AB tests have been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>r("loadUserABTests")(e)}))),A=e.getInstance().doesDarkWebExist().then((async r=>{if(r){const{emails:r,onboardingState:o}=await e.getInstance().getDarkWeb();t.dispatch((0,ee.dataLeaksEmailStatusListUpdated)(r)),t.dispatch((0,ee.darkWebOnboardingStateUpdated)(o||le.DarkWebOnboardingState.NOT_SEEN))}})).catch(r("loadDarkWeb")),E=e.getInstance().getAnalyticsIds().then((e=>((0,l.logInfo)({message:"User Analytics IDs have been deciphered successfully"}),e))).catch((e=>({error:!0,logError:()=>r("loadAnalticsIds")(e)}))),f=(0,x.loadUserAuthenticationData)(e,t),h=e.getInstance().loadUserAutofillCorrections().then((e=>((0,l.logInfo)({message:"User Autofill Corrections have been fetched successfully"}),e))).catch((e=>({error:!0,logError:()=>r("userAutofillCorrections")(e)}))),_=[o,n,a,d];if(await e.getInstance().hasAuthenticationData()){const e=f.then((e=>(0,z.isLoadAuthenticationSuccess)(e)||e.message===z.FailedToRehydrateAuthenticationData?{error:!1}:{error:!0,logError:()=>r("loadAuthenticationData")(e.error)}));_.push(e)}const T=await Promise.all(_),C=T.every((e=>!!e&&e.error)),D=T.some((e=>!!e&&e.error));if(C)throw new Error(s.AuthenticationCode[s.AuthenticationCode.WRONG_PASSWORD]);if(D)throw T.forEach((e=>!!e&&e.logError instanceof Function&&e.logError())),new Error(s.AuthenticationCode[s.AuthenticationCode.DATA_TAMPERED_ERROR]);try{t.dispatch((0,u.loadStoredPersonalData)(await o));const e=await n;if(e){const r=(0,c.localSettingsUpdated)(e);t.dispatch(r),i.sendWebOnboardingModeUpdate(e.webOnboardingMode)}t.dispatch((0,p.loadStoredPersonalSettings)(await a)),t.dispatch((0,S.loadedStoredFeatures)(await d)),t.dispatch((0,Y.loadedStoredUserABTests)(await v)),t.dispatch((0,P.loadAnalyticsIds)(await E)),t.dispatch((0,Te.loadedUserAutofillCorrections)(await h)),await A,(0,m.sendFeaturesUpdateEvent)(t),await f.then((e=>{if(!(0,z.isLoadAuthenticationSuccess)(e))throw e.error}))}catch(e){const t=`An error occurred when trying to write personalData, localSettings, personalSettings or personalFeatures in Redux store ${e} `;throw l.Debugger.error(t),new Error(t)}const b=e.getInstance().getSharingData().then((e=>{l.Debugger.log(`sharingData loaded for ${t.getAccountInfo().login}`),t.dispatch((0,g.sharingDataUpdated)(e))})).catch(r("loadSharingDataPromise")),w=e.getInstance().getTeamAdminData().then((e=>{l.Debugger.log(`teamAdminData loaded for ${t.getAccountInfo().login}`),t.dispatch((0,O.teamAdminDataUpdated)(e))})).catch(r("loadTeamAdminDataPromise")),N=e.getInstance().getHealth().then((e=>{if(null!==e){const r=(0,X.healthStateUpdated)(e);t.dispatch(r)}})).catch(r("loadHealthDataPromise")),R=e.getInstance().getIcons().then((e=>{if(null!==e){const r=(0,pe.IconsCacheLoaded)(e);t.dispatch(r)}})).catch(r("loadIconsDataPromise")),L=e.getInstance().doesUserActivityExist().then((async r=>{if(r){const{lastSentAt:r}=await e.getInstance().getUserActivity();t.dispatch((0,se.userActivityLastSentAtUpdated)(r))}})).catch(r("loadUserActivity")),U=e.getInstance().doesVaultReportExist().then((async r=>{if(r){const{lastSentAt:r}=await e.getInstance().getVaultReport();t.dispatch((0,ce.vaultReportLastSentAtUpdated)(r))}})).catch(r("loadVaultReport"));return Promise.resolve().then((()=>{Promise.all([b,w,y,N,R,L,U])}))};t.hasTreatProblems=(e,t,r)=>{if(!e.summary)return{transactionsToDownload:[],transactionsToUpload:[]};const o=t.getPersonalData(),{missingLocally:n,missingRemotely:a}=(0,U.getMissingIdentifiers)(r,o,e.summary);return{transactionsToUpload:[...a],transactionsToDownload:[...n]}};const Le=async e=>{const t=(0,ae.getInstance)(),r=(0,ie.getInstance)();let o=null,n=null;try{const{storeService:s}=e,d=await(0,v.sync)(e),l=d.clearTransactions||[];if(0!==l.length){o=r.lockTopic("healthUpdates"),n=r.lockTopic("iconsUpdates");const e=l.filter((e=>"AUTHENTIFIANT"===e.type)).map((e=>e.identifier)),d=(e=>e.filter((e=>"SECURITYBREACH"===e.type)).map((e=>e.identifier)))(l),u=0===(a=e).length?null:{type:"credentialUpdates",credentialIds:a};null!==u&&await t.add("healthUpdates",u);const p=0===d.length?null:{type:"breachUpdates"};null!==p&&await t.add("healthUpdates",p);const S=(e=>0===e.length?null:{type:"credentialUpdates",credentialIds:e})(e);null!==S&&await t.add("iconsUpdates",S);const g=(e=>0===e.length?null:{type:"breachUpdates",breachesIds:e})(d);null!==g&&await t.add("iconsUpdates",g);(await Promise.all(l.map(c.applyTransaction))).forEach(((e,t)=>{s.dispatch(e);"SETTINGS"===l[t].type&&(0,L.broascastSyncBackupChanged)(s)})),i.reportDataUpdate(s)}return d.uploadedTransactions.length>0&&s.dispatch((0,u.updateLastBackupTime)(d.uploadedTransactions,Math.floor(d.lastSyncTimestamp/1e3))),e.lastSyncTimestamp<v.MAX_SYNC_TIMESTAMP&&s.dispatch((0,E.registerLastSync)(d.lastSyncTimestamp)),d}catch(e){throw e}finally{o&&r.releaseTopic("healthUpdates",o),n&&r.releaseTopic("iconsUpdates",n)}var a};t.storeSync=async(e,r)=>{const o=await(async e=>{const{announce:t,personalData:r}=e;try{t(k.announcements.chronologicalSyncStarted(r));const o=await Le(e);return t(k.announcements.chronologicalSyncFinished(o.summary,o.fullBackupFileSize)),o}catch(e){throw t(k.announcements.chronologicalSyncFailed(e)),e}})(r);return(async(e,r,o)=>{const{announce:n}=r;n(k.announcements.treatProblemStarted());const{transactionsToDownload:a,transactionsToUpload:i}=(0,t.hasTreatProblems)(o,e,n),s=a.length,c=i.length;if(n(k.announcements.treatProblemDiffComputed(s,c)),s<=0&&c<=0)return n(k.announcements.treatProblemFinished()),o;try{c>0&&e.dispatch((0,u.storeChangesToUpload)(i));const t=await Le({...we(e,r.dataEncryptorService,r.ws,n),transactionIds:a}),s={...t,clearTransactions:[...t.clearTransactions,...o.clearTransactions]};return n(k.announcements.treatProblemFinished()),s}catch(e){throw n(k.announcements.treatProblemFailed(e)),e}})(e,r,o)};const Ue=async({storeService:e,dataEncryptorService:r,localStorageService:o,wsService:n,eventLoggerService:a},i,s)=>{if(!s.sharing2||!(0,H.ukiSelector)(e.getState()))return s;const c=async t=>{const r=await(async({storeService:e,wsService:t,localStorageService:r,eventLoggerService:o},n,a)=>{try{n(k.announcements.sharingSyncStarted());const i=await(0,f.syncSharing)({storeService:e,wsService:t,localStorageService:r,eventLoggerService:o},a);return n(k.announcements.sharingSyncFinished()),i}catch(e){throw n(k.announcements.sharingSyncFailed(e)),e}})({storeService:e,wsService:n,localStorageService:o,eventLoggerService:a},i,t),s=await(async(e,t,r,o)=>{try{r(k.announcements.teamAdminDataSyncStarted());const n=await(0,b.syncUserGroupManagement)(e,t,o);return r(k.announcements.teamAdminDataSyncFinished()),n}catch(e){throw r(k.announcements.teamAdminDataSyncFailed(e)),e}})(e,n,i,r);return s};if(await c(s.sharing2)===h.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA){const o=Ne(e,r,n),{sharing2:a}=await(0,t.storeSync)(e,{...o,announce:i});await c(a)}return s};t.isSyncInProgress=e=>{const t=e.getState(),r=(0,q.syncIsInProgressSelector)(t),{startTime:o}=(0,q.syncSelector)(t);if(!r)return!1;return Date.now()-(o||0)<6e5?(l.Debugger.log("[Sync] Already in progress, skipping trigger…"),!0):(e.dispatch((0,A.syncFailure)()),(0,I.sendExceptionLog)({message:'[Sync] "inProgress" for more than 10 minutes'}),!1)};const Me=async(e,r,o,n,a,c)=>{const{eventBusService:d,localStorageService:u,masterPasswordEncryptorService:p,remoteDataEncryptorService:S,storeService:g,wsService:m,eventLoggerService:y}=e,v=g.getState();if(!g.isAuthenticated())throw new Error("Impossible to Sync - user not authenticated");if((0,t.isSyncInProgress)(g))return;Oe=new Promise((e=>De=e));if((0,Q.hasFeatureSelector)(v,he.ENFORCE_2FA_FF)){const e=(0,W.twoFactorAuthenticationInfoSelector)(v);if(e.status===fe.TwoFactorAuthenticationInfoRequestStatus.READY){const{shouldEnforceTwoFactorAuthentication:t}=e;if(t)return}}const E=(0,q.isRemoteKeyActivatedSelector)(v)?S:p,f=(0,j.setupProbe)((0,F.makeEventLoggerSyncMonitor)(y,g).monitor,(0,B.makeUsageLog135Monitor)(g),(0,G.makeDiagnosticReportMonitor)(),(0,K.makeSyncLoggerMonitor)()),h=we(g,E,m,f,c),{syncType:_}=h,T=(0,ie.getInstance)(),C=T.lockTopic("healthUpdates");try{f(k.announcements.syncStarted(c,_)),i.triggerSessionSyncStatus({status:"syncing"}),g.dispatch((0,A.syncStarted)());const e=await(0,t.storeSync)(g,h);return await(0,t.treatKeysResult)(E,g,r,m,f,e),await Ue({storeService:g,dataEncryptorService:E,localStorageService:u,wsService:m,eventLoggerService:y},f,e),await E.getInstance().prepareCrypto(),f(k.announcements.saveStarted()),await je(u,g),f(k.announcements.saveFinished()),d.syncSuccess({}),g.dispatch((0,A.syncSuccess)(e.isUploadEnabled)),i.triggerSessionSyncStatus({status:"success"}),f(k.announcements.syncFinished()),De(),T.releaseTopic("healthUpdates",C),e.clearTransactions}catch(t){if(g.dispatch((0,A.syncFailure)()),i.triggerSessionSyncStatus({status:"error"}),f(k.announcements.syncFailed(t)),d.syncFailure({}),C&&T.releaseTopic("healthUpdates",C),De(),t.message===s.AuthenticationCode[s.AuthenticationCode.INVALID_UKI]){const t="[Sync] Device UKI is invalid, closing the session",r=new Error(t);return(0,l.logError)({message:t,details:{error:r}}),(0,I.sendExceptionLog)({error:r}),void Ie(e,o,n,a)}throw t}};t.treatKeysResult=async(e,r,o,n,i,s)=>{try{const i=async t=>{if(l.Debugger.log("[Sync] Extract Keys from Sync…"),!t)return null;l.Debugger.log("[Sync] Decipher  private key BEGIN");const r=await e.getInstance().decrypt(t),o=(0,a.deflatedUtf8ToUtf16)(r,{skipInflate:!0});return l.Debugger.log("[Sync] Decipher  private key SUCCESS"),o};if(s.keys&&s.keys.privateKey)try{const e=await i(s.keys.privateKey);r.dispatch((0,P.updateKeyPair)({privateKey:e,publicKey:s.keys.publicKey}))}catch(e){}if(!r.getUserSession().keyPair){const a=await(0,t.generateRsaKeys)(e,o),i=Ne(r,e,n);i.needsKeys=!0,i.syncType=y.SyncType.FULL_SYNC,i.pushKeysToServer={private:a.encryptedPrivateKey,public:a.keys.public},l.Debugger.log("SYNC RSA Keys - BEGIN"),await Le(i),l.Debugger.log("SYNC RSA Keys - END"),r.dispatch((0,P.updateKeyPair)({privateKey:a.keys.private,publicKey:a.keys.public}))}}catch(e){throw i(k.announcements.treatSharingKeysFailed(e)),e}};t.generateRsaKeys=async(e,t,r={})=>{try{const o=await t.asymmetricEncryption.generateRsaKeyPair();l.Debugger.log("Generating RSA Keys");const n=(0,a.utf16ToDeflatedUtf8)(o.private,{skipDeflate:!0}),i=await e.getInstance().encrypt(n,r);l.Debugger.log("Encrypt RSA Keys");return{keys:{public:o.public,private:o.private},encryptedPrivateKey:i}}catch(e){throw l.Debugger.log("Error while Generating RSA KEY: "+e),e}};const ke=e=>e.persistData===T.PersistData.PERSIST_DATA_NO,Fe=(e,t)=>{const r=t.getLocalSettings(),o=t.getAccountInfo();return ke(o)||!o.isAuthenticated?Promise.resolve():e.getInstance().storeLocalSettings(r)},Be=async(e,t)=>{const r=t.getPersonalData(),o=t.getAccountInfo();return ke(o)||!o.isAuthenticated?Promise.resolve():e.getInstance().storePersonalData(r)},Ge=async(e,t)=>{const r=t.getPersonalSettings(),o=t.getAccountInfo();return ke(o)||!o.isAuthenticated?Promise.resolve():e.getInstance().storePersonalSettings(r)},Ke=(e,t)=>{const r=t.getTeamAdminData(),o=t.getAccountInfo();return ke(o)||!o.isAuthenticated?Promise.resolve():e.getInstance().storeTeamAdminData(r).then((()=>{}))},je=(e,t)=>{const r=(0,$.userABTestsSelector)(t.getState()),o=t.getLocalSettings(),n=t.getPersonalSettings(),a=t.getSharingData(),i=(0,q.sharingSyncSelector)(t.getState()),s=t.getAccountInfo(),c=t.getPersonalFeatures(),d=t.getNotificationStatus(),l=t.getTeamAdminData(),u=t.getState(),p=(0,H.sessionKeysSelector)(u),S=(0,J.darkWebSelector)(u),g=(0,q.analyticsIdsSelector)(u);if(ke(s)||!s.isAuthenticated)return Promise.resolve();isNaN(o.lastSync)&&(0,I.sendExceptionLog)({message:"Persisting localSettings with a NaN lastSyncTimestamp",code:C.ExceptionCriticality.WARNING});const m=l&&l.teams||{},y=Object.keys(m).reduce(((e,t)=>{const r=l.teams[t],o=r.specialItemGroup?(r.specialItemGroup.items||[]).map((e=>e.itemId)):[];return e.concat(o)}),[]),v={...a,items:a.items.map((e=>!e.content||y.includes(e.itemId)?e:{...e,content:""}))};return Promise.all([Be(e,t),Fe(e,t),e.getInstance().storePersonalSettings(n),e.getInstance().storeSharingData(v),e.getInstance().storeSharingSync(i),e.getInstance().storePersonalFeatures(c),e.getInstance().storeNotificationsStatus(d),p?e.getInstance().storeAuthenticationKeys(p):Promise.resolve(),e.getInstance().storeTeamAdminData(l),(0,x.persistUserAuthenticationData)(e,t),e.getInstance().storeDarkWeb(S),e.getInstance().storeUserABTests(r),e.getInstance().storeDarkWeb(S),e.getInstance().storeAnalyticsIds(g)]).then((()=>{}))},Ve=(e,t)=>{const r=e.getAccountInfo().login,o=(0,H.ukiSelector)(e.getState());return t.contactInfo.getContactInfo({login:r,uki:o}).then((e=>{const{result:t,...r}=e;return r}))}},55015:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wipeOutLocalAccounts=t.deviceRemoteDeletion=void 0;const o=r(54516),n=r(56816),a=r(88478),i=r(22029),s=r(15876),c=r(59125);async function d(e,t){const r=t.map((t=>(0,n.deleteAllLocalUserData)(e,t))).concat((0,o.deleteUsersPublicSettings)(t));await Promise.all(r)}t.deviceRemoteDeletion=async function(e,t){let r=[];try{const o=await(0,i.getLocalAccounts)(e,t);if(0===o.length)return;const n=o.map((({login:e})=>e));r=await async function(e,t){const r=t.map((t=>({deviceAccessKey:(0,a.getDeviceAccessKeySelector)(e.getState(),t),login:t}))),o=await(0,s.getUnauthorizedProfiles)(e,{profiles:r});if((0,s.isApiError)(o))return[];return o.unauthorizedProfiles.map((e=>e.login))}(e,n),await d(t,r)}catch(e){const t=new Error(`[UserManagement]: deviceRemoteDeletion - ${e}`);(0,c.sendExceptionLog)({error:t})}},t.wipeOutLocalAccounts=d},48157:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isInternalTestUser=void 0,t.isInternalTestUser=function(e){const t=e.trim();return t.startsWith("{9a9b9c9d-")||t.startsWith("kw_test_")&&(t.endsWith("@mailinator.com")||t.endsWith("@yopmail.com"))}},14491:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(30836),n=r(8915),a=r(47025);t.config={commands:{dismissUserMessages:{handler:a.dismissUserMessagesHandler}},queries:{getVisibleUserMessages:{selector:o.getVisibleUserMessagesSelector}},liveQueries:{liveVisibleUserMessages:{operator:n.liveVisibleUserMessages$}}}},77641:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserMessageTypes=void 0;var o=r(82787);Object.defineProperty(t,"UserMessageTypes",{enumerable:!0,get:function(){return o.UserMessageTypes}})},1574:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userMessagesDismissed=t.userMessageAdded=t.USER_MESSAGES_DISMISSED=t.USER_MESSAGE_ADDED=void 0,t.USER_MESSAGE_ADDED="USER_MESSAGE_ADDED",t.USER_MESSAGES_DISMISSED="USER_MESSAGES_DISMISSED";t.userMessageAdded=e=>({type:t.USER_MESSAGE_ADDED,userMessage:e});t.userMessagesDismissed=e=>({type:t.USER_MESSAGES_DISMISSED,predicate:e})},30836:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getVisibleUserMessagesSelector=t.getUserMessagesByTypeSelector=t.getUserMessagesSelector=void 0;const o=r(32034);t.getUserMessagesSelector=e=>e.userSession.localSettings.userMessages;t.getUserMessagesByTypeSelector=(e,t)=>e.userSession.localSettings.userMessages.filter((e=>e.type===t));t.getVisibleUserMessagesSelector=(0,o.createSelector)(t.getUserMessagesSelector,(e=>e.filter((({dismissedAt:e})=>!e))))},8978:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(14491);t.bootstrap=e=>{e.register(o.config)}},47025:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dismissUserMessagesHandler=void 0;const o=r(1574);t.dismissUserMessagesHandler=(e,t)=>(e.storeService.dispatch((0,o.userMessagesDismissed)(t)),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},44428:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTrialExpiredUserMessage=t.isTrialExpired=void 0;const o=r(97211),n=r(82787);t.isTrialExpired=function({premiumStatus:e,currentDate:t=Date.now()}){var r;switch(null==e?void 0:e.statusCode){case o.PremiumStatusCode.PREMIUM:case o.PremiumStatusCode.OLD_ACCOUNT:case o.PremiumStatusCode.NEW_USER:case o.PremiumStatusCode.GRACE_PERIOD:return!1;case o.PremiumStatusCode.PREMIUM_CANCELLED:{const o=1e3*(null!==(r=e.endDate)&&void 0!==r?r:0);return!!o&&o-t<0}case o.PremiumStatusCode.NO_PREMIUM:default:return!0}},t.createTrialExpiredUserMessage=function(){return{type:n.UserMessageTypes.TRIAL_EXPIRED}}},71838:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(8978);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},8915:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.liveVisibleUserMessages$=void 0;const o=r(18948),n=r(3343),a=r(30836);t.liveVisibleUserMessages$=()=>(0,o.pipe)((0,n.map)(a.getVisibleUserMessagesSelector),(0,n.distinctUntilChanged)())},82787:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserMessageTypes=void 0,function(e){e.DEFAULT="default",e.TRIAL_EXPIRED="trial_expired"}(t.UserMessageTypes||(t.UserMessageTypes={}))},55296:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserActivityCreateParams=void 0;const o=r(68959),n=e=>Math.floor(e/1e3);t.getUserActivityCreateParams=({credentials:e,credentialsHealth:t,lastSentAt:r,triggerTime:a,login:i,similarPasswords:s,spaces:c,uki:d})=>{const l=(0,o.getTeamsContent)(c,e,t,s);return{content:"",login:i,relativeEnd:n(a),relativeStart:n(r||a),teamsContent:JSON.stringify(l),uki:d}}},93030:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userActivityLastSentAtSelector=t.userActivitySelector=void 0;t.userActivitySelector=e=>e.userSession.userActivity;t.userActivityLastSentAtSelector=e=>(0,t.userActivitySelector)(e).lastSentAt},69917:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendUserActivityLog=void 0;const o=r(39958),n=r(93030),a=r(85492),i=r(55296),s=r(54670),c=r(36519),d=r(8153),l=r(88478),u=r(59125),p=r(31891),S=r(5087),g=async(e,t,r)=>{const a=(0,o.userActivityLastSentAtUpdated)(r);e.dispatch(a),await(async(e,t)=>{const r=(0,n.userActivitySelector)(e.getState());await t.getInstance().storeUserActivity(r)})(e,t)};t.sendUserActivityLog=async(e,t)=>{const{localStorageService:r,storeService:o}=e,m=o.getState();await g(o,r,t);try{const e=(0,l.ukiSelector)(m);if(!e)throw new Error("[UserActivity] - trigger: uki is empty, cant send log.");const r=(0,s.activeSpacesSelector)(m);if(0===r.length)return;const o=(0,c.credentialsSelector)(m),u=(0,n.userActivityLastSentAtSelector)(m),p=(0,d.userIdSelector)(m),g=(0,S.credentialsHealthSelector)(m),y=(0,S.similarPasswordsSelector)(m),v=(0,i.getUserActivityCreateParams)({credentials:o,credentialsHealth:g,lastSentAt:u,login:p,similarPasswords:y,spaces:r,triggerTime:t,uki:e});(0,a.create)(v)}catch(e){const t=(0,n.userActivityLastSentAtSelector)(m);g(o,r,t);const a=`[UserActivity] - trigger: ${e}`;p.Debugger.error(a);const i=new Error(a);(0,u.sendExceptionLog)({error:i})}}},36391:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(69917),n=r(93030),a=r(26074);t.setupSubscriptions=async function(e,t){e.syncSuccess.on((()=>(0,a.triggerLog)("UserActivity",o.sendUserActivityLog,n.userActivityLastSentAtSelector,t))),e.syncFailure.on((()=>(0,a.triggerLog)("UserActivity",o.sendUserActivityLog,n.userActivityLastSentAtSelector,t)))}},68959:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamsContent=t.getTeamContent=void 0;const o=r(41789);t.getTeamContent=(e,t,r,n)=>(0,o.createUserReportContent)(e,t,r,n);t.getTeamsContent=(e,r,o,n)=>e.reduce(((a,i)=>{const{teamId:s}=i,c=r.filter((e=>e.SpaceId===s));return{...a,[s]:(0,t.getTeamContent)(c,o,n,e)}}),{})},82427:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createVaultReportContent=void 0;const o=r(59403),n=r(41789);t.createVaultReportContent=e=>{const{credentials:t,publicBreaches:r,privateBreaches:a,credentialsHealth:i,similarPasswords:s,breachedPasswords:c,requireMasterPassword:d,eligiblePasswordsForPasswordChanger:l,scope:u}=e,p=(0,n.createUserReportContent)(t,i,s,[]),S=(0,o.getCountOfCredentialsCompromisedByBreaches)(a,c),g=(0,o.getActiveBreachesCount)(a,c),m=(0,o.getActiveBreachesCount)(r,c),y=t.filter((e=>e.OtpSecret)).length,v=d?p.nbrPasswords:t.filter((e=>e.AutoProtected)).length,A=t.filter((e=>!e.AutoLogin)).length;return{...p,activePrivateBreachAlerts:g,privateBreachAlerts:a.length,publicBreachAlerts:r.length,activePublicBreachAlerts:m,passwordsCompromisedThroughPrivateBreaches:S,passwordsWithOtp:y,protectedPasswords:v,passwordsCompatibleWithPasswordChanger:l.length,domainsWithoutAutofill:A,scope:u}}},34461:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createVaultReport=void 0;const o=r(5087),n=r(36519),a=r(63453),i=r(82427),s=r(8153),c=r(32713),d=r(19935),l=r(35534);t.createVaultReport=async(e,t)=>{var r;const u=(0,n.credentialsSelector)(t),p=(0,l.filterCredentialsForScope)(u,d.Scope.Personal),S=(0,l.filterCredentialsForScope)(u,d.Scope.Team),g=(0,o.credentialsHealthSelector)(t),m=(0,o.similarPasswordsSelector)(t),y=(0,o.breachedPasswordsSelector)(t),v=(0,a.publicBreachesSelector)(t),A=(0,a.privateBreachesSelector)(t),E=(0,s.protectPasswordsSettingSelector)(t),f=(null===(r=(0,s.premiumStatusSelector)(t).capabilities)||void 0===r?void 0:r.passwordChanger.enabled)?await(async(e,t)=>{const r=await(0,c.filterSupportedCredentials)(e,{credentialIds:t});return r.success?r.supportedCredentialIds:[]})(e):[],h=(0,i.createVaultReportContent)({credentials:u,credentialsHealth:g,similarPasswords:m,breachedPasswords:y,publicBreaches:v,privateBreaches:A,requireMasterPassword:E,eligiblePasswordsForPasswordChanger:f,scope:d.Scope.Global}),_=(0,i.createVaultReportContent)({credentials:p,credentialsHealth:(0,l.filterRecordsForScope)(p,g,d.Scope.Personal),similarPasswords:(0,l.filterRecordsForScope)(p,m,d.Scope.Personal),breachedPasswords:(0,l.filterRecordsForScope)(p,y,d.Scope.Personal),publicBreaches:v,privateBreaches:A,requireMasterPassword:E,eligiblePasswordsForPasswordChanger:f.filter((0,l.includesCredential)(p)),scope:d.Scope.Personal}),T=(0,i.createVaultReportContent)({credentials:S,credentialsHealth:(0,l.filterRecordsForScope)(S,g,d.Scope.Team),similarPasswords:(0,l.filterRecordsForScope)(S,m,d.Scope.Team),breachedPasswords:(0,l.filterRecordsForScope)(S,y,d.Scope.Team),publicBreaches:v,privateBreaches:A,requireMasterPassword:E,eligiblePasswordsForPasswordChanger:f.filter((0,l.includesCredential)(S)),scope:d.Scope.Team});return{[d.Scope.Global]:h,[d.Scope.Personal]:_,[d.Scope.Team]:T}}},35534:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.filterRecordsForScope=t.filterCredentialsForScope=t.includesCredential=void 0;const o=r(19935),n=e=>!!e.SpaceId&&""!==e.SpaceId,a=e=>!e.SpaceId||""===e.SpaceId;t.includesCredential=e=>t=>1===e.filter((e=>t===e.Id)).length;t.filterCredentialsForScope=(e,t)=>t===o.Scope.Global?e:t===o.Scope.Personal?e.filter(a):e.filter(n);t.filterRecordsForScope=(e,t,r)=>r===o.Scope.Global?t:((e,t,r)=>{const o={};return Object.keys(t).filter((n=>{const a=e.filter((e=>e.Id===n));1===a.length&&r(a[0])&&(o[n]=t[n])})),o})(e,t,r===o.Scope.Personal?a:n)},22027:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vaultReportLastSentAtSelector=t.vaultReportSelector=void 0;t.vaultReportSelector=e=>e.userSession.vaultReport;t.vaultReportLastSentAtSelector=e=>(0,t.vaultReportSelector)(e).lastSentAt},70265:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendVaultReportLog=void 0;const o=r(19935),n=r(84717);t.sendVaultReportLog=async(e,t)=>{await(0,n.logEvent)(e,{event:new o.UserVaultReportEvent({darkWebAlertsActiveCount:t.activePrivateBreachAlerts,darkWebAlertsCount:t.privateBreachAlerts,domainsWithoutAutofillCount:t.domainsWithoutAutofill,passwordChangerCompatibleCredentialsCount:t.passwordsCompatibleWithPasswordChanger,passwordsCompromisedCount:t.compromisedPasswords,passwordsCompromisedThroughDarkWebCount:t.passwordsCompromisedThroughPrivateBreaches,passwordsExcludedCount:t.checkedPasswords,passwordsProtectedWithMasterPasswordCount:t.protectedPasswords,passwordsReusedCount:t.reused,passwordsSafeCount:t.safePasswords,passwordsTotalCount:t.nbrPasswords,passwordsWeakCount:t.weakPasswords,passwordsWithOtpCount:t.passwordsWithOtp,scope:t.scope,securityAlertsActiveCount:t.activePublicBreachAlerts,securityAlertsCount:t.publicBreachAlerts,securityScore:t.securityIndex})})}},79667:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendVaultReport=void 0;const o=r(4140),n=r(22027),a=r(59125),i=r(31891),s=r(19935),c=r(34461),d=r(70265),l=async(e,t,r)=>{const a=(0,o.vaultReportLastSentAtUpdated)(r);e.dispatch(a),await(async(e,t)=>{const r=(0,n.vaultReportSelector)(e.getState());await t.getInstance().storeVaultReport(r)})(e,t)};t.sendVaultReport=async(e,t)=>{const{localStorageService:r,storeService:o}=e,u=o.getState(),p=(0,n.vaultReportLastSentAtSelector)(u);try{await l(o,r,t);const n=await(0,c.createVaultReport)(e,u);(0,d.sendVaultReportLog)(e,n[s.Scope.Global]),(0,d.sendVaultReportLog)(e,n[s.Scope.Personal]),(0,d.sendVaultReportLog)(e,n[s.Scope.Team])}catch(e){l(o,r,p);const t=`[VaultReport] - trigger: ${e}`;i.Debugger.error(t);const n=new Error(t);(0,a.sendExceptionLog)({error:n})}}},41639:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(26074),n=r(79667),a=r(22027);t.setupSubscriptions=async function(e,t){e.syncSuccess.on((()=>(0,o.triggerLog)("VaultReport",n.sendVaultReport,a.vaultReportLastSentAtSelector,t))),e.syncFailure.on((()=>(0,o.triggerLog)("VaultReport",n.sendVaultReport,a.vaultReportLastSentAtSelector,t)))}},41789:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createUserReportContent=void 0;const o=r(80336),n=r(59403),a=r(88763),i=r(40969),s=r(96857),c=r(43650);t.createUserReportContent=(e,t,r,d)=>{const l=e.length,u=(0,o.getCheckedCredentials)(e).length,p=(0,n.getCompromisedCredentials)(e,t,d).length,S=(0,a.getReusedCredentials)(e,r,d).length,g=(0,i.getSafeCredentials)(e,t,r,d).length,m=(0,c.getWeakCredentials)(e,t,d).length;return{checkedPasswords:u,compromisedPasswords:p,nbrPasswords:l,reused:S,safePasswords:g,securityIndex:(0,s.getSecurityScore)(e,t,r,d),weakPasswords:m}}},26074:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerLog=t.shouldTriggerLog=void 0;const o=r(59125),n=r(1619),a=r(78330),i=r(8962),s=r(31891),c=r(26530);t.shouldTriggerLog=(e,t,r)=>{const o=r(t);return!o||e-o>=864e5};t.triggerLog=async(e,r,d,l)=>{const{localStorageService:u,storeService:p}=l,S=Date.now(),g=p.getState(),m=(0,t.shouldTriggerLog)(S,g,d);await(async(e,t,r,d)=>{const l=(0,i.getInstance)(),u=d.getInstance();let p=null;try{p=l.lockTopic("healthUpdates");const e=await u.getHealthWasComputed();if(t||!e){const e=(0,a.getInstance)();await e.removeAll("healthUpdates");const t=r.getState(),o=await(0,c.computeAllHealthState)(t),i=(0,n.healthStateUpdated)(o);r.dispatch(i),await u.storeHealth(o),await u.storeHealthWasComputed(!0)}}catch(t){const r=`[${e}] - trigger: recompute health failed with ${t}`;s.Debugger.error(r);const n=new Error(r);(0,o.sendExceptionLog)({error:n})}finally{p&&l.releaseTopic("healthUpdates",p)}})(e,m,p,u),m&&await r(l,S)}},15463:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createUserSettingsLogContent=void 0;const o=r(88478),n=r(8153);t.createUserSettingsLogContent=e=>({hasAuthenticationWithWebauthn:(0,o.webAuthnAuthenticationOptedInSelector)(e),hasCredentialsProtectWithMasterPassword:(0,n.personalSettingsSelector)(e).SecuredDataShowPassword})},34032:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendUserSettingsLog=void 0;const o=r(19935),n=r(84717),a=r(15463);t.sendUserSettingsLog=async e=>{const t=(0,a.createUserSettingsLogContent)(e.storeService.getState());await(0,n.logEvent)(e,{event:new o.UserUserSettingsEvent({hasAuthenticationWithWebauthn:t.hasAuthenticationWithWebauthn,hasCredentialsProtectWithMasterPassword:t.hasCredentialsProtectWithMasterPassword})})}},54564:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupUserSettingsLogSubscriptions=void 0;const o=r(34032);t.setupUserSettingsLogSubscriptions=async function(e,t){e.sessionOpened.on((()=>{(0,o.sendUserSettingsLog)(t)}))}},75202:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.asyncMap=void 0;t.asyncMap=(e,t)=>Promise.all(e.map((e=>t(e))))},89054:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.canonizeText=void 0,t.canonizeText=function(e){if(!e)return"";let t=e.trim();return t.normalize&&(t=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),t=t.toLowerCase().replace(/[\+_\\\/\?\.\-_{}\[\]\(\)\*&!@#\$~`%\^=\|:,;"'<>]/g," "),t.replace(/\s+/g," ")}},57254:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateItemUuid=void 0;const o=r(28354);t.generateItemUuid=function(){return`{${(0,o.v4)().toUpperCase()}}`}},1997:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return Math.ceil(2e9*Math.random())}},36109:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUnixTimestamp=void 0,t.getUnixTimestamp=function(){return Math.round(Date.now()/1e3)}},43728:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkOrigin=t.removeNonDigitCharacters=t.looksLikeUuid=t.normalizeEmail=t.looksLikeEmail=t.isValidLogin=t.postDataToUrl=t.getClientAgentHeader=void 0;const o=r(66319),n=r(28060),a=r(62550),i=r(38215),s=e=>o.stringify(n.map((e=>Array.isArray(e)?JSON.stringify(e):e),e));function c(e){return`version:${e.appVersion},platform:${e.platformName}}`}t.getClientAgentHeader=c,t.postDataToUrl=async function(e,t,r){var o;const n={headers:{"Client-Agent":c((0,i.getPlatformInfo)()),"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[s],responseType:null!==(o=null==r?void 0:r.responseType)&&void 0!==o?o:"json"};return(0,a.post)(e,t,n)};t.isValidLogin=e=>l(e)||p(e);const d=/^[^\s@]+@([^\s@])+\.([^\s@])+$/i;function l(e){return d.test(e)}t.looksLikeEmail=l;const u=/[<>]/g;t.normalizeEmail=function(e){return e?e.trim().toLowerCase().replace(u,""):""};function p(e){return new RegExp("^{?[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}}?$").test(e)}t.looksLikeUuid=p,t.removeNonDigitCharacters=function(e){return"string"==typeof e?e.replace(/\D/g,""):""};t.checkOrigin=e=>{const t=(r=e)?null===(o=null==r?void 0:r.location)||void 0===o?void 0:o.origin:void 0;var r,o,n;return!t||!t.endsWith((n="LmRhc2hsYW5lLmNvbQ==",atob(n)))}},69748:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=Function.prototype.toString,o=r.call(Object),n=Object.prototype,a=n.hasOwnProperty,i=n.toString,s="undefined"!=typeof Symbol?Symbol.toStringTag:void 0;t.default=function(e){if(!(e=>"object"==typeof e&&null!==e)(e)||"[object Object]"!==function(e){if(null===e)return void 0===e?"[object Undefined]":"[object Null]";if(!s||!(s in Object(e)))return i.call(e);const t=a.call(e,s),r=e[s];let o=!1;try{e[s]=void 0,o=!0}catch(e){}const n=i.call(e);return o&&(t?e[s]=r:delete e[s]),n}(e))return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;const n=a.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&r.call(n)===o}},78312:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.measure=t.clear=t.mark=void 0;const o=r(31891),n="undefined"!=typeof performance&&"function"==typeof performance.mark&&"function"==typeof performance.measure&&"function"==typeof performance.getEntries&&"function"==typeof performance.getEntriesByName&&"function"==typeof performance.getEntriesByType&&"function"==typeof performance.clearMarks&&"function"==typeof performance.clearMeasures,a=e=>`${e}:mark`,i=e=>t=>{try{e(t)}catch(t){(0,o.logError)({message:"Error in perf instrumentation utility",tag:"Perf",details:{serviceName:e.name,error:t}})}};function s(e){n&&performance.mark(a(e))}function c(e){n&&performance.clearMarks(a(e))}function d(e){if(!n)return;const t=a(e),r=(e=>`${e}:measure`)(e);performance.measure(r,t);const o=performance.getEntriesByName(r,"measure");return performance.clearMarks(t),performance.clearMeasures(r),0!==o.length?o[0].duration:void 0}t.default=function(e){const t=i(s),r=i(d),o=i(c);return{mark:()=>t(e),measure:()=>r(e),clear:()=>o(e)}},t.mark=s,t.clear=c,t.measure=d},90517:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vpnApiConfig=void 0;const o=r(51073),n=r(86641),a=r(8920),i=r(22060),s=r(57911);t.vpnApiConfig={commands:{activateVpnAccount:{handler:o.activateVpnAccountHandler},clearVpnAccountErrors:{handler:n.clearVpnAccountErrorsHandler},completeVpnAccountActivation:{handler:a.completeVpnAccountActivationHandler}},queries:{getVpnAccount:{selector:s.vpnAccountStatusSelector},getVpnCapabilitySetting:{selector:s.vpnCapabilitySettingSelector}},liveQueries:{liveVpnAccount:{operator:i.vpnAccountStatus$}}}},34657:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VpnDisabledReason=t.VpnAccountActivationErrorType=t.VpnAccountStatusType=void 0,function(e){e.Activated="Activated",e.Activating="Activating",e.Error="Error",e.NotFound="NotFound",e.Ready="Ready"}(t.VpnAccountStatusType||(t.VpnAccountStatusType={})),function(e){e.ServerError="ServerError",e.AccountAlreadyExistError="AccountAlreadyExist"}(t.VpnAccountActivationErrorType||(t.VpnAccountActivationErrorType={})),function(e){e.InTeam="InTeam",e.NotPremium="NotPremium",e.NoPayment="NoPayment",e.Other="Other"}(t.VpnDisabledReason||(t.VpnDisabledReason={}))},90136:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.openDashlaneVpnAPI=void 0;const o=r(15876),n=r(50235);t.openDashlaneVpnAPI=e=>({generateCredential:async(t,r)=>{const a=await(0,o.generateCredential)(e,t,{email:r});return(0,o.isApiError)(a)?{success:!1,error:a.code===o.GetVpnCredentialBusinessErrors.USER_ALREADY_HAS_AN_ACCOUNT_FOR_PROVIDER?n.VpnErrorType.AccountAlreadyExistError:n.VpnErrorType.ServerError}:{success:!0,password:a.password}}})},50235:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VpnErrorType=void 0,function(e){e.AccountAlreadyExistError="AccountAlreadyExist",e.ServerError="ServerError"}(t.VpnErrorType||(t.VpnErrorType={}))},63110:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeVpnLogger=void 0;const o=r(19935),n=r(84717),a=r(50235),i={[a.VpnErrorType.AccountAlreadyExistError]:o.ActivateVpnError.EmailAlreadyInUse,[a.VpnErrorType.ServerError]:o.ActivateVpnError.ServerError};t.makeVpnLogger=e=>({logComplete:async()=>{await(0,n.logEvent)(e,{event:new o.UserActivateVpnEvent({flowStep:o.FlowStep.Complete})})},logError:async t=>{await(0,n.logEvent)(e,{event:new o.UserActivateVpnEvent({flowStep:o.FlowStep.Error,errorName:i[t]})})},logStart:async()=>{await(0,n.logEvent)(e,{event:new o.UserActivateVpnEvent({flowStep:o.FlowStep.Start})})}})},88356:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vpnAccountNotFoundAction=t.vpnAccountActivationCompleteAction=t.vpnAccountGenerationErrorAction=t.vpnAccountGenerationDoneAction=t.vpnAccountActivatingAction=t.VPN_ACCOUNT_NOT_FOUND=t.VPN_ACCOUNT_GENERATION_ERROR=t.VPN_ACCOUNT_ACTIVATION_COMPLETE=t.VPN_ACCOUNT_GENERATION_DONE=t.VPN_ACCOUNT_ACTIVATING=void 0,t.VPN_ACCOUNT_ACTIVATING="VPN_ACCOUNT_ACTIVATING",t.VPN_ACCOUNT_GENERATION_DONE="VPN_ACCOUNT_GENERATION_DONE",t.VPN_ACCOUNT_ACTIVATION_COMPLETE="VPN_ACCOUNT_ACTIVATION_COMPLETE",t.VPN_ACCOUNT_GENERATION_ERROR="VPN_ACCOUNT_GENERATION_ERROR",t.VPN_ACCOUNT_NOT_FOUND="VPN_ACCOUNT_NOT_FOUND";t.vpnAccountActivatingAction=()=>({type:t.VPN_ACCOUNT_ACTIVATING});t.vpnAccountGenerationDoneAction=()=>({type:t.VPN_ACCOUNT_GENERATION_DONE});t.vpnAccountGenerationErrorAction=e=>({type:t.VPN_ACCOUNT_GENERATION_ERROR,error:e});t.vpnAccountActivationCompleteAction=()=>({type:t.VPN_ACCOUNT_ACTIVATION_COMPLETE});t.vpnAccountNotFoundAction=()=>({type:t.VPN_ACCOUNT_NOT_FOUND})},22384:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vpnApiBootstrap=void 0;const o=r(90517);t.vpnApiBootstrap=e=>{e.register(o.vpnApiConfig)}},94279:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VPN_CREDENTIAL_NAME=t.VPN_CREDENTIAL_URL=t.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN=t.VPN_HOTSPOTSHIELD_DOMAIN=void 0,t.VPN_HOTSPOTSHIELD_DOMAIN="hotspotshield.com",t.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN="dashlane",t.VPN_CREDENTIAL_URL=`https://${t.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN}.${t.VPN_HOTSPOTSHIELD_DOMAIN}`,t.VPN_CREDENTIAL_NAME="VPN Hotspot Shield"},51073:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.activateVpnAccountHandler=void 0;const o=r(63110),n=r(90136),a=r(37370);t.activateVpnAccountHandler=async(e,t)=>{const r=(0,a.CreateVpnService)({generator:(0,n.openDashlaneVpnAPI)(e.storeService),logger:(0,o.makeVpnLogger)(e)},e);await r.generateCredential(t.email)}},86641:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearVpnAccountErrorsHandler=void 0;const o=r(88356);t.clearVpnAccountErrorsHandler=e=>(e.storeService.dispatch((0,o.vpnAccountNotFoundAction)()),Promise.resolve())},8920:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeVpnAccountActivationHandler=void 0;const o=r(88356);t.completeVpnAccountActivationHandler=e=>(e.storeService.dispatch((0,o.vpnAccountActivationCompleteAction)()),Promise.resolve())},54505:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vpnCredentialMatcher=void 0;const o=r(17509),n=r(94279);t.vpnCredentialMatcher=e=>{const t=(0,o.getParsedUrl)(e.Url);return e.Password&&e.Email&&t&&t.rootDomain===n.VPN_HOTSPOTSHIELD_DOMAIN&&t.subDomainName===n.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN}},22060:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vpnAccountStatus$=void 0;const o=r(18948),n=r(3343),a=r(57911);t.vpnAccountStatus$=function(){const e=a.vpnAccountStatusSelector;return(0,o.pipe)((0,n.map)(e),(0,n.distinctUntilChanged)())}},10327:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VPNReducers=void 0;const o=r(88356),n=r(34657);t.VPNReducers=(e,t)=>{switch(t.type){case o.VPN_ACCOUNT_ACTIVATING:return{accountStatus:{status:n.VpnAccountStatusType.Activating}};case o.VPN_ACCOUNT_GENERATION_DONE:return{accountStatus:{status:n.VpnAccountStatusType.Ready}};case o.VPN_ACCOUNT_GENERATION_ERROR:return{accountStatus:{status:n.VpnAccountStatusType.Error,error:t.error}};case o.VPN_ACCOUNT_ACTIVATION_COMPLETE:return{accountStatus:{status:n.VpnAccountStatusType.Activated}};case o.VPN_ACCOUNT_NOT_FOUND:return{accountStatus:{status:n.VpnAccountStatusType.NotFound}};default:return null!=e?e:{accountStatus:{status:n.VpnAccountStatusType.NotFound}}}}},57911:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vpnCapabilitySettingSelector=t.getVpnCapabilitySetting=t.vpnAccountStatusSelector=t.vpnCredentialSelector=void 0;const o=r(36519),n=r(32034),a=r(8153),i=r(34657),s=r(54505),c=(e,t)=>{var r,o;return(null!==(r=t.CreationDatetime)&&void 0!==r?r:0)-(null!==(o=e.CreationDatetime)&&void 0!==o?o:0)};t.vpnCredentialSelector=e=>{var t;return null!==(t=(0,o.credentialsSelector)(e).filter(s.vpnCredentialMatcher).sort(c)[0])&&void 0!==t?t:null};var d;t.vpnAccountStatusSelector=(0,n.createSelector)((e=>{const{vpnData:t}=e.userSession;return t||{accountStatus:{status:i.VpnAccountStatusType.NotFound}}}),t.vpnCredentialSelector,((e,t)=>{switch(e.accountStatus.status){case i.VpnAccountStatusType.Error:return{status:i.VpnAccountStatusType.Error,error:e.accountStatus.error};case i.VpnAccountStatusType.Activating:return{status:i.VpnAccountStatusType.Activating};case i.VpnAccountStatusType.Activated:case i.VpnAccountStatusType.NotFound:return t?{status:i.VpnAccountStatusType.Activated,email:t.Email,password:t.Password,credentialId:t.Id}:{status:i.VpnAccountStatusType.NotFound};case i.VpnAccountStatusType.Ready:return t?{status:i.VpnAccountStatusType.Ready,email:t.Email,password:t.Password,credentialId:t.Id}:{status:i.VpnAccountStatusType.NotFound}}})),function(e){e.IN_TEAM="in_team",e.NOT_PREMIUM="not_premium",e.NO_PAYMENT="no_payment"}(d||(d={}));const l={in_team:i.VpnDisabledReason.InTeam,not_premium:i.VpnDisabledReason.NotPremium,no_payment:i.VpnDisabledReason.NoPayment};t.getVpnCapabilitySetting=e=>{var t;const r=null===(t=null==e?void 0:e.capabilities)||void 0===t?void 0:t.secureWiFi;if(r.enabled)return{hasVpnEnabled:!0};return{hasVpnEnabled:!1,vpnDisabledReason:l[r.info.reason]||i.VpnDisabledReason.Other}},t.vpnCapabilitySettingSelector=(0,n.createSelector)(a.premiumStatusSelector,t.getVpnCapabilitySetting)},37370:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateVpnService=void 0;const o=r(23515),n=r(45082),a=r(71754),i=r(97747),s=r(73144),c=r(31891),d=r(59125),l=r(8153),u=r(88356),p=r(94279),S=r(50235),g=r(57911),m=({update:{title:e}})=>({Title:e}),y=({title:e})=>({Title:e});t.CreateVpnService=(e,t)=>{const r=async r=>{t.storeService.dispatch((0,u.vpnAccountGenerationErrorAction)(r===S.VpnErrorType.AccountAlreadyExistError?n.VpnAccountActivationErrorType.AccountAlreadyExistError:n.VpnAccountActivationErrorType.ServerError)),await e.logger.logError(null!=r?r:S.VpnErrorType.ServerError)};return{generateCredential:async n=>{var S;await e.logger.logStart(),t.storeService.dispatch((0,u.vpnAccountActivatingAction)());try{const s=(0,o.contactInfoSelector)(t.storeService.getState()),c=(0,l.userLoginSelector)(t.storeService.getState()),d=null!==(S=null!=n?n:s.email)&&void 0!==S?S:c,v=await e.generator.generateCredential(c,d);switch(v.success){case!0:await(async(e,r,o)=>{const n=(0,g.vpnCredentialSelector)(t.storeService.getState()),s={email:e,password:r,url:p.VPN_CREDENTIAL_URL,login:o,title:p.VPN_CREDENTIAL_NAME};if(n){const e={id:n.Id,update:{...s}};await(0,i.updateCredential)({storeService:t.storeService,sessionService:t.sessionService,eventLoggerService:t.eventLoggerService},e,m)}else await(0,a.createCredential)({storeService:t.storeService,sessionService:t.sessionService,eventLoggerService:t.eventLoggerService},s,y)})(d,v.password,c),t.storeService.dispatch((0,u.vpnAccountGenerationDoneAction)()),await e.logger.logComplete();break;case!1:r(v.error)}}catch(e){r();const t="VPN",o=s.CarbonError.fromAnyError(e).addContextInfo(t,"saveCredential");(0,c.logError)({tag:[t],message:`${o}`,details:{error:e}}),(0,d.sendExceptionLog)({error:o})}}}}},2420:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.minAcceptablePasswordStrength=t.maxChunkSize=void 0,t.maxChunkSize=16383,t.minAcceptablePasswordStrength=2},10036:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setConfig=t.config=void 0;const o={LOG_LEVEL:r(77800).Silent,LOG_TAGS:[],DASHLANE_API_HOST_WITH_SCHEME:"https://api.dashlane.com",DASHLANE_WS_HOST_WITH_SCHEME:"https://ws1.dashlane.com",DASHLANE_STYX_HOST_WITH_SCHEME:"https://styx.data.dashlane.com",FETCH_HTTP_REQUESTS:!1};t.config=o;t.setConfig=e=>{t.config={...t.config,...e}}},35859:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createAccount=t.getCreateAccountRequest=t.defaultCreateAccountRequestParams=t.AUTOMATION_MP_GRACE_PERIOD=t.DEFAULT_E2E_ACCOUNT_PASSWORD=void 0;const o=r(57254),n=r(66063),a=r(64034);function i(e,r,o){return{login:e,anonymousUserId:o,password:r,...t.defaultCreateAccountRequestParams}}t.DEFAULT_E2E_ACCOUNT_PASSWORD="Azerty12",t.AUTOMATION_MP_GRACE_PERIOD=5e3,t.defaultCreateAccountRequestParams={format:"US",language:"en",subscribe:!1,deviceName:"INTEGRATION_TEST"},t.getCreateAccountRequest=i,t.createAccount=async function(e,r,s){const c=null!=r?r:{},d={...i((0,n.getLogin)(),t.DEFAULT_E2E_ACCOUNT_PASSWORD,(0,o.generateItemUuid)()),...c},l={createAccountResult:await e.createAccountStep1(d),options:{flowIndicator:"webAccount"},isStandAlone:!0,...null!=s?s:{}},u=await e.createAccountStep2(l);return await(0,a.sync)(e),u}},66063:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLogin=t.defaultTestAccountOptions=void 0;const o=r(28354),n=r(97073);t.defaultTestAccountOptions={abTests:{},automationAccount:!1,featureFlips:[],throttling:n.TestAccountThrottlingBehaviour.Unthrottled,type:n.TestAccountType.FreePremiumTrial},t.getLogin=function(e=t.defaultTestAccountOptions){const{abTests:r=t.defaultTestAccountOptions.abTests,featureFlips:a=t.defaultTestAccountOptions.featureFlips,throttling:i=t.defaultTestAccountOptions.throttling,type:s=t.defaultTestAccountOptions.type,automationAccount:c=t.defaultTestAccountOptions.automationAccount}=e,d=(0,o.v4)(),l=d.substr(0,d.indexOf("-")),u=function(e){switch(e){case n.TestAccountThrottlingBehaviour.Unthrottled:return"ut_";case n.TestAccountThrottlingBehaviour.Normal:default:return""}}(i),p=function(e){switch(e){case n.TestAccountType.Free:return"freefree_";case n.TestAccountType.PremiumPaid:return"premiumpaid_";case n.TestAccountType.Family:return"family_";case n.TestAccountType.FreePremiumTrial:default:return""}}(s),S=!1===(g=r)?"noabtest_":Object.keys(g).reduce(((e,t)=>{const r=`${t}_${g[t]}_`;return e.concat(r)}),"");var g;const m=function(e){return e.reduce(((e,t)=>{const r=`${t}_`;return e.concat(r)}),"")}(a),y=function(e){return e?"auto_":""}(c);return("kw_test_"+y+u+p+"carbon_e2e_"+S+m+l+"@mailinator.com").toLocaleLowerCase()}},97073:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TestAccountThrottlingBehaviour=t.TestAccountType=void 0,function(e){e[e.Free=0]="Free",e[e.FreePremiumTrial=1]="FreePremiumTrial",e[e.Legacy=2]="Legacy",e[e.PremiumPaid=3]="PremiumPaid",e[e.PremiumPlus=4]="PremiumPlus",e[e.Family=5]="Family"}(t.TestAccountType||(t.TestAccountType={})),function(e){e[e.Normal=0]="Normal",e[e.Unthrottled=1]="Unthrottled"}(t.TestAccountThrottlingBehaviour||(t.TestAccountThrottlingBehaviour={}))},79859:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(35859),t),n(r(66063),t),n(r(97073),t)},53916:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSubscriptionTokenForTestUser=void 0;const o=r(15876),n=r(13336);t.getSubscriptionTokenForTestUser=async(e,t)=>{const{storeService:r}=e,a=await(0,n.getSubscriptionTokens)(r);if((0,o.isApiError)(a))throw new Error(`Error: ${a.code}`);const{tokens:i}=a,s=i.find((e=>e.email===t));if(!s)throw new Error("Email token not found for "+t);return s.token}},59712:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e=2e3){return new Promise((t=>setTimeout(t,e)))}},58366:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getServiceProviderToken=void 0;const o=r(44521),n=r(15876),a=r(43392),i=r(1064);t.getServiceProviderToken=async(e,t)=>{const{storeService:r}=e;!function(e,t){e.dispatch((0,o.deviceRegistered)((0,o.makeDeviceRegistrationKeys)(t.deviceAccessKey,t.deviceSecretKey),i.PersistData.PERSIST_DATA_YES,t.login))}(r,t);const{login:s,teamUuid:c}=t,d=`${c}%${t.userServiceProviderKey}`,l=await(0,a.getUserSSOInfo)(r,{login:s,teamUuid:c,userServiceProviderKey:d});if((0,n.isApiError)(l))throw new Error(`Error: ${l.code}`);return l}},98003:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forceBreachRefreshHandler=void 0;const o=r(12642);t.forceBreachRefreshHandler=async({storeService:e,wsService:t})=>{const r=(0,o.getInstance)(e,t);await r.refresh({forceRefresh:!0})}},7835:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createPublicBreachHelper=t.addPrivateBreachHelper=t.createOrUpdateDarkWebBreachHelper=t.saveBankAccount=t.updateCredential=t.removeCredential=t.getNotes=t.getCredentials=t.saveCredential=void 0;const o=r(28354),n=r(97211),a=r(15876),i=r(97985),s=r(57275),c=r(30239),d=r(59712),l=r(79859);async function u(e,t,r={}){const o=function({title:e,email:t,password:r,url:o,...a}){return{kwType:"KWAuthentifiant",origin:n.SaveOrigin.MANUAL,content:{category:"",email:t,login:t,onlyForThisSubdomain:!1,password:r,protectWithMasterPassword:!1,secondaryLogin:"",url:null!=o?o:"",title:e,autoLogin:!1,note:"",spaceId:"",...a}}}({...{title:"title",email:"email@domain.com",password:l.DEFAULT_E2E_ACCOUNT_PASSWORD},...r}),a=null!=t?t:o;await e.savePersonalDataItem(a),await(0,d.default)(100)}t.saveCredential=u,t.getCredentials=async function(e){return(await e.getDataModel(null)).credentials},t.getNotes=async function(e){return(await e.getDataModel(null)).notes},t.removeCredential=async function(e,t){return await e.removePersonalDataItem({id:t})},t.updateCredential=function(e,{Id:t,Title:r,Email:o,Url:n,Password:a},i){return u(e,void 0,{id:t,title:r,email:o,password:a,url:n,...i})},t.saveBankAccount=async function(e,t,r={}){const o={kwType:"KWBankStatement",origin:n.SaveOrigin.MANUAL,content:{name:"name",owner:"owner",IBAN:"",BIC:"",bank:"",...r,...t}},a=null!=t?t:o;await e.savePersonalDataItem(a),await(0,d.default)(100)};t.createOrUpdateDarkWebBreachHelper=async({storeService:e},t)=>{t.databreach.uuid||(t.databreach.uuid=(0,o.v4)());const r=await(0,i.createOrUpdateDarkWebBreach)(e,t);if((0,a.isApiError)(r))throw new Error(`Error when creating / updating test data breach: ${r.message}`);return t.databreach.uuid};t.addPrivateBreachHelper=async({storeService:e},t)=>await(0,s.addPrivateBreach)(e,t);t.createPublicBreachHelper=async({storeService:e},t)=>{const r=await(0,c.createPublicBreach)(e,t);if((0,a.isApiError)(r))throw new Error(`Error when creating test breach: ${r.code}, ${r.message}`);return r}},64034:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sync=t.waitForSync=void 0;const o=r(59712);function n(e,t={timeout:3e4}){let r,o;const n=setTimeout((()=>{o(new Error("Sync timed out"))}),t.timeout),a=new Promise(((e,t)=>{r=e,o=t})),i=e.sessionSyncStatus.on((({status:e})=>{"syncing"!==e&&(clearTimeout(n),i(),"success"===e?r():"error"===e&&o(new Error("Sync failed")))}));return a}t.waitForSync=n,t.sync=async function(e){await e.sessionForceSync({}),await n(e),await(0,o.default)()}},70938:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.HttpErrorCode=t.ApplicationBuildType=t.CarbonStorage=t.apiEvents=t.decipherDatabaseRules=t.interfaces=void 0;const a=r(31891),i=r(32234),s=r(64122);Object.defineProperty(t,"CarbonStorage",{enumerable:!0,get:function(){return s.CarbonLocalStorage}});const c=r(64803),d=r(79639),l=r(33441),u=r(59125),p=r(10112),S=r(75661),g=r(57880);t.interfaces=g;const m=r(55015),y=r(22029),v=r(73420);var A=r(71756);Object.defineProperty(t,"decipherDatabaseRules",{enumerable:!0,get:function(){return A.decipherDatabaseRules}});var E=r(45068);Object.defineProperty(t,"apiEvents",{enumerable:!0,get:function(){return E.apiEvents}}),n(r(72093),t);const f=r(10036),h=r(1269);var _=r(14247);Object.defineProperty(t,"ApplicationBuildType",{enumerable:!0,get:function(){return _.ApplicationBuildType}});var T=r(62550);async function I(e,t){try{const r=t.find((e=>e.isLastSuccessfulLogin));if(!r||r.hasLoginOtp)return;const o=r.login,n=e.storeService.getState().authentication.localUsers;if(void 0!==n[o]&&n[o].ssoActivatedUser)return;if("webauthn"===r.rememberMeType)return void function({storeService:e}){try{document.featurePolicy.features().includes("publickey-credentials-get")&&e.dispatch((0,v.reactivationStatusUpdated)(h.ReactivationStatus.WEBAUTHN))}catch(t){e.dispatch((0,v.reactivationStatusUpdated)(h.ReactivationStatus.CLASSIC))}}(e);const a=await e.autoLoginService.shouldTrigger(o),i=(0,l.makeLoginController)(e);if(!a)return void i.openSession(o);await e.autoLoginService.process(o);const s=e.storeService.getUserSession().masterPassword;if(!s)return;await i.openSessionWithMasterPassword(o,s,{triggeredByRememberMeType:"autologin"})}catch(e){const t=`[index] - restoreLastAuthenticatedUser: ${e}`,r=new Error(t);(0,a.logError)({message:t,details:{error:r}}),(0,u.sendExceptionLog)({error:r})}}Object.defineProperty(t,"HttpErrorCode",{enumerable:!0,get:function(){return T.HttpErrorCode}}),t.init=async function(e){e.config&&(0,f.setConfig)(e.config);const t=await(0,d.initCarbon)(e),r=(0,c.getCoreServices)(t),o=(0,m.deviceRemoteDeletion)(r.storeService,e.storageLayer).then((()=>(0,y.getLocalAccounts)(r.storeService,e.storageLayer))),[,n]=await Promise.all([(0,S.fetchABTestingVersionDetails)(e,r),o,(0,d.fetchCurrentLocation)(r.wsService,r.storeService)]),s=r.storeService.getABTesting();return r.eventLoggerService.initRepository(),(0,p.triggerABTestingChanged)(s),(0,i.sendLocationInfo)(r.storeService.getPlatform().location),await I(r,n),r.storeService.dispatch((0,v.localAccountsListUpdated)(n)),(0,i.sendLocalAccounts)(n),(0,a.logInfo)({message:"init carbon done"}),r}},96828:e=>{e.exports={i8:"112.4.0"}}}]);